(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4931],{3086:function(e,t,a){"use strict";a.d(t,{Z:function(){return n}});var s=a(5531);let n=(0,s.Z)("rotate-cw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]])},2663:function(e,t,a){Promise.resolve().then(a.bind(a,255))},255:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return BatteryThresholdPage}});var s=a(7437),n=a(2265),r=a(1865),l=a(9482),o=a(8110),i=a(2031),d=a(3611),c=a(5831),u=a(4631),f=a(5217),m=a(307),x=a(1392),h=a(3086);let g=l.Ry({AC_INPUT_THRESHOLD:l.Rx(),DC_BATTERY_VOLTAGE:l.Rx(),DC_BATTERY_TOLERANCE:l.Rx(),DC_OUTPUT_THRESHOLD:l.Rx(),DC_OUTPUT_THRESHOLD_NORMAL:l.Rx(),MIN_CURRENT_THRESHOLD:l.Rx()});function BatteryThresholdPage(){let[e,t]=(0,n.useState)(!1),[a,l]=(0,n.useState)({}),{register:p,handleSubmit:N,setValue:T,reset:j,formState:{errors:y}}=(0,r.cI)({resolver:(0,o.F)(g),defaultValues:{AC_INPUT_THRESHOLD:0,DC_BATTERY_VOLTAGE:0,DC_BATTERY_TOLERANCE:0,DC_OUTPUT_THRESHOLD:0,DC_OUTPUT_THRESHOLD_NORMAL:0,MIN_CURRENT_THRESHOLD:0}});return(0,n.useEffect)(()=>{let e=(0,u.k)();e.subscribe("batteryCharger/config/response");let handleMessage=(e,t)=>{if("batteryCharger/config/response"===e){let e=JSON.parse(t.toString());l(e),j(e)}};return e.on("message",handleMessage),e.publish("batteryCharger/config/get",""),()=>{e.off("message",handleMessage),e.unsubscribe("batteryCharger/config/response")}},[j]),(0,s.jsxs)(m.kV,{children:[(0,s.jsxs)("header",{className:"flex h-16 items-center justify-between border-b px-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(m.vP,{className:"-ml-1"}),(0,s.jsx)(f.Z,{orientation:"vertical",className:"h-4"}),(0,s.jsx)(x.Z,{className:"w-5 h-5 text-muted-foreground"}),(0,s.jsx)("h1",{className:"text-lg font-semibold",children:"Battery Threshold Configuration"})]}),(0,s.jsx)("div",{className:"flex items-center gap-2",children:(0,s.jsx)(d.z,{variant:"outline",size:"icon",onClick:()=>{let e=(0,u.k)();e.publish("batteryCharger/config/get","")},children:(0,s.jsx)(h.Z,{className:"w-4 h-4"})})})]}),(0,s.jsxs)("div",{className:"p-6 space-y-4",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold",children:"Battery Threshold Configuration"}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 ",children:Object.entries(g.shape).map(e=>{var t;let[n]=e;return(0,s.jsxs)("div",{className:"flex flex-col bg-muted p-4 rounded-md border text-sm",children:[(0,s.jsx)("span",{className:"text-muted-foreground text-xs",children:n}),(0,s.jsx)("span",{className:"font-medium",children:null!==(t=null==a?void 0:a[n])&&void 0!==t?t:"â€”"})]},n)})}),(0,s.jsxs)(i.Vq,{open:e,onOpenChange:t,children:[(0,s.jsx)(i.hg,{asChild:!0,children:(0,s.jsx)(d.z,{children:"Edit Threshold"})}),(0,s.jsxs)(i.cZ,{children:[(0,s.jsxs)(i.fK,{children:[(0,s.jsx)(i.$N,{children:"Update Battery Threshold"}),(0,s.jsx)(i.Be,{children:"Modify only values you want to update"})]}),(0,s.jsxs)("form",{onSubmit:N(e=>{let a=(0,u.k)();a.publish("batteryCharger/config/update",JSON.stringify(e)),t(!1)}),className:"grid gap-4 py-4",children:[Object.keys(g.shape).map(e=>{var t,a;return(0,s.jsxs)("div",{className:"grid gap-1",children:[(0,s.jsx)("label",{htmlFor:e,className:"text-sm font-medium",children:e}),(0,s.jsx)(c.I,{id:e,type:"number",step:"any",...p(e,{valueAsNumber:!0})}),(null==y?void 0:y[e])&&(0,s.jsx)("span",{className:"text-sm text-red-500",children:null===(a=y[e])||void 0===a?void 0:null===(t=a.message)||void 0===t?void 0:t.toString()})]},e)}),(0,s.jsx)(i.cN,{children:(0,s.jsx)(d.z,{type:"submit",children:"Update"})})]})]})]})]})]})}},2031:function(e,t,a){"use strict";a.d(t,{$N:function(){return m},Be:function(){return x},Vq:function(){return i},cN:function(){return DialogFooter},cZ:function(){return f},fK:function(){return DialogHeader},hg:function(){return d}});var s=a(7437),n=a(2265),r=a(8712),l=a(2549),o=a(1628);let i=r.fC,d=r.xz,c=r.h_;r.x8;let u=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)(r.aV,{ref:t,className:(0,o.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...n})});u.displayName=r.aV.displayName;let f=n.forwardRef((e,t)=>{let{className:a,children:n,...i}=e;return(0,s.jsxs)(c,{children:[(0,s.jsx)(u,{}),(0,s.jsxs)(r.VY,{ref:t,className:(0,o.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...i,children:[n,(0,s.jsxs)(r.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,s.jsx)(l.Z,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});f.displayName=r.VY.displayName;let DialogHeader=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,o.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...a})};DialogHeader.displayName="DialogHeader";let DialogFooter=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,o.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};DialogFooter.displayName="DialogFooter";let m=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)(r.Dx,{ref:t,className:(0,o.cn)("text-lg font-semibold leading-none tracking-tight",a),...n})});m.displayName=r.Dx.displayName;let x=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)(r.dk,{ref:t,className:(0,o.cn)("text-sm text-muted-foreground",a),...n})});x.displayName=r.dk.displayName},4631:function(e,t,a){"use strict";a.d(t,{O:function(){return getMQTTClient},k:function(){return connectMQTT}});var s=a(7406);let n=null;function connectMQTT(){let e="ws://localhost:9000";if(!e)throw Error("MQTT broker URL tidak didefinisikan di .env");return(!n||n.disconnected)&&(n=s.Z.connect(e,{clean:!0,connectTimeout:4e3,reconnectPeriod:1e3})),n}function getMQTTClient(){return n}}},function(e){e.O(0,[2793,9848,5348,277,307,2971,2472,1744],function(){return e(e.s=2663)}),_N_E=e.O()}]);