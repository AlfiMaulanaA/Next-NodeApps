(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1832],{5901:function(e,t,r){Promise.resolve().then(r.bind(r,8966))},8966:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return VoiceControlPage}});var n=r(7437),s=r(2265),a=r(708),o=r(3611),i=r(9598),l=r(5217),d=r(307),c=r(3086),u=r(4043),m=r(4136),f=r(5367),x=r(1424),g=r(1251);function VoiceControlPage(){let[e,t]=(0,s.useState)([]),[r,b]=(0,s.useState)(""),[p,h]=(0,s.useState)(!1),[v,N]=(0,s.useState)("Disconnected"),w=(0,s.useRef)(null);(0,s.useEffect)(()=>{let e=window.location.hostname,r=new g.Client(e,Number(9001),"client-".concat(Math.random()));return r.onConnectionLost=()=>{N("Disconnected")},r.onMessageArrived=e=>{try{let r=JSON.parse(e.payloadString);"voice_control/data"===e.destinationName&&t(r)}catch(e){console.error("MQTT parse error:",e)}},r.connect({onSuccess:()=>{N("Connected"),r.subscribe("voice_control/data")},onFailure:()=>N("Failed to Connect")}),w.current=r,()=>{r.disconnect()}},[]);let handleVoiceCommand=t=>{var r;let n=t.toLowerCase(),s=0;n.includes("nyalakan")?s=1:n.includes("matikan")&&(s=0);let a=n.replace("nyalakan","").replace("matikan","").trim(),o=e.find(e=>e.data.custom_name.toLowerCase()===a);if(!o){x.Am.error("Device not found");return}let i={mac:"MAC_ADDRESS",protocol_type:"Modular",device:"RELAYMINI",function:"write",value:{pin:o.data.pin,data:s},address:o.data.address,device_bus:o.data.bus,Timestamp:new Date().toISOString().slice(0,19).replace("T"," ")};null===(r=w.current)||void 0===r||r.send("modular",JSON.stringify(i)),x.Am.success("Command sent to device")};return(0,n.jsxs)(d.kV,{children:[(0,n.jsxs)("header",{className:"flex h-16 items-center justify-between border-b px-4",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(d.vP,{className:"-ml-1"}),(0,n.jsx)(l.Z,{orientation:"vertical",className:"mr-2 h-4"}),(0,n.jsx)("h1",{className:"text-lg font-semibold",children:"Voice Control"})]}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(a.C,{variant:"outline",className:"capitalize ".concat("Connected"===v?"text-green-600 border-green-600":"Failed to Connect"===v?"text-yellow-600 border-yellow-600":"text-red-600 border-red-600"),children:v}),(0,n.jsx)(o.z,{variant:"outline",size:"icon",className:"h-8 w-8",onClick:()=>{var e;null===(e=w.current)||void 0===e||e.send("command",JSON.stringify({action:"get_voice_control"}))},children:(0,n.jsx)(c.Z,{className:"h-4 w-4"})})]})]}),(0,n.jsxs)("div",{className:"p-4 space-y-4",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[(0,n.jsx)("h2",{className:"text-base font-semibold",children:"Devices"}),(0,n.jsxs)(o.z,{onClick:()=>{let e=window.SpeechRecognition||window.webkitSpeechRecognition;if(!e){x.Am.error("SpeechRecognition is not supported in this browser");return}let t=new e;t.lang="id-ID",t.interimResults=!1,h(!0),t.onresult=e=>{let t=e.results[0][0].transcript;b(t),handleVoiceCommand(t)},t.onerror=e=>{console.error("Speech error:",e),h(!1)},t.onend=()=>{h(!1)},t.start()},children:[(0,n.jsx)(u.Z,{className:"h-4 w-4 mr-1"})," Start Voice Command"]})]}),r&&(0,n.jsxs)("p",{className:"text-sm text-muted-foreground",children:["You said: ",(0,n.jsx)("strong",{children:r})]}),e.length>0?e.map((e,t)=>(0,n.jsxs)(i.Zb,{children:[(0,n.jsxs)(i.Ol,{children:[(0,n.jsx)(i.ll,{className:"text-base",children:e.data.custom_name}),(0,n.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Address: ",e.data.address," â€” Bus: ",e.data.bus]})]}),(0,n.jsxs)(i.aY,{className:"space-y-2",children:[(0,n.jsxs)("div",{className:"text-sm",children:["Pin: ",e.data.pin]}),(0,n.jsxs)("div",{className:"flex gap-2 pt-2",children:[(0,n.jsxs)(o.z,{size:"sm",variant:"outline",children:[(0,n.jsx)(m.Z,{className:"h-4 w-4 mr-1"})," Edit"]}),(0,n.jsxs)(o.z,{size:"sm",variant:"destructive",children:[(0,n.jsx)(f.Z,{className:"h-4 w-4 mr-1"})," Delete"]})]})]})]},e.uuid)):(0,n.jsx)(i.Zb,{children:(0,n.jsx)(i.aY,{className:"p-4 text-center text-muted-foreground",children:"No voice control devices found."})})]})]})}},708:function(e,t,r){"use strict";r.d(t,{C:function(){return Badge}});var n=r(7437);r(2265);var s=r(6061),a=r(1628);let o=(0,s.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",info:"border-transparent bg-blue-500 text-white hover:bg-blue-600",success:"border-transparent bg-green-500 text-white hover:bg-green-600",warning:"border-transparent bg-yellow-400 text-yellow-900 hover:bg-yellow-500",outline:"bg-transparent border-foreground text-foreground",outlineInfo:"bg-transparent border-blue-500 text-blue-600",outlineSuccess:"bg-transparent border-green-500 text-green-600",outlineWarning:"bg-transparent border-yellow-400 text-yellow-700",outlineDestructive:"bg-transparent border-destructive text-destructive",gradientInfo:"border-0 bg-gradient-to-r from-blue-400/50 to-blue-600/50 text-blue-900",gradientSuccess:"border-0 bg-gradient-to-r from-green-400/50 to-green-600/50 text-green-900",gradientWarning:"border-0 bg-gradient-to-r from-yellow-300/50 to-yellow-500/50 text-yellow-900",gradientDestructive:"border-0 bg-gradient-to-r from-red-400/50 to-red-600/50 text-red-900"}},defaultVariants:{variant:"default"}});function Badge(e){let{className:t,variant:r,...s}=e;return(0,n.jsx)("div",{className:(0,a.cn)(o({variant:r}),t),...s})}},9598:function(e,t,r){"use strict";r.d(t,{Ol:function(){return i},SZ:function(){return d},Zb:function(){return o},aY:function(){return c},eW:function(){return u},ll:function(){return l}});var n=r(7437),s=r(2265),a=r(1628);let o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...s})});o.displayName="Card";let i=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",r),...s})});i.displayName="CardHeader";let l=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("text-2xl font-semibold leading-none tracking-tight",r),...s})});l.displayName="CardTitle";let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("text-sm text-muted-foreground",r),...s})});d.displayName="CardDescription";let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("p-6 pt-0",r),...s})});c.displayName="CardContent";let u=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("flex items-center p-6 pt-0",r),...s})});u.displayName="CardFooter"}},function(e){e.O(0,[9848,5348,1424,3779,307,2971,2472,1744],function(){return e(e.s=5901)}),_N_E=e.O()}]);