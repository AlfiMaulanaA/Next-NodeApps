(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3353],{5817:function(e,r,t){"use strict";t.d(r,{Z:function(){return s}});var n=t(5531);let s=(0,n.Z)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]])},9209:function(e,r,t){"use strict";t.d(r,{Z:function(){return s}});var n=t(5531);let s=(0,n.Z)("file-chart-column-increasing",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 18v-2",key:"qcmpov"}],["path",{d:"M12 18v-4",key:"q1q25u"}],["path",{d:"M16 18v-6",key:"15y0np"}]])},3086:function(e,r,t){"use strict";t.d(r,{Z:function(){return s}});var n=t(5531);let s=(0,n.Z)("rotate-cw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]])},8520:function(e,r,t){Promise.resolve().then(t.bind(t,8382))},8382:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return FileLibraryPage}});var n=t(7437),s=t(2265),a=t(7406),o=t(1424),i=t(708),l=t(3611),d=t(9598),c=t(5217),u=t(307),f=t(9209),g=t(3086),m=t(5817),v=t(5831);function FileLibraryPage(){let[e,r]=(0,s.useState)("disconnected"),[t,b]=(0,s.useState)(null),p=(0,s.useRef)(null);(0,s.useEffect)(()=>{let e=a.Z.connect("".concat("ws://localhost:9000"));return e.on("connect",()=>{r("connected"),e.subscribe("response_file_transfer"),e.subscribe("service/response")}),e.on("error",()=>{r("error")}),e.on("close",()=>{r("disconnected")}),e.on("message",(e,r)=>{let t=JSON.parse(r.toString());"response_file_transfer"===e?"success"===t.status&&"upload"===t.action?(o.Am.success("devices.json uploaded successfully."),restartService()):"error"===t.status&&o.Am.error(t.message||"Upload failed"):"service/response"===e&&("success"===t.result?o.Am.success(t.message||"Service restarted successfully."):o.Am.error(t.message||"Service restart failed."))}),p.current=e,()=>{e.end()}},[]);let downloadFile=()=>{var e;o.Am.loading("Downloading devices.json...");let r=JSON.stringify({action:"download",filepath:"../MODBUS_SNMP/JSON/Config/Library/devices.json"});null===(e=p.current)||void 0===e||e.publish("command_download_file",r)},uploadFile=e=>{let r=new FileReader;r.onload=()=>{var e;let t=r.result,n=JSON.stringify({action:"upload",filepath:"../MODBUS_SNMP/JSON/Config/Library/devices.json",content:t});null===(e=p.current)||void 0===e||e.publish("command_upload_file",n),o.Am.loading("Uploading devices.json...")},r.readAsText(e)},restartService=()=>{var e;let r=JSON.stringify({action:"restart",services:["MODBUS_SNMP.service"]});null===(e=p.current)||void 0===e||e.publish("service/command",r),o.Am.loading("Restarting MODBUS_SNMP.service...")};return(0,n.jsxs)(u.kV,{children:[(0,n.jsxs)("header",{className:"flex h-16 items-center justify-between border-b px-4",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(u.vP,{className:"-ml-1"}),(0,n.jsx)(c.Z,{orientation:"vertical",className:"mr-2 h-4"}),(0,n.jsx)(f.Z,{className:"h-5 w-5 text-muted-foreground"}),(0,n.jsx)("h1",{className:"text-lg font-semibold",children:"File Library Management"})]}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(i.C,{variant:"outline",className:"capitalize ".concat("connected"===e?"text-green-600 border-green-600":"error"===e?"text-red-600 border-red-600":"text-yellow-600 border-yellow-600"),children:e}),(0,n.jsx)(l.z,{variant:"outline",size:"icon",className:"h-8 w-8",onClick:()=>{var e;o.Am.info("Refreshing MQTT connection..."),null===(e=p.current)||void 0===e||e.end(!0,()=>{window.location.reload()})},children:(0,n.jsx)(g.Z,{className:"w-4 h-4"})})]})]}),(0,n.jsx)("div",{className:"p-6 space-y-6",children:(0,n.jsxs)(d.Zb,{children:[(0,n.jsx)(d.Ol,{children:(0,n.jsx)(d.ll,{className:"text-base",children:"devices.json File Control"})}),(0,n.jsxs)(d.aY,{className:"grid md:grid-cols-2 gap-4",children:[(0,n.jsxs)(l.z,{onClick:()=>{confirm("Download devices.json file?")&&downloadFile()},className:"w-full",children:[(0,n.jsx)(m.Z,{className:"mr-2 h-4 w-4"})," Download devices.json"]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(v.I,{type:"file",accept:".json",onChange:e=>{var r;let t=null===(r=e.target.files)||void 0===r?void 0:r[0];if(t){if(b(t.name),"devices.json"!==t.name){o.Am.error("Invalid file. Please select devices.json");return}confirm("Upload and replace devices.json file?")&&uploadFile(t)}}}),t&&(0,n.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:["Selected: ",t]})]})]})]})})]})}},708:function(e,r,t){"use strict";t.d(r,{C:function(){return Badge}});var n=t(7437);t(2265);var s=t(6061),a=t(1628);let o=(0,s.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",info:"border-transparent bg-blue-500 text-white hover:bg-blue-600",success:"border-transparent bg-green-500 text-white hover:bg-green-600",warning:"border-transparent bg-yellow-400 text-yellow-900 hover:bg-yellow-500",outline:"bg-transparent border-foreground text-foreground",outlineInfo:"bg-transparent border-blue-500 text-blue-600",outlineSuccess:"bg-transparent border-green-500 text-green-600",outlineWarning:"bg-transparent border-yellow-400 text-yellow-700",outlineDestructive:"bg-transparent border-destructive text-destructive",gradientInfo:"border-0 bg-gradient-to-r from-blue-400/50 to-blue-600/50 text-blue-900",gradientSuccess:"border-0 bg-gradient-to-r from-green-400/50 to-green-600/50 text-green-900",gradientWarning:"border-0 bg-gradient-to-r from-yellow-300/50 to-yellow-500/50 text-yellow-900",gradientDestructive:"border-0 bg-gradient-to-r from-red-400/50 to-red-600/50 text-red-900"}},defaultVariants:{variant:"default"}});function Badge(e){let{className:r,variant:t,...s}=e;return(0,n.jsx)("div",{className:(0,a.cn)(o({variant:t}),r),...s})}},9598:function(e,r,t){"use strict";t.d(r,{Ol:function(){return i},SZ:function(){return d},Zb:function(){return o},aY:function(){return c},eW:function(){return u},ll:function(){return l}});var n=t(7437),s=t(2265),a=t(1628);let o=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,n.jsx)("div",{ref:r,className:(0,a.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...s})});o.displayName="Card";let i=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,n.jsx)("div",{ref:r,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",t),...s})});i.displayName="CardHeader";let l=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,n.jsx)("div",{ref:r,className:(0,a.cn)("text-2xl font-semibold leading-none tracking-tight",t),...s})});l.displayName="CardTitle";let d=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,n.jsx)("div",{ref:r,className:(0,a.cn)("text-sm text-muted-foreground",t),...s})});d.displayName="CardDescription";let c=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,n.jsx)("div",{ref:r,className:(0,a.cn)("p-6 pt-0",t),...s})});c.displayName="CardContent";let u=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,n.jsx)("div",{ref:r,className:(0,a.cn)("flex items-center p-6 pt-0",t),...s})});u.displayName="CardFooter"}},function(e){e.O(0,[2793,9848,5348,1424,307,2971,2472,1744],function(){return e(e.s=8520)}),_N_E=e.O()}]);