(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9366],{4280:function(e,r,t){"use strict";t.d(r,{Z:function(){return a}});var n=t(5531);let a=(0,n.Z)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},7908:function(e,r,t){Promise.resolve().then(t.bind(t,8680))},8680:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return SnmpDeviceManager}});var n=t(7437),a=t(2265),s=t(1865),l=t(9482),o=t(8110),i=t(4631),c=t(9035),d=t(7256),u=t(1628),m=t(690);let f=s.RV,p=a.createContext({}),FormField=e=>{let{...r}=e;return(0,n.jsx)(p.Provider,{value:{name:r.name},children:(0,n.jsx)(s.Qr,{...r})})},useFormField=()=>{let e=a.useContext(p),r=a.useContext(x),{getFieldState:t,formState:n}=(0,s.Gc)(),l=t(e.name,n);if(!e)throw Error("useFormField should be used within <FormField>");let{id:o}=r;return{id:o,name:e.name,formItemId:"".concat(o,"-form-item"),formDescriptionId:"".concat(o,"-form-item-description"),formMessageId:"".concat(o,"-form-item-message"),...l}},x=a.createContext({}),h=a.forwardRef((e,r)=>{let{className:t,...s}=e,l=a.useId();return(0,n.jsx)(x.Provider,{value:{id:l},children:(0,n.jsx)("div",{ref:r,className:(0,u.cn)("space-y-2",t),...s})})});h.displayName="FormItem";let v=a.forwardRef((e,r)=>{let{className:t,...a}=e,{error:s,formItemId:l}=useFormField();return(0,n.jsx)(m._,{ref:r,className:(0,u.cn)(s&&"text-destructive",t),htmlFor:l,...a})});v.displayName="FormLabel";let j=a.forwardRef((e,r)=>{let{...t}=e,{error:a,formItemId:s,formDescriptionId:l,formMessageId:o}=useFormField();return(0,n.jsx)(d.g7,{ref:r,id:s,"aria-describedby":a?"".concat(l," ").concat(o):"".concat(l),"aria-invalid":!!a,...t})});j.displayName="FormControl";let N=a.forwardRef((e,r)=>{let{className:t,...a}=e,{formDescriptionId:s}=useFormField();return(0,n.jsx)("p",{ref:r,id:s,className:(0,u.cn)("text-sm text-muted-foreground",t),...a})});N.displayName="FormDescription";let g=a.forwardRef((e,r)=>{let{className:t,children:a,...s}=e,{error:l,formMessageId:o}=useFormField(),i=l?String(null==l?void 0:l.message):a;return i?(0,n.jsx)("p",{ref:r,id:o,className:(0,u.cn)("text-sm font-medium text-destructive",t),...s,children:i}):null});g.displayName="FormMessage";var y=t(5831),w=t(3611),k=t(9598),b=t(5217),F=t(1392),_=t(4280),C=t(5531);let M=(0,C.Z)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]);var T=t(307);let Z=l.Ry({ip:l.Z_().min(7,"IP tidak valid"),netmask:l.Z_(),gateway:l.Z_(),port:l.Z_(),version:l.Z_(),security_name:l.Z_().optional(),level:l.Z_().optional(),auth_key:l.Z_().optional(),priv_key:l.Z_().optional(),oid:l.Z_(),site:l.Z_().optional(),trap:l.Z_().optional()});function SnmpDeviceManager(){let e=(0,c.w)(),r="connected"===e,t=(0,i.O)(),l=(0,s.cI)({resolver:(0,o.F)(Z),defaultValues:{ip:"",netmask:"",gateway:"",port:"161",version:"2c",security_name:"",level:"",auth_key:"",priv_key:"",oid:"",site:"",trap:""}});return(0,a.useEffect)(()=>{if(!t||!r)return;let e="snmp/config/response";t.subscribe(e);let handler=(e,r)=>{if("snmp/config/response"===e)try{let e=JSON.parse(r.toString());(null==e?void 0:e.data)&&l.reset(e.data)}catch(e){console.error("❌ Failed to parse SNMP config:",e)}};return t.on("message",handler),()=>{t.off("message",handler),t.unsubscribe(e)}},[t,r,l]),(0,n.jsxs)(T.kV,{children:[(0,n.jsxs)("header",{className:"flex h-16 items-center justify-between border-b px-4",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(T.vP,{className:"-ml-1"}),(0,n.jsx)(b.Z,{orientation:"vertical",className:"h-4"}),(0,n.jsx)(F.Z,{className:"w-5 h-5 text-primary"}),(0,n.jsx)("h1",{className:"text-lg font-semibold tracking-tight",children:"SNMP Communication"})]}),(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsxs)(w.z,{variant:"outline",size:"sm",onClick:()=>{r&&(null==t||t.publish("snmp/config/get",""))},disabled:!r,children:[(0,n.jsx)(_.Z,{className:"w-4 h-4 mr-1"}),"Get Status"]}),(0,n.jsxs)(w.z,{variant:"default",size:"sm",onClick:l.handleSubmit(e=>{r&&(null==t||t.publish("snmp/config/update",JSON.stringify({data:e})))}),disabled:!r,children:[(0,n.jsx)(M,{className:"w-4 h-4 mr-1"}),"Update Config"]})]})]}),(0,n.jsx)("div",{className:"p-6 space-y-8",children:(0,n.jsx)(k.Zb,{className:"mt-4",children:(0,n.jsx)(k.aY,{className:"p-6 space-y-4",children:(0,n.jsx)(f,{...l,children:(0,n.jsxs)("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,n.jsx)("div",{className:"col-span-full text-sm font-medium text-muted-foreground",children:"Network Info"}),["ip","netmask","gateway","port","version"].map(e=>(0,n.jsx)(FormField,{control:l.control,name:e,render:r=>{let{field:t}=r;return(0,n.jsxs)(h,{children:[(0,n.jsx)(v,{className:"capitalize",children:e.replace("_"," ")}),(0,n.jsx)(j,{children:(0,n.jsx)(y.I,{placeholder:e,...t})}),(0,n.jsx)(g,{})]})}},e)),(0,n.jsx)("div",{className:"col-span-full text-sm font-medium text-muted-foreground",children:"Security Parameters"}),["security_name","level","auth_key","priv_key"].map(e=>(0,n.jsx)(FormField,{control:l.control,name:e,render:r=>{let{field:t}=r;return(0,n.jsxs)(h,{children:[(0,n.jsx)(v,{className:"capitalize",children:e.replace("_"," ")}),(0,n.jsx)(j,{children:(0,n.jsx)(y.I,{placeholder:e,...t})}),(0,n.jsx)(g,{})]})}},e)),(0,n.jsx)("div",{className:"col-span-full text-sm font-medium text-muted-foreground",children:"SNMP Info"}),["oid","site","trap"].map(e=>(0,n.jsx)(FormField,{control:l.control,name:e,render:r=>{let{field:t}=r;return(0,n.jsxs)(h,{children:[(0,n.jsx)(v,{className:"capitalize",children:e}),(0,n.jsx)(j,{children:(0,n.jsx)(y.I,{placeholder:e,...t})}),(0,n.jsx)(g,{})]})}},e))]})})})})})]})}},9598:function(e,r,t){"use strict";t.d(r,{Ol:function(){return o},SZ:function(){return c},Zb:function(){return l},aY:function(){return d},eW:function(){return u},ll:function(){return i}});var n=t(7437),a=t(2265),s=t(1628);let l=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,n.jsx)("div",{ref:r,className:(0,s.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...a})});l.displayName="Card";let o=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,n.jsx)("div",{ref:r,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",t),...a})});o.displayName="CardHeader";let i=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,n.jsx)("div",{ref:r,className:(0,s.cn)("text-2xl font-semibold leading-none tracking-tight",t),...a})});i.displayName="CardTitle";let c=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,n.jsx)("div",{ref:r,className:(0,s.cn)("text-sm text-muted-foreground",t),...a})});c.displayName="CardDescription";let d=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,n.jsx)("div",{ref:r,className:(0,s.cn)("p-6 pt-0",t),...a})});d.displayName="CardContent";let u=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,n.jsx)("div",{ref:r,className:(0,s.cn)("flex items-center p-6 pt-0",t),...a})});u.displayName="CardFooter"},690:function(e,r,t){"use strict";t.d(r,{_:function(){return d}});var n=t(7437),a=t(2265),s=t(9790),l=a.forwardRef((e,r)=>(0,n.jsx)(s.WV.label,{...e,ref:r,onMouseDown:r=>{let t=r.target;t.closest("button, input, select, textarea")||(e.onMouseDown?.(r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));l.displayName="Label";var o=t(6061),i=t(1628);let c=(0,o.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,n.jsx)(l,{ref:r,className:(0,i.cn)(c(),t),...a})});d.displayName=l.displayName},9035:function(e,r,t){"use strict";t.d(r,{w:function(){return useMQTTStatus}});var n=t(2265),a=t(4631);function useMQTTStatus(){let[e,r]=(0,n.useState)("connecting");return(0,n.useEffect)(()=>{let e=(0,a.k)(),handleConnect=()=>{console.log("✅ Connected to MQTT"),r("connected")},handleError=e=>{console.error("❌ MQTT Error",e),r("error")},handleClose=()=>{console.warn("⚠️ MQTT Disconnected"),r("disconnected")};return e.on("connect",handleConnect),e.on("error",handleError),e.on("close",handleClose),()=>{e.off("connect",handleConnect),e.off("error",handleError),e.off("close",handleClose)}},[]),e}},4631:function(e,r,t){"use strict";t.d(r,{O:function(){return getMQTTClient},k:function(){return connectMQTT}});var n=t(7406);let a=null;function connectMQTT(){let e="ws://localhost:9000";if(!e)throw Error("MQTT broker URL tidak didefinisikan di .env");return(!a||a.disconnected)&&(a=n.Z.connect(e,{clean:!0,connectTimeout:4e3,reconnectPeriod:1e3})),a}function getMQTTClient(){return a}}},function(e){e.O(0,[2793,9848,5348,277,307,2971,2472,1744],function(){return e(e.s=7908)}),_N_E=e.O()}]);