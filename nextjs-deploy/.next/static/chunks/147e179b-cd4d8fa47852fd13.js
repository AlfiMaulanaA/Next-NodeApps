"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2793],{7406:function(l,c,p){var m=Object.defineProperty,y=Object.getOwnPropertyDescriptor,_=Object.getOwnPropertyNames,v=Object.prototype.hasOwnProperty,Ae=(l,c)=>()=>(l&&(c=l(l=0)),c),O=(l,c)=>()=>(c||l((c={exports:{}}).exports,c),c.exports),Ir=(l,c)=>{for(var p in c)m(l,p,{get:c[p],enumerable:!0})},zg=(l,c,p,A)=>{if(c&&"object"==typeof c||"function"==typeof c)for(let k of _(c))v.call(l,k)||k===p||m(l,k,{get:()=>c[k],enumerable:!(A=y(c,k))||A.enumerable});return l},Q=l=>zg(m({},"__esModule",{value:!0}),l),A=Ae(()=>{}),k={};function gs(l){throw Error("Node.js process "+l+" is not supported by JSPM core outside of Node.js")}function Kg(){R&&x&&(R=!1,x.length?T=x.concat(T):B=-1,T.length&&Al())}function Al(){if(!R){var l=setTimeout(Kg,0);R=!0;for(var c=T.length;c;){for(x=T,T=[];++B<c;)x&&x[B].run();B=-1,c=T.length}x=null,R=!1,clearTimeout(l)}}function Il(l){var c=Array(arguments.length-1);if(arguments.length>1)for(var p=1;p<arguments.length;p++)c[p-1]=arguments[p];T.push(new Tl(l,c)),1!==T.length||R||setTimeout(Al,0)}function Tl(l,c){this.fun=l,this.array=c}function _e(){}function $l(l){gs("_linkedBinding")}function Kl(l){gs("dlopen")}function Gl(){return[]}function Ql(){return[]}function nu(l,c){if(!l)throw Error(c||"assertion error")}function lu(){return!1}function Iu(){return eq.now()/1e3}function Di(l){var c=Math.floor((Date.now()-eq.now())*.001),p=.001*eq.now(),m=Math.floor(p)+c,y=Math.floor(p%1*1e9);return l&&(m-=l[0],(y-=l[1])<0&&(m--,y+=eH)),[m,y]}function bt(){return e3}function Uu(l){return[]}Ir(k,{_debugEnd:()=>eR,_debugProcess:()=>eT,_events:()=>ez,_eventsCount:()=>eK,_exiting:()=>ea,_fatalExceptions:()=>eI,_getActiveHandles:()=>Ql,_getActiveRequests:()=>Gl,_kill:()=>ed,_linkedBinding:()=>$l,_maxListeners:()=>eQ,_preload_modules:()=>eW,_rawDebug:()=>en,_startProfilerIdleNotifier:()=>eP,_stopProfilerIdleNotifier:()=>eC,_tickCallback:()=>ek,abort:()=>ej,addListener:()=>eY,allowedNodeEnvironmentFlags:()=>eS,arch:()=>N,argv:()=>W,argv0:()=>eF,assert:()=>nu,binding:()=>X,chdir:()=>er,config:()=>el,cpuUsage:()=>ep,cwd:()=>et,debugPort:()=>eD,default:()=>e3,dlopen:()=>Kl,domain:()=>es,emit:()=>e0,emitWarning:()=>J,env:()=>D,execArgv:()=>V,execPath:()=>eL,exit:()=>e_,features:()=>eA,hasUncaughtExceptionCaptureCallback:()=>lu,hrtime:()=>Di,kill:()=>em,listeners:()=>Uu,memoryUsage:()=>eb,moduleLoadList:()=>eo,nextTick:()=>Il,off:()=>eZ,on:()=>bt,once:()=>eG,openStdin:()=>eE,pid:()=>eU,platform:()=>L,ppid:()=>eN,prependListener:()=>e1,prependOnceListener:()=>e2,reallyExit:()=>eu,release:()=>ei,removeAllListeners:()=>eX,removeListener:()=>eJ,resourceUsage:()=>eg,setSourceMapsEnabled:()=>e$,setUncaughtExceptionCaptureCallback:()=>eO,stderr:()=>eB,stdin:()=>eM,stdout:()=>ex,title:()=>U,umask:()=>ee,uptime:()=>Iu,version:()=>H,versions:()=>K});var T,R,x,B,U,N,L,D,W,V,H,K,J,X,ee,et,er,ei,en,eo,es,ea,el,eu,ed,ep,eg,eb,em,e_,eE,eS,eA,eI,eO,ek,eT,eR,eP,eC,ex,eB,eM,ej,eU,eN,eL,eD,eF,eW,e$,eq,eV,eH,eQ,ez,eK,eY,eG,eZ,eJ,eX,e0,e1,e2,e3,e6=Ae(()=>{A(),th(),e4(),T=[],R=!1,B=-1,Tl.prototype.run=function(){this.fun.apply(null,this.array)},U="browser",N="x64",L="browser",D={PATH:"/usr/bin",LANG:navigator.language+".UTF-8",PWD:"/",HOME:"/home",TMP:"/tmp"},W=["/usr/bin/node"],V=[],H="v16.8.0",K={},J=function(l,c){console.warn((c?c+": ":"")+l)},X=function(l){gs("binding")},ee=function(l){return 0},et=function(){return"/"},er=function(l){},ei={name:"node",sourceUrl:"",headersUrl:"",libUrl:""},en=_e,eo=[],es={},ea=!1,el={},eu=_e,ed=_e,eg=ep=function(){return{}},eb=ep,em=_e,e_=_e,eE=_e,eS={},eA={inspector:!1,debug:!1,uv:!1,ipv6:!1,tls_alpn:!1,tls_sni:!1,tls_ocsp:!1,tls:!1,cached_builtins:!0},eI=_e,eO=_e,ek=_e,eT=_e,eR=_e,eP=_e,eC=_e,ex=void 0,eB=void 0,eM=void 0,ej=_e,eU=2,eN=1,eL="/bin/usr/node",eD=9229,eF="node",eW=[],e$=_e,void 0===(eq={now:"u">typeof performance?performance.now.bind(performance):void 0,timing:"u">typeof performance?performance.timing:void 0}).now&&(eV=Date.now(),eq.timing&&eq.timing.navigationStart&&(eV=eq.timing.navigationStart),eq.now=()=>Date.now()-eV),eH=1e9,Di.bigint=function(l){var c=Di(l);return typeof BigInt>"u"?c[0]*eH+c[1]:BigInt(c[0]*eH)+BigInt(c[1])},eQ=10,ez={},eK=0,eY=bt,eG=bt,eZ=bt,eJ=bt,eX=bt,e0=_e,e1=bt,e2=bt,e3={version:H,versions:K,arch:N,platform:L,release:ei,_rawDebug:en,moduleLoadList:eo,binding:X,_linkedBinding:$l,_events:ez,_eventsCount:eK,_maxListeners:eQ,on:bt,addListener:eY,once:eG,off:eZ,removeListener:eJ,removeAllListeners:eX,emit:e0,prependListener:e1,prependOnceListener:e2,listeners:Uu,domain:es,_exiting:ea,config:el,dlopen:Kl,uptime:Iu,_getActiveRequests:Gl,_getActiveHandles:Ql,reallyExit:eu,_kill:ed,cpuUsage:ep,resourceUsage:eg,memoryUsage:eb,kill:em,exit:e_,openStdin:eE,allowedNodeEnvironmentFlags:eS,assert:nu,features:eA,_fatalExceptions:eI,setUncaughtExceptionCaptureCallback:eO,hasUncaughtExceptionCaptureCallback:lu,emitWarning:J,nextTick:Il,_tickCallback:ek,_debugProcess:eT,_debugEnd:eR,_startProfilerIdleNotifier:eP,_stopProfilerIdleNotifier:eC,stdout:ex,stdin:eM,stderr:eB,abort:ej,umask:ee,chdir:er,cwd:et,env:D,title:U,argv:W,execArgv:V,pid:eU,ppid:eN,execPath:eL,debugPort:eD,hrtime:Di,argv0:eF,_preload_modules:eW,setSourceMapsEnabled:e$}}),e4=Ae(()=>{e6()}),e5={};function Gg(){if(e7)return e8;e7=!0,e8.byteLength=a,e8.toByteArray=f,e8.fromByteArray=g;for(var l=[],c=[],p="u">typeof Uint8Array?Uint8Array:Array,m="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",y=0,_=m.length;y<_;++y)l[y]=m[y],c[m.charCodeAt(y)]=y;function s(l){var c=l.length;if(c%4>0)throw Error("Invalid string. Length must be a multiple of 4");var p=l.indexOf("=");-1===p&&(p=c);var m=p===c?0:4-p%4;return[p,m]}function a(l){var c=s(l),p=c[0],m=c[1];return(p+m)*3/4-m}function u(l,c,p){return(c+p)*3/4-p}function f(l){var m,y,_=s(l),v=_[0],A=_[1],k=new p(u(l,v,A)),T=0,R=A>0?v-4:v;for(y=0;y<R;y+=4)m=c[l.charCodeAt(y)]<<18|c[l.charCodeAt(y+1)]<<12|c[l.charCodeAt(y+2)]<<6|c[l.charCodeAt(y+3)],k[T++]=m>>16&255,k[T++]=m>>8&255,k[T++]=255&m;return 2===A&&(m=c[l.charCodeAt(y)]<<2|c[l.charCodeAt(y+1)]>>4,k[T++]=255&m),1===A&&(m=c[l.charCodeAt(y)]<<10|c[l.charCodeAt(y+1)]<<4|c[l.charCodeAt(y+2)]>>2,k[T++]=m>>8&255,k[T++]=255&m),k}function d(c){return l[c>>18&63]+l[c>>12&63]+l[c>>6&63]+l[63&c]}function h(l,c,p){for(var m=[],y=c;y<p;y+=3)m.push(d((l[y]<<16&16711680)+(l[y+1]<<8&65280)+(255&l[y+2])));return m.join("")}function g(c){for(var p,m=c.length,y=m%3,_=[],v=0,A=m-y;v<A;v+=16383)_.push(h(c,v,v+16383>A?A:v+16383));return 1===y?_.push(l[(p=c[m-1])>>2]+l[p<<4&63]+"=="):2===y&&_.push(l[(p=(c[m-2]<<8)+c[m-1])>>10]+l[p>>4&63]+l[p<<2&63]+"="),_.join("")}return c[45]=62,c[95]=63,e8}function Qg(){return tt||(tt=!0,e9.read=function(l,c,p,m,y){var _,v,A=8*y-m-1,k=(1<<A)-1,T=k>>1,R=-7,x=p?y-1:0,B=p?-1:1,U=l[c+x];for(x+=B,_=U&(1<<-R)-1,U>>=-R,R+=A;R>0;_=256*_+l[c+x],x+=B,R-=8);for(v=_&(1<<-R)-1,_>>=-R,R+=m;R>0;v=256*v+l[c+x],x+=B,R-=8);if(0===_)_=1-T;else{if(_===k)return v?NaN:(U?-1:1)*(1/0);v+=Math.pow(2,m),_-=T}return(U?-1:1)*v*Math.pow(2,_-m)},e9.write=function(l,c,p,m,y,_){var v,A,k,T=8*_-y-1,R=(1<<T)-1,x=R>>1,B=23===y?5960464477539062e-23:0,U=m?0:_-1,N=m?1:-1,L=c<0||0===c&&1/c<0?1:0;for(isNaN(c=Math.abs(c))||c===1/0?(A=isNaN(c)?1:0,v=R):(v=Math.floor(Math.log(c)/Math.LN2),c*(k=Math.pow(2,-v))<1&&(v--,k*=2),v+x>=1?c+=B/k:c+=B*Math.pow(2,1-x),c*k>=2&&(v++,k/=2),v+x>=R?(A=0,v=R):v+x>=1?(A=(c*k-1)*Math.pow(2,y),v+=x):(A=c*Math.pow(2,x-1)*Math.pow(2,y),v=0));y>=8;l[p+U]=255&A,U+=N,A/=256,y-=8);for(v=v<<y|A,T+=y;T>0;l[p+U]=255&v,U+=N,v/=256,T-=8);l[p+U-N]|=128*L}),e9}function Yg(){if(tn)return ti;tn=!0;let l=Gg(),c=Qg(),p="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;function n(){try{let l=new Uint8Array(1),c={foo:function(){return 42}};return Object.setPrototypeOf(c,Uint8Array.prototype),Object.setPrototypeOf(l,c),42===l.foo()}catch{return!1}}function o(l){if(l>2147483647)throw RangeError('The value "'+l+'" is invalid for option "size"');let c=new Uint8Array(l);return Object.setPrototypeOf(c,s.prototype),c}function s(l,c,p){if("number"==typeof l){if("string"==typeof c)throw TypeError('The "string" argument must be of type string. Received type number');return d(l)}return a(l,c,p)}function a(l,c,p){if("string"==typeof l)return h(l,c);if(ArrayBuffer.isView(l))return b(l);if(null==l)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof l);if(Qe(l,ArrayBuffer)||l&&Qe(l.buffer,ArrayBuffer)||"u">typeof SharedArrayBuffer&&(Qe(l,SharedArrayBuffer)||l&&Qe(l.buffer,SharedArrayBuffer)))return E(l,c,p);if("number"==typeof l)throw TypeError('The "value" argument must not be of type number. Received type number');let m=l.valueOf&&l.valueOf();if(null!=m&&m!==l)return s.from(m,c,p);let y=w(l);if(y)return y;if("u">typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof l[Symbol.toPrimitive])return s.from(l[Symbol.toPrimitive]("string"),c,p);throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof l)}function u(l){if("number"!=typeof l)throw TypeError('"size" argument must be of type number');if(l<0)throw RangeError('The value "'+l+'" is invalid for option "size"')}function f(l,c,p){return u(l),l<=0?o(l):void 0!==c?"string"==typeof p?o(l).fill(c,p):o(l).fill(c):o(l)}function d(l){return u(l),o(l<0?0:0|S(l))}function h(l,c){if(("string"!=typeof c||""===c)&&(c="utf8"),!s.isEncoding(c))throw TypeError("Unknown encoding: "+c);let p=0|P(l,c),m=o(p),y=m.write(l,c);return y!==p&&(m=m.slice(0,y)),m}function g(l){let c=l.length<0?0:0|S(l.length),p=o(c);for(let m=0;m<c;m+=1)p[m]=255&l[m];return p}function b(l){if(Qe(l,Uint8Array)){let c=new Uint8Array(l);return E(c.buffer,c.byteOffset,c.byteLength)}return g(l)}function E(l,c,p){let m;if(c<0||l.byteLength<c)throw RangeError('"offset" is outside of buffer bounds');if(l.byteLength<c+(p||0))throw RangeError('"length" is outside of buffer bounds');return Object.setPrototypeOf(m=void 0===c&&void 0===p?new Uint8Array(l):void 0===p?new Uint8Array(l,c):new Uint8Array(l,c,p),s.prototype),m}function w(l){var c;if(s.isBuffer(l)){let c=0|S(l.length),p=o(c);return 0===p.length||l.copy(p,0,0,c),p}return void 0!==l.length?"number"!=typeof l.length||(c=l.length)!=c?o(0):g(l):"Buffer"===l.type&&Array.isArray(l.data)?g(l.data):void 0}function S(l){if(l>=2147483647)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|l}function I(l){return+l!=l&&(l=0),s.alloc(+l)}function P(l,c){if(s.isBuffer(l))return l.length;if(ArrayBuffer.isView(l)||Qe(l,ArrayBuffer))return l.byteLength;if("string"!=typeof l)throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof l);let p=l.length,m=arguments.length>2&&!0===arguments[2];if(!m&&0===p)return 0;let y=!1;for(;;)switch(c){case"ascii":case"latin1":case"binary":return p;case"utf8":case"utf-8":return cs(l).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*p;case"hex":return p>>>1;case"base64":return Sl(l).length;default:if(y)return m?-1:cs(l).length;c=(""+c).toLowerCase(),y=!0}}function C(l,c,p){let m=!1;if((void 0===c||c<0)&&(c=0),c>this.length||((void 0===p||p>this.length)&&(p=this.length),p<=0)||(p>>>=0)<=(c>>>=0))return"";for(l||(l="utf8");;)switch(l){case"hex":return Mg(this,c,p);case"utf8":case"utf-8":return Se(this,c,p);case"ascii":return ls(this,c,p);case"latin1":case"binary":return Og(this,c,p);case"base64":return Fe(this,c,p);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Lg(this,c,p);default:if(m)throw TypeError("Unknown encoding: "+l);l=(l+"").toLowerCase(),m=!0}}function M(l,c,p){let m=l[c];l[c]=l[p],l[p]=m}function q(l,c,p,m,y){var _;if(0===l.length)return -1;if("string"==typeof p?(m=p,p=0):p>2147483647?p=2147483647:p<-2147483648&&(p=-2147483648),(_=p=+p)!=_&&(p=y?0:l.length-1),p<0&&(p=l.length+p),p>=l.length){if(y)return -1;p=l.length-1}else if(p<0){if(!y)return -1;p=0}if("string"==typeof c&&(c=s.from(c,m)),s.isBuffer(c))return 0===c.length?-1:z(l,c,p,m,y);if("number"==typeof c)return c&=255,"function"==typeof Uint8Array.prototype.indexOf?y?Uint8Array.prototype.indexOf.call(l,c,p):Uint8Array.prototype.lastIndexOf.call(l,c,p):z(l,[c],p,m,y);throw TypeError("val must be string, number or Buffer")}function z(l,c,p,m,y){let _,v=1,A=l.length,k=c.length;if(void 0!==m&&("ucs2"===(m=String(m).toLowerCase())||"ucs-2"===m||"utf16le"===m||"utf-16le"===m)){if(l.length<2||c.length<2)return -1;v=2,A/=2,k/=2,p/=2}function ae(l,c){return 1===v?l[c]:l.readUInt16BE(c*v)}if(y){let m=-1;for(_=p;_<A;_++)if(ae(l,_)===ae(c,-1===m?0:_-m)){if(-1===m&&(m=_),_-m+1===k)return m*v}else -1!==m&&(_-=_-m),m=-1}else for(p+k>A&&(p=A-k),_=p;_>=0;_--){let p=!0;for(let m=0;m<k;m++)if(ae(l,_+m)!==ae(c,m)){p=!1;break}if(p)return _}return -1}function j(l,c,p,m){let y;p=Number(p)||0;let _=l.length-p;m?(m=Number(m))>_&&(m=_):m=_;let v=c.length;for(m>v/2&&(m=v/2),y=0;y<m;++y){let m=parseInt(c.substr(2*y,2),16);if(m!=m)break;l[p+y]=m}return y}function G(l,c,p,m){return Ui(cs(c,l.length-p),l,p,m)}function $(l,c,p,m){return Ui(Dg(c),l,p,m)}function te(l,c,p,m){return Ui(Sl(c),l,p,m)}function pt(l,c,p,m){return Ui(jg(c,l.length-p),l,p,m)}function Fe(c,p,m){return 0===p&&m===c.length?l.fromByteArray(c):l.fromByteArray(c.slice(p,m))}function Se(l,c,p){p=Math.min(l.length,p);let m=[],y=c;for(;y<p;){let c=l[y],_=null,v=c>239?4:c>223?3:c>191?2:1;if(y+v<=p){let p,m,A,k;switch(v){case 1:c<128&&(_=c);break;case 2:(192&(p=l[y+1]))==128&&(k=(31&c)<<6|63&p)>127&&(_=k);break;case 3:p=l[y+1],m=l[y+2],(192&p)==128&&(192&m)==128&&(k=(15&c)<<12|(63&p)<<6|63&m)>2047&&(k<55296||k>57343)&&(_=k);break;case 4:p=l[y+1],m=l[y+2],A=l[y+3],(192&p)==128&&(192&m)==128&&(192&A)==128&&(k=(15&c)<<18|(63&p)<<12|(63&m)<<6|63&A)>65535&&k<1114112&&(_=k)}}null===_?(_=65533,v=1):_>65535&&(_-=65536,m.push(_>>>10&1023|55296),_=56320|1023&_),m.push(_),y+=v}return Er(m)}function Er(l){let c=l.length;if(c<=4096)return String.fromCharCode.apply(String,l);let p="",m=0;for(;m<c;)p+=String.fromCharCode.apply(String,l.slice(m,m+=4096));return p}function ls(l,c,p){let m="";p=Math.min(l.length,p);for(let y=c;y<p;++y)m+=String.fromCharCode(127&l[y]);return m}function Og(l,c,p){let m="";p=Math.min(l.length,p);for(let y=c;y<p;++y)m+=String.fromCharCode(l[y]);return m}function Mg(l,c,p){let m=l.length;(!c||c<0)&&(c=0),(!p||p<0||p>m)&&(p=m);let y="";for(let m=c;m<p;++m)y+=_[l[m]];return y}function Lg(l,c,p){let m=l.slice(c,p),y="";for(let l=0;l<m.length-1;l+=2)y+=String.fromCharCode(m[l]+256*m[l+1]);return y}function be(l,c,p){if(l%1!=0||l<0)throw RangeError("offset is not uint");if(l+c>p)throw RangeError("Trying to access beyond buffer length")}function Ce(l,c,p,m,y,_){if(!s.isBuffer(l))throw TypeError('"buffer" argument must be a Buffer instance');if(c>y||c<_)throw RangeError('"value" argument is out of bounds');if(p+m>l.length)throw RangeError("Index out of range")}function bl(l,c,p,m,y){El(c,m,y,l,p,7);let _=Number(c&BigInt(4294967295));l[p++]=_,_>>=8,l[p++]=_,_>>=8,l[p++]=_,_>>=8,l[p++]=_;let v=Number(c>>BigInt(32)&BigInt(4294967295));return l[p++]=v,v>>=8,l[p++]=v,v>>=8,l[p++]=v,v>>=8,l[p++]=v,p}function yl(l,c,p,m,y){El(c,m,y,l,p,7);let _=Number(c&BigInt(4294967295));l[p+7]=_,_>>=8,l[p+6]=_,_>>=8,l[p+5]=_,_>>=8,l[p+4]=_;let v=Number(c>>BigInt(32)&BigInt(4294967295));return l[p+3]=v,v>>=8,l[p+2]=v,v>>=8,l[p+1]=v,v>>=8,l[p]=v,p+8}function wl(l,c,p,m,y,_){if(p+m>l.length||p<0)throw RangeError("Index out of range")}function _l(l,p,m,y,_){return p=+p,m>>>=0,_||wl(l,p,m,4),c.write(l,p,m,y,23,4),m+4}function ml(l,p,m,y,_){return p=+p,m>>>=0,_||wl(l,p,m,8),c.write(l,p,m,y,52,8),m+8}ti.Buffer=s,ti.SlowBuffer=I,ti.INSPECT_MAX_BYTES=50,ti.kMaxLength=2147483647,s.TYPED_ARRAY_SUPPORT=n(),!s.TYPED_ARRAY_SUPPORT&&"u">typeof console&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.byteOffset}}),s.poolSize=8192,s.from=function(l,c,p){return a(l,c,p)},Object.setPrototypeOf(s.prototype,Uint8Array.prototype),Object.setPrototypeOf(s,Uint8Array),s.alloc=function(l,c,p){return f(l,c,p)},s.allocUnsafe=function(l){return d(l)},s.allocUnsafeSlow=function(l){return d(l)},s.isBuffer=function(l){return null!=l&&!0===l._isBuffer&&l!==s.prototype},s.compare=function(l,c){if(Qe(l,Uint8Array)&&(l=s.from(l,l.offset,l.byteLength)),Qe(c,Uint8Array)&&(c=s.from(c,c.offset,c.byteLength)),!s.isBuffer(l)||!s.isBuffer(c))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(l===c)return 0;let p=l.length,m=c.length;for(let y=0,_=Math.min(p,m);y<_;++y)if(l[y]!==c[y]){p=l[y],m=c[y];break}return p<m?-1:m<p?1:0},s.isEncoding=function(l){switch(String(l).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(l,c){let p;if(!Array.isArray(l))throw TypeError('"list" argument must be an Array of Buffers');if(0===l.length)return s.alloc(0);if(void 0===c)for(c=0,p=0;p<l.length;++p)c+=l[p].length;let m=s.allocUnsafe(c),y=0;for(p=0;p<l.length;++p){let c=l[p];if(Qe(c,Uint8Array))y+c.length>m.length?(s.isBuffer(c)||(c=s.from(c)),c.copy(m,y)):Uint8Array.prototype.set.call(m,c,y);else if(s.isBuffer(c))c.copy(m,y);else throw TypeError('"list" argument must be an Array of Buffers');y+=c.length}return m},s.byteLength=P,s.prototype._isBuffer=!0,s.prototype.swap16=function(){let l=this.length;if(l%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(let c=0;c<l;c+=2)M(this,c,c+1);return this},s.prototype.swap32=function(){let l=this.length;if(l%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(let c=0;c<l;c+=4)M(this,c,c+3),M(this,c+1,c+2);return this},s.prototype.swap64=function(){let l=this.length;if(l%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(let c=0;c<l;c+=8)M(this,c,c+7),M(this,c+1,c+6),M(this,c+2,c+5),M(this,c+3,c+4);return this},s.prototype.toString=function(){let l=this.length;return 0===l?"":0==arguments.length?Se(this,0,l):C.apply(this,arguments)},s.prototype.toLocaleString=s.prototype.toString,s.prototype.equals=function(l){if(!s.isBuffer(l))throw TypeError("Argument must be a Buffer");return this===l||0===s.compare(this,l)},s.prototype.inspect=function(){let l="",c=ti.INSPECT_MAX_BYTES;return l=this.toString("hex",0,c).replace(/(.{2})/g,"$1 ").trim(),this.length>c&&(l+=" ... "),"<Buffer "+l+">"},p&&(s.prototype[p]=s.prototype.inspect),s.prototype.compare=function(l,c,p,m,y){if(Qe(l,Uint8Array)&&(l=s.from(l,l.offset,l.byteLength)),!s.isBuffer(l))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof l);if(void 0===c&&(c=0),void 0===p&&(p=l?l.length:0),void 0===m&&(m=0),void 0===y&&(y=this.length),c<0||p>l.length||m<0||y>this.length)throw RangeError("out of range index");if(m>=y&&c>=p)return 0;if(m>=y)return -1;if(c>=p)return 1;if(c>>>=0,p>>>=0,m>>>=0,y>>>=0,this===l)return 0;let _=y-m,v=p-c,A=Math.min(_,v),k=this.slice(m,y),T=l.slice(c,p);for(let l=0;l<A;++l)if(k[l]!==T[l]){_=k[l],v=T[l];break}return _<v?-1:v<_?1:0},s.prototype.includes=function(l,c,p){return -1!==this.indexOf(l,c,p)},s.prototype.indexOf=function(l,c,p){return q(this,l,c,p,!0)},s.prototype.lastIndexOf=function(l,c,p){return q(this,l,c,p,!1)},s.prototype.write=function(l,c,p,m){if(void 0===c)m="utf8",p=this.length,c=0;else if(void 0===p&&"string"==typeof c)m=c,p=this.length,c=0;else if(isFinite(c))c>>>=0,isFinite(p)?(p>>>=0,void 0===m&&(m="utf8")):(m=p,p=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let y=this.length-c;if((void 0===p||p>y)&&(p=y),l.length>0&&(p<0||c<0)||c>this.length)throw RangeError("Attempt to write outside buffer bounds");m||(m="utf8");let _=!1;for(;;)switch(m){case"hex":return j(this,l,c,p);case"utf8":case"utf-8":return G(this,l,c,p);case"ascii":case"latin1":case"binary":return $(this,l,c,p);case"base64":return te(this,l,c,p);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return pt(this,l,c,p);default:if(_)throw TypeError("Unknown encoding: "+m);m=(""+m).toLowerCase(),_=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},s.prototype.slice=function(l,c){let p=this.length;l=~~l,c=void 0===c?p:~~c,l<0?(l+=p)<0&&(l=0):l>p&&(l=p),c<0?(c+=p)<0&&(c=0):c>p&&(c=p),c<l&&(c=l);let m=this.subarray(l,c);return Object.setPrototypeOf(m,s.prototype),m},s.prototype.readUintLE=s.prototype.readUIntLE=function(l,c,p){l>>>=0,c>>>=0,p||be(l,c,this.length);let m=this[l],y=1,_=0;for(;++_<c&&(y*=256);)m+=this[l+_]*y;return m},s.prototype.readUintBE=s.prototype.readUIntBE=function(l,c,p){l>>>=0,c>>>=0,p||be(l,c,this.length);let m=this[l+--c],y=1;for(;c>0&&(y*=256);)m+=this[l+--c]*y;return m},s.prototype.readUint8=s.prototype.readUInt8=function(l,c){return l>>>=0,c||be(l,1,this.length),this[l]},s.prototype.readUint16LE=s.prototype.readUInt16LE=function(l,c){return l>>>=0,c||be(l,2,this.length),this[l]|this[l+1]<<8},s.prototype.readUint16BE=s.prototype.readUInt16BE=function(l,c){return l>>>=0,c||be(l,2,this.length),this[l]<<8|this[l+1]},s.prototype.readUint32LE=s.prototype.readUInt32LE=function(l,c){return l>>>=0,c||be(l,4,this.length),(this[l]|this[l+1]<<8|this[l+2]<<16)+16777216*this[l+3]},s.prototype.readUint32BE=s.prototype.readUInt32BE=function(l,c){return l>>>=0,c||be(l,4,this.length),16777216*this[l]+(this[l+1]<<16|this[l+2]<<8|this[l+3])},s.prototype.readBigUInt64LE=Pt(function(l){Ar(l>>>=0,"offset");let c=this[l],p=this[l+7];(void 0===c||void 0===p)&&si(l,this.length-8);let m=c+256*this[++l]+65536*this[++l]+16777216*this[++l],y=this[++l]+256*this[++l]+65536*this[++l]+16777216*p;return BigInt(m)+(BigInt(y)<<BigInt(32))}),s.prototype.readBigUInt64BE=Pt(function(l){Ar(l>>>=0,"offset");let c=this[l],p=this[l+7];(void 0===c||void 0===p)&&si(l,this.length-8);let m=16777216*c+65536*this[++l]+256*this[++l]+this[++l],y=16777216*this[++l]+65536*this[++l]+256*this[++l]+p;return(BigInt(m)<<BigInt(32))+BigInt(y)}),s.prototype.readIntLE=function(l,c,p){l>>>=0,c>>>=0,p||be(l,c,this.length);let m=this[l],y=1,_=0;for(;++_<c&&(y*=256);)m+=this[l+_]*y;return m>=(y*=128)&&(m-=Math.pow(2,8*c)),m},s.prototype.readIntBE=function(l,c,p){l>>>=0,c>>>=0,p||be(l,c,this.length);let m=c,y=1,_=this[l+--m];for(;m>0&&(y*=256);)_+=this[l+--m]*y;return _>=(y*=128)&&(_-=Math.pow(2,8*c)),_},s.prototype.readInt8=function(l,c){return l>>>=0,c||be(l,1,this.length),128&this[l]?-((255-this[l]+1)*1):this[l]},s.prototype.readInt16LE=function(l,c){l>>>=0,c||be(l,2,this.length);let p=this[l]|this[l+1]<<8;return 32768&p?4294901760|p:p},s.prototype.readInt16BE=function(l,c){l>>>=0,c||be(l,2,this.length);let p=this[l+1]|this[l]<<8;return 32768&p?4294901760|p:p},s.prototype.readInt32LE=function(l,c){return l>>>=0,c||be(l,4,this.length),this[l]|this[l+1]<<8|this[l+2]<<16|this[l+3]<<24},s.prototype.readInt32BE=function(l,c){return l>>>=0,c||be(l,4,this.length),this[l]<<24|this[l+1]<<16|this[l+2]<<8|this[l+3]},s.prototype.readBigInt64LE=Pt(function(l){Ar(l>>>=0,"offset");let c=this[l],p=this[l+7];return(void 0===c||void 0===p)&&si(l,this.length-8),(BigInt(this[l+4]+256*this[l+5]+65536*this[l+6]+(p<<24))<<BigInt(32))+BigInt(c+256*this[++l]+65536*this[++l]+16777216*this[++l])}),s.prototype.readBigInt64BE=Pt(function(l){Ar(l>>>=0,"offset");let c=this[l],p=this[l+7];return(void 0===c||void 0===p)&&si(l,this.length-8),(BigInt((c<<24)+65536*this[++l]+256*this[++l]+this[++l])<<BigInt(32))+BigInt(16777216*this[++l]+65536*this[++l]+256*this[++l]+p)}),s.prototype.readFloatLE=function(l,p){return l>>>=0,p||be(l,4,this.length),c.read(this,l,!0,23,4)},s.prototype.readFloatBE=function(l,p){return l>>>=0,p||be(l,4,this.length),c.read(this,l,!1,23,4)},s.prototype.readDoubleLE=function(l,p){return l>>>=0,p||be(l,8,this.length),c.read(this,l,!0,52,8)},s.prototype.readDoubleBE=function(l,p){return l>>>=0,p||be(l,8,this.length),c.read(this,l,!1,52,8)},s.prototype.writeUintLE=s.prototype.writeUIntLE=function(l,c,p,m){if(l=+l,c>>>=0,p>>>=0,!m){let m=Math.pow(2,8*p)-1;Ce(this,l,c,p,m,0)}let y=1,_=0;for(this[c]=255&l;++_<p&&(y*=256);)this[c+_]=l/y&255;return c+p},s.prototype.writeUintBE=s.prototype.writeUIntBE=function(l,c,p,m){if(l=+l,c>>>=0,p>>>=0,!m){let m=Math.pow(2,8*p)-1;Ce(this,l,c,p,m,0)}let y=p-1,_=1;for(this[c+y]=255&l;--y>=0&&(_*=256);)this[c+y]=l/_&255;return c+p},s.prototype.writeUint8=s.prototype.writeUInt8=function(l,c,p){return l=+l,c>>>=0,p||Ce(this,l,c,1,255,0),this[c]=255&l,c+1},s.prototype.writeUint16LE=s.prototype.writeUInt16LE=function(l,c,p){return l=+l,c>>>=0,p||Ce(this,l,c,2,65535,0),this[c]=255&l,this[c+1]=l>>>8,c+2},s.prototype.writeUint16BE=s.prototype.writeUInt16BE=function(l,c,p){return l=+l,c>>>=0,p||Ce(this,l,c,2,65535,0),this[c]=l>>>8,this[c+1]=255&l,c+2},s.prototype.writeUint32LE=s.prototype.writeUInt32LE=function(l,c,p){return l=+l,c>>>=0,p||Ce(this,l,c,4,4294967295,0),this[c+3]=l>>>24,this[c+2]=l>>>16,this[c+1]=l>>>8,this[c]=255&l,c+4},s.prototype.writeUint32BE=s.prototype.writeUInt32BE=function(l,c,p){return l=+l,c>>>=0,p||Ce(this,l,c,4,4294967295,0),this[c]=l>>>24,this[c+1]=l>>>16,this[c+2]=l>>>8,this[c+3]=255&l,c+4},s.prototype.writeBigUInt64LE=Pt(function(l,c=0){return bl(this,l,c,BigInt(0),BigInt("0xffffffffffffffff"))}),s.prototype.writeBigUInt64BE=Pt(function(l,c=0){return yl(this,l,c,BigInt(0),BigInt("0xffffffffffffffff"))}),s.prototype.writeIntLE=function(l,c,p,m){if(l=+l,c>>>=0,!m){let m=Math.pow(2,8*p-1);Ce(this,l,c,p,m-1,-m)}let y=0,_=1,v=0;for(this[c]=255&l;++y<p&&(_*=256);)l<0&&0===v&&0!==this[c+y-1]&&(v=1),this[c+y]=(l/_>>0)-v&255;return c+p},s.prototype.writeIntBE=function(l,c,p,m){if(l=+l,c>>>=0,!m){let m=Math.pow(2,8*p-1);Ce(this,l,c,p,m-1,-m)}let y=p-1,_=1,v=0;for(this[c+y]=255&l;--y>=0&&(_*=256);)l<0&&0===v&&0!==this[c+y+1]&&(v=1),this[c+y]=(l/_>>0)-v&255;return c+p},s.prototype.writeInt8=function(l,c,p){return l=+l,c>>>=0,p||Ce(this,l,c,1,127,-128),l<0&&(l=255+l+1),this[c]=255&l,c+1},s.prototype.writeInt16LE=function(l,c,p){return l=+l,c>>>=0,p||Ce(this,l,c,2,32767,-32768),this[c]=255&l,this[c+1]=l>>>8,c+2},s.prototype.writeInt16BE=function(l,c,p){return l=+l,c>>>=0,p||Ce(this,l,c,2,32767,-32768),this[c]=l>>>8,this[c+1]=255&l,c+2},s.prototype.writeInt32LE=function(l,c,p){return l=+l,c>>>=0,p||Ce(this,l,c,4,2147483647,-2147483648),this[c]=255&l,this[c+1]=l>>>8,this[c+2]=l>>>16,this[c+3]=l>>>24,c+4},s.prototype.writeInt32BE=function(l,c,p){return l=+l,c>>>=0,p||Ce(this,l,c,4,2147483647,-2147483648),l<0&&(l=4294967295+l+1),this[c]=l>>>24,this[c+1]=l>>>16,this[c+2]=l>>>8,this[c+3]=255&l,c+4},s.prototype.writeBigInt64LE=Pt(function(l,c=0){return bl(this,l,c,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),s.prototype.writeBigInt64BE=Pt(function(l,c=0){return yl(this,l,c,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),s.prototype.writeFloatLE=function(l,c,p){return _l(this,l,c,!0,p)},s.prototype.writeFloatBE=function(l,c,p){return _l(this,l,c,!1,p)},s.prototype.writeDoubleLE=function(l,c,p){return ml(this,l,c,!0,p)},s.prototype.writeDoubleBE=function(l,c,p){return ml(this,l,c,!1,p)},s.prototype.copy=function(l,c,p,m){if(!s.isBuffer(l))throw TypeError("argument should be a Buffer");if(p||(p=0),m||0===m||(m=this.length),c>=l.length&&(c=l.length),c||(c=0),m>0&&m<p&&(m=p),m===p||0===l.length||0===this.length)return 0;if(c<0)throw RangeError("targetStart out of bounds");if(p<0||p>=this.length)throw RangeError("Index out of range");if(m<0)throw RangeError("sourceEnd out of bounds");m>this.length&&(m=this.length),l.length-c<m-p&&(m=l.length-c+p);let y=m-p;return this===l&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(c,p,m):Uint8Array.prototype.set.call(l,this.subarray(p,m),c),y},s.prototype.fill=function(l,c,p,m){let y;if("string"==typeof l){if("string"==typeof c?(m=c,c=0,p=this.length):"string"==typeof p&&(m=p,p=this.length),void 0!==m&&"string"!=typeof m)throw TypeError("encoding must be a string");if("string"==typeof m&&!s.isEncoding(m))throw TypeError("Unknown encoding: "+m);if(1===l.length){let c=l.charCodeAt(0);("utf8"===m&&c<128||"latin1"===m)&&(l=c)}}else"number"==typeof l?l&=255:"boolean"==typeof l&&(l=Number(l));if(c<0||this.length<c||this.length<p)throw RangeError("Out of range index");if(p<=c)return this;if(c>>>=0,p=void 0===p?this.length:p>>>0,l||(l=0),"number"==typeof l)for(y=c;y<p;++y)this[y]=l;else{let _=s.isBuffer(l)?l:s.from(l,m),v=_.length;if(0===v)throw TypeError('The value "'+l+'" is invalid for argument "value"');for(y=0;y<p-c;++y)this[y+c]=_[y%v]}return this};let m={};function us(l,c,p){m[l]=class extends p{constructor(){super(),Object.defineProperty(this,"message",{value:c.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${l}]`,this.stack,delete this.name}get code(){return l}set code(l){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:l,writable:!0})}toString(){return`${this.name} [${l}]: ${this.message}`}}}function vl(l){let c="",p=l.length,m="-"===l[0]?1:0;for(;p>=m+4;p-=3)c=`_${l.slice(p-3,p)}${c}`;return`${l.slice(0,p)}${c}`}function qg(l,c,p){Ar(c,"offset"),(void 0===l[c]||void 0===l[c+p])&&si(c,l.length-(p+1))}function El(l,c,p,y,_,v){if(l>p||l<c){let y="bigint"==typeof c?"n":"",_;throw _=v>3?0===c||c===BigInt(0)?`>= 0${y} and < 2${y} ** ${(v+1)*8}${y}`:`>= -(2${y} ** ${(v+1)*8-1}${y}) and < 2 ** ${(v+1)*8-1}${y}`:`>= ${c}${y} and <= ${p}${y}`,new m.ERR_OUT_OF_RANGE("value",_,l)}qg(y,_,v)}function Ar(l,c){if("number"!=typeof l)throw new m.ERR_INVALID_ARG_TYPE(c,"number",l)}function si(l,c,p){throw Math.floor(l)!==l?(Ar(l,p),new m.ERR_OUT_OF_RANGE(p||"offset","an integer",l)):c<0?new m.ERR_BUFFER_OUT_OF_BOUNDS:new m.ERR_OUT_OF_RANGE(p||"offset",`>= ${p?1:0} and <= ${c}`,l)}us("ERR_BUFFER_OUT_OF_BOUNDS",function(l){return l?`${l} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),us("ERR_INVALID_ARG_TYPE",function(l,c){return`The "${l}" argument must be of type number. Received type ${typeof c}`},TypeError),us("ERR_OUT_OF_RANGE",function(l,c,p){let m=`The value of "${l}" is out of range.`,y=p;return Number.isInteger(p)&&Math.abs(p)>4294967296?y=vl(String(p)):"bigint"==typeof p&&(y=String(p),(p>BigInt(2)**BigInt(32)||p<-(BigInt(2)**BigInt(32)))&&(y=vl(y)),y+="n"),m+=` It must be ${c}. Received ${y}`},RangeError);let y=/[^+/0-9A-Za-z-_]/g;function Ng(l){if((l=(l=l.split("=")[0]).trim().replace(y,"")).length<2)return"";for(;l.length%4!=0;)l+="=";return l}function cs(l,c){c=c||1/0;let p,m=l.length,y=null,_=[];for(let v=0;v<m;++v){if((p=l.charCodeAt(v))>55295&&p<57344){if(!y){if(p>56319||v+1===m){(c-=3)>-1&&_.push(239,191,189);continue}y=p;continue}if(p<56320){(c-=3)>-1&&_.push(239,191,189),y=p;continue}p=(y-55296<<10|p-56320)+65536}else y&&(c-=3)>-1&&_.push(239,191,189);if(y=null,p<128){if((c-=1)<0)break;_.push(p)}else if(p<2048){if((c-=2)<0)break;_.push(p>>6|192,63&p|128)}else if(p<65536){if((c-=3)<0)break;_.push(p>>12|224,p>>6&63|128,63&p|128)}else if(p<1114112){if((c-=4)<0)break;_.push(p>>18|240,p>>12&63|128,p>>6&63|128,63&p|128)}else throw Error("Invalid code point")}return _}function Dg(l){let c=[];for(let p=0;p<l.length;++p)c.push(255&l.charCodeAt(p));return c}function jg(l,c){let p,m,y=[];for(let _=0;_<l.length&&!((c-=2)<0);++_)m=(p=l.charCodeAt(_))>>8,y.push(p%256),y.push(m);return y}function Sl(c){return l.toByteArray(Ng(c))}function Ui(l,c,p,m){let y;for(y=0;y<m&&!(y+p>=c.length||y>=l.length);++y)c[y+p]=l[y];return y}function Qe(l,c){return l instanceof c||null!=l&&null!=l.constructor&&null!=l.constructor.name&&l.constructor.name===c.name}let _=function(){let l="0123456789abcdef",c=Array(256);for(let p=0;p<16;++p){let m=16*p;for(let y=0;y<16;++y)c[m+y]=l[p]+l[y]}return c}();function Pt(l){return typeof BigInt>"u"?Wg:l}function Wg(){throw Error("BigInt not supported")}return ti}Ir(e5,{Buffer:()=>ts,INSPECT_MAX_BYTES:()=>ta,default:()=>to,kMaxLength:()=>tl});var e8,e7,e9,tt,ti,tn,to,ts,ta,tl,tu=Ae(()=>{A(),th(),e4(),e8={},e7=!1,e9={},tt=!1,ti={},tn=!1,(to=Yg()).Buffer,to.SlowBuffer,to.INSPECT_MAX_BYTES,to.kMaxLength,ts=to.Buffer,ta=to.INSPECT_MAX_BYTES,tl=to.kMaxLength}),th=Ae(()=>{tu()}),td=O(l=>{A(),th(),e4(),Object.defineProperty(l,"__esModule",{value:!0});var c=class{constructor(l){this.aliasToTopic={},this.max=l}put(l,c){return 0!==c&&!(c>this.max)&&(this.aliasToTopic[c]=l,this.length=Object.keys(this.aliasToTopic).length,!0)}getTopicByAlias(l){return this.aliasToTopic[l]}clear(){this.aliasToTopic={}}};l.default=c}),tp=O((l,c)=>{A(),th(),e4();var p=class extends Error{constructor(l){if(!Array.isArray(l))throw TypeError(`Expected input to be an Array, got ${typeof l}`);let c="";for(let p=0;p<l.length;p++)c+=`    ${l[p].stack}
`;super(c),this.name="AggregateError",this.errors=l}};c.exports={AggregateError:p,ArrayIsArray:l=>Array.isArray(l),ArrayPrototypeIncludes:(l,c)=>l.includes(c),ArrayPrototypeIndexOf:(l,c)=>l.indexOf(c),ArrayPrototypeJoin:(l,c)=>l.join(c),ArrayPrototypeMap:(l,c)=>l.map(c),ArrayPrototypePop:(l,c)=>l.pop(c),ArrayPrototypePush:(l,c)=>l.push(c),ArrayPrototypeSlice:(l,c,p)=>l.slice(c,p),Error,FunctionPrototypeCall:(l,c,...p)=>l.call(c,...p),FunctionPrototypeSymbolHasInstance:(l,c)=>Function.prototype[Symbol.hasInstance].call(l,c),MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties:(l,c)=>Object.defineProperties(l,c),ObjectDefineProperty:(l,c,p)=>Object.defineProperty(l,c,p),ObjectGetOwnPropertyDescriptor:(l,c)=>Object.getOwnPropertyDescriptor(l,c),ObjectKeys:l=>Object.keys(l),ObjectSetPrototypeOf:(l,c)=>Object.setPrototypeOf(l,c),Promise,PromisePrototypeCatch:(l,c)=>l.catch(c),PromisePrototypeThen:(l,c,p)=>l.then(c,p),PromiseReject:l=>Promise.reject(l),PromiseResolve:l=>Promise.resolve(l),ReflectApply:Reflect.apply,RegExpPrototypeTest:(l,c)=>l.test(c),SafeSet:Set,String,StringPrototypeSlice:(l,c,p)=>l.slice(c,p),StringPrototypeToLowerCase:l=>l.toLowerCase(),StringPrototypeToUpperCase:l=>l.toUpperCase(),StringPrototypeTrim:l=>l.trim(),Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet:(l,c,p)=>l.set(c,p),Boolean,Uint8Array}}),tg=O((l,c)=>{A(),th(),e4(),c.exports={format:(l,...c)=>l.replace(/%([sdifj])/g,function(...[l,p]){let m=c.shift();return"f"===p?m.toFixed(6):"j"===p?JSON.stringify(m):"s"===p&&"object"==typeof m?`${m.constructor!==Object?m.constructor.name:""} {}`.trim():m.toString()}),inspect(l){switch(typeof l){case"string":if(l.includes("'")){if(!l.includes('"'))return`"${l}"`;if(!l.includes("`")&&!l.includes("${"))return`\`${l}\``}return`'${l}'`;case"number":return isNaN(l)?"NaN":Object.is(l,-0)?String(l):l;case"bigint":return`${String(l)}n`;case"boolean":case"undefined":return String(l);case"object":return"{}"}}}}),tb=O((l,c)=>{A(),th(),e4();var{format:p,inspect:m}=tg(),{AggregateError:y}=tp(),_=globalThis.AggregateError||y,v=Symbol("kIsNodeError"),k=["string","function","number","object","Function","Object","boolean","bigint","symbol"],T=/^([A-Z][a-z0-9]*)+$/,R={};function Yt(l,c){if(!l)throw new R.ERR_INTERNAL_ASSERTION(c)}function zu(l){let c="",p=l.length,m="-"===l[0]?1:0;for(;p>=m+4;p-=3)c=`_${l.slice(p-3,p)}${c}`;return`${l.slice(0,p)}${c}`}function ob(l,c,m){if("function"==typeof c)return Yt(c.length<=m.length,`Code: ${l}; The provided arguments length (${m.length}) does not match the required ones (${c.length}).`),c(...m);let y=(c.match(/%[dfijoOs]/g)||[]).length;return Yt(y===m.length,`Code: ${l}; The provided arguments length (${m.length}) does not match the required ones (${y}).`),0===m.length?c:p(c,...m)}function we(l,c,p){p||(p=Error);let i=class i extends p{constructor(...p){super(ob(l,c,p))}toString(){return`${this.name} [${l}]: ${this.message}`}};Object.defineProperties(i.prototype,{name:{value:p.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${l}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),i.prototype.code=l,i.prototype[v]=!0,R[l]=i}function Ku(l){let c="__node_internal_"+l.name;return Object.defineProperty(l,"name",{value:c}),l}function ab(l,c){if(l&&c&&l!==c){if(Array.isArray(c.errors))return c.errors.push(l),c;let p=new _([c,l],c.message);return p.code=c.code,p}return l||c}var x=class extends Error{constructor(l="The operation was aborted",c){if(void 0!==c&&"object"!=typeof c)throw new R.ERR_INVALID_ARG_TYPE("options","Object",c);super(l,c),this.code="ABORT_ERR",this.name="AbortError"}};we("ERR_ASSERTION","%s",Error),we("ERR_INVALID_ARG_TYPE",(l,c,p)=>{Yt("string"==typeof l,"'name' must be a string"),Array.isArray(c)||(c=[c]);let y="The ";l.endsWith(" argument")?y+=`${l} `:y+=`"${l}" ${l.includes(".")?"property":"argument"} `,y+="must be ";let _=[],v=[],A=[];for(let l of c)Yt("string"==typeof l,"All expected entries have to be of type string"),k.includes(l)?_.push(l.toLowerCase()):T.test(l)?v.push(l):(Yt("object"!==l,'The value "object" should be written as "Object"'),A.push(l));if(v.length>0){let l=_.indexOf("object");-1!==l&&(_.splice(_,l,1),v.push("Object"))}if(_.length>0){switch(_.length){case 1:y+=`of type ${_[0]}`;break;case 2:y+=`one of type ${_[0]} or ${_[1]}`;break;default:{let l=_.pop();y+=`one of type ${_.join(", ")}, or ${l}`}}(v.length>0||A.length>0)&&(y+=" or ")}if(v.length>0){switch(v.length){case 1:y+=`an instance of ${v[0]}`;break;case 2:y+=`an instance of ${v[0]} or ${v[1]}`;break;default:{let l=v.pop();y+=`an instance of ${v.join(", ")}, or ${l}`}}A.length>0&&(y+=" or ")}switch(A.length){case 0:break;case 1:A[0].toLowerCase()!==A[0]&&(y+="an "),y+=`${A[0]}`;break;case 2:y+=`one of ${A[0]} or ${A[1]}`;break;default:{let l=A.pop();y+=`one of ${A.join(", ")}, or ${l}`}}if(null==p)y+=`. Received ${p}`;else if("function"==typeof p&&p.name)y+=`. Received function ${p.name}`;else if("object"==typeof p){var R;if(null!==(R=p.constructor)&&void 0!==R&&R.name)y+=`. Received an instance of ${p.constructor.name}`;else{let l=m(p,{depth:-1});y+=`. Received ${l}`}}else{let l=m(p,{colors:!1});l.length>25&&(l=`${l.slice(0,25)}...`),y+=`. Received type ${typeof p} (${l})`}return y},TypeError),we("ERR_INVALID_ARG_VALUE",(l,c,p="is invalid")=>{let y=m(c);return y.length>128&&(y=y.slice(0,128)+"..."),`The ${l.includes(".")?"property":"argument"} '${l}' ${p}. Received ${y}`},TypeError),we("ERR_INVALID_RETURN_VALUE",(l,c,p)=>{var m;let y=null!=p&&null!==(m=p.constructor)&&void 0!==m&&m.name?`instance of ${p.constructor.name}`:`type ${typeof p}`;return`Expected ${l} to be returned from the "${c}" function but got ${y}.`},TypeError),we("ERR_MISSING_ARGS",(...l)=>{Yt(l.length>0,"At least one arg needs to be specified");let c,p=l.length;switch(l=(Array.isArray(l)?l:[l]).map(l=>`"${l}"`).join(" or "),p){case 1:c+=`The ${l[0]} argument`;break;case 2:c+=`The ${l[0]} and ${l[1]} arguments`;break;default:{let p=l.pop();c+=`The ${l.join(", ")}, and ${p} arguments`}}return`${c} must be specified`},TypeError),we("ERR_OUT_OF_RANGE",(l,c,p)=>{let y;if(Yt(c,'Missing "range" argument'),Number.isInteger(p)&&Math.abs(p)>4294967296)y=zu(String(p));else if("bigint"==typeof p){y=String(p);let l=BigInt(2)**BigInt(32);(p>l||p<-l)&&(y=zu(y)),y+="n"}else y=m(p);return`The value of "${l}" is out of range. It must be ${c}. Received ${y}`},RangeError),we("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),we("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),we("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),we("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),we("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),we("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),we("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),we("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),we("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),we("ERR_STREAM_WRITE_AFTER_END","write after end",Error),we("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),c.exports={AbortError:x,aggregateTwoErrors:Ku(ab),hideStackFrames:Ku,codes:R}}),tm=O((l,c)=>{A(),th(),e4();var{AbortController:p,AbortSignal:m}="u">typeof self?self:"u">typeof window?window:void 0;c.exports=p,c.exports.AbortSignal=m,c.exports.default=p});function Y(){Y.init.call(this)}function Vi(l){if("function"!=typeof l)throw TypeError('The "listener" argument must be of type Function. Received type '+typeof l)}function sc(l){return void 0===l._maxListeners?Y.defaultMaxListeners:l._maxListeners}function Zu(l,c,p,m){var y,_,v;if(Vi(p),void 0===(_=l._events)?(_=l._events=Object.create(null),l._eventsCount=0):(void 0!==_.newListener&&(l.emit("newListener",c,p.listener?p.listener:p),_=l._events),v=_[c]),void 0===v)v=_[c]=p,++l._eventsCount;else if("function"==typeof v?v=_[c]=m?[p,v]:[v,p]:m?v.unshift(p):v.push(p),(y=sc(l))>0&&v.length>y&&!v.warned){v.warned=!0;var A=Error("Possible EventEmitter memory leak detected. "+v.length+" "+String(c)+" listeners added. Use emitter.setMaxListeners() to increase limit");A.name="MaxListenersExceededWarning",A.emitter=l,A.type=c,A.count=v.length,console&&console.warn&&console.warn(A)}return l}function ub(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0==arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function ec(l,c,p){var m={fired:!1,wrapFn:void 0,target:l,type:c,listener:p},y=ub.bind(m);return y.listener=p,m.wrapFn=y,y}function tc(l,c,p){var m=l._events;if(void 0===m)return[];var y=m[c];return void 0===y?[]:"function"==typeof y?p?[y.listener||y]:[y]:p?function(l){for(var c=Array(l.length),p=0;p<c.length;++p)c[p]=l[p].listener||l[p];return c}(y):oc(y,y.length)}function rc(l){var c=this._events;if(void 0!==c){var p=c[l];if("function"==typeof p)return 1;if(void 0!==p)return p.length}return 0}function oc(l,c){for(var p=Array(c),m=0;m<c;++m)p[m]=l[m];return p}var ty,t_,tE,tS,tA,tI,tO,tk=Ae(()=>{A(),th(),e4(),tS=(tE="object"==typeof Reflect?Reflect:null)&&"function"==typeof tE.apply?tE.apply:function(l,c,p){return Function.prototype.apply.call(l,c,p)},t_=tE&&"function"==typeof tE.ownKeys?tE.ownKeys:Object.getOwnPropertySymbols?function(l){return Object.getOwnPropertyNames(l).concat(Object.getOwnPropertySymbols(l))}:function(l){return Object.getOwnPropertyNames(l)},tA=Number.isNaN||function(l){return l!=l},ty=Y,Y.EventEmitter=Y,Y.prototype._events=void 0,Y.prototype._eventsCount=0,Y.prototype._maxListeners=void 0,tI=10,Object.defineProperty(Y,"defaultMaxListeners",{enumerable:!0,get:function(){return tI},set:function(l){if("number"!=typeof l||l<0||tA(l))throw RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+l+".");tI=l}}),Y.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},Y.prototype.setMaxListeners=function(l){if("number"!=typeof l||l<0||tA(l))throw RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+l+".");return this._maxListeners=l,this},Y.prototype.getMaxListeners=function(){return sc(this)},Y.prototype.emit=function(l){for(var c=[],p=1;p<arguments.length;p++)c.push(arguments[p]);var m="error"===l,y=this._events;if(void 0!==y)m=m&&void 0===y.error;else if(!m)return!1;if(m){if(c.length>0&&(_=c[0]),_ instanceof Error)throw _;var _,v=Error("Unhandled error."+(_?" ("+_.message+")":""));throw v.context=_,v}var A=y[l];if(void 0===A)return!1;if("function"==typeof A)tS(A,this,c);else{var k=A.length,T=oc(A,k);for(p=0;p<k;++p)tS(T[p],this,c)}return!0},Y.prototype.addListener=function(l,c){return Zu(this,l,c,!1)},Y.prototype.on=Y.prototype.addListener,Y.prototype.prependListener=function(l,c){return Zu(this,l,c,!0)},Y.prototype.once=function(l,c){return Vi(c),this.on(l,ec(this,l,c)),this},Y.prototype.prependOnceListener=function(l,c){return Vi(c),this.prependListener(l,ec(this,l,c)),this},Y.prototype.removeListener=function(l,c){var p,m,y,_,v;if(Vi(c),void 0===(m=this._events)||void 0===(p=m[l]))return this;if(p===c||p.listener===c)0==--this._eventsCount?this._events=Object.create(null):(delete m[l],m.removeListener&&this.emit("removeListener",l,p.listener||c));else if("function"!=typeof p){for(y=-1,_=p.length-1;_>=0;_--)if(p[_]===c||p[_].listener===c){v=p[_].listener,y=_;break}if(y<0)return this;0===y?p.shift():function(l,c){for(;c+1<l.length;c++)l[c]=l[c+1];l.pop()}(p,y),1===p.length&&(m[l]=p[0]),void 0!==m.removeListener&&this.emit("removeListener",l,v||c)}return this},Y.prototype.off=Y.prototype.removeListener,Y.prototype.removeAllListeners=function(l){var c,p,m;if(void 0===(p=this._events))return this;if(void 0===p.removeListener)return 0==arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==p[l]&&(0==--this._eventsCount?this._events=Object.create(null):delete p[l]),this;if(0==arguments.length){var y,_=Object.keys(p);for(m=0;m<_.length;++m)"removeListener"!==(y=_[m])&&this.removeAllListeners(y);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(c=p[l]))this.removeListener(l,c);else if(void 0!==c)for(m=c.length-1;m>=0;m--)this.removeListener(l,c[m]);return this},Y.prototype.listeners=function(l){return tc(this,l,!0)},Y.prototype.rawListeners=function(l){return tc(this,l,!1)},Y.listenerCount=function(l,c){return"function"==typeof l.listenerCount?l.listenerCount(c):rc.call(l,c)},Y.prototype.listenerCount=rc,Y.prototype.eventNames=function(){return this._eventsCount>0?t_(this._events):[]},(tO=ty).EventEmitter,tO.defaultMaxListeners,tO.init,tO.listenerCount,tO.EventEmitter,tO.defaultMaxListeners,tO.init,tO.listenerCount}),tT={};Ir(tT,{EventEmitter:()=>tR,default:()=>tO,defaultMaxListeners:()=>tP,init:()=>tC,listenerCount:()=>tx,on:()=>tB,once:()=>tM});var tR,tP,tC,tx,tB,tM,tj=Ae(()=>{A(),th(),e4(),tk(),tk(),tO.once=function(l,c){return new Promise((p,m)=>{let y;function n(...c){void 0!==y&&l.removeListener("error",y),p(c)}"error"!==c&&(y=c=>{l.removeListener(name,n),m(c)},l.once("error",y)),l.once(c,n)})},tO.on=function(l,c){let p=[],m=[],y=null,_=!1,v={async next(){let l=p.shift();if(l)return createIterResult(l,!1);if(y){let l=Promise.reject(y);return y=null,l}return _?createIterResult(void 0,!0):new Promise((l,c)=>m.push({resolve:l,reject:c}))},async return(){for(let p of(l.removeListener(c,a),l.removeListener("error",u),_=!0,m))p.resolve(createIterResult(void 0,!0));return createIterResult(void 0,!0)},throw(p){y=p,l.removeListener(c,a),l.removeListener("error",u)},[Symbol.asyncIterator](){return this}};return l.on(c,a),l.on("error",u),v;function a(...l){let c=m.shift();c?c.resolve(createIterResult(l,!1)):p.push(l)}function u(l){_=!0;let c=m.shift();c?c.reject(l):y=l,v.return()}},{EventEmitter:tR,defaultMaxListeners:tP,init:tC,listenerCount:tx,on:tB,once:tM}=tO}),tU=O((l,c)=>{A(),th(),e4();var p=(tu(),Q(e5)),{format:m,inspect:y}=tg(),{codes:{ERR_INVALID_ARG_TYPE:_}}=tb(),{kResistStopPropagation:v,AggregateError:k,SymbolDispose:T}=tp(),R=globalThis.AbortSignal||tm().AbortSignal,x=globalThis.AbortController||tm().AbortController,B=Object.getPrototypeOf(async function(){}).constructor,U=globalThis.Blob||p.Blob,lc=(l,c)=>{if(void 0!==l&&(null===l||"object"!=typeof l||!("aborted"in l)))throw new _(c,"AbortSignal",l)},Tb=(l,c)=>{if("function"!=typeof l)throw new _(c,"Function",l)};c.exports={AggregateError:k,kEmptyObject:Object.freeze({}),once(l){let c=!1;return function(...p){c||(c=!0,l.apply(this,p))}},createDeferredPromise:function(){let l,c;return{promise:new Promise((p,m)=>{l=p,c=m}),resolve:l,reject:c}},promisify:l=>new Promise((c,p)=>{l((l,...m)=>l?p(l):c(...m))}),debuglog:()=>function(){},format:m,inspect:y,types:{isAsyncFunction:l=>l instanceof B,isArrayBufferView:l=>ArrayBuffer.isView(l)},isBlob:"u">typeof U?function(l){return l instanceof U}:function(l){return!1},deprecate:(l,c)=>l,addAbortListener:(tj(),Q(tT)).addAbortListener||function(l,c){let p;if(void 0===l)throw new _("signal","AbortSignal",l);return lc(l,"signal"),Tb(c,"listener"),l.aborted?queueMicrotask(()=>c()):(l.addEventListener("abort",c,{__proto__:null,once:!0,[v]:!0}),p=()=>{l.removeEventListener("abort",c)}),{__proto__:null,[T](){var l;null===(l=p)||void 0===l||l()}}},AbortSignalAny:R.any||function(l){if(1===l.length)return l[0];let c=new x,i=()=>c.abort();return l.forEach(l=>{lc(l,"signals"),l.addEventListener("abort",i,{once:!0})}),c.signal.addEventListener("abort",()=>{l.forEach(l=>l.removeEventListener("abort",i))},{once:!0}),c.signal}},c.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")}),tN=O((l,c)=>{A(),th(),e4();var{ArrayIsArray:p,ArrayPrototypeIncludes:m,ArrayPrototypeJoin:y,ArrayPrototypeMap:_,NumberIsInteger:v,NumberIsNaN:k,NumberMAX_SAFE_INTEGER:T,NumberMIN_SAFE_INTEGER:R,NumberParseInt:x,ObjectPrototypeHasOwnProperty:B,RegExpPrototypeExec:U,String:N,StringPrototypeToUpperCase:L,StringPrototypeTrim:D}=tp(),{hideStackFrames:W,codes:{ERR_SOCKET_BAD_PORT:V,ERR_INVALID_ARG_TYPE:H,ERR_INVALID_ARG_VALUE:K,ERR_OUT_OF_RANGE:J,ERR_UNKNOWN_SIGNAL:X}}=tb(),{normalizeEncoding:ee}=tU(),{isAsyncFunction:et,isArrayBufferView:er}=tU().types,ei={};function jb(l){return l===(0|l)}function Fb(l){return l===l>>>0}var en=/^[0-7]+$/;function Hb(l,c,p){if(typeof l>"u"&&(l=p),"string"==typeof l){if(null===U(en,l))throw new K(c,l,"must be a 32-bit unsigned integer or an octal string");l=x(l,8)}return ea(l,c),l}var eo=W((l,c,p=R,m=T)=>{if("number"!=typeof l)throw new H(c,"number",l);if(!v(l))throw new J(c,"an integer",l);if(l<p||l>m)throw new J(c,`>= ${p} && <= ${m}`,l)}),es=W((l,c,p=-2147483648,m=2147483647)=>{if("number"!=typeof l)throw new H(c,"number",l);if(!v(l))throw new J(c,"an integer",l);if(l<p||l>m)throw new J(c,`>= ${p} && <= ${m}`,l)}),ea=W((l,c,p=!1)=>{if("number"!=typeof l)throw new H(c,"number",l);if(!v(l))throw new J(c,"an integer",l);let m=p?1:0;if(l<m||l>4294967295)throw new J(c,`>= ${m} && <= 4294967295`,l)});function Rs(l,c){if("string"!=typeof l)throw new H(c,"string",l)}function Kb(l,c,p,m){if("number"!=typeof l)throw new H(c,"number",l);if(null!=p&&l<p||null!=m&&l>m||(null!=p||null!=m)&&k(l))throw new J(c,`${null!=p?`>= ${p}`:""}${null!=p&&null!=m?" && ":""}${null!=m?`<= ${m}`:""}`,l)}var el=W((l,c,p)=>{if(!m(p,l))throw new K(c,l,"must be one of: "+y(_(p,l=>"string"==typeof l?`'${l}'`:N(l)),", "))});function bc(l,c){if("boolean"!=typeof l)throw new H(c,"boolean",l)}function As(l,c,p){return null!=l&&B(l,c)?l[c]:p}var eu=W((l,c,m=null)=>{let y=As(m,"allowArray",!1),_=As(m,"allowFunction",!1);if(!As(m,"nullable",!1)&&null===l||!y&&p(l)||"object"!=typeof l&&(!_||"function"!=typeof l))throw new H(c,"Object",l)}),ed=W((l,c)=>{if(null!=l&&"object"!=typeof l&&"function"!=typeof l)throw new H(c,"a dictionary",l)}),ep=W((l,c,m=0)=>{if(!p(l))throw new H(c,"Array",l);if(l.length<m)throw new K(c,l,`must be longer than ${m}`)});function Jb(l,c){ep(l,c);for(let p=0;p<l.length;p++)Rs(l[p],`${c}[${p}]`)}function Xb(l,c){ep(l,c);for(let p=0;p<l.length;p++)bc(l[p],`${c}[${p}]`)}function Zb(l,c){ep(l,c);for(let p=0;p<l.length;p++){let m=l[p],y=`${c}[${p}]`;if(null==m)throw new H(y,"AbortSignal",m);eb(m,y)}}function ey(l,c="signal"){if(Rs(l,c),void 0===ei[l])throw new X(void 0!==ei[L(l)]?l+" (signals must use all capital letters)":l)}var eg=W((l,c="buffer")=>{if(!er(l))throw new H(c,["Buffer","TypedArray","DataView"],l)});function ry(l,c){let p=ee(c),m=l.length;if("hex"===p&&m%2!=0)throw new K("encoding",c,`is invalid for data of length ${m}`)}function iy(l,c="Port",p=!0){if("number"!=typeof l&&"string"!=typeof l||"string"==typeof l&&0===D(l).length||+l!=+l>>>0||l>65535||0===l&&!p)throw new V(c,l,p);return 0|l}var eb=W((l,c)=>{if(void 0!==l&&(null===l||"object"!=typeof l||!("aborted"in l)))throw new H(c,"AbortSignal",l)}),em=W((l,c)=>{if("function"!=typeof l)throw new H(c,"Function",l)}),e_=W((l,c)=>{if("function"!=typeof l||et(l))throw new H(c,"Function",l)}),eE=W((l,c)=>{if(void 0!==l)throw new H(c,"undefined",l)});function ay(l,c,p){if(!m(p,l))throw new H(c,`('${y(p,"|")}')`,l)}var eS=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function fc(l,c){if(typeof l>"u"||!U(eS,l))throw new K(c,l,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function uy(l){if("string"==typeof l)return fc(l,"hints"),l;if(p(l)){let c=l.length,p="";if(0===c)return p;for(let m=0;m<c;m++){let y=l[m];fc(y,"hints"),p+=y,m!==c-1&&(p+=", ")}return p}throw new K("hints",l,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}c.exports={isInt32:jb,isUint32:Fb,parseFileMode:Hb,validateArray:ep,validateStringArray:Jb,validateBooleanArray:Xb,validateAbortSignalArray:Zb,validateBoolean:bc,validateBuffer:eg,validateDictionary:ed,validateEncoding:ry,validateFunction:em,validateInt32:es,validateInteger:eo,validateNumber:Kb,validateObject:eu,validateOneOf:el,validatePlainFunction:e_,validatePort:iy,validateSignalName:ey,validateString:Rs,validateUint32:ea,validateUndefined:eE,validateUnion:ay,validateAbortSignal:eb,validateLinkHeaderValue:uy}}),tL=O((l,c)=>{A(),th(),e4();var p,m,y=c.exports={};function Cs(){throw Error("setTimeout has not been defined")}function Ps(){throw Error("clearTimeout has not been defined")}function _c(l){if(p===setTimeout)return setTimeout(l,0);if((p===Cs||!p)&&setTimeout)return p=setTimeout,setTimeout(l,0);try{return p(l,0)}catch{try{return p.call(null,l,0)}catch{return p.call(this,l,0)}}}function cy(l){if(m===clearTimeout)return clearTimeout(l);if((m===Ps||!m)&&clearTimeout)return m=clearTimeout,clearTimeout(l);try{return m(l)}catch{try{return m.call(null,l)}catch{return m.call(this,l)}}}!function(){try{p="function"==typeof setTimeout?setTimeout:Cs}catch{p=Cs}try{m="function"==typeof clearTimeout?clearTimeout:Ps}catch{m=Ps}}();var _,v=[],k=!1,T=-1;function fy(){k&&_&&(k=!1,_.length?v=_.concat(v):T=-1,v.length&&mc())}function mc(){if(!k){var l=_c(fy);k=!0;for(var c=v.length;c;){for(_=v,v=[];++T<c;)_&&_[T].run();T=-1,c=v.length}_=null,k=!1,cy(l)}}function vc(l,c){this.fun=l,this.array=c}function wt(){}y.nextTick=function(l){var c=Array(arguments.length-1);if(arguments.length>1)for(var p=1;p<arguments.length;p++)c[p-1]=arguments[p];v.push(new vc(l,c)),1!==v.length||k||_c(mc)},vc.prototype.run=function(){this.fun.apply(null,this.array)},y.title="browser",y.browser=!0,y.env={},y.argv=[],y.version="",y.versions={},y.on=wt,y.addListener=wt,y.once=wt,y.off=wt,y.removeListener=wt,y.removeAllListeners=wt,y.emit=wt,y.prependListener=wt,y.prependOnceListener=wt,y.listeners=function(l){return[]},y.binding=function(l){throw Error("process.binding is not supported")},y.cwd=function(){return"/"},y.chdir=function(l){throw Error("process.chdir is not supported")},y.umask=function(){return 0}}),tD=O((l,c)=>{A(),th(),e4();var{SymbolAsyncIterator:p,SymbolIterator:m,SymbolFor:y}=tp(),_=y("nodejs.stream.destroyed"),v=y("nodejs.stream.errored"),k=y("nodejs.stream.readable"),T=y("nodejs.stream.writable"),R=y("nodejs.stream.disturbed"),x=y("nodejs.webstream.isClosedPromise"),B=y("nodejs.webstream.controllerErrorFunction");function Gi(l,c=!1){var p;return!!(l&&"function"==typeof l.pipe&&"function"==typeof l.on&&(!c||"function"==typeof l.pause&&"function"==typeof l.resume)&&(!l._writableState||(null===(p=l._readableState)||void 0===p?void 0:p.readable)!==!1)&&(!l._writableState||l._readableState))}function Qi(l){var c;return!!(l&&"function"==typeof l.write&&"function"==typeof l.on&&(!l._readableState||(null===(c=l._writableState)||void 0===c?void 0:c.writable)!==!1))}function py(l){return!!(l&&"function"==typeof l.pipe&&l._readableState&&"function"==typeof l.on&&"function"==typeof l.write)}function Xe(l){return l&&(l._readableState||l._writableState||"function"==typeof l.write&&"function"==typeof l.on||"function"==typeof l.pipe&&"function"==typeof l.on)}function Cc(l){return!!(l&&!Xe(l)&&"function"==typeof l.pipeThrough&&"function"==typeof l.getReader&&"function"==typeof l.cancel)}function Pc(l){return!!(l&&!Xe(l)&&"function"==typeof l.getWriter&&"function"==typeof l.abort)}function kc(l){return!!(l&&!Xe(l)&&"object"==typeof l.readable&&"object"==typeof l.writable)}function gy(l){return Cc(l)||Pc(l)||kc(l)}function by(l,c){return null!=l&&(!0===c?"function"==typeof l[p]:!1===c?"function"==typeof l[m]:"function"==typeof l[p]||"function"==typeof l[m])}function Yi(l){if(!Xe(l))return null;let c=l._writableState,p=l._readableState,m=c||p;return!!(l.destroyed||l[_]||null!=m&&m.destroyed)}function Bc(l){if(!Qi(l))return null;if(!0===l.writableEnded)return!0;let c=l._writableState;return(null==c||!c.errored)&&("boolean"!=typeof c?.ended?null:c.ended)}function yy(l,c){if(!Qi(l))return null;if(!0===l.writableFinished)return!0;let p=l._writableState;return(null==p||!p.errored)&&("boolean"!=typeof p?.finished?null:!!(p.finished||!1===c&&!0===p.ended&&0===p.length))}function wy(l){if(!Gi(l))return null;if(!0===l.readableEnded)return!0;let c=l._readableState;return!!c&&!c.errored&&("boolean"!=typeof c?.ended?null:c.ended)}function xc(l,c){if(!Gi(l))return null;let p=l._readableState;return(null==p||!p.errored)&&("boolean"!=typeof p?.endEmitted?null:!!(p.endEmitted||!1===c&&!0===p.ended&&0===p.length))}function Oc(l){return l&&null!=l[k]?l[k]:"boolean"!=typeof l?.readable?null:!Yi(l)&&Gi(l)&&l.readable&&!xc(l)}function Mc(l){return l&&null!=l[T]?l[T]:"boolean"!=typeof l?.writable?null:!Yi(l)&&Qi(l)&&l.writable&&!Bc(l)}function _y(l,c){return Xe(l)?!!Yi(l)||!(c?.readable!==!1&&Oc(l)||c?.writable!==!1&&Mc(l)):null}function my(l){var c,p;return Xe(l)?l.writableErrored?l.writableErrored:null!==(c=null===(p=l._writableState)||void 0===p?void 0:p.errored)&&void 0!==c?c:null:null}function vy(l){var c,p;return Xe(l)?l.readableErrored?l.readableErrored:null!==(c=null===(p=l._readableState)||void 0===p?void 0:p.errored)&&void 0!==c?c:null:null}function Ey(l){if(!Xe(l))return null;if("boolean"==typeof l.closed)return l.closed;let c=l._writableState,p=l._readableState;return"boolean"==typeof c?.closed||"boolean"==typeof p?.closed?c?.closed||p?.closed:"boolean"==typeof l._closed&&Lc(l)?l._closed:null}function Lc(l){return"boolean"==typeof l._closed&&"boolean"==typeof l._defaultKeepAlive&&"boolean"==typeof l._removedConnection&&"boolean"==typeof l._removedContLen}function qc(l){return"boolean"==typeof l._sent100&&Lc(l)}function Sy(l){var c;return"boolean"==typeof l._consuming&&"boolean"==typeof l._dumped&&(null===(c=l.req)||void 0===c?void 0:c.upgradeOrConnect)===void 0}function Ay(l){if(!Xe(l))return null;let c=l._writableState,p=l._readableState,m=c||p;return!m&&qc(l)||!!(m&&m.autoDestroy&&m.emitClose&&!1===m.closed)}function Iy(l){var c;return!!(l&&(null!==(c=l[R])&&void 0!==c?c:l.readableDidRead||l.readableAborted))}function Ty(l){var c,p,m,y,_,A,k,T,R,x;return!!(l&&(null!==(c=null!==(p=null!==(m=null!==(y=null!==(_=null!==(A=l[v])&&void 0!==A?A:l.readableErrored)&&void 0!==_?_:l.writableErrored)&&void 0!==y?y:null===(k=l._readableState)||void 0===k?void 0:k.errorEmitted)&&void 0!==m?m:null===(T=l._writableState)||void 0===T?void 0:T.errorEmitted)&&void 0!==p?p:null===(R=l._readableState)||void 0===R?void 0:R.errored)&&void 0!==c?c:!(null===(x=l._writableState)||void 0===x)&&x.errored))}c.exports={isDestroyed:Yi,kIsDestroyed:_,isDisturbed:Iy,kIsDisturbed:R,isErrored:Ty,kIsErrored:v,isReadable:Oc,kIsReadable:k,kIsClosedPromise:x,kControllerErrorFunction:B,kIsWritable:T,isClosed:Ey,isDuplexNodeStream:py,isFinished:_y,isIterable:by,isReadableNodeStream:Gi,isReadableStream:Cc,isReadableEnded:wy,isReadableFinished:xc,isReadableErrored:vy,isNodeStream:Xe,isWebStream:gy,isWritable:Mc,isWritableNodeStream:Qi,isWritableStream:Pc,isWritableEnded:Bc,isWritableFinished:yy,isWritableErrored:my,isServerRequest:Sy,isServerResponse:qc,willEmitClose:Ay,isTransformStream:kc}}),tF=O((l,c)=>{A(),th(),e4();var p,m=tL(),{AbortError:y,codes:_}=tb(),{ERR_INVALID_ARG_TYPE:v,ERR_STREAM_PREMATURE_CLOSE:k}=_,{kEmptyObject:T,once:R}=tU(),{validateAbortSignal:x,validateFunction:B,validateObject:U,validateBoolean:N}=tN(),{Promise:L,PromisePrototypeThen:D,SymbolDispose:W}=tp(),{isClosed:V,isReadable:H,isReadableNodeStream:K,isReadableStream:J,isReadableFinished:X,isReadableErrored:ee,isWritable:et,isWritableNodeStream:er,isWritableStream:ei,isWritableFinished:en,isWritableErrored:eo,isNodeStream:es,willEmitClose:ea,kIsClosedPromise:el}=tD();function Fy(l){return l.setHeader&&"function"==typeof l.abort}var Ls=()=>{};function Gc(l,c,_){var A,N;if(2==arguments.length?(_=c,c=T):null==c?c=T:U(c,"options"),B(_,"callback"),x(c.signal,"options.signal"),_=R(_),J(l)||ei(l))return Wy(l,c,_);if(!es(l))throw new v("stream",["ReadableStream","WritableStream","Stream"],l);let L=null!==(A=c.readable)&&void 0!==A?A:K(l),D=null!==(N=c.writable)&&void 0!==N?N:er(l),el=l._writableState,eu=l._readableState,f=()=>{l.writable||g()},ed=ea(l)&&K(l)===L&&er(l)===D,ep=en(l,!1),g=()=>{ep=!0,l.destroyed&&(ed=!1),ed&&(!l.readable||L)||L&&!eg||_.call(l)},eg=X(l,!1),E=()=>{eg=!0,l.destroyed&&(ed=!1),ed&&(!l.writable||D)||D&&!ep||_.call(l)},w=c=>{_.call(l,c)},eb=V(l),I=()=>{eb=!0;let c=eo(l)||ee(l);return c&&"boolean"!=typeof c?_.call(l,c):L&&!eg&&K(l,!0)&&!X(l,!1)||D&&!ep&&!en(l,!1)?_.call(l,new k):void _.call(l)},P=()=>{eb=!0;let c=eo(l)||ee(l);if(c&&"boolean"!=typeof c)return _.call(l,c);_.call(l)},C=()=>{l.req.on("finish",g)};Fy(l)?(l.on("complete",g),ed||l.on("abort",I),l.req?C():l.on("request",C)):D&&!el&&(l.on("end",f),l.on("close",f)),ed||"boolean"!=typeof l.aborted||l.on("aborted",I),l.on("end",E),l.on("finish",g),!1!==c.error&&l.on("error",w),l.on("close",I),eb?m.nextTick(I):null!=el&&el.errorEmitted||null!=eu&&eu.errorEmitted?ed||m.nextTick(P):(!L&&(!ed||H(l))&&(ep||!1===et(l))||!D&&(!ed||et(l))&&(eg||!1===H(l))||eu&&l.req&&l.aborted)&&m.nextTick(P);let M=()=>{_=Ls,l.removeListener("aborted",I),l.removeListener("complete",g),l.removeListener("abort",I),l.removeListener("request",C),l.req&&l.req.removeListener("finish",g),l.removeListener("end",f),l.removeListener("close",f),l.removeListener("finish",g),l.removeListener("end",E),l.removeListener("error",w),l.removeListener("close",I)};if(c.signal&&!eb){let q=()=>{let p=_;M(),p.call(l,new y(void 0,{cause:c.signal.reason}))};if(c.signal.aborted)m.nextTick(q);else{let m=(p=p||tU().addAbortListener)(c.signal,q),y=_;_=R((...c)=>{m[W](),y.apply(l,c)})}}return M}function Wy(l,c,_){let v=!1,A=Ls;if(c.signal){if(A=()=>{v=!0,_.call(l,new y(void 0,{cause:c.signal.reason}))},c.signal.aborted)m.nextTick(A);else{let m=(p=p||tU().addAbortListener)(c.signal,A),y=_;_=R((...c)=>{m[W](),y.apply(l,c)})}}let o=(...c)=>{v||m.nextTick(()=>_.apply(l,c))};return D(l[el].promise,o,o),Ls}function $y(l,c){var p;let m=!1;return null===c&&(c=T),null!==(p=c)&&void 0!==p&&p.cleanup&&(N(c.cleanup,"cleanup"),m=c.cleanup),new L((p,y)=>{let _=Gc(l,c,l=>{m&&_(),l?y(l):p()})})}c.exports=Gc,c.exports.finished=$y}),tW=O((l,c)=>{A(),th(),e4();var p=tL(),{aggregateTwoErrors:m,codes:{ERR_MULTIPLE_CALLBACK:y},AbortError:_}=tb(),{Symbol:v}=tp(),{kIsDestroyed:k,isDestroyed:T,isFinished:R,isServerRequest:x}=tD(),B=v("kDestroy"),U=v("kConstruct");function Zc(l,c,p){l&&(l.stack,c&&!c.errored&&(c.errored=l),p&&!p.errored&&(p.errored=l))}function Jy(l,c){let p=this._readableState,y=this._writableState,_=y||p;return null!=y&&y.destroyed||null!=p&&p.destroyed?"function"==typeof c&&c():(Zc(l,y,p),y&&(y.destroyed=!0),p&&(p.destroyed=!0),_.constructed?Qc(this,l,c):this.once(B,function(p){Qc(this,m(p,l),c)})),this}function Qc(l,c,m){let y=!1;function n(c){if(y)return;y=!0;let _=l._readableState,v=l._writableState;Zc(c,v,_),v&&(v.closed=!0),_&&(_.closed=!0),"function"==typeof m&&m(c),c?p.nextTick(Xy,l,c):p.nextTick(ef,l)}try{l._destroy(c||null,n)}catch(l){n(l)}}function Xy(l,c){Ns(l,c),ef(l)}function ef(l){let c=l._readableState,p=l._writableState;p&&(p.closeEmitted=!0),c&&(c.closeEmitted=!0),(null!=p&&p.emitClose||null!=c&&c.emitClose)&&l.emit("close")}function Ns(l,c){let p=l._readableState,m=l._writableState;null!=m&&m.errorEmitted||null!=p&&p.errorEmitted||(m&&(m.errorEmitted=!0),p&&(p.errorEmitted=!0),l.emit("error",c))}function Zy(){let l=this._readableState,c=this._writableState;l&&(l.constructed=!0,l.closed=!1,l.closeEmitted=!1,l.destroyed=!1,l.errored=null,l.errorEmitted=!1,l.reading=!1,l.ended=!1===l.readable,l.endEmitted=!1===l.readable),c&&(c.constructed=!0,c.destroyed=!1,c.closed=!1,c.closeEmitted=!1,c.errored=null,c.errorEmitted=!1,c.finalCalled=!1,c.prefinished=!1,c.ended=!1===c.writable,c.ending=!1===c.writable,c.finished=!1===c.writable)}function Ds(l,c,m){let y=l._readableState,_=l._writableState;if(null!=_&&_.destroyed||null!=y&&y.destroyed)return this;null!=y&&y.autoDestroy||null!=_&&_.autoDestroy?l.destroy(c):c&&(c.stack,_&&!_.errored&&(_.errored=c),y&&!y.errored&&(y.errored=c),m?p.nextTick(Ns,l,c):Ns(l,c))}function ew(l,c){if("function"!=typeof l._construct)return;let m=l._readableState,y=l._writableState;m&&(m.constructed=!1),y&&(y.constructed=!1),l.once(U,c),l.listenerCount(U)>1||p.nextTick(tw,l)}function tw(l){let c=!1;function r(m){if(c){Ds(l,m??new y);return}c=!0;let _=l._readableState,v=l._writableState,A=v||_;_&&(_.constructed=!0),v&&(v.constructed=!0),A.destroyed?l.emit(B,m):m?Ds(l,m,!0):p.nextTick(rw,l)}try{l._construct(l=>{p.nextTick(r,l)})}catch(l){p.nextTick(r,l)}}function rw(l){l.emit(U)}function Yc(l){return l?.setHeader&&"function"==typeof l.abort}function tf(l){l.emit("close")}function iw(l,c){l.emit("error",c),p.nextTick(tf,l)}function nw(l,c){!l||T(l)||(c||R(l)||(c=new _),x(l)?(l.socket=null,l.destroy(c)):Yc(l)?l.abort():Yc(l.req)?l.req.abort():"function"==typeof l.destroy?l.destroy(c):"function"==typeof l.close?l.close():c?p.nextTick(iw,l,c):p.nextTick(tf,l),l.destroyed||(l[k]=!0))}c.exports={construct:ew,destroyer:nw,destroy:Jy,undestroy:Zy,errorOrDestroy:Ds}}),t$=O((l,c)=>{A(),th(),e4();var{ArrayIsArray:p,ObjectSetPrototypeOf:m}=tp(),{EventEmitter:y}=(tj(),Q(tT));function Xi(l){y.call(this,l)}function js(l,c,m){if("function"==typeof l.prependListener)return l.prependListener(c,m);l._events&&l._events[c]?p(l._events[c])?l._events[c].unshift(m):l._events[c]=[m,l._events[c]]:l.on(c,m)}m(Xi.prototype,y.prototype),m(Xi,y),Xi.prototype.pipe=function(l,c){let p=this;function i(c){l.writable&&!1===l.write(c)&&p.pause&&p.pause()}function n(){p.readable&&p.resume&&p.resume()}p.on("data",i),l.on("drain",n),l._isStdio||c&&!1===c.end||(p.on("end",s),p.on("close",a));let m=!1;function s(){m||(m=!0,l.end())}function a(){m||(m=!0,"function"==typeof l.destroy&&l.destroy())}function u(l){f(),0===y.listenerCount(this,"error")&&this.emit("error",l)}function f(){p.removeListener("data",i),l.removeListener("drain",n),p.removeListener("end",s),p.removeListener("close",a),p.removeListener("error",u),l.removeListener("error",u),p.removeListener("end",f),p.removeListener("close",f),l.removeListener("close",f)}return js(p,"error",u),js(l,"error",u),p.on("end",f),p.on("close",f),l.on("close",f),l.emit("pipe",p),l},c.exports={Stream:Xi,prependListener:js}}),tq=O((l,c)=>{A(),th(),e4();var p,{SymbolDispose:m}=tp(),{AbortError:y,codes:_}=tb(),{isNodeStream:v,isWebStream:k,kControllerErrorFunction:T}=tD(),R=tF(),{ERR_INVALID_ARG_TYPE:x}=_,fw=(l,c)=>{if("object"!=typeof l||!("aborted"in l))throw new x(c,"AbortSignal",l)};c.exports.addAbortSignal=function(l,p){if(fw(l,"signal"),!v(p)&&!k(p))throw new x("stream",["ReadableStream","WritableStream","Stream"],p);return c.exports.addAbortSignalNoValidate(l,p)},c.exports.addAbortSignalNoValidate=function(l,c){if("object"!=typeof l||!("aborted"in l))return c;let _=v(c)?()=>{c.destroy(new y(void 0,{cause:l.reason}))}:()=>{c[T](new y(void 0,{cause:l.reason}))};return l.aborted?_():R(c,(p=p||tU().addAbortListener)(l,_)[m]),c}}),tV=O((l,c)=>{A(),th(),e4();var{StringPrototypeSlice:p,SymbolIterator:m,TypedArrayPrototypeSet:y,Uint8Array:_}=tp(),{Buffer:v}=(tu(),Q(e5)),{inspect:k}=tU();c.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(l){let c={data:l,next:null};this.length>0?this.tail.next=c:this.head=c,this.tail=c,++this.length}unshift(l){let c={data:l,next:this.head};0===this.length&&(this.tail=c),this.head=c,++this.length}shift(){if(0===this.length)return;let l=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,l}clear(){this.head=this.tail=null,this.length=0}join(l){if(0===this.length)return"";let c=this.head,p=""+c.data;for(;null!==(c=c.next);)p+=l+c.data;return p}concat(l){if(0===this.length)return v.alloc(0);let c=v.allocUnsafe(l>>>0),p=this.head,m=0;for(;p;)y(c,p.data,m),m+=p.data.length,p=p.next;return c}consume(l,c){let p=this.head.data;if(l<p.length){let c=p.slice(0,l);return this.head.data=p.slice(l),c}return l===p.length?this.shift():c?this._getString(l):this._getBuffer(l)}first(){return this.head.data}*[m](){for(let l=this.head;l;l=l.next)yield l.data}_getString(l){let c="",m=this.head,y=0;do{let _=m.data;if(l>_.length)c+=_,l-=_.length;else{l===_.length?(c+=_,++y,m.next?this.head=m.next:this.head=this.tail=null):(c+=p(_,0,l),this.head=m,m.data=p(_,l));break}++y}while(null!==(m=m.next));return this.length-=y,c}_getBuffer(l){let c=v.allocUnsafe(l),p=l,m=this.head,A=0;do{let v=m.data;if(l>v.length)y(c,v,p-l),l-=v.length;else{l===v.length?(y(c,v,p-l),++A,m.next?this.head=m.next:this.head=this.tail=null):(y(c,new _(v.buffer,v.byteOffset,l),p-l),this.head=m,m.data=v.slice(l));break}++A}while(null!==(m=m.next));return this.length-=A,c}[Symbol.for("nodejs.util.inspect.custom")](l,c){return k(this,{...c,depth:0,customInspect:!1})}}}),tH=O((l,c)=>{A(),th(),e4();var{MathFloor:p,NumberIsInteger:m}=tp(),{validateInteger:y}=tN(),{ERR_INVALID_ARG_VALUE:_}=tb().codes,v=16384,k=16;function _w(l,c,p){return null!=l.highWaterMark?l.highWaterMark:c?l[p]:null}function pf(l){return l?k:v}function mw(l,c){y(c,"value",0),l?k=c:v=c}function vw(l,c,y,v){let A=_w(c,v,y);if(null!=A){if(!m(A)||A<0)throw new _(v?`options.${y}`:"options.highWaterMark",A);return p(A)}return pf(l.objectMode)}c.exports={getHighWaterMark:vw,getDefaultHighWaterMark:pf,setDefaultHighWaterMark:mw}}),tQ=O((l,c)=>{A(),th(),e4();var p=(tu(),Q(e5)),m=p.Buffer;function bf(l,c){for(var p in l)c[p]=l[p]}function tr(l,c,p){return m(l,c,p)}m.from&&m.alloc&&m.allocUnsafe&&m.allocUnsafeSlow?c.exports=p:(bf(p,l),l.Buffer=tr),tr.prototype=Object.create(m.prototype),bf(m,tr),tr.from=function(l,c,p){if("number"==typeof l)throw TypeError("Argument must not be a number");return m(l,c,p)},tr.alloc=function(l,c,p){if("number"!=typeof l)throw TypeError("Argument must be a number");var y=m(l);return void 0!==c?"string"==typeof p?y.fill(c,p):y.fill(c):y.fill(0),y},tr.allocUnsafe=function(l){if("number"!=typeof l)throw TypeError("Argument must be a number");return m(l)},tr.allocUnsafeSlow=function(l){if("number"!=typeof l)throw TypeError("Argument must be a number");return p.SlowBuffer(l)}}),tz=O(l=>{A(),th(),e4();var c=tQ().Buffer,p=c.isEncoding||function(l){switch((l=""+l)&&l.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function Ew(l){if(!l)return"utf8";for(var c;;)switch(l){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return l;default:if(c)return;l=(""+l).toLowerCase(),c=!0}}function Sw(l){var m=Ew(l);if("string"!=typeof m&&(c.isEncoding===p||!p(l)))throw Error("Unknown encoding: "+l);return m||l}function ui(l){var p;switch(this.encoding=Sw(l),this.encoding){case"utf16le":this.text=Pw,this.end=kw,p=4;break;case"utf8":this.fillLast=Tw,p=4;break;case"base64":this.text=Bw,this.end=xw,p=3;break;default:this.write=Ow,this.end=Mw;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=c.allocUnsafe(p)}function Hs(l){return l<=127?0:l>>5==6?2:l>>4==14?3:l>>3==30?4:l>>6==2?-1:-2}function Aw(l,c,p){var m=c.length-1;if(m<p)return 0;var y=Hs(c[m]);return y>=0?(y>0&&(l.lastNeed=y-1),y):--m<p||-2===y?0:(y=Hs(c[m]))>=0?(y>0&&(l.lastNeed=y-2),y):--m<p||-2===y?0:(y=Hs(c[m]))>=0?(y>0&&(2===y?y=0:l.lastNeed=y-3),y):0}function Iw(l,c,p){if((192&c[0])!=128)return l.lastNeed=0,"";if(l.lastNeed>1&&c.length>1){if((192&c[1])!=128)return l.lastNeed=1,"";if(l.lastNeed>2&&c.length>2&&(192&c[2])!=128)return l.lastNeed=2,""}}function Tw(l){var c=this.lastTotal-this.lastNeed,p=Iw(this,l,c);return void 0!==p?p:this.lastNeed<=l.length?(l.copy(this.lastChar,c,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):void(l.copy(this.lastChar,c,0,l.length),this.lastNeed-=l.length)}function Rw(l,c){var p=Aw(this,l,c);if(!this.lastNeed)return l.toString("utf8",c);this.lastTotal=p;var m=l.length-(p-this.lastNeed);return l.copy(this.lastChar,0,m),l.toString("utf8",c,m)}function Cw(l){var c=l&&l.length?this.write(l):"";return this.lastNeed?c+"":c}function Pw(l,c){if((l.length-c)%2==0){var p=l.toString("utf16le",c);if(p){var m=p.charCodeAt(p.length-1);if(m>=55296&&m<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=l[l.length-2],this.lastChar[1]=l[l.length-1],p.slice(0,-1)}return p}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=l[l.length-1],l.toString("utf16le",c,l.length-1)}function kw(l){var c=l&&l.length?this.write(l):"";if(this.lastNeed){var p=this.lastTotal-this.lastNeed;return c+this.lastChar.toString("utf16le",0,p)}return c}function Bw(l,c){var p=(l.length-c)%3;return 0===p?l.toString("base64",c):(this.lastNeed=3-p,this.lastTotal=3,1===p?this.lastChar[0]=l[l.length-1]:(this.lastChar[0]=l[l.length-2],this.lastChar[1]=l[l.length-1]),l.toString("base64",c,l.length-p))}function xw(l){var c=l&&l.length?this.write(l):"";return this.lastNeed?c+this.lastChar.toString("base64",0,3-this.lastNeed):c}function Ow(l){return l.toString(this.encoding)}function Mw(l){return l&&l.length?this.write(l):""}l.StringDecoder=ui,ui.prototype.write=function(l){var c,p;if(0===l.length)return"";if(this.lastNeed){if(void 0===(c=this.fillLast(l)))return"";p=this.lastNeed,this.lastNeed=0}else p=0;return p<l.length?c?c+this.text(l,p):this.text(l,p):c||""},ui.prototype.end=Cw,ui.prototype.text=Rw,ui.prototype.fillLast=function(l){if(this.lastNeed<=l.length)return l.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);l.copy(this.lastChar,this.lastTotal-this.lastNeed,0,l.length),this.lastNeed-=l.length}}),tK=O((l,c)=>{A(),th(),e4();var p=tL(),{PromisePrototypeThen:m,SymbolAsyncIterator:y,SymbolIterator:_}=tp(),{Buffer:v}=(tu(),Q(e5)),{ERR_INVALID_ARG_TYPE:k,ERR_STREAM_NULL_VALUES:T}=tb().codes;function Dw(l,c,A){let R,x;if("string"==typeof c||c instanceof v)return new l({objectMode:!0,...A,read(){this.push(c),this.push(null)}});if(c&&c[y])x=!0,R=c[y]();else if(c&&c[_])x=!1,R=c[_]();else throw new k("iterable",["Iterable"],c);let B=new l({objectMode:!0,highWaterMark:1,...A}),U=!1;async function a(l){let c=null!=l,p="function"==typeof R.throw;if(c&&p){let{value:c,done:p}=await R.throw(l);if(await c,p)return}if("function"==typeof R.return){let{value:l}=await R.return();await l}}async function u(){for(;;){try{let{value:l,done:c}=x?await R.next():R.next();if(c)B.push(null);else{let c=l&&"function"==typeof l.then?await l:l;if(null===c)throw U=!1,new T;if(B.push(c))continue;U=!1}}catch(l){B.destroy(l)}break}}return B._read=function(){U||(U=!0,u())},B._destroy=function(l,c){m(a(l),()=>p.nextTick(c,l),m=>p.nextTick(c,m||l))},B}c.exports=Dw}),tY=O((l,c)=>{A(),th(),e4();var p,m=tL(),{ArrayPrototypeIndexOf:y,NumberIsInteger:_,NumberIsNaN:v,NumberParseInt:k,ObjectDefineProperties:T,ObjectKeys:R,ObjectSetPrototypeOf:x,Promise:B,SafeSet:U,SymbolAsyncDispose:N,SymbolAsyncIterator:L,Symbol:D}=tp();c.exports=F,F.ReadableState=an;var{EventEmitter:W}=(tj(),Q(tT)),{Stream:V,prependListener:H}=t$(),{Buffer:K}=(tu(),Q(e5)),{addAbortSignal:J}=tq(),X=tF(),ee=tU().debuglog("stream",l=>{ee=l}),et=tV(),er=tW(),{getHighWaterMark:ei,getDefaultHighWaterMark:en}=tH(),{aggregateTwoErrors:eo,codes:{ERR_INVALID_ARG_TYPE:es,ERR_METHOD_NOT_IMPLEMENTED:ea,ERR_OUT_OF_RANGE:el,ERR_STREAM_PUSH_AFTER_EOF:eu,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:ed},AbortError:ep}=tb(),{validateObject:eg}=tN(),eb=D("kPaused"),{StringDecoder:em}=tz(),e_=tK();x(F.prototype,V.prototype),x(F,V);var Gs=()=>{},{errorOrDestroy:eE}=er;function de(l){return{enumerable:!1,get(){return(this.state&l)!=0},set(c){c?this.state|=l:this.state&=~l}}}function an(l,c,p){"boolean"!=typeof p&&(p=c instanceof tJ()),this.state=6192,l&&l.objectMode&&(this.state|=1),p&&l&&l.readableObjectMode&&(this.state|=1),this.highWaterMark=l?ei(this,l,"readableHighWaterMark",p):en(!1),this.buffer=new et,this.length=0,this.pipes=[],this.flowing=null,this[eb]=null,l&&!1===l.emitClose&&(this.state&=-2049),l&&!1===l.autoDestroy&&(this.state&=-4097),this.errored=null,this.defaultEncoding=l&&l.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,l&&l.encoding&&(this.decoder=new em(l.encoding),this.encoding=l.encoding)}function F(l){if(!(this instanceof F))return new F(l);let c=this instanceof tJ();this._readableState=new an(l,this,c),l&&("function"==typeof l.read&&(this._read=l.read),"function"==typeof l.destroy&&(this._destroy=l.destroy),"function"==typeof l.construct&&(this._construct=l.construct),l.signal&&!c&&J(l.signal,this)),V.call(this,l),er.construct(this,()=>{this._readableState.needReadable&&on(this,this._readableState)})}function qf(l,c,p,m){ee("readableAddChunk",c);let y=l._readableState,_;if((1&y.state)==0&&("string"==typeof c?(p=p||y.defaultEncoding,y.encoding!==p&&(m&&y.encoding?c=K.from(c,p).toString(y.encoding):(c=K.from(c,p),p=""))):c instanceof K?p="":V._isUint8Array(c)?(c=V._uint8ArrayToBuffer(c),p=""):null!=c&&(_=new es("chunk",["string","Buffer","Uint8Array"],c))),_)eE(l,_);else if(null===c)y.state&=-9,m_(l,y);else if((1&y.state)!=0||c&&c.length>0){if(m){if((4&y.state)!=0)eE(l,new ed);else{if(y.destroyed||y.errored)return!1;Qs(l,y,c,!0)}}else if(y.ended)eE(l,new eu);else{if(y.destroyed||y.errored)return!1;y.state&=-9,y.decoder&&!p?(c=y.decoder.write(c),y.objectMode||0!==c.length?Qs(l,y,c,!1):on(l,y)):Qs(l,y,c,!1)}}else m||(y.state&=-9,on(l,y));return!y.ended&&(y.length<y.highWaterMark||0===y.length)}function Qs(l,c,p,m){c.flowing&&0===c.length&&!c.sync&&l.listenerCount("data")>0?((65536&c.state)!=0?c.awaitDrainWriters.clear():c.awaitDrainWriters=null,c.dataEmitted=!0,l.emit("data",p)):(c.length+=c.objectMode?1:p.length,m?c.buffer.unshift(p):c.buffer.push(p),(64&c.state)!=0&&ln(l)),on(l,c)}function __(l){if(l>1073741824)throw new el("size","<= 1GiB",l);return l--,l|=l>>>1,l|=l>>>2,l|=l>>>4,l|=l>>>8,l|=l>>>16,++l}function Rf(l,c){return l<=0||0===c.length&&c.ended?0:(1&c.state)!=0?1:v(l)?c.flowing&&c.length?c.buffer.first().length:c.length:l<=c.length?l:c.ended?c.length:0}function m_(l,c){if(ee("onEofChunk"),!c.ended){if(c.decoder){let l=c.decoder.end();l&&l.length&&(c.buffer.push(l),c.length+=c.objectMode?1:l.length)}c.ended=!0,c.sync?ln(l):(c.needReadable=!1,c.emittedReadable=!0,Uf(l))}}function ln(l){let c=l._readableState;ee("emitReadable",c.needReadable,c.emittedReadable),c.needReadable=!1,c.emittedReadable||(ee("emitReadable",c.flowing),c.emittedReadable=!0,m.nextTick(Uf,l))}function Uf(l){let c=l._readableState;ee("emitReadable_",c.destroyed,c.length,c.ended),!c.destroyed&&!c.errored&&(c.length||c.ended)&&(l.emit("readable"),c.emittedReadable=!1),c.needReadable=!c.flowing&&!c.ended&&c.length<=c.highWaterMark,Df(l)}function on(l,c){!c.readingMore&&c.constructed&&(c.readingMore=!0,m.nextTick(v_,l,c))}function v_(l,c){for(;!c.reading&&!c.ended&&(c.length<c.highWaterMark||c.flowing&&0===c.length);){let p=c.length;if(ee("maybeReadMore read 0"),l.read(0),p===c.length)break}c.readingMore=!1}function E_(l,c){return function(){let p=l._readableState;p.awaitDrainWriters===c?(ee("pipeOnDrain",1),p.awaitDrainWriters=null):p.multiAwaitDrain&&(ee("pipeOnDrain",p.awaitDrainWriters.size),p.awaitDrainWriters.delete(c)),(!p.awaitDrainWriters||0===p.awaitDrainWriters.size)&&l.listenerCount("data")&&l.resume()}}function Nf(l){let c=l._readableState;c.readableListening=l.listenerCount("readable")>0,c.resumeScheduled&&!1===c[eb]?c.flowing=!0:l.listenerCount("data")>0?l.resume():c.readableListening||(c.flowing=null)}function S_(l){ee("readable nexttick read 0"),l.read(0)}function A_(l,c){c.resumeScheduled||(c.resumeScheduled=!0,m.nextTick(I_,l,c))}function I_(l,c){ee("resume",c.reading),c.reading||l.read(0),c.resumeScheduled=!1,l.emit("resume"),Df(l),c.flowing&&!c.reading&&l.read(0)}function Df(l){let c=l._readableState;for(ee("flow",c.flowing);c.flowing&&null!==l.read(););}function jf(l,c){"function"!=typeof l.read&&(l=F.wrap(l,{objectMode:!0}));let p=T_(l,c);return p.stream=l,p}async function*T_(l,c){let p=Gs;function i(c){this===l?(p(),p=Gs):p=c}l.on("readable",i);let m,y=X(l,{writable:!1},l=>{m=l?eo(m,l):null,p(),p=Gs});try{for(;;){let c=l.destroyed?null:l.read();if(null!==c)yield c;else{if(m)throw m;if(null===m)return;await new B(i)}}}catch(l){throw m=eo(m,l)}finally{(m||c?.destroyOnReturn!==!1)&&(void 0===m||l._readableState.autoDestroy)?er.destroyer(l,null):(l.off("readable",i),y())}}function Ff(l,c){let p;return 0===c.length?null:(c.objectMode?p=c.buffer.shift():!l||l>=c.length?(p=c.decoder?c.buffer.join(""):1===c.buffer.length?c.buffer.first():c.buffer.concat(c.length),c.buffer.clear()):p=c.buffer.consume(l,c.decoder),p)}function Ys(l){let c=l._readableState;ee("endReadable",c.endEmitted),c.endEmitted||(c.ended=!0,m.nextTick(R_,c,l))}function R_(l,c){if(ee("endReadableNT",l.endEmitted,l.length),!l.errored&&!l.closeEmitted&&!l.endEmitted&&0===l.length){if(l.endEmitted=!0,c.emit("end"),c.writable&&!1===c.allowHalfOpen)m.nextTick(C_,c);else if(l.autoDestroy){let l=c._writableState;(!l||l.autoDestroy&&(l.finished||!1===l.writable))&&c.destroy()}}}function C_(l){!l.writable||l.writableEnded||l.destroyed||l.end()}function Wf(){return void 0===p&&(p={}),p}T(an.prototype,{objectMode:de(1),ended:de(2),endEmitted:de(4),reading:de(8),constructed:de(16),sync:de(32),needReadable:de(64),emittedReadable:de(128),readableListening:de(256),resumeScheduled:de(512),errorEmitted:de(1024),emitClose:de(2048),autoDestroy:de(4096),destroyed:de(8192),closed:de(16384),closeEmitted:de(32768),multiAwaitDrain:de(65536),readingMore:de(131072),dataEmitted:de(262144)}),F.prototype.destroy=er.destroy,F.prototype._undestroy=er.undestroy,F.prototype._destroy=function(l,c){c(l)},F.prototype[W.captureRejectionSymbol]=function(l){this.destroy(l)},F.prototype[N]=function(){let l;return this.destroyed||(l=this.readableEnded?null:new ep,this.destroy(l)),new B((c,p)=>X(this,m=>m&&m!==l?p(m):c(null)))},F.prototype.push=function(l,c){return qf(this,l,c,!1)},F.prototype.unshift=function(l,c){return qf(this,l,c,!0)},F.prototype.isPaused=function(){let l=this._readableState;return!0===l[eb]||!1===l.flowing},F.prototype.setEncoding=function(l){let c=new em(l);this._readableState.decoder=c,this._readableState.encoding=this._readableState.decoder.encoding;let p=this._readableState.buffer,m="";for(let l of p)m+=c.write(l);return p.clear(),""!==m&&p.push(m),this._readableState.length=m.length,this},F.prototype.read=function(l){let c;ee("read",l),void 0===l?l=NaN:_(l)||(l=k(l,10));let p=this._readableState,m=l;if(l>p.highWaterMark&&(p.highWaterMark=__(l)),0!==l&&(p.state&=-129),0===l&&p.needReadable&&((0!==p.highWaterMark?p.length>=p.highWaterMark:p.length>0)||p.ended))return ee("read: emitReadable",p.length,p.ended),0===p.length&&p.ended?Ys(this):ln(this),null;if(0===(l=Rf(l,p))&&p.ended)return 0===p.length&&Ys(this),null;let y=(64&p.state)!=0;if(ee("need readable",y),(0===p.length||p.length-l<p.highWaterMark)&&ee("length less than watermark",y=!0),p.ended||p.reading||p.destroyed||p.errored||!p.constructed)ee("reading, ended or constructing",y=!1);else if(y){ee("do read"),p.state|=40,0===p.length&&(p.state|=64);try{this._read(p.highWaterMark)}catch(l){eE(this,l)}p.state&=-33,p.reading||(l=Rf(m,p))}return null===(c=l>0?Ff(l,p):null)?(p.needReadable=p.length<=p.highWaterMark,l=0):(p.length-=l,p.multiAwaitDrain?p.awaitDrainWriters.clear():p.awaitDrainWriters=null),0===p.length&&(p.ended||(p.needReadable=!0),m!==l&&p.ended&&Ys(this)),null===c||p.errorEmitted||p.closeEmitted||(p.dataEmitted=!0,this.emit("data",c)),c},F.prototype._read=function(l){throw new ea("_read()")},F.prototype.pipe=function(l,c){let p=this,y=this._readableState;1===y.pipes.length&&(y.multiAwaitDrain||(y.multiAwaitDrain=!0,y.awaitDrainWriters=new U(y.awaitDrainWriters?[y.awaitDrainWriters]:[]))),y.pipes.push(l),ee("pipe count=%d opts=%j",y.pipes.length,c);let _=c&&!1===c.end||l===m.stdout||l===m.stderr?S:a;function s(l,c){ee("onunpipe"),l===p&&c&&!1===c.hasUnpiped&&(c.hasUnpiped=!0,d())}function a(){ee("onend"),l.end()}y.endEmitted?m.nextTick(_):p.once("end",_),l.on("unpipe",s);let v,A=!1;function d(){ee("cleanup"),l.removeListener("close",E),l.removeListener("finish",w),v&&l.removeListener("drain",v),l.removeListener("error",b),l.removeListener("unpipe",s),p.removeListener("end",a),p.removeListener("end",S),p.removeListener("data",g),A=!0,v&&y.awaitDrainWriters&&(!l._writableState||l._writableState.needDrain)&&v()}function h(){A||(1===y.pipes.length&&y.pipes[0]===l?(ee("false write response, pause",0),y.awaitDrainWriters=l,y.multiAwaitDrain=!1):y.pipes.length>1&&y.pipes.includes(l)&&(ee("false write response, pause",y.awaitDrainWriters.size),y.awaitDrainWriters.add(l)),p.pause()),v||(v=E_(p,l),l.on("drain",v))}function g(c){ee("ondata");let p=l.write(c);ee("dest.write",p),!1===p&&h()}function b(c){if(ee("onerror",c),S(),l.removeListener("error",b),0===l.listenerCount("error")){let p=l._writableState||l._readableState;p&&!p.errorEmitted?eE(l,c):l.emit("error",c)}}function E(){l.removeListener("finish",w),S()}function w(){ee("onfinish"),l.removeListener("close",E),S()}function S(){ee("unpipe"),p.unpipe(l)}return p.on("data",g),H(l,"error",b),l.once("close",E),l.once("finish",w),l.emit("pipe",p),!0===l.writableNeedDrain?h():y.flowing||(ee("pipe resume"),p.resume()),l},F.prototype.unpipe=function(l){let c=this._readableState;if(0===c.pipes.length)return this;if(!l){let l=c.pipes;c.pipes=[],this.pause();for(let c=0;c<l.length;c++)l[c].emit("unpipe",this,{hasUnpiped:!1});return this}let p=y(c.pipes,l);return -1===p||(c.pipes.splice(p,1),0===c.pipes.length&&this.pause(),l.emit("unpipe",this,{hasUnpiped:!1})),this},F.prototype.on=function(l,c){let p=V.prototype.on.call(this,l,c),y=this._readableState;return"data"===l?(y.readableListening=this.listenerCount("readable")>0,!1!==y.flowing&&this.resume()):"readable"!==l||y.endEmitted||y.readableListening||(y.readableListening=y.needReadable=!0,y.flowing=!1,y.emittedReadable=!1,ee("on readable",y.length,y.reading),y.length?ln(this):y.reading||m.nextTick(S_,this)),p},F.prototype.addListener=F.prototype.on,F.prototype.removeListener=function(l,c){let p=V.prototype.removeListener.call(this,l,c);return"readable"===l&&m.nextTick(Nf,this),p},F.prototype.off=F.prototype.removeListener,F.prototype.removeAllListeners=function(l){let c=V.prototype.removeAllListeners.apply(this,arguments);return("readable"===l||void 0===l)&&m.nextTick(Nf,this),c},F.prototype.resume=function(){let l=this._readableState;return l.flowing||(ee("resume"),l.flowing=!l.readableListening,A_(this,l)),l[eb]=!1,this},F.prototype.pause=function(){return ee("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(ee("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[eb]=!0,this},F.prototype.wrap=function(l){let c=!1;l.on("data",p=>{!this.push(p)&&l.pause&&(c=!0,l.pause())}),l.on("end",()=>{this.push(null)}),l.on("error",l=>{eE(this,l)}),l.on("close",()=>{this.destroy()}),l.on("destroy",()=>{this.destroy()}),this._read=()=>{c&&l.resume&&(c=!1,l.resume())};let p=R(l);for(let c=1;c<p.length;c++){let m=p[c];void 0===this[m]&&"function"==typeof l[m]&&(this[m]=l[m].bind(l))}return this},F.prototype[L]=function(){return jf(this)},F.prototype.iterator=function(l){return void 0!==l&&eg(l,"options"),jf(this,l)},T(F.prototype,{readable:{__proto__:null,get(){let l=this._readableState;return!!l&&!1!==l.readable&&!l.destroyed&&!l.errorEmitted&&!l.endEmitted},set(l){this._readableState&&(this._readableState.readable=!!l)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(!1!==this._readableState.readable&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(l){this._readableState&&(this._readableState.flowing=l)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.objectMode}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return!!this._readableState&&this._readableState.closed}},destroyed:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.destroyed},set(l){this._readableState&&(this._readableState.destroyed=l)}},readableEnded:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.endEmitted}}}),T(an.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return!1!==this[eb]},set(l){this[eb]=!!l}}}),F._fromList=Ff,F.from=function(l,c){return e_(F,l,c)},F.fromWeb=function(l,c){return Wf().newStreamReadableFromReadableStream(l,c)},F.toWeb=function(l,c){return Wf().newReadableStreamFromStreamReadable(l,c)},F.wrap=function(l,c){var p,m;return new F({objectMode:null===(p=null!==(m=l.readableObjectMode)&&void 0!==m?m:l.objectMode)||void 0===p||p,...c,destroy(c,p){er.destroyer(l,c),p(c)}}).wrap(l)}}),tG=O((l,c)=>{A(),th(),e4();var p,m=tL(),{ArrayPrototypeSlice:y,Error:_,FunctionPrototypeSymbolHasInstance:v,ObjectDefineProperty:k,ObjectDefineProperties:T,ObjectSetPrototypeOf:R,StringPrototypeToLowerCase:x,Symbol:B,SymbolHasInstance:U}=tp();c.exports=se,se.WritableState=pi;var{EventEmitter:N}=(tj(),Q(tT)),L=t$().Stream,{Buffer:D}=(tu(),Q(e5)),W=tW(),{addAbortSignal:V}=tq(),{getHighWaterMark:H,getDefaultHighWaterMark:K}=tH(),{ERR_INVALID_ARG_TYPE:J,ERR_METHOD_NOT_IMPLEMENTED:X,ERR_MULTIPLE_CALLBACK:ee,ERR_STREAM_CANNOT_PIPE:et,ERR_STREAM_DESTROYED:er,ERR_STREAM_ALREADY_FINISHED:ei,ERR_STREAM_NULL_VALUES:en,ERR_STREAM_WRITE_AFTER_END:eo,ERR_UNKNOWN_ENCODING:es}=tb().codes,{errorOrDestroy:ea}=W;function io(){}R(se.prototype,L.prototype),R(se,L);var el=B("kOnFinished");function pi(l,c,p){"boolean"!=typeof p&&(p=c instanceof tJ()),this.objectMode=!!(l&&l.objectMode),p&&(this.objectMode=this.objectMode||!!(l&&l.writableObjectMode)),this.highWaterMark=l?H(this,l,"writableHighWaterMark",p):K(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;let m=!!(l&&!1===l.decodeStrings);this.decodeStrings=!m,this.defaultEncoding=l&&l.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=V_.bind(void 0,c),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,fn(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!l||!1!==l.emitClose,this.autoDestroy=!l||!1!==l.autoDestroy,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[el]=[]}function fn(l){l.buffered=[],l.bufferedIndex=0,l.allBuffers=!0,l.allNoop=!0}function se(l){let c=this instanceof tJ();if(!c&&!v(se,this))return new se(l);this._writableState=new pi(l,this,c),l&&("function"==typeof l.write&&(this._write=l.write),"function"==typeof l.writev&&(this._writev=l.writev),"function"==typeof l.destroy&&(this._destroy=l.destroy),"function"==typeof l.final&&(this._final=l.final),"function"==typeof l.construct&&(this._construct=l.construct),l.signal&&V(l.signal,this)),L.call(this,l),W.construct(this,()=>{let l=this._writableState;l.writing||so(this,l),oo(this,l)})}function Xf(l,c,p,y){let _,v=l._writableState;if("function"==typeof p)y=p,p=v.defaultEncoding;else{if(p){if("buffer"!==p&&!D.isEncoding(p))throw new es(p)}else p=v.defaultEncoding;"function"!=typeof y&&(y=io)}if(null===c)throw new en;if(!v.objectMode){if("string"==typeof c)!1!==v.decodeStrings&&(c=D.from(c,p),p="buffer");else if(c instanceof D)p="buffer";else if(L._isUint8Array(c))c=L._uint8ArrayToBuffer(c),p="buffer";else throw new J("chunk",["string","Buffer","Uint8Array"],c)}return v.ending?_=new eo:v.destroyed&&(_=new er("write")),_?(m.nextTick(y,_),ea(l,_,!0),_):(v.pendingcb++,H_(l,v,c,p,y))}function H_(l,c,p,m,y){let _=c.objectMode?1:p.length;c.length+=_;let v=c.length<c.highWaterMark;return v||(c.needDrain=!0),c.writing||c.corked||c.errored||!c.constructed?(c.buffered.push({chunk:p,encoding:m,callback:y}),c.allBuffers&&"buffer"!==m&&(c.allBuffers=!1),c.allNoop&&y!==io&&(c.allNoop=!1)):(c.writelen=_,c.writecb=y,c.writing=!0,c.sync=!0,l._write(p,m,c.onwrite),c.sync=!1),v&&!c.errored&&!c.destroyed}function Hf(l,c,p,m,y,_,v){c.writelen=m,c.writecb=v,c.writing=!0,c.sync=!0,c.destroyed?c.onwrite(new er("write")):p?l._writev(y,c.onwrite):l._write(y,_,c.onwrite),c.sync=!1}function Vf(l,c,p,m){--c.pendingcb,m(p),no(c),ea(l,p)}function V_(l,c){let p=l._writableState,y=p.sync,_=p.writecb;if("function"!=typeof _){ea(l,new ee);return}p.writing=!1,p.writecb=null,p.length-=p.writelen,p.writelen=0,c?(c.stack,p.errored||(p.errored=c),l._readableState&&!l._readableState.errored&&(l._readableState.errored=c),y?m.nextTick(Vf,l,p,c,_):Vf(l,p,c,_)):(p.buffered.length>p.bufferedIndex&&so(l,p),y?null!==p.afterWriteTickInfo&&p.afterWriteTickInfo.cb===_?p.afterWriteTickInfo.count++:(p.afterWriteTickInfo={count:1,cb:_,stream:l,state:p},m.nextTick(z_,p.afterWriteTickInfo)):Zf(l,p,1,_))}function z_({stream:l,state:c,count:p,cb:m}){return c.afterWriteTickInfo=null,Zf(l,c,p,m)}function Zf(l,c,p,m){for(c.ending||l.destroyed||0!==c.length||!c.needDrain||(c.needDrain=!1,l.emit("drain"));p-- >0;)c.pendingcb--,m();c.destroyed&&no(c),oo(l,c)}function no(l){var c,p;if(l.writing)return;for(let p=l.bufferedIndex;p<l.buffered.length;++p){let{chunk:m,callback:y}=l.buffered[p],_=l.objectMode?1:m.length;l.length-=_,y(null!==(c=l.errored)&&void 0!==c?c:new er("write"))}let m=l[el].splice(0);for(let c=0;c<m.length;c++)m[c](null!==(p=l.errored)&&void 0!==p?p:new er("end"));fn(l)}function so(l,c){if(c.corked||c.bufferProcessing||c.destroyed||!c.constructed)return;let{buffered:p,bufferedIndex:m,objectMode:_}=c,v=p.length-m;if(!v)return;let A=m;if(c.bufferProcessing=!0,v>1&&l._writev){c.pendingcb-=v-1;let m=c.allNoop?io:l=>{for(let c=A;c<p.length;++c)p[c].callback(l)},_=c.allNoop&&0===A?p:y(p,A);_.allBuffers=c.allBuffers,Hf(l,c,!0,c.length,_,"",m),fn(c)}else{do{let{chunk:m,encoding:y,callback:v}=p[A];p[A++]=null,Hf(l,c,!1,_?1:m.length,m,y,v)}while(A<p.length&&!c.writing);A===p.length?fn(c):A>256?(p.splice(0,A),c.bufferedIndex=0):c.bufferedIndex=A}c.bufferProcessing=!1}function cn(l){return l.ending&&!l.destroyed&&l.constructed&&0===l.length&&!l.errored&&0===l.buffered.length&&!l.finished&&!l.writing&&!l.errorEmitted&&!l.closeEmitted}function K_(l,c){let p=!1;function i(y){if(p){ea(l,y??ee());return}if(p=!0,c.pendingcb--,y){let p=c[el].splice(0);for(let l=0;l<p.length;l++)p[l](y);ea(l,y,c.sync)}else cn(c)&&(c.prefinished=!0,l.emit("prefinish"),c.pendingcb++,m.nextTick(ro,l,c))}c.sync=!0,c.pendingcb++;try{l._final(i)}catch(l){i(l)}c.sync=!1}function G_(l,c){c.prefinished||c.finalCalled||("function"!=typeof l._final||c.destroyed?(c.prefinished=!0,l.emit("prefinish")):(c.finalCalled=!0,K_(l,c)))}function oo(l,c,p){cn(c)&&(G_(l,c),0===c.pendingcb&&(p?(c.pendingcb++,m.nextTick((l,c)=>{cn(c)?ro(l,c):c.pendingcb--},l,c)):cn(c)&&(c.pendingcb++,ro(l,c))))}function ro(l,c){c.pendingcb--,c.finished=!0;let p=c[el].splice(0);for(let l=0;l<p.length;l++)p[l]();if(l.emit("finish"),c.autoDestroy){let c=l._readableState;(!c||c.autoDestroy&&(c.endEmitted||!1===c.readable))&&l.destroy()}}pi.prototype.getBuffer=function(){return y(this.buffered,this.bufferedIndex)},k(pi.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}}),k(se,U,{__proto__:null,value:function(l){return!!v(this,l)||this===se&&l&&l._writableState instanceof pi}}),se.prototype.pipe=function(){ea(this,new et)},se.prototype.write=function(l,c,p){return!0===Xf(this,l,c,p)},se.prototype.cork=function(){this._writableState.corked++},se.prototype.uncork=function(){let l=this._writableState;l.corked&&(l.corked--,l.writing||so(this,l))},se.prototype.setDefaultEncoding=function(l){if("string"==typeof l&&(l=x(l)),!D.isEncoding(l))throw new es(l);return this._writableState.defaultEncoding=l,this},se.prototype._write=function(l,c,p){if(this._writev)this._writev([{chunk:l,encoding:c}],p);else throw new X("_write()")},se.prototype._writev=null,se.prototype.end=function(l,c,p){let y,v=this._writableState;if("function"==typeof l?(p=l,l=null,c=null):"function"==typeof c&&(p=c,c=null),null!=l){let p=Xf(this,l,c);p instanceof _&&(y=p)}return v.corked&&(v.corked=1,this.uncork()),y||(v.errored||v.ending?v.finished?y=new ei("end"):v.destroyed&&(y=new er("end")):(v.ending=!0,oo(this,v,!0),v.ended=!0)),"function"==typeof p&&(y||v.finished?m.nextTick(p,y):v[el].push(p)),this},T(se.prototype,{closed:{__proto__:null,get(){return!!this._writableState&&this._writableState.closed}},destroyed:{__proto__:null,get(){return!!this._writableState&&this._writableState.destroyed},set(l){this._writableState&&(this._writableState.destroyed=l)}},writable:{__proto__:null,get(){let l=this._writableState;return!!l&&!1!==l.writable&&!l.destroyed&&!l.errored&&!l.ending&&!l.ended},set(l){this._writableState&&(this._writableState.writable=!!l)}},writableFinished:{__proto__:null,get(){return!!this._writableState&&this._writableState.finished}},writableObjectMode:{__proto__:null,get(){return!!this._writableState&&this._writableState.objectMode}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return!!this._writableState&&this._writableState.ending}},writableNeedDrain:{__proto__:null,get(){let l=this._writableState;return!!l&&!l.destroyed&&!l.ending&&l.needDrain}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(!1!==this._writableState.writable&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});var eu=W.destroy;function eh(){return void 0===p&&(p={}),p}se.prototype.destroy=function(l,c){let p=this._writableState;return!p.destroyed&&(p.bufferedIndex<p.buffered.length||p[el].length)&&m.nextTick(no,p),eu.call(this,l,c),this},se.prototype._undestroy=W.undestroy,se.prototype._destroy=function(l,c){c(l)},se.prototype[N.captureRejectionSymbol]=function(l){this.destroy(l)},se.fromWeb=function(l,c){return eh().newStreamWritableFromWritableStream(l,c)},se.toWeb=function(l){return eh().newWritableStreamFromStreamWritable(l)}}),tZ=O((l,c)=>{A(),th(),e4();var p=tL(),m=(tu(),Q(e5)),{isReadable:y,isWritable:_,isIterable:v,isNodeStream:k,isReadableNodeStream:T,isWritableNodeStream:R,isDuplexNodeStream:x,isReadableStream:B,isWritableStream:U}=tD(),N=tF(),{AbortError:L,codes:{ERR_INVALID_ARG_TYPE:D,ERR_INVALID_RETURN_VALUE:W}}=tb(),{destroyer:V}=tW(),H=tJ(),K=tY(),J=tG(),{createDeferredPromise:X}=tU(),ee=tK(),et=globalThis.Blob||m.Blob,er="u">typeof et?function(l){return l instanceof et}:function(l){return!1},ei=globalThis.AbortController||tm().AbortController,{FunctionPrototypeCall:en}=tp(),eo=class extends H{constructor(l){super(l),l?.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),l?.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}};function om(l){let{promise:c,resolve:m}=X(),y=new ei,_=y.signal;return{value:l(async function*(){for(;;){let l=c;c=null;let{chunk:y,done:v,cb:A}=await l;if(p.nextTick(A),v)return;if(_.aborted)throw new L(void 0,{cause:_.reason});({promise:c,resolve:m}=X()),yield y}}(),{signal:_}),write(l,c,p){let y=m;m=null,y({chunk:l,done:!1,cb:p})},final(l){let c=m;m=null,c({done:!0,cb:l})},destroy(l,c){y.abort(),c(l)}}}function Nr(l){let c=l.readable&&"function"!=typeof l.readable.read?K.wrap(l.readable):l.readable,p=l.writable,m=!!y(c),v=!!_(p),A,k,T,R,x;function d(l){let c=R;R=null,c?c(l):l&&x.destroy(l)}return x=new eo({readableObjectMode:!!(null!=c&&c.readableObjectMode),writableObjectMode:!!(null!=p&&p.writableObjectMode),readable:m,writable:v}),v&&(N(p,l=>{v=!1,l&&V(c,l),d(l)}),x._write=function(l,c,m){p.write(l,c)?m():A=m},x._final=function(l){p.end(),k=l},p.on("drain",function(){if(A){let l=A;A=null,l()}}),p.on("finish",function(){if(k){let l=k;k=null,l()}})),m&&(N(c,l=>{m=!1,l&&V(c,l),d(l)}),c.on("readable",function(){if(T){let l=T;T=null,l()}}),c.on("end",function(){x.push(null)}),x._read=function(){for(;;){let l=c.read();if(null===l){T=x._read;return}if(!x.push(l))return}}),x._destroy=function(l,m){l||null===R||(l=new L),T=null,A=null,k=null,null===R?m(l):(R=m,V(p,l),V(c,l))},x}c.exports=function t(l,c){if(x(l))return l;if(T(l))return Nr({readable:l});if(R(l))return Nr({writable:l});if(k(l))return Nr({writable:!1,readable:!1});if(B(l))return Nr({readable:K.fromWeb(l)});if(U(l))return Nr({writable:J.fromWeb(l)});if("function"==typeof l){let{value:m,write:y,final:_,destroy:A}=om(l);if(v(m))return ee(eo,m,{objectMode:!0,write:y,final:_,destroy:A});let k=m?.then;if("function"==typeof k){let l,c=en(k,m,l=>{if(null!=l)throw new W("nully","body",l)},c=>{V(l,c)});return l=new eo({objectMode:!0,readable:!1,write:y,final(l){_(async()=>{try{await c,p.nextTick(l,null)}catch(c){p.nextTick(l,c)}})},destroy:A})}throw new W("Iterable, AsyncIterable or AsyncFunction",c,m)}if(er(l))return t(l.arrayBuffer());if(v(l))return ee(eo,l,{objectMode:!0,writable:!1});if(B(l?.readable)&&U(l?.writable))return eo.fromWeb(l);if("object"==typeof l?.writable||"object"==typeof l?.readable)return Nr({readable:null!=l&&l.readable?T(l?.readable)?l?.readable:t(l.readable):void 0,writable:null!=l&&l.writable?R(l?.writable)?l?.writable:t(l.writable):void 0});let m=l?.then;if("function"==typeof m){let c;return en(m,l,l=>{null!=l&&c.push(l),c.push(null)},l=>{V(c,l)}),c=new eo({objectMode:!0,writable:!1,read(){}})}throw new D(c,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],l)}}),tJ=O((l,c)=>{A(),th(),e4();var p,m,{ObjectDefineProperties:y,ObjectGetOwnPropertyDescriptor:_,ObjectKeys:v,ObjectSetPrototypeOf:k}=tp();c.exports=$e;var T=tY(),R=tG();k($e.prototype,T.prototype),k($e,T);{let l=v(R.prototype);for(let c=0;c<l.length;c++){let p=l[c];$e.prototype[p]||($e.prototype[p]=R.prototype[p])}}function $e(l){if(!(this instanceof $e))return new $e(l);T.call(this,l),R.call(this,l),l?(this.allowHalfOpen=!1!==l.allowHalfOpen,!1===l.readable&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),!1===l.writable&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}function wh(){return void 0===p&&(p={}),p}y($e.prototype,{writable:{__proto__:null,..._(R.prototype,"writable")},writableHighWaterMark:{__proto__:null,..._(R.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,..._(R.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,..._(R.prototype,"writableBuffer")},writableLength:{__proto__:null,..._(R.prototype,"writableLength")},writableFinished:{__proto__:null,..._(R.prototype,"writableFinished")},writableCorked:{__proto__:null,..._(R.prototype,"writableCorked")},writableEnded:{__proto__:null,..._(R.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,..._(R.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set(l){this._readableState&&this._writableState&&(this._readableState.destroyed=l,this._writableState.destroyed=l)}}}),$e.fromWeb=function(l,c){return wh().newStreamDuplexFromReadableWritablePair(l,c)},$e.toWeb=function(l){return wh().newReadableWritablePairFromDuplex(l)},$e.from=function(l){return m||(m=tZ()),m(l,"body")}}),tX=O((l,c)=>{A(),th(),e4();var{ObjectSetPrototypeOf:p,Symbol:m}=tp();c.exports=vt;var{ERR_METHOD_NOT_IMPLEMENTED:y}=tb().codes,_=tJ(),{getHighWaterMark:v}=tH();p(vt.prototype,_.prototype),p(vt,_);var k=m("kCallback");function vt(l){if(!(this instanceof vt))return new vt(l);let c=l?v(this,l,"readableHighWaterMark",!0):null;0===c&&(l={...l,highWaterMark:null,readableHighWaterMark:c,writableHighWaterMark:l.writableHighWaterMark||0}),_.call(this,l),this._readableState.sync=!1,this[k]=null,l&&("function"==typeof l.transform&&(this._transform=l.transform),"function"==typeof l.flush&&(this._flush=l.flush)),this.on("prefinish",hm)}function fo(l){"function"!=typeof this._flush||this.destroyed?(this.push(null),l&&l()):this._flush((c,p)=>{if(c){l?l(c):this.destroy(c);return}null!=p&&this.push(p),this.push(null),l&&l()})}function hm(){this._final!==fo&&fo.call(this)}vt.prototype._final=fo,vt.prototype._transform=function(l,c,p){throw new y("_transform()")},vt.prototype._write=function(l,c,p){let m=this._readableState,y=this._writableState,_=m.length;this._transform(l,c,(l,c)=>{if(l){p(l);return}null!=c&&this.push(c),y.ended||_===m.length||m.length<m.highWaterMark?p():this[k]=p})},vt.prototype._read=function(){if(this[k]){let l=this[k];this[k]=null,l()}}}),t1=O((l,c)=>{A(),th(),e4();var{ObjectSetPrototypeOf:p}=tp();c.exports=jr;var m=tX();function jr(l){if(!(this instanceof jr))return new jr(l);m.call(this,l)}p(jr.prototype,m.prototype),p(jr,m),jr.prototype._transform=function(l,c,p){p(null,l)}}),t2=O((l,c)=>{A(),th(),e4();var p,m,y,_=tL(),{ArrayIsArray:v,Promise:k,SymbolAsyncIterator:T,SymbolDispose:R}=tp(),x=tF(),{once:B}=tU(),U=tW(),N=tJ(),{aggregateTwoErrors:L,codes:{ERR_INVALID_ARG_TYPE:D,ERR_INVALID_RETURN_VALUE:W,ERR_MISSING_ARGS:V,ERR_STREAM_DESTROYED:H,ERR_STREAM_PREMATURE_CLOSE:K},AbortError:J}=tb(),{validateFunction:X,validateAbortSignal:ee}=tN(),{isIterable:et,isReadable:er,isReadableNodeStream:ei,isNodeStream:en,isTransformStream:eo,isWebStream:es,isReadableStream:ea,isReadableFinished:el}=tD(),eu=globalThis.AbortController||tm().AbortController;function Th(l,c,p){let m=!1;return l.on("close",()=>{m=!0}),{destroy:c=>{m||(m=!0,U.destroyer(l,c||new H("pipe")))},cleanup:x(l,{readable:c,writable:p},l=>{m=!l})}}function Pm(l){return X(l[l.length-1],"streams[stream.length - 1]"),l.pop()}function So(l){if(et(l))return l;if(ei(l))return km(l);throw new D("val",["Readable","Iterable","AsyncIterable"],l)}async function*km(l){m||(m=tY()),yield*m.prototype[T].call(l)}async function pn(l,c,p,{end:m}){let y,_=null,s=l=>{if(l&&(y=l),_){let l=_;_=null,l()}},a=()=>new k((l,c)=>{y?c(y):_=()=>{y?c(y):l()}});c.on("drain",s);let v=x(c,{readable:!1},s);try{for await(let p of(c.writableNeedDrain&&await a(),l))c.write(p)||await a();m&&(c.end(),await a()),p()}catch(l){p(y!==l?L(y,l):l)}finally{v(),c.off("drain",s)}}async function Ao(l,c,p,{end:m}){eo(c)&&(c=c.writable);let y=c.getWriter();try{for await(let c of l)await y.ready,y.write(c).catch(()=>{});await y.ready,m&&await y.close(),p()}catch(l){try{await y.abort(l),p(l)}catch(l){p(l)}}}function Bm(...l){return Rh(l,B(Pm(l)))}function Rh(l,c,m){let A,k;if(1===l.length&&v(l[0])&&(l=l[0]),l.length<2)throw new V("streams");let T=new eu,x=T.signal,B=m?.signal,U=[];function a(){E(new J)}ee(B,"options.signal"),y=y||tU().addAbortListener,B&&(A=y(B,a));let L,H,K=[],X=0;function b(l){E(l,0==--X)}function E(l,p){var m;if(l&&(!L||"ERR_STREAM_PREMATURE_CLOSE"===L.code)&&(L=l),!(!L&&!p)){for(;K.length;)K.shift()(L);null===(m=A)||void 0===m||m[R](),T.abort(),p&&(L||U.forEach(l=>l()),_.nextTick(c,L,H))}}for(let c=0;c<l.length;c++){let y=l[c],v=c<l.length-1,A=c>0,T=v||m?.end!==!1,R=c===l.length-1;if(en(y)){let $=function(l){l&&"AbortError"!==l.name&&"ERR_STREAM_PREMATURE_CLOSE"!==l.code&&b(l)};if(T){let{destroy:l,cleanup:c}=Th(y,v,A);K.push(l),er(y)&&R&&U.push(c)}y.on("error",$),er(y)&&R&&U.push(()=>{y.removeListener("error",$)})}if(0===c){if("function"==typeof y){if(!et(k=y({signal:x})))throw new W("Iterable, AsyncIterable or Stream","source",k)}else k=et(y)||ei(y)||eo(y)?y:N.from(y)}else if("function"==typeof y){var el,ed;if(k=y(k=eo(k)?So(null===(el=k)||void 0===el?void 0:el.readable):So(k),{signal:x}),v){if(!et(k,!0))throw new W("AsyncIterable",`transform[${c-1}]`,k)}else{p||(p=t1());let l=new p({objectMode:!0}),c=null===(ed=k)||void 0===ed?void 0:ed.then;if("function"==typeof c)X++,c.call(k,c=>{H=c,null!=c&&l.write(c),T&&l.end(),_.nextTick(b)},c=>{l.destroy(c),_.nextTick(b,c)});else if(et(k,!0))X++,pn(k,l,b,{end:T});else if(ea(k)||eo(k)){let c=k.readable||k;X++,pn(c,l,b,{end:T})}else throw new W("AsyncIterable or Promise","destination",k);let{destroy:m,cleanup:y}=Th(k=l,!1,!0);K.push(m),R&&U.push(y)}}else if(en(y)){if(ei(k)){X+=2;let l=xm(k,y,b,{end:T});er(y)&&R&&U.push(l)}else if(eo(k)||ea(k)){let l=k.readable||k;X++,pn(l,y,b,{end:T})}else if(et(k))X++,pn(k,y,b,{end:T});else throw new D("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],k);k=y}else if(es(y)){if(ei(k))X++,Ao(So(k),y,b,{end:T});else if(ea(k)||et(k))X++,Ao(k,y,b,{end:T});else if(eo(k))X++,Ao(k.readable,y,b,{end:T});else throw new D("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],k);k=y}else k=N.from(y)}return(null!=x&&x.aborted||null!=B&&B.aborted)&&_.nextTick(a),k}function xm(l,c,p,{end:m}){let y=!1;if(c.on("close",()=>{y||p(new K)}),l.pipe(c,{end:!1}),m){let s=function(){y=!0,c.end()};el(l)?_.nextTick(s):l.once("end",s)}else p();return x(l,{readable:!0,writable:!1},c=>{let m=l._readableState;c&&"ERR_STREAM_PREMATURE_CLOSE"===c.code&&m&&m.ended&&!m.errored&&!m.errorEmitted?l.once("end",p).once("error",p):p(c)}),x(c,{readable:!1,writable:!0},p)}c.exports={pipelineImpl:Rh,pipeline:Bm}}),t3=O((l,c)=>{A(),th(),e4();var{pipeline:p}=t2(),m=tJ(),{destroyer:y}=tW(),{isNodeStream:_,isReadable:v,isWritable:k,isWebStream:T,isTransformStream:R,isWritableStream:x,isReadableStream:B}=tD(),{AbortError:U,codes:{ERR_INVALID_ARG_VALUE:N,ERR_MISSING_ARGS:L}}=tb(),D=tF();c.exports=function(...l){let c,A,W,V,H;if(0===l.length)throw new L("streams");if(1===l.length)return m.from(l[0]);let K=[...l];if("function"==typeof l[0]&&(l[0]=m.from(l[0])),"function"==typeof l[l.length-1]){let c=l.length-1;l[c]=m.from(l[c])}for(let c=0;c<l.length;++c)if(!(!_(l[c])&&!T(l[c]))){if(c<l.length-1&&!(v(l[c])||B(l[c])||R(l[c])))throw new N(`streams[${c}]`,K[c],"must be readable");if(c>0&&!(k(l[c])||x(l[c])||R(l[c])))throw new N(`streams[${c}]`,K[c],"must be writable")}function u(l){let c=V;V=null,c?c(l):l?H.destroy(l):et||ee||H.destroy()}let J=l[0],X=p(l,u),ee=!!(k(J)||x(J)||R(J)),et=!!(v(X)||B(X)||R(X));if(H=new m({writableObjectMode:!!(null!=J&&J.writableObjectMode),readableObjectMode:!!(null!=X&&X.readableObjectMode),writable:ee,readable:et}),ee){if(_(J))H._write=function(l,p,m){J.write(l,p)?m():c=m},H._final=function(l){J.end(),A=l},J.on("drain",function(){if(c){let l=c;c=null,l()}});else if(T(J)){let l=(R(J)?J.writable:J).getWriter();H._write=async function(c,p,m){try{await l.ready,l.write(c).catch(()=>{}),m()}catch(l){m(l)}},H._final=async function(c){try{await l.ready,l.close().catch(()=>{}),A=c}catch(l){c(l)}}}D(R(X)?X.readable:X,()=>{if(A){let l=A;A=null,l()}})}if(et){if(_(X))X.on("readable",function(){if(W){let l=W;W=null,l()}}),X.on("end",function(){H.push(null)}),H._read=function(){for(;;){let l=X.read();if(null===l){W=H._read;return}if(!H.push(l))return}};else if(T(X)){let l=(R(X)?X.readable:X).getReader();H._read=async function(){for(;;)try{let{value:c,done:p}=await l.read();if(!H.push(c))return;if(p){H.push(null);return}}catch{return}}}}return H._destroy=function(l,p){l||null===V||(l=new U),W=null,c=null,A=null,null===V?p(l):(V=p,_(X)&&y(X,l))},H}}),t6=O((l,c)=>{A(),th(),e4();var p=globalThis.AbortController||tm().AbortController,{codes:{ERR_INVALID_ARG_VALUE:m,ERR_INVALID_ARG_TYPE:y,ERR_MISSING_ARGS:_,ERR_OUT_OF_RANGE:v},AbortError:k}=tb(),{validateAbortSignal:T,validateInteger:R,validateObject:x}=tN(),B=tp().Symbol("kWeak"),U=tp().Symbol("kResistStopPropagation"),{finished:N}=tF(),L=t3(),{addAbortSignalNoValidate:D}=tq(),{isWritable:W,isNodeStream:V}=tD(),{deprecate:H}=tU(),{ArrayPrototypePush:K,Boolean:J,MathFloor:X,Number:ee,NumberIsNaN:et,Promise:er,PromiseReject:ei,PromiseResolve:en,PromisePrototypeThen:eo,Symbol:es}=tp(),ea=es("kEmpty"),el=es("kEof");function t0(l,c){if(null!=c&&x(c,"options"),c?.signal!=null&&T(c.signal,"options.signal"),V(l)&&!W(l))throw new m("stream",l,"must be writable");let p=L(this,l);return null!=c&&c.signal&&D(c.signal,p),p}function vn(l,c){if("function"!=typeof l)throw new y("fn",["Function","AsyncFunction"],l);null!=c&&x(c,"options"),c?.signal!=null&&T(c.signal,"options.signal");let p=1;c?.concurrency!=null&&(p=X(c.concurrency));let m=p-1;return c?.highWaterMark!=null&&(m=X(c.highWaterMark)),R(p,"options.concurrency",1),R(m,"options.highWaterMark",0),m+=p,(async function*(){let y=tU().AbortSignalAny([c?.signal].filter(J)),_=this,v=[],A={signal:y},T,R,x=!1,B=0;function b(){x=!0,E()}function E(){B-=1,w()}function w(){R&&!x&&B<p&&v.length<m&&(R(),R=null)}(async function(){try{for await(let c of _){if(x)return;if(y.aborted)throw new k;try{if((c=l(c,A))===ea)continue;c=en(c)}catch(l){c=ei(l)}B+=1,eo(c,E,b),v.push(c),T&&(T(),T=null),!x&&(v.length>=m||B>=p)&&await new er(l=>{R=l})}v.push(el)}catch(c){let l=ei(c);eo(l,E,b),v.push(l)}finally{x=!0,T&&(T(),T=null)}})();try{for(;;){for(;v.length>0;){let l=await v[0];if(l===el)return;if(y.aborted)throw new k;l!==ea&&(yield l),v.shift(),w()}await new er(l=>{T=l})}}finally{x=!0,R&&(R(),R=null)}}).call(this)}function r0(l){return null!=l&&x(l,"options"),l?.signal!=null&&T(l.signal,"options.signal"),(async function*(){let c=0;for await(let m of this){var p;if(null!=l&&null!==(p=l.signal)&&void 0!==p&&p.aborted)throw new k({cause:l.signal.reason});yield[c++,m]}}).call(this)}async function Wh(l,c){for await(let p of Po.call(this,l,c))return!0;return!1}async function i0(l,c){if("function"!=typeof l)throw new y("fn",["Function","AsyncFunction"],l);return!await Wh.call(this,async(...c)=>!await l(...c),c)}async function n0(l,c){for await(let p of Po.call(this,l,c))return p}async function s0(l,c){if("function"!=typeof l)throw new y("fn",["Function","AsyncFunction"],l);async function r(c,p){return await l(c,p),ea}for await(let l of vn.call(this,r,c));}function Po(l,c){if("function"!=typeof l)throw new y("fn",["Function","AsyncFunction"],l);async function r(c,p){return await l(c,p)?c:ea}return vn.call(this,r,c)}var eu=class extends _{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}};async function o0(l,c,m){var _,v;if("function"!=typeof l)throw new y("reducer",["Function","AsyncFunction"],l);null!=m&&x(m,"options"),m?.signal!=null&&T(m.signal,"options.signal");let A=arguments.length>1;if(null!=m&&null!==(_=m.signal)&&void 0!==_&&_.aborted){let l=new k(void 0,{cause:m.signal.reason});throw this.once("error",()=>{}),await N(this.destroy(l)),l}let R=new p,L=R.signal;null!=m&&m.signal&&m.signal.addEventListener("abort",()=>R.abort(),{once:!0,[B]:this,[U]:!0});let D=!1;try{for await(let p of this){if(D=!0,null!=m&&null!==(v=m.signal)&&void 0!==v&&v.aborted)throw new k;A?c=await l(c,p,{signal:L}):(c=p,A=!0)}if(!D&&!A)throw new eu}finally{R.abort()}return c}async function a0(l){null!=l&&x(l,"options"),l?.signal!=null&&T(l.signal,"options.signal");let c=[];for await(let m of this){var p;if(null!=l&&null!==(p=l.signal)&&void 0!==p&&p.aborted)throw new k(void 0,{cause:l.signal.reason});K(c,m)}return c}function l0(l,c){let p=vn.call(this,l,c);return(async function*(){for await(let l of p)yield*l}).call(this)}function $h(l){if(et(l=ee(l)))return 0;if(l<0)throw new v("number",">= 0",l);return l}function u0(l,c){return null!=c&&x(c,"options"),c?.signal!=null&&T(c.signal,"options.signal"),l=$h(l),(async function*(){var p,m;if(null!=c&&null!==(p=c.signal)&&void 0!==p&&p.aborted)throw new k;for await(let p of this){if(null!=c&&null!==(m=c.signal)&&void 0!==m&&m.aborted)throw new k;l--<=0&&(yield p)}}).call(this)}function c0(l,c){return null!=c&&x(c,"options"),c?.signal!=null&&T(c.signal,"options.signal"),l=$h(l),(async function*(){var p,m;if(null!=c&&null!==(p=c.signal)&&void 0!==p&&p.aborted)throw new k;for await(let p of this){if(null!=c&&null!==(m=c.signal)&&void 0!==m&&m.aborted)throw new k;if(l-- >0&&(yield p),l<=0)return}}).call(this)}c.exports.streamReturningOperators={asIndexedPairs:H(r0,"readable.asIndexedPairs will be removed in a future version."),drop:u0,filter:Po,flatMap:l0,map:vn,take:c0,compose:t0},c.exports.promiseReturningOperators={every:i0,forEach:s0,reduce:o0,toArray:a0,some:Wh,find:n0}}),t4=O((l,c)=>{A(),th(),e4();var{ArrayPrototypePop:p,Promise:m}=tp(),{isIterable:y,isNodeStream:_,isWebStream:v}=tD(),{pipelineImpl:k}=t2(),{finished:T}=tF();function w0(...l){return new m((c,m)=>{let A,T,R=l[l.length-1];if(R&&"object"==typeof R&&!_(R)&&!y(R)&&!v(R)){let c=p(l);A=c.signal,T=c.end}k(l,(l,p)=>{l?m(l):c(p)},{signal:A,end:T})})}t5(),c.exports={finished:T,pipeline:w0}}),t5=O((l,c)=>{A(),th(),e4();var{Buffer:p}=(tu(),Q(e5)),{ObjectDefineProperty:m,ObjectKeys:y,ReflectApply:_}=tp(),{promisify:{custom:v}}=tU(),{streamReturningOperators:k,promiseReturningOperators:T}=t6(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:R}}=tb(),x=t3(),{setDefaultHighWaterMark:B,getDefaultHighWaterMark:U}=tH(),{pipeline:N}=t2(),{destroyer:L}=tW(),D=tF(),W=t4(),V=tD(),H=c.exports=t$().Stream;for(let l of(H.isDestroyed=V.isDestroyed,H.isDisturbed=V.isDisturbed,H.isErrored=V.isErrored,H.isReadable=V.isReadable,H.isWritable=V.isWritable,H.Readable=tY(),y(k))){let r=function(...l){if(new.target)throw R();return H.Readable.from(_(c,this,l))},c=k[l];m(r,"name",{__proto__:null,value:c.name}),m(r,"length",{__proto__:null,value:c.length}),m(H.Readable.prototype,l,{__proto__:null,value:r,enumerable:!1,configurable:!0,writable:!0})}for(let l of y(T)){let r=function(...l){if(new.target)throw R();return _(c,this,l)},c=T[l];m(r,"name",{__proto__:null,value:c.name}),m(r,"length",{__proto__:null,value:c.length}),m(H.Readable.prototype,l,{__proto__:null,value:r,enumerable:!1,configurable:!0,writable:!0})}H.Writable=tG(),H.Duplex=tJ(),H.Transform=tX(),H.PassThrough=t1(),H.pipeline=N;var{addAbortSignal:K}=tq();H.addAbortSignal=K,H.finished=D,H.destroy=L,H.compose=x,H.setDefaultHighWaterMark=B,H.getDefaultHighWaterMark=U,m(H,"promises",{__proto__:null,configurable:!0,enumerable:!0,get:()=>W}),m(N,v,{__proto__:null,enumerable:!0,get:()=>W.pipeline}),m(D,v,{__proto__:null,enumerable:!0,get:()=>W.finished}),H.Stream=H,H._isUint8Array=function(l){return l instanceof Uint8Array},H._uint8ArrayToBuffer=function(l){return p.from(l.buffer,l.byteOffset,l.byteLength)}}),t8=O((l,c)=>{A(),th(),e4();var p=t5(),m=t4(),y=p.Readable.destroy;c.exports=p.Readable,c.exports._uint8ArrayToBuffer=p._uint8ArrayToBuffer,c.exports._isUint8Array=p._isUint8Array,c.exports.isDisturbed=p.isDisturbed,c.exports.isErrored=p.isErrored,c.exports.isReadable=p.isReadable,c.exports.Readable=p.Readable,c.exports.Writable=p.Writable,c.exports.Duplex=p.Duplex,c.exports.Transform=p.Transform,c.exports.PassThrough=p.PassThrough,c.exports.addAbortSignal=p.addAbortSignal,c.exports.finished=p.finished,c.exports.destroy=p.destroy,c.exports.destroy=y,c.exports.pipeline=p.pipeline,c.exports.compose=p.compose,Object.defineProperty(p,"promises",{configurable:!0,enumerable:!0,get:()=>m}),c.exports.Stream=p.Stream,c.exports.default=c.exports}),t7=O((l,c)=>{A(),th(),e4(),"function"==typeof Object.create?c.exports=function(l,c){c&&(l.super_=c,l.prototype=Object.create(c.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}))}:c.exports=function(l,c){if(c){l.super_=c;var i=function(){};i.prototype=c.prototype,l.prototype=new i,l.prototype.constructor=l}}}),t9=O((l,c)=>{A(),th(),e4();var{Buffer:p}=(tu(),Q(e5)),m=Symbol.for("BufferList");function Z(l){if(!(this instanceof Z))return new Z(l);Z._init.call(this,l)}Z._init=function(l){Object.defineProperty(this,m,{value:!0}),this._bufs=[],this.length=0,l&&this.append(l)},Z.prototype._new=function(l){return new Z(l)},Z.prototype._offset=function(l){if(0===l)return[0,0];let c=0;for(let p=0;p<this._bufs.length;p++){let m=c+this._bufs[p].length;if(l<m||p===this._bufs.length-1)return[p,l-c];c=m}},Z.prototype._reverseOffset=function(l){let c=l[0],p=l[1];for(let l=0;l<c;l++)p+=this._bufs[l].length;return p},Z.prototype.get=function(l){if(l>this.length||l<0)return;let c=this._offset(l);return this._bufs[c[0]][c[1]]},Z.prototype.slice=function(l,c){return"number"==typeof l&&l<0&&(l+=this.length),"number"==typeof c&&c<0&&(c+=this.length),this.copy(null,0,l,c)},Z.prototype.copy=function(l,c,m,y){if(("number"!=typeof m||m<0)&&(m=0),("number"!=typeof y||y>this.length)&&(y=this.length),m>=this.length||y<=0)return l||p.alloc(0);let _=!!l,v=this._offset(m),A=y-m,k=A,T=_&&c||0,R=v[1];if(0===m&&y===this.length){if(!_)return 1===this._bufs.length?this._bufs[0]:p.concat(this._bufs,this.length);for(let c=0;c<this._bufs.length;c++)this._bufs[c].copy(l,T),T+=this._bufs[c].length;return l}if(k<=this._bufs[v[0]].length-R)return _?this._bufs[v[0]].copy(l,c,R,R+k):this._bufs[v[0]].slice(R,R+k);_||(l=p.allocUnsafe(A));for(let c=v[0];c<this._bufs.length;c++){let p=this._bufs[c].length-R;if(k>p)this._bufs[c].copy(l,T,R),T+=p;else{this._bufs[c].copy(l,T,R,R+k),T+=p;break}k-=p,R&&(R=0)}return l.length>T?l.slice(0,T):l},Z.prototype.shallowSlice=function(l,c){if(l=l||0,c="number"!=typeof c?this.length:c,l<0&&(l+=this.length),c<0&&(c+=this.length),l===c)return this._new();let p=this._offset(l),m=this._offset(c),y=this._bufs.slice(p[0],m[0]+1);return 0===m[1]?y.pop():y[y.length-1]=y[y.length-1].slice(0,m[1]),0!==p[1]&&(y[0]=y[0].slice(p[1])),this._new(y)},Z.prototype.toString=function(l,c,p){return this.slice(c,p).toString(l)},Z.prototype.consume=function(l){if(Number.isNaN(l=Math.trunc(l))||l<=0)return this;for(;this._bufs.length;)if(l>=this._bufs[0].length)l-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift();else{this._bufs[0]=this._bufs[0].slice(l),this.length-=l;break}return this},Z.prototype.duplicate=function(){let l=this._new();for(let c=0;c<this._bufs.length;c++)l.append(this._bufs[c]);return l},Z.prototype.append=function(l){if(null==l)return this;if(l.buffer)this._appendBuffer(p.from(l.buffer,l.byteOffset,l.byteLength));else if(Array.isArray(l))for(let c=0;c<l.length;c++)this.append(l[c]);else if(this._isBufferList(l))for(let c=0;c<l._bufs.length;c++)this.append(l._bufs[c]);else"number"==typeof l&&(l=l.toString()),this._appendBuffer(p.from(l));return this},Z.prototype._appendBuffer=function(l){this._bufs.push(l),this.length+=l.length},Z.prototype.indexOf=function(l,c,m){if(void 0===m&&"string"==typeof c&&(m=c,c=void 0),"function"==typeof l||Array.isArray(l))throw TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if("number"==typeof l?l=p.from([l]):"string"==typeof l?l=p.from(l,m):this._isBufferList(l)?l=l.slice():Array.isArray(l.buffer)?l=p.from(l.buffer,l.byteOffset,l.byteLength):p.isBuffer(l)||(l=p.from(l)),isNaN(c=Number(c||0))&&(c=0),c<0&&(c=this.length+c),c<0&&(c=0),0===l.length)return c>this.length?this.length:c;let y=this._offset(c),_=y[0],v=y[1];for(;_<this._bufs.length;_++){let c=this._bufs[_];for(;v<c.length;)if(c.length-v>=l.length){let p=c.indexOf(l,v);if(-1!==p)return this._reverseOffset([_,p]);v=c.length-l.length+1}else{let c=this._reverseOffset([_,v]);if(this._match(c,l))return c;v++}v=0}return -1},Z.prototype._match=function(l,c){if(this.length-l<c.length)return!1;for(let p=0;p<c.length;p++)if(this.get(l+p)!==c[p])return!1;return!0},function(){let l={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readBigInt64BE:8,readBigInt64LE:8,readBigUInt64BE:8,readBigUInt64LE:8,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(let c in l)!function(c){null===l[c]?Z.prototype[c]=function(l,p){return this.slice(l,l+p)[c](0,p)}:Z.prototype[c]=function(p=0){return this.slice(p,p+l[c])[c](0)}}(c)}(),Z.prototype._isBufferList=function(l){return l instanceof Z||Z.isBufferList(l)},Z.isBufferList=function(l){return null!=l&&l[m]},c.exports=Z}),re=O((l,c)=>{A(),th(),e4();var p=t8().Duplex,m=t7(),y=t9();function Ee(l){if(!(this instanceof Ee))return new Ee(l);if("function"==typeof l){this._callback=l;let c=(function(l){this._callback&&(this._callback(l),this._callback=null)}).bind(this);this.on("pipe",function(l){l.on("error",c)}),this.on("unpipe",function(l){l.removeListener("error",c)}),l=null}y._init.call(this,l),p.call(this)}m(Ee,p),Object.assign(Ee.prototype,y.prototype),Ee.prototype._new=function(l){return new Ee(l)},Ee.prototype._write=function(l,c,p){this._appendBuffer(l),"function"==typeof p&&p()},Ee.prototype._read=function(l){if(!this.length)return this.push(null);l=Math.min(l,this.length),this.push(this.slice(0,l)),this.consume(l)},Ee.prototype.end=function(l){p.prototype.end.call(this,l),this._callback&&(this._callback(null,this.slice()),this._callback=null)},Ee.prototype._destroy=function(l,c){this._bufs.length=0,this.length=0,c(l)},Ee.prototype._isBufferList=function(l){return l instanceof Ee||l instanceof y||Ee.isBufferList(l)},Ee.isBufferList=y.isBufferList,c.exports=Ee,c.exports.BufferListStream=Ee,c.exports.BufferList=y}),rt=O((l,c)=>{A(),th(),e4(),c.exports=class{constructor(){this.cmd=null,this.retain=!1,this.qos=0,this.dup=!1,this.length=-1,this.topic=null,this.payload=null}}}),rr=O((l,c)=>{A(),th(),e4();var p=c.exports,{Buffer:m}=(tu(),Q(e5));for(let l in p.types={0:"reserved",1:"connect",2:"connack",3:"publish",4:"puback",5:"pubrec",6:"pubrel",7:"pubcomp",8:"subscribe",9:"suback",10:"unsubscribe",11:"unsuback",12:"pingreq",13:"pingresp",14:"disconnect",15:"auth"},p.requiredHeaderFlags={1:0,2:0,4:0,5:0,6:2,7:0,8:2,9:0,10:2,11:0,12:0,13:0,14:0,15:0},p.requiredHeaderFlagsErrors={},p.requiredHeaderFlags){let c=p.requiredHeaderFlags[l];p.requiredHeaderFlagsErrors[l]="Invalid header flag bits, must be 0x"+c.toString(16)+" for "+p.types[l]+" packet"}for(let l in p.codes={},p.types){let c=p.types[l];p.codes[c]=l}for(let l in p.CMD_SHIFT=4,p.CMD_MASK=240,p.DUP_MASK=8,p.QOS_MASK=3,p.QOS_SHIFT=1,p.RETAIN_MASK=1,p.VARBYTEINT_MASK=127,p.VARBYTEINT_FIN_MASK=128,p.VARBYTEINT_MAX=268435455,p.SESSIONPRESENT_MASK=1,p.SESSIONPRESENT_HEADER=m.from([p.SESSIONPRESENT_MASK]),p.CONNACK_HEADER=m.from([p.codes.connack<<p.CMD_SHIFT]),p.USERNAME_MASK=128,p.PASSWORD_MASK=64,p.WILL_RETAIN_MASK=32,p.WILL_QOS_MASK=24,p.WILL_QOS_SHIFT=3,p.WILL_FLAG_MASK=4,p.CLEAN_SESSION_MASK=2,p.CONNECT_HEADER=m.from([p.codes.connect<<p.CMD_SHIFT]),p.properties={sessionExpiryInterval:17,willDelayInterval:24,receiveMaximum:33,maximumPacketSize:39,topicAliasMaximum:34,requestResponseInformation:25,requestProblemInformation:23,userProperties:38,authenticationMethod:21,authenticationData:22,payloadFormatIndicator:1,messageExpiryInterval:2,contentType:3,responseTopic:8,correlationData:9,maximumQoS:36,retainAvailable:37,assignedClientIdentifier:18,reasonString:31,wildcardSubscriptionAvailable:40,subscriptionIdentifiersAvailable:41,sharedSubscriptionAvailable:42,serverKeepAlive:19,responseInformation:26,serverReference:28,topicAlias:35,subscriptionIdentifier:11},p.propertiesCodes={},p.properties){let c=p.properties[l];p.propertiesCodes[c]=l}function Dt(l){return[0,1,2].map(c=>[0,1].map(y=>[0,1].map(_=>{let v=m.alloc(1);return v.writeUInt8(p.codes[l]<<p.CMD_SHIFT|(y?p.DUP_MASK:0)|c<<p.QOS_SHIFT|_,0,!0),v})))}p.propertiesTypes={sessionExpiryInterval:"int32",willDelayInterval:"int32",receiveMaximum:"int16",maximumPacketSize:"int32",topicAliasMaximum:"int16",requestResponseInformation:"byte",requestProblemInformation:"byte",userProperties:"pair",authenticationMethod:"string",authenticationData:"binary",payloadFormatIndicator:"byte",messageExpiryInterval:"int32",contentType:"string",responseTopic:"string",correlationData:"binary",maximumQoS:"int8",retainAvailable:"byte",assignedClientIdentifier:"string",reasonString:"string",wildcardSubscriptionAvailable:"byte",subscriptionIdentifiersAvailable:"byte",sharedSubscriptionAvailable:"byte",serverKeepAlive:"int16",responseInformation:"string",serverReference:"string",topicAlias:"int16",subscriptionIdentifier:"var"},p.PUBLISH_HEADER=Dt("publish"),p.SUBSCRIBE_HEADER=Dt("subscribe"),p.SUBSCRIBE_OPTIONS_QOS_MASK=3,p.SUBSCRIBE_OPTIONS_NL_MASK=1,p.SUBSCRIBE_OPTIONS_NL_SHIFT=2,p.SUBSCRIBE_OPTIONS_RAP_MASK=1,p.SUBSCRIBE_OPTIONS_RAP_SHIFT=3,p.SUBSCRIBE_OPTIONS_RH_MASK=3,p.SUBSCRIBE_OPTIONS_RH_SHIFT=4,p.SUBSCRIBE_OPTIONS_RH=[0,16,32],p.SUBSCRIBE_OPTIONS_NL=4,p.SUBSCRIBE_OPTIONS_RAP=8,p.SUBSCRIBE_OPTIONS_QOS=[0,1,2],p.UNSUBSCRIBE_HEADER=Dt("unsubscribe"),p.ACKS={unsuback:Dt("unsuback"),puback:Dt("puback"),pubcomp:Dt("pubcomp"),pubrel:Dt("pubrel"),pubrec:Dt("pubrec")},p.SUBACK_HEADER=m.from([p.codes.suback<<p.CMD_SHIFT]),p.VERSION3=m.from([3]),p.VERSION4=m.from([4]),p.VERSION5=m.from([5]),p.VERSION131=m.from([131]),p.VERSION132=m.from([132]),p.QOS=[0,1,2].map(l=>m.from([l])),p.EMPTY={pingreq:m.from([p.codes.pingreq<<4,0]),pingresp:m.from([p.codes.pingresp<<4,0]),disconnect:m.from([p.codes.disconnect<<4,0])},p.MQTT5_PUBACK_PUBREC_CODES={0:"Success",16:"No matching subscribers",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",144:"Topic Name invalid",145:"Packet identifier in use",151:"Quota exceeded",153:"Payload format invalid"},p.MQTT5_PUBREL_PUBCOMP_CODES={0:"Success",146:"Packet Identifier not found"},p.MQTT5_SUBACK_CODES={0:"Granted QoS 0",1:"Granted QoS 1",2:"Granted QoS 2",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",143:"Topic Filter invalid",145:"Packet Identifier in use",151:"Quota exceeded",158:"Shared Subscriptions not supported",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"},p.MQTT5_UNSUBACK_CODES={0:"Success",17:"No subscription existed",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",143:"Topic Filter invalid",145:"Packet Identifier in use"},p.MQTT5_DISCONNECT_CODES={0:"Normal disconnection",4:"Disconnect with Will Message",128:"Unspecified error",129:"Malformed Packet",130:"Protocol Error",131:"Implementation specific error",135:"Not authorized",137:"Server busy",139:"Server shutting down",141:"Keep Alive timeout",142:"Session taken over",143:"Topic Filter invalid",144:"Topic Name invalid",147:"Receive Maximum exceeded",148:"Topic Alias invalid",149:"Packet too large",150:"Message rate too high",151:"Quota exceeded",152:"Administrative action",153:"Payload format invalid",154:"Retain not supported",155:"QoS not supported",156:"Use another server",157:"Server moved",158:"Shared Subscriptions not supported",159:"Connection rate exceeded",160:"Maximum connect time",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"},p.MQTT5_AUTH_CODES={0:"Success",24:"Continue authentication",25:"Re-authenticate"}}),ri=O((l,c)=>{function k0(l){if(!((l=String(l)).length>100)){var c=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(l);if(c){var p=parseFloat(c[1]);switch((c[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*p;case"weeks":case"week":case"w":return 6048e5*p;case"days":case"day":case"d":return 864e5*p;case"hours":case"hour":case"hrs":case"hr":case"h":return 36e5*p;case"minutes":case"minute":case"mins":case"min":case"m":return 6e4*p;case"seconds":case"second":case"secs":case"sec":case"s":return 1e3*p;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return p;default:return}}}}function B0(l){var c=Math.abs(l);return c>=864e5?Math.round(l/864e5)+"d":c>=36e5?Math.round(l/36e5)+"h":c>=6e4?Math.round(l/6e4)+"m":c>=1e3?Math.round(l/1e3)+"s":l+"ms"}function x0(l){var c=Math.abs(l);return c>=864e5?Sn(l,c,864e5,"day"):c>=36e5?Sn(l,c,36e5,"hour"):c>=6e4?Sn(l,c,6e4,"minute"):c>=1e3?Sn(l,c,1e3,"second"):l+" ms"}function Sn(l,c,p,m){return Math.round(l/p)+" "+m+(c>=1.5*p?"s":"")}A(),th(),e4(),c.exports=function(l,c){c=c||{};var p=typeof l;if("string"===p&&l.length>0)return k0(l);if("number"===p&&isFinite(l))return c.long?x0(l):B0(l);throw Error("val is not a non-empty string or a valid number. val="+JSON.stringify(l))}}),rn=O((l,c)=>{function O0(l){function e(l){let c=0;for(let p=0;p<l.length;p++)c=(c<<5)-c+l.charCodeAt(p)|0;return r.colors[Math.abs(c)%r.colors.length]}function r(l){let c,p=null,m,y;function w(...l){if(!w.enabled)return;let p=w,m=Number(new Date),y=m-(c||m);p.diff=y,p.prev=c,p.curr=m,c=m,l[0]=r.coerce(l[0]),"string"!=typeof l[0]&&l.unshift("%O");let _=0;l[0]=l[0].replace(/%([a-zA-Z%])/g,(c,m)=>{if("%%"===c)return"%";_++;let y=r.formatters[m];if("function"==typeof y){let m=l[_];c=y.call(p,m),l.splice(_,1),_--}return c}),r.formatArgs.call(p,l),(p.log||r.log).apply(p,l)}return w.namespace=l,w.useColors=r.useColors(),w.color=r.selectColor(l),w.extend=i,w.destroy=r.destroy,Object.defineProperty(w,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==p?p:(m!==r.namespaces&&(m=r.namespaces,y=r.enabled(l)),y),set:l=>{p=l}}),"function"==typeof r.init&&r.init(w),w}function i(l,c){let p=r(this.namespace+(typeof c>"u"?":":c)+l);return p.log=this.log,p}function n(l){for(let c of(r.save(l),r.namespaces=l,r.names=[],r.skips=[],("string"==typeof l?l:"").trim().replace(" ",",").split(",").filter(Boolean)))"-"===c[0]?r.skips.push(c.slice(1)):r.names.push(c)}function o(l,c){let p=0,m=0,y=-1,_=0;for(;p<l.length;)if(m<c.length&&(c[m]===l[p]||"*"===c[m]))"*"===c[m]?(y=m,_=p):p++,m++;else{if(-1===y)return!1;m=y+1,p=++_}for(;m<c.length&&"*"===c[m];)m++;return m===c.length}function s(){let l=[...r.names,...r.skips.map(l=>"-"+l)].join(",");return r.enable(""),l}function a(l){for(let c of r.skips)if(o(l,c))return!1;for(let c of r.names)if(o(l,c))return!0;return!1}function u(l){return l instanceof Error?l.stack||l.message:l}function f(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.debug=r,r.default=r,r.coerce=u,r.disable=s,r.enable=n,r.enabled=a,r.humanize=ri(),r.destroy=f,Object.keys(l).forEach(c=>{r[c]=l[c]}),r.names=[],r.skips=[],r.formatters={},r.selectColor=e,r.enable(r.load()),r}A(),th(),e4(),c.exports=O0}),rs=O((l,c)=>{let p;function M0(){let l;return"u">typeof window&&!!window.process&&("renderer"===window.process.type||!!window.process.__nwjs)||!("u">typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("u">typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"u">typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"u">typeof navigator&&navigator.userAgent&&(l=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(l[1],10)>=31||"u">typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))}function L0(l){if(l[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+l[0]+(this.useColors?"%c ":" ")+"+"+c.exports.humanize(this.diff),!this.useColors)return;let p="color: "+this.color;l.splice(1,0,p,"color: inherit");let m=0,y=0;l[0].replace(/%[a-zA-Z%]/g,l=>{"%%"!==l&&(m++,"%c"===l&&(y=m))}),l.splice(y,0,p)}function q0(c){try{c?l.storage.setItem("debug",c):l.storage.removeItem("debug")}catch{}}function U0(){let c;try{c=l.storage.getItem("debug")}catch{}return!c&&"u">typeof k&&"env"in k&&(c=k.env.DEBUG),c}function N0(){try{return localStorage}catch{}}A(),th(),e4(),l.formatArgs=L0,l.save=q0,l.load=U0,l.useColors=M0,l.storage=N0(),l.destroy=(p=!1,()=>{p||(p=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}),l.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],l.log=console.debug||console.log||(()=>{}),c.exports=rn()(l);var{formatters:m}=c.exports;m.j=function(l){try{return JSON.stringify(l)}catch(l){return"[UnexpectedJSONParseError]: "+l.message}}}),ra=O((l,c)=>{A(),th(),e4();var p=re(),{EventEmitter:m}=(tj(),Q(tT)),y=rt(),_=rr(),v=rs()("mqtt-packet:parser"),k=class t extends m{constructor(){super(),this.parser=this.constructor.parser}static parser(l){return this instanceof t?(this.settings=l||{},this._states=["_parseHeader","_parseLength","_parsePayload","_newPacket"],this._resetState(),this):new t().parser(l)}_resetState(){v("_resetState: resetting packet, error, _list, and _stateCounter"),this.packet=new y,this.error=null,this._list=p(),this._stateCounter=0}parse(l){for(this.error&&this._resetState(),this._list.append(l),v("parse: current state: %s",this._states[this._stateCounter]);(-1!==this.packet.length||this._list.length>0)&&this[this._states[this._stateCounter]]()&&!this.error;)this._stateCounter++,v("parse: state complete. _stateCounter is now: %d",this._stateCounter),v("parse: packet.length: %d, buffer list length: %d",this.packet.length,this._list.length),this._stateCounter>=this._states.length&&(this._stateCounter=0);return v("parse: exited while loop. packet: %d, buffer list length: %d",this.packet.length,this._list.length),this._list.length}_parseHeader(){let l=this._list.readUInt8(0),c=l>>_.CMD_SHIFT;this.packet.cmd=_.types[c];let p=_.requiredHeaderFlags[c];return null!=p&&(15&l)!==p?this._emitError(Error(_.requiredHeaderFlagsErrors[c])):(this.packet.retain=(l&_.RETAIN_MASK)!=0,this.packet.qos=l>>_.QOS_SHIFT&_.QOS_MASK,this.packet.qos>2?this._emitError(Error("Packet must not have both QoS bits set to 1")):(this.packet.dup=(l&_.DUP_MASK)!=0,v("_parseHeader: packet: %o",this.packet),this._list.consume(1),!0))}_parseLength(){let l=this._parseVarByteNum(!0);return l&&(this.packet.length=l.value,this._list.consume(l.bytes)),v("_parseLength %d",l.value),!!l}_parsePayload(){v("_parsePayload: payload %O",this._list);let l=!1;if(0===this.packet.length||this._list.length>=this.packet.length){switch(this._pos=0,this.packet.cmd){case"connect":this._parseConnect();break;case"connack":this._parseConnack();break;case"publish":this._parsePublish();break;case"puback":case"pubrec":case"pubrel":case"pubcomp":this._parseConfirmation();break;case"subscribe":this._parseSubscribe();break;case"suback":this._parseSuback();break;case"unsubscribe":this._parseUnsubscribe();break;case"unsuback":this._parseUnsuback();break;case"pingreq":case"pingresp":break;case"disconnect":this._parseDisconnect();break;case"auth":this._parseAuth();break;default:this._emitError(Error("Not supported"))}l=!0}return v("_parsePayload complete result: %s",l),l}_parseConnect(){v("_parseConnect");let l,c,p,m,y={},A=this.packet,k=this._parseString();if(null===k)return this._emitError(Error("Cannot parse protocolId"));if("MQTT"!==k&&"MQIsdp"!==k)return this._emitError(Error("Invalid protocolId"));if(A.protocolId=k,this._pos>=this._list.length)return this._emitError(Error("Packet too short"));if(A.protocolVersion=this._list.readUInt8(this._pos),A.protocolVersion>=128&&(A.bridgeMode=!0,A.protocolVersion=A.protocolVersion-128),3!==A.protocolVersion&&4!==A.protocolVersion&&5!==A.protocolVersion)return this._emitError(Error("Invalid protocol version"));if(this._pos++,this._pos>=this._list.length)return this._emitError(Error("Packet too short"));if(1&this._list.readUInt8(this._pos))return this._emitError(Error("Connect flag bit 0 must be 0, but got 1"));y.username=this._list.readUInt8(this._pos)&_.USERNAME_MASK,y.password=this._list.readUInt8(this._pos)&_.PASSWORD_MASK,y.will=this._list.readUInt8(this._pos)&_.WILL_FLAG_MASK;let T=!!(this._list.readUInt8(this._pos)&_.WILL_RETAIN_MASK),R=(this._list.readUInt8(this._pos)&_.WILL_QOS_MASK)>>_.WILL_QOS_SHIFT;if(y.will)A.will={},A.will.retain=T,A.will.qos=R;else{if(T)return this._emitError(Error("Will Retain Flag must be set to zero when Will Flag is set to 0"));if(R)return this._emitError(Error("Will QoS must be set to zero when Will Flag is set to 0"))}if(A.clean=(this._list.readUInt8(this._pos)&_.CLEAN_SESSION_MASK)!=0,this._pos++,A.keepalive=this._parseNum(),-1===A.keepalive)return this._emitError(Error("Packet too short"));if(5===A.protocolVersion){let l=this._parseProperties();Object.getOwnPropertyNames(l).length&&(A.properties=l)}let x=this._parseString();if(null===x)return this._emitError(Error("Packet too short"));if(A.clientId=x,v("_parseConnect: packet.clientId: %s",A.clientId),y.will){if(5===A.protocolVersion){let l=this._parseProperties();Object.getOwnPropertyNames(l).length&&(A.will.properties=l)}if(null===(l=this._parseString()))return this._emitError(Error("Cannot parse will topic"));if(A.will.topic=l,v("_parseConnect: packet.will.topic: %s",A.will.topic),null===(c=this._parseBuffer()))return this._emitError(Error("Cannot parse will payload"));A.will.payload=c,v("_parseConnect: packet.will.paylaod: %s",A.will.payload)}if(y.username){if(null===(m=this._parseString()))return this._emitError(Error("Cannot parse username"));A.username=m,v("_parseConnect: packet.username: %s",A.username)}if(y.password){if(null===(p=this._parseBuffer()))return this._emitError(Error("Cannot parse password"));A.password=p}return this.settings=A,v("_parseConnect: complete"),A}_parseConnack(){v("_parseConnack");let l=this.packet;if(this._list.length<1)return null;let c=this._list.readUInt8(this._pos++);if(c>1)return this._emitError(Error("Invalid connack flags, bits 7-1 must be set to 0"));if(l.sessionPresent=!!(c&_.SESSIONPRESENT_MASK),5===this.settings.protocolVersion)this._list.length>=2?l.reasonCode=this._list.readUInt8(this._pos++):l.reasonCode=0;else{if(this._list.length<2)return null;l.returnCode=this._list.readUInt8(this._pos++)}if(-1===l.returnCode||-1===l.reasonCode)return this._emitError(Error("Cannot parse return code"));if(5===this.settings.protocolVersion){let c=this._parseProperties();Object.getOwnPropertyNames(c).length&&(l.properties=c)}v("_parseConnack: complete")}_parsePublish(){v("_parsePublish");let l=this.packet;if(l.topic=this._parseString(),null===l.topic)return this._emitError(Error("Cannot parse topic"));if(!(l.qos>0&&!this._parseMessageId())){if(5===this.settings.protocolVersion){let c=this._parseProperties();Object.getOwnPropertyNames(c).length&&(l.properties=c)}l.payload=this._list.slice(this._pos,l.length),v("_parsePublish: payload from buffer list: %o",l.payload)}}_parseSubscribe(){v("_parseSubscribe");let l=this.packet,c,p,m,y,A,k,T;if(l.subscriptions=[],this._parseMessageId()){if(5===this.settings.protocolVersion){let c=this._parseProperties();Object.getOwnPropertyNames(c).length&&(l.properties=c)}if(l.length<=0)return this._emitError(Error("Malformed subscribe, no payload specified"));for(;this._pos<l.length;){if(null===(c=this._parseString()))return this._emitError(Error("Cannot parse topic"));if(this._pos>=l.length)return this._emitError(Error("Malformed Subscribe Payload"));if(p=this._parseByte(),5===this.settings.protocolVersion){if(192&p)return this._emitError(Error("Invalid subscribe topic flag bits, bits 7-6 must be 0"))}else if(252&p)return this._emitError(Error("Invalid subscribe topic flag bits, bits 7-2 must be 0"));if((m=p&_.SUBSCRIBE_OPTIONS_QOS_MASK)>2)return this._emitError(Error("Invalid subscribe QoS, must be <= 2"));if(k=(p>>_.SUBSCRIBE_OPTIONS_NL_SHIFT&_.SUBSCRIBE_OPTIONS_NL_MASK)!=0,A=(p>>_.SUBSCRIBE_OPTIONS_RAP_SHIFT&_.SUBSCRIBE_OPTIONS_RAP_MASK)!=0,(y=p>>_.SUBSCRIBE_OPTIONS_RH_SHIFT&_.SUBSCRIBE_OPTIONS_RH_MASK)>2)return this._emitError(Error("Invalid retain handling, must be <= 2"));T={topic:c,qos:m},5===this.settings.protocolVersion?(T.nl=k,T.rap=A,T.rh=y):this.settings.bridgeMode&&(T.rh=0,T.rap=!0,T.nl=!0),v("_parseSubscribe: push subscription `%s` to subscription",T),l.subscriptions.push(T)}}}_parseSuback(){v("_parseSuback");let l=this.packet;if(this.packet.granted=[],this._parseMessageId()){if(5===this.settings.protocolVersion){let c=this._parseProperties();Object.getOwnPropertyNames(c).length&&(l.properties=c)}if(l.length<=0)return this._emitError(Error("Malformed suback, no payload specified"));for(;this._pos<this.packet.length;){let l=this._list.readUInt8(this._pos++);if(5===this.settings.protocolVersion){if(!_.MQTT5_SUBACK_CODES[l])return this._emitError(Error("Invalid suback code"))}else if(l>2&&128!==l)return this._emitError(Error("Invalid suback QoS, must be 0, 1, 2 or 128"));this.packet.granted.push(l)}}}_parseUnsubscribe(){v("_parseUnsubscribe");let l=this.packet;if(l.unsubscriptions=[],this._parseMessageId()){if(5===this.settings.protocolVersion){let c=this._parseProperties();Object.getOwnPropertyNames(c).length&&(l.properties=c)}if(l.length<=0)return this._emitError(Error("Malformed unsubscribe, no payload specified"));for(;this._pos<l.length;){let c=this._parseString();if(null===c)return this._emitError(Error("Cannot parse topic"));v("_parseUnsubscribe: push topic `%s` to unsubscriptions",c),l.unsubscriptions.push(c)}}}_parseUnsuback(){v("_parseUnsuback");let l=this.packet;if(!this._parseMessageId())return this._emitError(Error("Cannot parse messageId"));if((3===this.settings.protocolVersion||4===this.settings.protocolVersion)&&2!==l.length)return this._emitError(Error("Malformed unsuback, payload length must be 2"));if(l.length<=0)return this._emitError(Error("Malformed unsuback, no payload specified"));if(5===this.settings.protocolVersion){let c=this._parseProperties();for(Object.getOwnPropertyNames(c).length&&(l.properties=c),l.granted=[];this._pos<this.packet.length;){let l=this._list.readUInt8(this._pos++);if(!_.MQTT5_UNSUBACK_CODES[l])return this._emitError(Error("Invalid unsuback code"));this.packet.granted.push(l)}}}_parseConfirmation(){v("_parseConfirmation: packet.cmd: `%s`",this.packet.cmd);let l=this.packet;if(this._parseMessageId(),5===this.settings.protocolVersion){if(l.length>2){switch(l.reasonCode=this._parseByte(),this.packet.cmd){case"puback":case"pubrec":if(!_.MQTT5_PUBACK_PUBREC_CODES[l.reasonCode])return this._emitError(Error("Invalid "+this.packet.cmd+" reason code"));break;case"pubrel":case"pubcomp":if(!_.MQTT5_PUBREL_PUBCOMP_CODES[l.reasonCode])return this._emitError(Error("Invalid "+this.packet.cmd+" reason code"))}v("_parseConfirmation: packet.reasonCode `%d`",l.reasonCode)}else l.reasonCode=0;if(l.length>3){let c=this._parseProperties();Object.getOwnPropertyNames(c).length&&(l.properties=c)}}return!0}_parseDisconnect(){let l=this.packet;if(v("_parseDisconnect"),5===this.settings.protocolVersion){this._list.length>0?(l.reasonCode=this._parseByte(),_.MQTT5_DISCONNECT_CODES[l.reasonCode]||this._emitError(Error("Invalid disconnect reason code"))):l.reasonCode=0;let c=this._parseProperties();Object.getOwnPropertyNames(c).length&&(l.properties=c)}return v("_parseDisconnect result: true"),!0}_parseAuth(){v("_parseAuth");let l=this.packet;if(5!==this.settings.protocolVersion)return this._emitError(Error("Not supported auth packet for this version MQTT"));if(l.reasonCode=this._parseByte(),!_.MQTT5_AUTH_CODES[l.reasonCode])return this._emitError(Error("Invalid auth reason code"));let c=this._parseProperties();return Object.getOwnPropertyNames(c).length&&(l.properties=c),v("_parseAuth: result: true"),!0}_parseMessageId(){let l=this.packet;return l.messageId=this._parseNum(),null===l.messageId?(this._emitError(Error("Cannot parse messageId")),!1):(v("_parseMessageId: packet.messageId %d",l.messageId),!0)}_parseString(l){let c=this._parseNum(),p=c+this._pos;if(-1===c||p>this._list.length||p>this.packet.length)return null;let m=this._list.toString("utf8",this._pos,p);return this._pos+=c,v("_parseString: result: %s",m),m}_parseStringPair(){return v("_parseStringPair"),{name:this._parseString(),value:this._parseString()}}_parseBuffer(){let l=this._parseNum(),c=l+this._pos;if(-1===l||c>this._list.length||c>this.packet.length)return null;let p=this._list.slice(this._pos,c);return this._pos+=l,v("_parseBuffer: result: %o",p),p}_parseNum(){if(this._list.length-this._pos<2)return -1;let l=this._list.readUInt16BE(this._pos);return this._pos+=2,v("_parseNum: result: %s",l),l}_parse4ByteNum(){if(this._list.length-this._pos<4)return -1;let l=this._list.readUInt32BE(this._pos);return this._pos+=4,v("_parse4ByteNum: result: %s",l),l}_parseVarByteNum(l){v("_parseVarByteNum");let c=0,p=1,m=0,y=!1,A,k=this._pos?this._pos:0;for(;c<4&&k+c<this._list.length;){if(m+=p*((A=this._list.readUInt8(k+c++))&_.VARBYTEINT_MASK),p*=128,(A&_.VARBYTEINT_FIN_MASK)==0){y=!0;break}if(this._list.length<=c)break}return!y&&4===c&&this._list.length>=c&&this._emitError(Error("Invalid variable byte integer")),k&&(this._pos+=c),v("_parseVarByteNum: result: %o",y=!!y&&(l?{bytes:c,value:m}:m)),y}_parseByte(){let l;return this._pos<this._list.length&&(l=this._list.readUInt8(this._pos),this._pos++),v("_parseByte: result: %o",l),l}_parseByType(l){switch(v("_parseByType: type: %s",l),l){case"byte":return 0!==this._parseByte();case"int8":return this._parseByte();case"int16":return this._parseNum();case"int32":return this._parse4ByteNum();case"var":return this._parseVarByteNum();case"string":return this._parseString();case"pair":return this._parseStringPair();case"binary":return this._parseBuffer()}}_parseProperties(){v("_parseProperties");let l=this._parseVarByteNum(),c=this._pos+l,p={};for(;this._pos<c;){let l=this._parseByte();if(!l)return this._emitError(Error("Cannot parse property code type")),!1;let c=_.propertiesCodes[l];if(!c)return this._emitError(Error("Unknown property")),!1;if("userProperties"===c){p[c]||(p[c]=Object.create(null));let l=this._parseByType(_.propertiesTypes[c]);if(p[c][l.name]){if(Array.isArray(p[c][l.name]))p[c][l.name].push(l.value);else{let m=p[c][l.name];p[c][l.name]=[m],p[c][l.name].push(l.value)}}else p[c][l.name]=l.value;continue}p[c]?(Array.isArray(p[c])||(p[c]=[p[c]]),p[c].push(this._parseByType(_.propertiesTypes[c]))):p[c]=this._parseByType(_.propertiesTypes[c])}return p}_newPacket(){return v("_newPacket"),this.packet&&(this._list.consume(this.packet.length),v("_newPacket: parser emit packet: packet.cmd: %s, packet.payload: %s, packet.length: %d",this.packet.cmd,this.packet.payload,this.packet.length),this.emit("packet",this.packet)),v("_newPacket: new packet"),this.packet=new y,this._pos=0,!0}_emitError(l){v("_emitError",l),this.error=l,this.emit("error",l)}};c.exports=k}),rl=O((l,c)=>{A(),th(),e4();var{Buffer:p}=(tu(),Q(e5)),m={},y=p.isBuffer(p.from([1,2]).subarray(0,1));function yd(l){let c=p.allocUnsafe(2);return c.writeUInt8(l>>8,0),c.writeUInt8(255&l,1),c}function H0(){for(let l=0;l<65536;l++)m[l]=yd(l)}function V0(l){let c=0,m=0,_=p.allocUnsafe(4);do c=l%128|0,(l=l/128|0)>0&&(c|=128),_.writeUInt8(c,m++);while(l>0&&m<4);return l>0&&(m=0),y?_.subarray(0,m):_.slice(0,m)}function z0(l){let c=p.allocUnsafe(4);return c.writeUInt32BE(l,0),c}c.exports={cache:m,generateCache:H0,generateNumber:yd,genBufVariableByteInt:V0,generate4ByteBuffer:z0}}),ru=O((l,c)=>{function K0(l,c,p,m){if("function"!=typeof l)throw TypeError('"callback" argument must be a function');var y,_,v=arguments.length;switch(v){case 0:case 1:return k.nextTick(l);case 2:return k.nextTick(function(){l.call(null,c)});case 3:return k.nextTick(function(){l.call(null,c,p)});case 4:return k.nextTick(function(){l.call(null,c,p,m)});default:for(y=Array(v-1),_=0;_<y.length;)y[_++]=arguments[_];return k.nextTick(function(){l.apply(null,y)})}}A(),th(),e4(),typeof k>"u"||!k.version||0===k.version.indexOf("v0.")||0===k.version.indexOf("v1.")&&0!==k.version.indexOf("v1.8.")?c.exports={nextTick:K0}:c.exports=k}),rh=O((l,c)=>{A(),th(),e4();var p=rr(),{Buffer:m}=(tu(),Q(e5)),y=m.allocUnsafe(0),_=m.from([0]),v=rl(),k=ru().nextTick,T=rs()("mqtt-packet:writeToStream"),R=v.cache,x=v.generateNumber,B=v.generateCache,U=v.genBufVariableByteInt,N=v.generate4ByteBuffer,L=Fo,D=!0;function Td(l,c,p){switch(T("generate called"),c.cork&&(c.cork(),k(ev,c)),D&&(D=!1,B()),T("generate: packet.cmd: %s",l.cmd),l.cmd){case"connect":return tv(l,c,p);case"connack":return rv(l,c,p);case"publish":return iv(l,c,p);case"puback":case"pubrec":case"pubrel":case"pubcomp":return nv(l,c,p);case"subscribe":return sv(l,c,p);case"suback":return ov(l,c,p);case"unsubscribe":return av(l,c,p);case"unsuback":return lv(l,c,p);case"pingreq":case"pingresp":return uv(l,c,p);case"disconnect":return cv(l,c,p);case"auth":return fv(l,c,p);default:return c.destroy(Error("Unknown command")),!1}}function ev(l){l.uncork()}function tv(l,c,y){let _,v,A,k=l||{},T=k.protocolId||"MQTT",R=k.protocolVersion||4,x=k.will,B=k.clean,U=k.keepalive||0,N=k.clientId||"",D=k.username,W=k.password,V=k.properties;void 0===B&&(B=!0);let H=0;if(!T||"string"!=typeof T&&!m.isBuffer(T))return c.destroy(Error("Invalid protocolId")),!1;if(H+=T.length+2,3!==R&&4!==R&&5!==R)return c.destroy(Error("Invalid protocol version")),!1;if(H+=1,("string"==typeof N||m.isBuffer(N))&&(N||R>=4)&&(N||B))H+=m.byteLength(N)+2;else{if(R<4)return c.destroy(Error("clientId must be supplied before 3.1.1")),!1;if(1*B==0)return c.destroy(Error("clientId must be given if cleanSession set to 0")),!1}if("number"!=typeof U||U<0||U>65535||U%1!=0)return c.destroy(Error("Invalid keepalive")),!1;if(H+=3,5===R){if(!(v=jt(c,V)))return!1;H+=v.length}if(x){if("object"!=typeof x)return c.destroy(Error("Invalid will")),!1;if(!x.topic||"string"!=typeof x.topic)return c.destroy(Error("Invalid will topic")),!1;if(H+=m.byteLength(x.topic)+2+2,x.payload){if(!(x.payload.length>=0))return c.destroy(Error("Invalid will payload")),!1;"string"==typeof x.payload?H+=m.byteLength(x.payload):H+=x.payload.length}if(A={},5===R){if(!(A=jt(c,x.properties)))return!1;H+=A.length}}let K=!1;if(null!=D){if(!Id(D))return c.destroy(Error("Invalid username")),!1;K=!0,H+=m.byteLength(D)+2}if(null!=W){if(!K)return c.destroy(Error("Username is required to use password")),!1;if(!Id(W))return c.destroy(Error("Invalid password")),!1;H+=Rd(W)+2}return c.write(p.CONNECT_HEADER),Ue(c,H),Vr(c,T),k.bridgeMode&&(R+=128),c.write(131===R?p.VERSION131:132===R?p.VERSION132:4===R?p.VERSION4:5===R?p.VERSION5:p.VERSION3),_=0|(null!=D?p.USERNAME_MASK:0)|(null!=W?p.PASSWORD_MASK:0)|(x&&x.retain?p.WILL_RETAIN_MASK:0)|(x&&x.qos?x.qos<<p.WILL_QOS_SHIFT:0)|(x?p.WILL_FLAG_MASK:0)|(B?p.CLEAN_SESSION_MASK:0),c.write(m.from([_])),L(c,U),5===R&&v.write(),Vr(c,N),x&&(5===R&&A.write(),ur(c,x.topic),Vr(c,x.payload)),null!=D&&Vr(c,D),null!=W&&Vr(c,W),!0}function rv(l,c,y){let v=y?y.protocolVersion:4,A=l||{},k=5===v?A.reasonCode:A.returnCode,T=A.properties,R=2;if("number"!=typeof k)return c.destroy(Error("Invalid return code")),!1;let x=null;if(5===v){if(!(x=jt(c,T)))return!1;R+=x.length}return c.write(p.CONNACK_HEADER),Ue(c,R),c.write(A.sessionPresent?p.SESSIONPRESENT_HEADER:_),c.write(m.from([k])),x?.write(),!0}function iv(l,c,_){T("publish: packet: %o",l);let v=_?_.protocolVersion:4,A=l||{},k=A.qos||0,R=A.retain?p.RETAIN_MASK:0,x=A.topic,B=A.payload||y,U=A.messageId,N=A.properties,D=0;if("string"==typeof x)D+=m.byteLength(x)+2;else{if(!m.isBuffer(x))return c.destroy(Error("Invalid topic")),!1;D+=x.length+2}if(m.isBuffer(B)?D+=B.length:D+=m.byteLength(B),k&&"number"!=typeof U)return c.destroy(Error("Invalid messageId")),!1;k&&(D+=2);let W=null;if(5===v){if(!(W=jt(c,N)))return!1;D+=W.length}return c.write(p.PUBLISH_HEADER[k][A.dup?1:0][R?1:0]),Ue(c,D),L(c,Rd(x)),c.write(x),k>0&&L(c,U),W?.write(),T("publish: payload: %o",B),c.write(B)}function nv(l,c,y){let _=y?y.protocolVersion:4,v=l||{},A=v.cmd||"puback",k=v.messageId,T=v.dup&&"pubrel"===A?p.DUP_MASK:0,R=0,x=v.reasonCode,B=v.properties,U=5===_?3:2;if("pubrel"===A&&(R=1),"number"!=typeof k)return c.destroy(Error("Invalid messageId")),!1;let N=null;if(5===_&&"object"==typeof B){if(!(N=Ei(c,B,y,U)))return!1;U+=N.length}return c.write(p.ACKS[A][R][T][0]),3===U&&(U+=0!==x?1:-1),Ue(c,U),L(c,k),5===_&&2!==U&&c.write(m.from([x])),null!==N?N.write():4===U&&c.write(m.from([0])),!0}function sv(l,c,y){T("subscribe: packet: ");let _=y?y.protocolVersion:4,v=l||{},A=v.dup?p.DUP_MASK:0,k=v.messageId,R=v.subscriptions,x=v.properties,B=0;if("number"!=typeof k)return c.destroy(Error("Invalid messageId")),!1;B+=2;let U=null;if(5===_){if(!(U=jt(c,x)))return!1;B+=U.length}if("object"!=typeof R||!R.length)return c.destroy(Error("Invalid subscriptions")),!1;for(let l=0;l<R.length;l+=1){let p=R[l].topic,y=R[l].qos;if("string"!=typeof p)return c.destroy(Error("Invalid subscriptions - invalid topic")),!1;if("number"!=typeof y)return c.destroy(Error("Invalid subscriptions - invalid qos")),!1;if(5===_){if("boolean"!=typeof(R[l].nl||!1))return c.destroy(Error("Invalid subscriptions - invalid No Local")),!1;if("boolean"!=typeof(R[l].rap||!1))return c.destroy(Error("Invalid subscriptions - invalid Retain as Published")),!1;let p=R[l].rh||0;if("number"!=typeof p||p>2)return c.destroy(Error("Invalid subscriptions - invalid Retain Handling")),!1}B+=m.byteLength(p)+2+1}T("subscribe: writing to stream: %o",p.SUBSCRIBE_HEADER),c.write(p.SUBSCRIBE_HEADER[1][A?1:0][0]),Ue(c,B),L(c,k),null!==U&&U.write();let N=!0;for(let l of R){let y=l.topic,v=l.qos,A=+l.nl,k=+l.rap,T=l.rh,R;ur(c,y),R=p.SUBSCRIBE_OPTIONS_QOS[v],5===_&&(R|=A?p.SUBSCRIBE_OPTIONS_NL:0,R|=k?p.SUBSCRIBE_OPTIONS_RAP:0,R|=T?p.SUBSCRIBE_OPTIONS_RH[T]:0),N=c.write(m.from([R]))}return N}function ov(l,c,y){let _=y?y.protocolVersion:4,v=l||{},A=v.messageId,k=v.granted,T=v.properties,R=0;if("number"!=typeof A)return c.destroy(Error("Invalid messageId")),!1;if(R+=2,"object"!=typeof k||!k.length)return c.destroy(Error("Invalid qos vector")),!1;for(let l=0;l<k.length;l+=1){if("number"!=typeof k[l])return c.destroy(Error("Invalid qos vector")),!1;R+=1}let x=null;if(5===_){if(!(x=Ei(c,T,y,R)))return!1;R+=x.length}return c.write(p.SUBACK_HEADER),Ue(c,R),L(c,A),null!==x&&x.write(),c.write(m.from(k))}function av(l,c,y){let _=y?y.protocolVersion:4,v=l||{},A=v.messageId,k=v.dup?p.DUP_MASK:0,T=v.unsubscriptions,R=v.properties,x=0;if("number"!=typeof A)return c.destroy(Error("Invalid messageId")),!1;if(x+=2,"object"!=typeof T||!T.length)return c.destroy(Error("Invalid unsubscriptions")),!1;for(let l=0;l<T.length;l+=1){if("string"!=typeof T[l])return c.destroy(Error("Invalid unsubscriptions")),!1;x+=m.byteLength(T[l])+2}let B=null;if(5===_){if(!(B=jt(c,R)))return!1;x+=B.length}c.write(p.UNSUBSCRIBE_HEADER[1][k?1:0][0]),Ue(c,x),L(c,A),null!==B&&B.write();let U=!0;for(let l=0;l<T.length;l++)U=ur(c,T[l]);return U}function lv(l,c,y){let _=y?y.protocolVersion:4,v=l||{},A=v.messageId,k=v.dup?p.DUP_MASK:0,T=v.granted,R=v.properties,x=v.cmd,B=2;if("number"!=typeof A)return c.destroy(Error("Invalid messageId")),!1;if(5===_){if("object"!=typeof T||!T.length)return c.destroy(Error("Invalid qos vector")),!1;for(let l=0;l<T.length;l+=1){if("number"!=typeof T[l])return c.destroy(Error("Invalid qos vector")),!1;B+=1}}let U=null;if(5===_){if(!(U=Ei(c,R,y,B)))return!1;B+=U.length}return c.write(p.ACKS[x][0][k][0]),Ue(c,B),L(c,A),null!==U&&U.write(),5===_&&c.write(m.from(T)),!0}function uv(l,c,m){return c.write(p.EMPTY[l.cmd])}function cv(l,c,y){let _=y?y.protocolVersion:4,v=l||{},A=v.reasonCode,k=v.properties,T=5===_?1:0,R=null;if(5===_){if(!(R=Ei(c,k,y,T)))return!1;T+=R.length}return c.write(m.from([p.codes.disconnect<<4])),Ue(c,T),5===_&&c.write(m.from([A])),null!==R&&R.write(),!0}function fv(l,c,y){let _=y?y.protocolVersion:4,v=l||{},A=v.reasonCode,k=v.properties,T=5===_?1:0;5!==_&&c.destroy(Error("Invalid mqtt version for auth packet"));let R=Ei(c,k,y,T);return!!R&&(T+=R.length,c.write(m.from([p.codes.auth<<4])),Ue(c,T),c.write(m.from([A])),null!==R&&R.write(),!0)}Object.defineProperty(Td,"cacheNumbers",{get:()=>L===Fo,set(l){l?(R&&0!==Object.keys(R).length||(D=!0),L=Fo):(D=!1,L=hv)}});var W={};function Ue(l,c){if(c>p.VARBYTEINT_MAX)return l.destroy(Error(`Invalid variable byte integer: ${c}`)),!1;let m=W[c];return m||(m=U(c),c<16384&&(W[c]=m)),T("writeVarByteInt: writing to stream: %o",m),l.write(m)}function ur(l,c){let p=m.byteLength(c);return L(l,p),T("writeString: %s",c),l.write(c,"utf8")}function Fo(l,c){return T("writeNumberCached: number: %d",c),T("writeNumberCached: %o",R[c]),l.write(R[c])}function hv(l,c){let p=x(c);return T("writeNumberGenerated: %o",p),l.write(p)}function dv(l,c){let p=N(c);return T("write4ByteNumber: %o",p),l.write(p)}function Vr(l,c){"string"==typeof c?ur(l,c):c?(L(l,c.length),l.write(c)):L(l,0)}function jt(l,c){if("object"!=typeof c||null!=c.length)return{length:1,write(){Ad(l,{},0)}};let y=0;function i(c,y){let _=p.propertiesTypes[c],v=0;switch(_){case"byte":if("boolean"!=typeof y)return l.destroy(Error(`Invalid ${c}: ${y}`)),!1;v+=2;break;case"int8":if("number"!=typeof y||y<0||y>255)return l.destroy(Error(`Invalid ${c}: ${y}`)),!1;v+=2;break;case"binary":if(y&&null===y)return l.destroy(Error(`Invalid ${c}: ${y}`)),!1;v+=1+m.byteLength(y)+2;break;case"int16":if("number"!=typeof y||y<0||y>65535)return l.destroy(Error(`Invalid ${c}: ${y}`)),!1;v+=3;break;case"int32":if("number"!=typeof y||y<0||y>4294967295)return l.destroy(Error(`Invalid ${c}: ${y}`)),!1;v+=5;break;case"var":if("number"!=typeof y||y<0||y>268435455)return l.destroy(Error(`Invalid ${c}: ${y}`)),!1;v+=1+m.byteLength(U(y));break;case"string":if("string"!=typeof y)return l.destroy(Error(`Invalid ${c}: ${y}`)),!1;v+=3+m.byteLength(y.toString());break;case"pair":if("object"!=typeof y)return l.destroy(Error(`Invalid ${c}: ${y}`)),!1;v+=Object.getOwnPropertyNames(y).reduce((l,c)=>{let p=y[c];return Array.isArray(p)?l+=p.reduce((l,p)=>l+=3+m.byteLength(c.toString())+2+m.byteLength(p.toString()),0):l+=3+m.byteLength(c.toString())+2+m.byteLength(y[c].toString()),l},0);break;default:return l.destroy(Error(`Invalid property ${c}: ${y}`)),!1}return v}if(c)for(let l in c){let p=0,m=0,_=c[l];if(void 0!==_){if(Array.isArray(_))for(let c=0;c<_.length;c++){if(!(m=i(l,_[c])))return!1;p+=m}else{if(!(m=i(l,_)))return!1;p=m}if(!p)return!1;y+=p}}return{length:m.byteLength(U(y))+y,write(){Ad(l,c,y)}}}function Ei(l,c,p,m){let y=["reasonString","userProperties"],_=p&&p.properties&&p.properties.maximumPacketSize?p.properties.maximumPacketSize:0,v=jt(l,c);if(_)for(;m+v.length>_;){let p=y.shift();if(!p||!c[p])return!1;delete c[p],v=jt(l,c)}return v}function Sd(l,c,y){switch(p.propertiesTypes[c]){case"byte":l.write(m.from([p.properties[c]])),l.write(m.from([+y]));break;case"int8":l.write(m.from([p.properties[c]])),l.write(m.from([y]));break;case"binary":l.write(m.from([p.properties[c]])),Vr(l,y);break;case"int16":l.write(m.from([p.properties[c]])),L(l,y);break;case"int32":l.write(m.from([p.properties[c]])),dv(l,y);break;case"var":l.write(m.from([p.properties[c]])),Ue(l,y);break;case"string":l.write(m.from([p.properties[c]])),ur(l,y);break;case"pair":Object.getOwnPropertyNames(y).forEach(_=>{var v,A;let k=y[_];Array.isArray(k)?k.forEach(y=>{var v,A;l.write(m.from([p.properties[c]])),v=_.toString(),A=y.toString(),ur(l,v),ur(l,A)}):(l.write(m.from([p.properties[c]])),v=_.toString(),A=k.toString(),ur(l,v),ur(l,A))});break;default:return l.destroy(Error(`Invalid property ${c} value: ${y}`)),!1}}function Ad(l,c,p){for(let m in Ue(l,p),c)if(Object.prototype.hasOwnProperty.call(c,m)&&null!=c[m]){let p=c[m];if(Array.isArray(p))for(let c=0;c<p.length;c++)Sd(l,m,p[c]);else Sd(l,m,p)}}function Rd(l){return l?l instanceof m?l.length:m.byteLength(l):0}function Id(l){return"string"==typeof l||l instanceof m}c.exports=Td}),rf=O((l,c)=>{A(),th(),e4();var p=rh(),{EventEmitter:m}=(tj(),Q(tT)),{Buffer:y}=(tu(),Q(e5));function bv(l,c){let m=new _;return p(l,m,c),m.concat()}var _=class extends m{constructor(){super(),this._array=Array(20),this._i=0}write(l){return this._array[this._i++]=l,!0}concat(){let l=0,c=Array(this._array.length),p=this._array,m=0,_;for(_=0;_<p.length&&void 0!==p[_];_++)"string"!=typeof p[_]?c[_]=p[_].length:c[_]=y.byteLength(p[_]),l+=c[_];let v=y.allocUnsafe(l);for(_=0;_<p.length&&void 0!==p[_];_++)"string"!=typeof p[_]?p[_].copy(v,m):v.write(p[_],m),m+=c[_];return v}destroy(l){l&&this.emit("error",l)}};c.exports=bv}),rd=O(l=>{A(),th(),e4(),l.parser=ra().parser,l.generate=rf(),l.writeToStream=rh()}),rp=O(l=>{A(),th(),e4(),Object.defineProperty(l,"__esModule",{value:!0}),l.default=class{constructor(){this.nextId=Math.max(1,Math.floor(65535*Math.random()))}allocate(){let l=this.nextId++;return 65536===this.nextId&&(this.nextId=1),l}getLastAllocated(){return 1===this.nextId?65535:this.nextId-1}register(l){return!0}deallocate(l){}clear(){}}}),rg=O((l,c)=>{function zr(l){return l instanceof ts?ts.from(l):new l.constructor(l.buffer.slice(),l.byteOffset,l.length)}function yv(l){if((l=l||{}).circles)return wv(l);let c=new Map;if(c.set(Date,l=>new Date(l)),c.set(Map,(l,c)=>new Map(i(Array.from(l),c))),c.set(Set,(l,c)=>new Set(i(Array.from(l),c))),l.constructorHandlers)for(let p of l.constructorHandlers)c.set(p[0],p[1]);let p=null;return l.proto?o:n;function i(l,m){let y=Object.keys(l),_=Array(y.length);for(let v=0;v<y.length;v++){let A=y[v],k=l[A];"object"!=typeof k||null===k?_[A]=k:k.constructor!==Object&&(p=c.get(k.constructor))?_[A]=p(k,m):ArrayBuffer.isView(k)?_[A]=zr(k):_[A]=m(k)}return _}function n(l){if("object"!=typeof l||null===l)return l;if(Array.isArray(l))return i(l,n);if(l.constructor!==Object&&(p=c.get(l.constructor)))return p(l,n);let m={};for(let y in l){if(!1===Object.hasOwnProperty.call(l,y))continue;let _=l[y];"object"!=typeof _||null===_?m[y]=_:_.constructor!==Object&&(p=c.get(_.constructor))?m[y]=p(_,n):ArrayBuffer.isView(_)?m[y]=zr(_):m[y]=n(_)}return m}function o(l){if("object"!=typeof l||null===l)return l;if(Array.isArray(l))return i(l,o);if(l.constructor!==Object&&(p=c.get(l.constructor)))return p(l,o);let m={};for(let y in l){let _=l[y];"object"!=typeof _||null===_?m[y]=_:_.constructor!==Object&&(p=c.get(_.constructor))?m[y]=p(_,o):ArrayBuffer.isView(_)?m[y]=zr(_):m[y]=o(_)}return m}}function wv(l){let c=[],p=[],m=new Map;if(m.set(Date,l=>new Date(l)),m.set(Map,(l,c)=>new Map(o(Array.from(l),c))),m.set(Set,(l,c)=>new Set(o(Array.from(l),c))),l.constructorHandlers)for(let c of l.constructorHandlers)m.set(c[0],c[1]);let y=null;return l.proto?a:s;function o(l,_){let v=Object.keys(l),A=Array(v.length);for(let k=0;k<v.length;k++){let T=v[k],R=l[T];if("object"!=typeof R||null===R)A[T]=R;else if(R.constructor!==Object&&(y=m.get(R.constructor)))A[T]=y(R,_);else if(ArrayBuffer.isView(R))A[T]=zr(R);else{let l=c.indexOf(R);-1!==l?A[T]=p[l]:A[T]=_(R)}}return A}function s(l){if("object"!=typeof l||null===l)return l;if(Array.isArray(l))return o(l,s);if(l.constructor!==Object&&(y=m.get(l.constructor)))return y(l,s);let _={};for(let v in c.push(l),p.push(_),l){if(!1===Object.hasOwnProperty.call(l,v))continue;let A=l[v];if("object"!=typeof A||null===A)_[v]=A;else if(A.constructor!==Object&&(y=m.get(A.constructor)))_[v]=y(A,s);else if(ArrayBuffer.isView(A))_[v]=zr(A);else{let l=c.indexOf(A);-1!==l?_[v]=p[l]:_[v]=s(A)}}return c.pop(),p.pop(),_}function a(l){if("object"!=typeof l||null===l)return l;if(Array.isArray(l))return o(l,a);if(l.constructor!==Object&&(y=m.get(l.constructor)))return y(l,a);let _={};for(let v in c.push(l),p.push(_),l){let A=l[v];if("object"!=typeof A||null===A)_[v]=A;else if(A.constructor!==Object&&(y=m.get(A.constructor)))_[v]=y(A,a);else if(ArrayBuffer.isView(A))_[v]=zr(A);else{let l=c.indexOf(A);-1!==l?_[v]=p[l]:_[v]=a(A)}}return c.pop(),p.pop(),_}}A(),th(),e4(),c.exports=yv}),rb=O((l,c)=>{A(),th(),e4(),c.exports=rg()()}),rm=O(l=>{function Ud(l){let c=l.split("/");for(let l=0;l<c.length;l++)if("+"!==c[l]){if("#"===c[l])return l===c.length-1;if(-1!==c[l].indexOf("+")||-1!==c[l].indexOf("#"))return!1}return!0}function _v(l){if(0===l.length)return"empty_topic_list";for(let c=0;c<l.length;c++)if(!Ud(l[c]))return l[c];return null}A(),th(),e4(),Object.defineProperty(l,"__esModule",{value:!0}),l.validateTopic=Ud,l.validateTopics=_v}),r_=O(l=>{A(),th(),e4(),Object.defineProperty(l,"__esModule",{value:!0});var c=t8(),p={objectMode:!0},m={clean:!0},y=class{constructor(l){this.options=l||{},this.options=Object.assign(Object.assign({},m),l),this._inflights=new Map}put(l,c){return this._inflights.set(l.messageId,l),c&&c(),this}createStream(){let l=new c.Readable(p),m=[],y=!1,_=0;return this._inflights.forEach((l,c)=>{m.push(l)}),l._read=()=>{!y&&_<m.length?l.push(m[_++]):l.push(null)},l.destroy=c=>{if(!y)return y=!0,setTimeout(()=>{l.emit("close")},0),l},l}del(l,c){let p=this._inflights.get(l.messageId);return p?(this._inflights.delete(l.messageId),c(null,p)):c&&c(Error("missing packet")),this}get(l,c){let p=this._inflights.get(l.messageId);return p?c(null,p):c&&c(Error("missing packet")),this}close(l){this.options.clean&&(this._inflights=null),l&&l()}};l.default=y}),rE=O(l=>{A(),th(),e4(),Object.defineProperty(l,"__esModule",{value:!0});var c=[0,16,128,131,135,144,145,151,153];l.default=(l,p,m)=>{l.log("handlePublish: packet %o",p),m="u">typeof m?m:l.noop;let y=p.topic.toString(),_=p.payload,{qos:v}=p,{messageId:A}=p,{options:k}=l;if(5===l.options.protocolVersion){let c;if(p.properties&&(c=p.properties.topicAlias),"u">typeof c){if(0===y.length){if(c>0&&c<=65535){let p=l.topicAliasRecv.getTopicByAlias(c);if(p)y=p,l.log("handlePublish :: topic complemented by alias. topic: %s - alias: %d",y,c);else{l.log("handlePublish :: unregistered topic alias. alias: %d",c),l.emit("error",Error("Received unregistered Topic Alias"));return}}else{l.log("handlePublish :: topic alias out of range. alias: %d",c),l.emit("error",Error("Received Topic Alias is out of range"));return}}else if(l.topicAliasRecv.put(y,c))l.log("handlePublish :: registered topic: %s - alias: %d",y,c);else{l.log("handlePublish :: topic alias out of range. alias: %d",c),l.emit("error",Error("Received Topic Alias is out of range"));return}}}switch(l.log("handlePublish: qos %d",v),v){case 2:k.customHandleAcks(y,_,p,(y,_)=>("number"==typeof y&&(_=y,y=null),y)?l.emit("error",y):-1===c.indexOf(_)?l.emit("error",Error("Wrong reason code for pubrec")):void(_?l._sendPacket({cmd:"pubrec",messageId:A,reasonCode:_},m):l.incomingStore.put(p,()=>{l._sendPacket({cmd:"pubrec",messageId:A},m)})));break;case 1:k.customHandleAcks(y,_,p,(v,k)=>("number"==typeof v&&(k=v,v=null),v)?l.emit("error",v):-1===c.indexOf(k)?l.emit("error",Error("Wrong reason code for puback")):void(k||l.emit("message",y,_,p),l.handleMessage(p,c=>{if(c)return m&&m(c);l._sendPacket({cmd:"puback",messageId:A,reasonCode:k},m)})));break;case 0:l.emit("message",y,_,p),l.handleMessage(p,m);break;default:l.log("handlePublish: unknown QoS. Doing nothing.")}}}),rS=O((l,c)=>{c.exports={version:"5.13.1"}}),rA=O(l=>{A(),th(),e4(),Object.defineProperty(l,"__esModule",{value:!0}),l.MQTTJS_VERSION=l.nextTick=l.ErrorWithSubackPacket=l.ErrorWithReasonCode=void 0,l.applyMixin=Iv;var c=class t extends Error{constructor(l,c){super(l),this.code=c,Object.setPrototypeOf(this,t.prototype),Object.getPrototypeOf(this).name="ErrorWithReasonCode"}};l.ErrorWithReasonCode=c;var p=class t extends Error{constructor(l,c){super(l),this.packet=c,Object.setPrototypeOf(this,t.prototype),Object.getPrototypeOf(this).name="ErrorWithSubackPacket"}};function Iv(l,c,p=!1){var m;let y=[c];for(;;){let l=Object.getPrototypeOf(y[0]);if(l?.prototype)y.unshift(l);else break}for(let c of y)for(let y of Object.getOwnPropertyNames(c.prototype))(p||"constructor"!==y)&&Object.defineProperty(l.prototype,y,null!==(m=Object.getOwnPropertyDescriptor(c.prototype,y))&&void 0!==m?m:Object.create(null))}l.ErrorWithSubackPacket=p,l.nextTick="function"==typeof(null==k?void 0:k.nextTick)?k.nextTick:l=>{setTimeout(l,0)},l.MQTTJS_VERSION=rS().version}),rI=O(l=>{A(),th(),e4(),Object.defineProperty(l,"__esModule",{value:!0}),l.ReasonCodes=void 0;var c=rA();l.ReasonCodes={0:"",1:"Unacceptable protocol version",2:"Identifier rejected",3:"Server unavailable",4:"Bad username or password",5:"Not authorized",16:"No matching subscribers",17:"No subscription existed",128:"Unspecified error",129:"Malformed Packet",130:"Protocol Error",131:"Implementation specific error",132:"Unsupported Protocol Version",133:"Client Identifier not valid",134:"Bad User Name or Password",135:"Not authorized",136:"Server unavailable",137:"Server busy",138:"Banned",139:"Server shutting down",140:"Bad authentication method",141:"Keep Alive timeout",142:"Session taken over",143:"Topic Filter invalid",144:"Topic Name invalid",145:"Packet identifier in use",146:"Packet Identifier not found",147:"Receive Maximum exceeded",148:"Topic Alias invalid",149:"Packet too large",150:"Message rate too high",151:"Quota exceeded",152:"Administrative action",153:"Payload format invalid",154:"Retain not supported",155:"QoS not supported",156:"Use another server",157:"Server moved",158:"Shared Subscriptions not supported",159:"Connection rate exceeded",160:"Maximum connect time",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"},l.default=(p,m)=>{let{messageId:y}=m,_=m.cmd,v=null,A=p.outgoing[y]?p.outgoing[y].cb:null,k=null;if(!A){p.log("_handleAck :: Server sent an ack in error. Ignoring.");return}switch(p.log("_handleAck :: packet type",_),_){case"pubcomp":case"puback":{let _=m.reasonCode;_&&_>0&&16!==_?(k=new c.ErrorWithReasonCode(`Publish error: ${l.ReasonCodes[_]}`,_),p._removeOutgoingAndStoreMessage(y,()=>{A(k,m)})):p._removeOutgoingAndStoreMessage(y,A);break}case"pubrec":{v={cmd:"pubrel",qos:2,messageId:y};let _=m.reasonCode;_&&_>0&&16!==_?(k=new c.ErrorWithReasonCode(`Publish error: ${l.ReasonCodes[_]}`,_),p._removeOutgoingAndStoreMessage(y,()=>{A(k,m)})):p._sendPacket(v);break}case"suback":{delete p.outgoing[y],p.messageIdProvider.deallocate(y);let c=m.granted;for(let m=0;m<c.length;m++){let _=c[m];if((128&_)!=0){(k=Error(`Subscribe error: ${l.ReasonCodes[_]}`)).code=_;let c=p.messageIdToTopic[y];c&&c.forEach(l=>{delete p._resubscribeTopics[l]})}}delete p.messageIdToTopic[y],p._invokeStoreProcessingQueue(),A(k,m);break}case"unsuback":delete p.outgoing[y],p.messageIdProvider.deallocate(y),p._invokeStoreProcessingQueue(),A(null,m);break;default:p.emit("error",Error("unrecognized packet type"))}p.disconnecting&&0===Object.keys(p.outgoing).length&&p.emit("outgoingEmpty")}}),rO=O(l=>{A(),th(),e4(),Object.defineProperty(l,"__esModule",{value:!0});var c=rA(),p=rI();l.default=(l,m)=>{let{options:y}=l,_=y.protocolVersion,v=5===_?m.reasonCode:m.returnCode;if(5!==_){let p=new c.ErrorWithReasonCode(`Protocol error: Auth packets are only supported in MQTT 5. Your version:${_}`,v);l.emit("error",p);return}l.handleAuth(m,(m,y)=>{if(m){l.emit("error",m);return}if(24===v)l.reconnecting=!1,l._sendPacket(y);else{let m=new c.ErrorWithReasonCode(`Connection refused: ${p.ReasonCodes[v]}`,v);l.emit("error",m)}})}}),rk=O(l=>{A(),th(),e4(),Object.defineProperty(l,"__esModule",{value:!0}),l.LRUCache=void 0;var c="object"==typeof performance&&performance&&"function"==typeof performance.now?performance:Date,p=new Set,m="object"==typeof k&&k?k:{},Kd=(l,c,p,y)=>{"function"==typeof m.emitWarning?m.emitWarning(l,c,p,y):console.error(`[${p}] ${c}: ${l}`)},y=globalThis.AbortController,_=globalThis.AbortSignal;if(typeof y>"u"){_=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(l,c){this._onabort.push(c)}},y=class{constructor(){e()}signal=new _;abort(l){if(!this.signal.aborted){for(let c of(this.signal.reason=l,this.signal.aborted=!0,this.signal._onabort))c(l);this.signal.onabort?.(l)}}};let l=m.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1",e=()=>{l&&(l=!1,Kd("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",e))}}var Pv=l=>!p.has(l),v=(Symbol("type"),l=>l&&l===Math.floor(l)&&l>0&&isFinite(l)),Gd=l=>v(l)?l<=256?Uint8Array:l<=65536?Uint16Array:l<=4294967296?Uint32Array:l<=Number.MAX_SAFE_INTEGER?T:null:null,T=class extends Array{constructor(l){super(l),this.fill(0)}},R=class t{heap;length;static #e=!1;static create(l){let c=Gd(l);if(!c)return[];t.#e=!0;let p=new t(l,c);return t.#e=!1,p}constructor(l,c){if(!t.#e)throw TypeError("instantiate Stack using Stack.create(n)");this.heap=new c(l),this.length=0}push(l){this.heap[this.length++]=l}pop(){return this.heap[--this.length]}},x=class t{#e;#t;#r;#i;#n;#o;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#s;#a;#l;#u;#h;#c;#f;#d;#p;#g;#b;#m;#y;#_;#w;#v;#E;static unsafeExposeInternals(l){return{starts:l.#y,ttls:l.#_,sizes:l.#m,keyMap:l.#l,keyList:l.#u,valList:l.#h,next:l.#c,prev:l.#f,get head(){return l.#d},get tail(){return l.#p},free:l.#g,isBackgroundFetch:c=>l.#S(c),backgroundFetch:(c,p,m,y)=>l.#A(c,p,m,y),moveToTail:c=>l.#I(c),indexes:c=>l.#O(c),rindexes:c=>l.#k(c),isStale:c=>l.#T(c)}}get max(){return this.#e}get maxSize(){return this.#t}get calculatedSize(){return this.#a}get size(){return this.#s}get fetchMethod(){return this.#n}get memoMethod(){return this.#o}get dispose(){return this.#r}get disposeAfter(){return this.#i}constructor(l){let{max:c=0,ttl:m,ttlResolution:y=1,ttlAutopurge:_,updateAgeOnGet:A,updateAgeOnHas:k,allowStale:T,dispose:x,disposeAfter:B,noDisposeOnSet:U,noUpdateTTL:N,maxSize:L=0,maxEntrySize:D=0,sizeCalculation:W,fetchMethod:V,memoMethod:H,noDeleteOnFetchRejection:K,noDeleteOnStaleGet:J,allowStaleOnFetchRejection:X,allowStaleOnFetchAbort:ee,ignoreFetchAbort:et}=l;if(0!==c&&!v(c))throw TypeError("max option must be a nonnegative integer");let er=c?Gd(c):Array;if(!er)throw Error("invalid max value: "+c);if(this.#e=c,this.#t=L,this.maxEntrySize=D||this.#t,this.sizeCalculation=W,this.sizeCalculation){if(!this.#t&&!this.maxEntrySize)throw TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if("function"!=typeof this.sizeCalculation)throw TypeError("sizeCalculation set to non-function")}if(void 0!==H&&"function"!=typeof H)throw TypeError("memoMethod must be a function if defined");if(this.#o=H,void 0!==V&&"function"!=typeof V)throw TypeError("fetchMethod must be a function if specified");if(this.#n=V,this.#v=!!V,this.#l=new Map,this.#u=Array(c).fill(void 0),this.#h=Array(c).fill(void 0),this.#c=new er(c),this.#f=new er(c),this.#d=0,this.#p=0,this.#g=R.create(c),this.#s=0,this.#a=0,"function"==typeof x&&(this.#r=x),"function"==typeof B?(this.#i=B,this.#b=[]):(this.#i=void 0,this.#b=void 0),this.#w=!!this.#r,this.#E=!!this.#i,this.noDisposeOnSet=!!U,this.noUpdateTTL=!!N,this.noDeleteOnFetchRejection=!!K,this.allowStaleOnFetchRejection=!!X,this.allowStaleOnFetchAbort=!!ee,this.ignoreFetchAbort=!!et,0!==this.maxEntrySize){if(0!==this.#t&&!v(this.#t))throw TypeError("maxSize must be a positive integer if specified");if(!v(this.maxEntrySize))throw TypeError("maxEntrySize must be a positive integer if specified");this.#R()}if(this.allowStale=!!T,this.noDeleteOnStaleGet=!!J,this.updateAgeOnGet=!!A,this.updateAgeOnHas=!!k,this.ttlResolution=v(y)||0===y?y:1,this.ttlAutopurge=!!_,this.ttl=m||0,this.ttl){if(!v(this.ttl))throw TypeError("ttl must be a positive integer if specified");this.#P()}if(0===this.#e&&0===this.ttl&&0===this.#t)throw TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#e&&!this.#t){let l="LRU_CACHE_UNBOUNDED";Pv(l)&&(p.add(l),Kd("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",l,t))}}getRemainingTTL(l){return this.#l.has(l)?1/0:0}#P(){let l=new T(this.#e),p=new T(this.#e);this.#_=l,this.#y=p,this.#C=(m,y,_=c.now())=>{if(p[m]=0!==y?_:0,l[m]=y,0!==y&&this.ttlAutopurge){let l=setTimeout(()=>{this.#T(m)&&this.#x(this.#u[m],"expire")},y+1);l.unref&&l.unref()}},this.#B=m=>{p[m]=0!==l[m]?c.now():0},this.#M=(c,y)=>{if(l[y]){let _=l[y],v=p[y];if(!_||!v)return;c.ttl=_,c.start=v,c.now=m||n();let A=c.now-v;c.remainingTTL=_-A}};let m=0,n=()=>{let l=c.now();if(this.ttlResolution>0){m=l;let c=setTimeout(()=>m=0,this.ttlResolution);c.unref&&c.unref()}return l};this.getRemainingTTL=c=>{let y=this.#l.get(c);if(void 0===y)return 0;let _=l[y],v=p[y];return _&&v?_-((m||n())-v):1/0},this.#T=c=>{let y=p[c],_=l[c];return!!_&&!!y&&(m||n())-y>_}}#B=()=>{};#M=()=>{};#C=()=>{};#T=()=>!1;#R(){let l=new T(this.#e);this.#a=0,this.#m=l,this.#j=c=>{this.#a-=l[c],l[c]=0},this.#U=(l,c,p,m)=>{if(this.#S(c))return 0;if(!v(p)){if(m){if("function"!=typeof m)throw TypeError("sizeCalculation must be a function");if(!v(p=m(c,l)))throw TypeError("sizeCalculation return invalid (expect positive integer)")}else throw TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.")}return p},this.#N=(c,p,m)=>{if(l[c]=p,this.#t){let p=this.#t-l[c];for(;this.#a>p;)this.#L(!0)}this.#a+=l[c],m&&(m.entrySize=p,m.totalCalculatedSize=this.#a)}}#j=l=>{};#N=(l,c,p)=>{};#U=(l,c,p,m)=>{if(p||m)throw TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#O({allowStale:l=this.allowStale}={}){if(this.#s)for(let c=this.#p;!(!this.#D(c)||((l||!this.#T(c))&&(yield c),c===this.#d));)c=this.#f[c]}*#k({allowStale:l=this.allowStale}={}){if(this.#s)for(let c=this.#d;!(!this.#D(c)||((l||!this.#T(c))&&(yield c),c===this.#p));)c=this.#c[c]}#D(l){return void 0!==l&&this.#l.get(this.#u[l])===l}*entries(){for(let l of this.#O())void 0===this.#h[l]||void 0===this.#u[l]||this.#S(this.#h[l])||(yield[this.#u[l],this.#h[l]])}*rentries(){for(let l of this.#k())void 0===this.#h[l]||void 0===this.#u[l]||this.#S(this.#h[l])||(yield[this.#u[l],this.#h[l]])}*keys(){for(let l of this.#O()){let c=this.#u[l];void 0===c||this.#S(this.#h[l])||(yield c)}}*rkeys(){for(let l of this.#k()){let c=this.#u[l];void 0===c||this.#S(this.#h[l])||(yield c)}}*values(){for(let l of this.#O())void 0===this.#h[l]||this.#S(this.#h[l])||(yield this.#h[l])}*rvalues(){for(let l of this.#k())void 0===this.#h[l]||this.#S(this.#h[l])||(yield this.#h[l])}[Symbol.iterator](){return this.entries()}[Symbol.toStringTag]="LRUCache";find(l,c={}){for(let p of this.#O()){let m=this.#h[p],y=this.#S(m)?m.__staleWhileFetching:m;if(void 0!==y&&l(y,this.#u[p],this))return this.get(this.#u[p],c)}}forEach(l,c=this){for(let p of this.#O()){let m=this.#h[p],y=this.#S(m)?m.__staleWhileFetching:m;void 0!==y&&l.call(c,y,this.#u[p],this)}}rforEach(l,c=this){for(let p of this.#k()){let m=this.#h[p],y=this.#S(m)?m.__staleWhileFetching:m;void 0!==y&&l.call(c,y,this.#u[p],this)}}purgeStale(){let l=!1;for(let c of this.#k({allowStale:!0}))this.#T(c)&&(this.#x(this.#u[c],"expire"),l=!0);return l}info(l){let p=this.#l.get(l);if(void 0===p)return;let m=this.#h[p],y=this.#S(m)?m.__staleWhileFetching:m;if(void 0===y)return;let _={value:y};if(this.#_&&this.#y){let l=this.#_[p],m=this.#y[p];if(l&&m){let p=l-(c.now()-m);_.ttl=p,_.start=Date.now()}}return this.#m&&(_.size=this.#m[p]),_}dump(){let l=[];for(let p of this.#O({allowStale:!0})){let m=this.#u[p],y=this.#h[p],_=this.#S(y)?y.__staleWhileFetching:y;if(void 0===_||void 0===m)continue;let v={value:_};if(this.#_&&this.#y){v.ttl=this.#_[p];let l=c.now()-this.#y[p];v.start=Math.floor(Date.now()-l)}this.#m&&(v.size=this.#m[p]),l.unshift([m,v])}return l}load(l){for(let[p,m]of(this.clear(),l)){if(m.start){let l=Date.now()-m.start;m.start=c.now()-l}this.set(p,m.value,m)}}set(l,c,p={}){if(void 0===c)return this.delete(l),this;let{ttl:m=this.ttl,start:y,noDisposeOnSet:_=this.noDisposeOnSet,sizeCalculation:v=this.sizeCalculation,status:A}=p,{noUpdateTTL:k=this.noUpdateTTL}=p,T=this.#U(l,c,p.size||0,v);if(this.maxEntrySize&&T>this.maxEntrySize)return A&&(A.set="miss",A.maxEntrySizeExceeded=!0),this.#x(l,"set"),this;let R=0===this.#s?void 0:this.#l.get(l);if(void 0===R)R=0===this.#s?this.#p:0!==this.#g.length?this.#g.pop():this.#s===this.#e?this.#L(!1):this.#s,this.#u[R]=l,this.#h[R]=c,this.#l.set(l,R),this.#c[this.#p]=R,this.#f[R]=this.#p,this.#p=R,this.#s++,this.#N(R,T,A),A&&(A.set="add"),k=!1;else{this.#I(R);let p=this.#h[R];if(c!==p){if(this.#v&&this.#S(p)){p.__abortController.abort(Error("replaced"));let{__staleWhileFetching:c}=p;void 0!==c&&!_&&(this.#w&&this.#r?.(c,l,"set"),this.#E&&this.#b?.push([c,l,"set"]))}else _||(this.#w&&this.#r?.(p,l,"set"),this.#E&&this.#b?.push([p,l,"set"]));if(this.#j(R),this.#N(R,T,A),this.#h[R]=c,A){A.set="replace";let l=p&&this.#S(p)?p.__staleWhileFetching:p;void 0!==l&&(A.oldValue=l)}}else A&&(A.set="update")}if(0===m||this.#_||this.#P(),this.#_&&(k||this.#C(R,m,y),A&&this.#M(A,R)),!_&&this.#E&&this.#b){let l=this.#b,c;for(;c=l?.shift();)this.#i?.(...c)}return this}pop(){try{for(;this.#s;){let l=this.#h[this.#d];if(this.#L(!0),this.#S(l)){if(l.__staleWhileFetching)return l.__staleWhileFetching}else if(void 0!==l)return l}}finally{if(this.#E&&this.#b){let l=this.#b,c;for(;c=l?.shift();)this.#i?.(...c)}}}#L(l){let c=this.#d,p=this.#u[c],m=this.#h[c];return this.#v&&this.#S(m)?m.__abortController.abort(Error("evicted")):(this.#w||this.#E)&&(this.#w&&this.#r?.(m,p,"evict"),this.#E&&this.#b?.push([m,p,"evict"])),this.#j(c),l&&(this.#u[c]=void 0,this.#h[c]=void 0,this.#g.push(c)),1===this.#s?(this.#d=this.#p=0,this.#g.length=0):this.#d=this.#c[c],this.#l.delete(p),this.#s--,c}has(l,c={}){let{updateAgeOnHas:p=this.updateAgeOnHas,status:m}=c,y=this.#l.get(l);if(void 0!==y){let l=this.#h[y];if(this.#S(l)&&void 0===l.__staleWhileFetching)return!1;if(!this.#T(y))return p&&this.#B(y),m&&(m.has="hit",this.#M(m,y)),!0;m&&(m.has="stale",this.#M(m,y))}else m&&(m.has="miss");return!1}peek(l,c={}){let{allowStale:p=this.allowStale}=c,m=this.#l.get(l);if(void 0===m||!p&&this.#T(m))return;let y=this.#h[m];return this.#S(y)?y.__staleWhileFetching:y}#A(l,c,p,m){let _=void 0===c?void 0:this.#h[c];if(this.#S(_))return _;let v=new y,{signal:A}=p;A?.addEventListener("abort",()=>v.abort(A.reason),{signal:v.signal});let k={signal:v.signal,options:p,context:m},f=(m,y=!1)=>{let{aborted:_}=v.signal,A=p.ignoreFetchAbort&&void 0!==m;return(p.status&&(_&&!y?(p.status.fetchAborted=!0,p.status.fetchError=v.signal.reason,A&&(p.status.fetchAbortIgnored=!0)):p.status.fetchResolved=!0),!_||A||y)?(this.#h[c]===T&&(void 0===m?T.__staleWhileFetching?this.#h[c]=T.__staleWhileFetching:this.#x(l,"fetch"):(p.status&&(p.status.fetchUpdated=!0),this.set(l,m,k.options))),m):h(v.signal.reason)},h=m=>{let{aborted:y}=v.signal,_=y&&p.allowStaleOnFetchAbort,A=_||p.allowStaleOnFetchRejection,k=A||p.noDeleteOnFetchRejection;if(this.#h[c]===T&&(k&&void 0!==T.__staleWhileFetching?_||(this.#h[c]=T.__staleWhileFetching):this.#x(l,"fetch")),A)return p.status&&void 0!==T.__staleWhileFetching&&(p.status.returnedStale=!0),T.__staleWhileFetching;if(T.__returned===T)throw m};p.status&&(p.status.fetchDispatched=!0);let T=new Promise((c,m)=>{let y=this.#n?.(l,_,k);y&&y instanceof Promise&&y.then(l=>c(void 0===l?void 0:l),m),v.signal.addEventListener("abort",()=>{(!p.ignoreFetchAbort||p.allowStaleOnFetchAbort)&&(c(void 0),p.allowStaleOnFetchAbort&&(c=l=>f(l,!0)))})}).then(f,l=>(p.status&&(p.status.fetchRejected=!0,p.status.fetchError=l),h(l))),R=Object.assign(T,{__abortController:v,__staleWhileFetching:_,__returned:void 0});return void 0===c?(this.set(l,R,{...k.options,status:void 0}),c=this.#l.get(l)):this.#h[c]=R,R}#S(l){return!!this.#v&&!!l&&l instanceof Promise&&l.hasOwnProperty("__staleWhileFetching")&&l.__abortController instanceof y}async fetch(l,c={}){let{allowStale:p=this.allowStale,updateAgeOnGet:m=this.updateAgeOnGet,noDeleteOnStaleGet:y=this.noDeleteOnStaleGet,ttl:_=this.ttl,noDisposeOnSet:v=this.noDisposeOnSet,size:A=0,sizeCalculation:k=this.sizeCalculation,noUpdateTTL:T=this.noUpdateTTL,noDeleteOnFetchRejection:R=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:x=this.allowStaleOnFetchRejection,ignoreFetchAbort:B=this.ignoreFetchAbort,allowStaleOnFetchAbort:U=this.allowStaleOnFetchAbort,context:N,forceRefresh:L=!1,status:D,signal:W}=c;if(!this.#v)return D&&(D.fetch="get"),this.get(l,{allowStale:p,updateAgeOnGet:m,noDeleteOnStaleGet:y,status:D});let V={allowStale:p,updateAgeOnGet:m,noDeleteOnStaleGet:y,ttl:_,noDisposeOnSet:v,size:A,sizeCalculation:k,noUpdateTTL:T,noDeleteOnFetchRejection:R,allowStaleOnFetchRejection:x,allowStaleOnFetchAbort:U,ignoreFetchAbort:B,status:D,signal:W},H=this.#l.get(l);if(void 0===H){D&&(D.fetch="miss");let c=this.#A(l,H,V,N);return c.__returned=c}{let c=this.#h[H];if(this.#S(c)){let l=p&&void 0!==c.__staleWhileFetching;return D&&(D.fetch="inflight",l&&(D.returnedStale=!0)),l?c.__staleWhileFetching:c.__returned=c}let y=this.#T(H);if(!L&&!y)return D&&(D.fetch="hit"),this.#I(H),m&&this.#B(H),D&&this.#M(D,H),c;let _=this.#A(l,H,V,N),v=void 0!==_.__staleWhileFetching&&p;return D&&(D.fetch=y?"stale":"refresh",v&&y&&(D.returnedStale=!0)),v?_.__staleWhileFetching:_.__returned=_}}async forceFetch(l,c={}){let p=await this.fetch(l,c);if(void 0===p)throw Error("fetch() returned undefined");return p}memo(l,c={}){let p=this.#o;if(!p)throw Error("no memoMethod provided to constructor");let{context:m,forceRefresh:y,..._}=c,v=this.get(l,_);if(!y&&void 0!==v)return v;let A=p(l,v,{options:_,context:m});return this.set(l,A,_),A}get(l,c={}){let{allowStale:p=this.allowStale,updateAgeOnGet:m=this.updateAgeOnGet,noDeleteOnStaleGet:y=this.noDeleteOnStaleGet,status:_}=c,v=this.#l.get(l);if(void 0!==v){let c=this.#h[v],A=this.#S(c);return _&&this.#M(_,v),this.#T(v)?(_&&(_.get="stale"),A?(_&&p&&void 0!==c.__staleWhileFetching&&(_.returnedStale=!0),p?c.__staleWhileFetching:void 0):(y||this.#x(l,"expire"),_&&p&&(_.returnedStale=!0),p?c:void 0)):(_&&(_.get="hit"),A?c.__staleWhileFetching:(this.#I(v),m&&this.#B(v),c))}_&&(_.get="miss")}#F(l,c){this.#f[c]=l,this.#c[l]=c}#I(l){l!==this.#p&&(l===this.#d?this.#d=this.#c[l]:this.#F(this.#f[l],this.#c[l]),this.#F(this.#p,l),this.#p=l)}delete(l){return this.#x(l,"delete")}#x(l,c){let p=!1;if(0!==this.#s){let m=this.#l.get(l);if(void 0!==m){if(p=!0,1===this.#s)this.#W(c);else{this.#j(m);let p=this.#h[m];if(this.#S(p)?p.__abortController.abort(Error("deleted")):(this.#w||this.#E)&&(this.#w&&this.#r?.(p,l,c),this.#E&&this.#b?.push([p,l,c])),this.#l.delete(l),this.#u[m]=void 0,this.#h[m]=void 0,m===this.#p)this.#p=this.#f[m];else if(m===this.#d)this.#d=this.#c[m];else{let l=this.#f[m];this.#c[l]=this.#c[m];let c=this.#c[m];this.#f[c]=this.#f[m]}this.#s--,this.#g.push(m)}}}if(this.#E&&this.#b?.length){let l=this.#b,c;for(;c=l?.shift();)this.#i?.(...c)}return p}clear(){return this.#W("delete")}#W(l){for(let c of this.#k({allowStale:!0})){let p=this.#h[c];if(this.#S(p))p.__abortController.abort(Error("deleted"));else{let m=this.#u[c];this.#w&&this.#r?.(p,m,l),this.#E&&this.#b?.push([p,m,l])}}if(this.#l.clear(),this.#h.fill(void 0),this.#u.fill(void 0),this.#_&&this.#y&&(this.#_.fill(0),this.#y.fill(0)),this.#m&&this.#m.fill(0),this.#d=0,this.#p=0,this.#g.length=0,this.#a=0,this.#s=0,this.#E&&this.#b){let l=this.#b,c;for(;c=l?.shift();)this.#i?.(...c)}}};l.LRUCache=x}),rT=O(l=>{A(),th(),e4(),Object.defineProperty(l,"t",{value:!0}),l.ContainerIterator=l.Container=l.Base=void 0,l.ContainerIterator=class{constructor(l=0){this.iteratorType=l}equals(l){return this.o===l.o}};var c=class{constructor(){this.i=0}get length(){return this.i}size(){return this.i}empty(){return 0===this.i}};l.Base=c;var p=class extends c{};l.Container=p}),rR=O(l=>{A(),th(),e4(),Object.defineProperty(l,"t",{value:!0}),l.default=void 0;var c=rT(),p=class extends c.Base{constructor(l=[]){super(),this.S=[];let c=this;l.forEach(function(l){c.push(l)})}clear(){this.i=0,this.S=[]}push(l){return this.S.push(l),this.i+=1,this.i}pop(){if(0!==this.i)return this.i-=1,this.S.pop()}top(){return this.S[this.i-1]}};l.default=p}),rP=O(l=>{A(),th(),e4(),Object.defineProperty(l,"t",{value:!0}),l.default=void 0;var c=rT(),p=class extends c.Base{constructor(l=[]){super(),this.j=0,this.q=[];let c=this;l.forEach(function(l){c.push(l)})}clear(){this.q=[],this.i=this.j=0}push(l){let c=this.q.length;if(this.j/c>.5&&this.j+this.i>=c&&c>4096){let c=this.i;for(let l=0;l<c;++l)this.q[l]=this.q[this.j+l];this.j=0,this.q[this.i]=l}else this.q[this.j+this.i]=l;return++this.i}pop(){if(0===this.i)return;let l=this.q[this.j++];return this.i-=1,l}front(){if(0!==this.i)return this.q[this.j]}};l.default=p}),rC=O(l=>{A(),th(),e4(),Object.defineProperty(l,"t",{value:!0}),l.default=void 0;var c=rT(),p=class extends c.Base{constructor(l=[],c=function(l,c){return l>c?-1:l<c?1:0},p=!0){if(super(),this.v=c,Array.isArray(l))this.C=p?[...l]:l;else{this.C=[];let c=this;l.forEach(function(l){c.C.push(l)})}this.i=this.C.length;let m=this.i>>1;for(let l=this.i-1>>1;l>=0;--l)this.k(l,m)}m(l){let c=this.C[l];for(;l>0;){let p=l-1>>1,m=this.C[p];if(0>=this.v(m,c))break;this.C[l]=m,l=p}this.C[l]=c}k(l,c){let p=this.C[l];for(;l<c;){let c=l<<1|1,m=c+1,y=this.C[c];if(m<this.i&&this.v(y,this.C[m])>0&&(c=m,y=this.C[m]),this.v(y,p)>=0)break;this.C[l]=y,l=c}this.C[l]=p}clear(){this.i=0,this.C.length=0}push(l){this.C.push(l),this.m(this.i),this.i+=1}pop(){if(0===this.i)return;let l=this.C[0],c=this.C.pop();return this.i-=1,this.i&&(this.C[0]=c,this.k(0,this.i>>1)),l}top(){return this.C[0]}find(l){return this.C.indexOf(l)>=0}remove(l){let c=this.C.indexOf(l);return!(c<0)&&(0===c?this.pop():c===this.i-1?(this.C.pop(),this.i-=1):(this.C.splice(c,1,this.C.pop()),this.i-=1,this.m(c),this.k(c,this.i>>1)),!0)}updateItem(l){let c=this.C.indexOf(l);return!(c<0)&&(this.m(c),this.k(c,this.i>>1),!0)}toArray(){return[...this.C]}};l.default=p}),rx=O(l=>{A(),th(),e4(),Object.defineProperty(l,"t",{value:!0}),l.default=void 0;var c=rT(),p=class extends c.Container{};l.default=p}),rB=O(l=>{function Nv(){throw RangeError("Iterator access denied!")}A(),th(),e4(),Object.defineProperty(l,"t",{value:!0}),l.throwIteratorAccessError=Nv}),rM=O(l=>{A(),th(),e4(),Object.defineProperty(l,"t",{value:!0}),l.RandomIterator=void 0;var c=rT(),p=rB(),m=class extends c.ContainerIterator{constructor(l,c){super(c),this.o=l,0===this.iteratorType?(this.pre=function(){return 0===this.o&&(0,p.throwIteratorAccessError)(),this.o-=1,this},this.next=function(){return this.o===this.container.size()&&(0,p.throwIteratorAccessError)(),this.o+=1,this}):(this.pre=function(){return this.o===this.container.size()-1&&(0,p.throwIteratorAccessError)(),this.o+=1,this},this.next=function(){return -1===this.o&&(0,p.throwIteratorAccessError)(),this.o-=1,this})}get pointer(){return this.container.getElementByPos(this.o)}set pointer(l){this.container.setElementByPos(this.o,l)}};l.RandomIterator=m}),rj=O(l=>{A(),th(),e4(),Object.defineProperty(l,"t",{value:!0}),l.default=void 0;var c=Wv(rx()),p=rM();function Wv(l){return l&&l.t?l:{default:l}}var m=class t extends p.RandomIterator{constructor(l,c,p){super(l,p),this.container=c}copy(){return new t(this.o,this.container,this.iteratorType)}},y=class extends c.default{constructor(l=[],c=!0){if(super(),Array.isArray(l))this.J=c?[...l]:l,this.i=l.length;else{this.J=[];let c=this;l.forEach(function(l){c.pushBack(l)})}}clear(){this.i=0,this.J.length=0}begin(){return new m(0,this)}end(){return new m(this.i,this)}rBegin(){return new m(this.i-1,this,1)}rEnd(){return new m(-1,this,1)}front(){return this.J[0]}back(){return this.J[this.i-1]}getElementByPos(l){if(l<0||l>this.i-1)throw RangeError();return this.J[l]}eraseElementByPos(l){if(l<0||l>this.i-1)throw RangeError();return this.J.splice(l,1),this.i-=1,this.i}eraseElementByValue(l){let c=0;for(let p=0;p<this.i;++p)this.J[p]!==l&&(this.J[c++]=this.J[p]);return this.i=this.J.length=c,this.i}eraseElementByIterator(l){let c=l.o;return l=l.next(),this.eraseElementByPos(c),l}pushBack(l){return this.J.push(l),this.i+=1,this.i}popBack(){if(0!==this.i)return this.i-=1,this.J.pop()}setElementByPos(l,c){if(l<0||l>this.i-1)throw RangeError();this.J[l]=c}insert(l,c,p=1){if(l<0||l>this.i)throw RangeError();return this.J.splice(l,0,...Array(p).fill(c)),this.i+=p,this.i}find(l){for(let c=0;c<this.i;++c)if(this.J[c]===l)return new m(c,this);return this.end()}reverse(){this.J.reverse()}unique(){let l=1;for(let c=1;c<this.i;++c)this.J[c]!==this.J[c-1]&&(this.J[l++]=this.J[c]);return this.i=this.J.length=l,this.i}sort(l){this.J.sort(l)}forEach(l){for(let c=0;c<this.i;++c)l(this.J[c],c,this)}[Symbol.iterator](){return(function*(){yield*this.J}).bind(this)()}};l.default=y}),rU=O(l=>{A(),th(),e4(),Object.defineProperty(l,"t",{value:!0}),l.default=void 0;var c=zv(rx()),p=rT(),m=rB();function zv(l){return l&&l.t?l:{default:l}}var y=class t extends p.ContainerIterator{constructor(l,c,p,y){super(y),this.o=l,this.h=c,this.container=p,0===this.iteratorType?(this.pre=function(){return this.o.L===this.h&&(0,m.throwIteratorAccessError)(),this.o=this.o.L,this},this.next=function(){return this.o===this.h&&(0,m.throwIteratorAccessError)(),this.o=this.o.B,this}):(this.pre=function(){return this.o.B===this.h&&(0,m.throwIteratorAccessError)(),this.o=this.o.B,this},this.next=function(){return this.o===this.h&&(0,m.throwIteratorAccessError)(),this.o=this.o.L,this})}get pointer(){return this.o===this.h&&(0,m.throwIteratorAccessError)(),this.o.l}set pointer(l){this.o===this.h&&(0,m.throwIteratorAccessError)(),this.o.l=l}copy(){return new t(this.o,this.h,this.container,this.iteratorType)}},_=class extends c.default{constructor(l=[]){super(),this.h={},this.p=this._=this.h.L=this.h.B=this.h;let c=this;l.forEach(function(l){c.pushBack(l)})}V(l){let{L:c,B:p}=l;c.B=p,p.L=c,l===this.p&&(this.p=p),l===this._&&(this._=c),this.i-=1}G(l,c){let p=c.B,m={l:l,L:c,B:p};c.B=m,p.L=m,c===this.h&&(this.p=m),p===this.h&&(this._=m),this.i+=1}clear(){this.i=0,this.p=this._=this.h.L=this.h.B=this.h}begin(){return new y(this.p,this.h,this)}end(){return new y(this.h,this.h,this)}rBegin(){return new y(this._,this.h,this,1)}rEnd(){return new y(this.h,this.h,this,1)}front(){return this.p.l}back(){return this._.l}getElementByPos(l){if(l<0||l>this.i-1)throw RangeError();let c=this.p;for(;l--;)c=c.B;return c.l}eraseElementByPos(l){if(l<0||l>this.i-1)throw RangeError();let c=this.p;for(;l--;)c=c.B;return this.V(c),this.i}eraseElementByValue(l){let c=this.p;for(;c!==this.h;)c.l===l&&this.V(c),c=c.B;return this.i}eraseElementByIterator(l){let c=l.o;return c===this.h&&(0,m.throwIteratorAccessError)(),l=l.next(),this.V(c),l}pushBack(l){return this.G(l,this._),this.i}popBack(){if(0===this.i)return;let l=this._.l;return this.V(this._),l}pushFront(l){return this.G(l,this.h),this.i}popFront(){if(0===this.i)return;let l=this.p.l;return this.V(this.p),l}setElementByPos(l,c){if(l<0||l>this.i-1)throw RangeError();let p=this.p;for(;l--;)p=p.B;p.l=c}insert(l,c,p=1){if(l<0||l>this.i)throw RangeError();if(p<=0)return this.i;if(0===l)for(;p--;)this.pushFront(c);else if(l===this.i)for(;p--;)this.pushBack(c);else{let m=this.p;for(let c=1;c<l;++c)m=m.B;let y=m.B;for(this.i+=p;p--;)m.B={l:c,L:m},m.B.L=m,m=m.B;m.B=y,y.L=m}return this.i}find(l){let c=this.p;for(;c!==this.h;){if(c.l===l)return new y(c,this.h,this);c=c.B}return this.end()}reverse(){if(this.i<=1)return;let l=this.p,c=this._,p=0;for(;p<<1<this.i;){let m=l.l;l.l=c.l,c.l=m,l=l.B,c=c.L,p+=1}}unique(){if(this.i<=1)return this.i;let l=this.p;for(;l!==this.h;){let c=l;for(;c.B!==this.h&&c.l===c.B.l;)c=c.B,this.i-=1;l.B=c.B,l.B.L=l,l=l.B}return this.i}sort(l){if(this.i<=1)return;let c=[];this.forEach(function(l){c.push(l)}),c.sort(l);let p=this.p;c.forEach(function(l){p.l=l,p=p.B})}merge(l){let c=this;if(0===this.i)l.forEach(function(l){c.pushBack(l)});else{let p=this.p;l.forEach(function(l){for(;p!==c.h&&p.l<=l;)p=p.B;c.G(l,p.L)})}return this.i}forEach(l){let c=this.p,p=0;for(;c!==this.h;)l(c.l,p++,this),c=c.B}[Symbol.iterator](){return(function*(){if(0===this.i)return;let l=this.p;for(;l!==this.h;)yield l.l,l=l.B}).bind(this)()}};l.default=_}),rN=O(l=>{A(),th(),e4(),Object.defineProperty(l,"t",{value:!0}),l.default=void 0;var c=Yv(rx()),p=rM();function Yv(l){return l&&l.t?l:{default:l}}var m=class t extends p.RandomIterator{constructor(l,c,p){super(l,p),this.container=c}copy(){return new t(this.o,this.container,this.iteratorType)}},y=class extends c.default{constructor(l=[],c=4096){super(),this.j=0,this.D=0,this.R=0,this.N=0,this.P=0,this.A=[];let p=(()=>{if("number"==typeof l.length)return l.length;if("number"==typeof l.size)return l.size;if("function"==typeof l.size)return l.size();throw TypeError("Cannot get the length or size of the container")})();this.F=c,this.P=Math.max(Math.ceil(p/this.F),1);for(let l=0;l<this.P;++l)this.A.push(Array(this.F));let m=Math.ceil(p/this.F);this.j=this.R=(this.P>>1)-(m>>1),this.D=this.N=this.F-p%this.F>>1;let y=this;l.forEach(function(l){y.pushBack(l)})}T(){let l=[],c=Math.max(this.P>>1,1);for(let p=0;p<c;++p)l[p]=Array(this.F);for(let c=this.j;c<this.P;++c)l[l.length]=this.A[c];for(let c=0;c<this.R;++c)l[l.length]=this.A[c];l[l.length]=[...this.A[this.R]],this.j=c,this.R=l.length-1;for(let p=0;p<c;++p)l[l.length]=Array(this.F);this.A=l,this.P=l.length}O(l){let c=this.D+l+1,p=c%this.F,m=p-1,y=this.j+(c-p)/this.F;return 0===p&&(y-=1),y%=this.P,m<0&&(m+=this.F),{curNodeBucketIndex:y,curNodePointerIndex:m}}clear(){this.A=[Array(this.F)],this.P=1,this.j=this.R=this.i=0,this.D=this.N=this.F>>1}begin(){return new m(0,this)}end(){return new m(this.i,this)}rBegin(){return new m(this.i-1,this,1)}rEnd(){return new m(-1,this,1)}front(){if(0!==this.i)return this.A[this.j][this.D]}back(){if(0!==this.i)return this.A[this.R][this.N]}pushBack(l){return this.i&&(this.N<this.F-1?this.N+=1:(this.R<this.P-1?this.R+=1:this.R=0,this.N=0),this.R===this.j&&this.N===this.D&&this.T()),this.i+=1,this.A[this.R][this.N]=l,this.i}popBack(){if(0===this.i)return;let l=this.A[this.R][this.N];return 1!==this.i&&(this.N>0?this.N-=1:(this.R>0?this.R-=1:this.R=this.P-1,this.N=this.F-1)),this.i-=1,l}pushFront(l){return this.i&&(this.D>0?this.D-=1:(this.j>0?this.j-=1:this.j=this.P-1,this.D=this.F-1),this.j===this.R&&this.D===this.N&&this.T()),this.i+=1,this.A[this.j][this.D]=l,this.i}popFront(){if(0===this.i)return;let l=this.A[this.j][this.D];return 1!==this.i&&(this.D<this.F-1?this.D+=1:(this.j<this.P-1?this.j+=1:this.j=0,this.D=0)),this.i-=1,l}getElementByPos(l){if(l<0||l>this.i-1)throw RangeError();let{curNodeBucketIndex:c,curNodePointerIndex:p}=this.O(l);return this.A[c][p]}setElementByPos(l,c){if(l<0||l>this.i-1)throw RangeError();let{curNodeBucketIndex:p,curNodePointerIndex:m}=this.O(l);this.A[p][m]=c}insert(l,c,p=1){if(l<0||l>this.i)throw RangeError();if(0===l)for(;p--;)this.pushFront(c);else if(l===this.i)for(;p--;)this.pushBack(c);else{let m=[];for(let c=l;c<this.i;++c)m.push(this.getElementByPos(c));this.cut(l-1);for(let l=0;l<p;++l)this.pushBack(c);for(let l=0;l<m.length;++l)this.pushBack(m[l])}return this.i}cut(l){if(l<0)return this.clear(),0;let{curNodeBucketIndex:c,curNodePointerIndex:p}=this.O(l);return this.R=c,this.N=p,this.i=l+1,this.i}eraseElementByPos(l){if(l<0||l>this.i-1)throw RangeError();if(0===l)this.popFront();else if(l===this.i-1)this.popBack();else{let c=[];for(let p=l+1;p<this.i;++p)c.push(this.getElementByPos(p));this.cut(l),this.popBack();let p=this;c.forEach(function(l){p.pushBack(l)})}return this.i}eraseElementByValue(l){if(0===this.i)return 0;let c=[];for(let p=0;p<this.i;++p){let m=this.getElementByPos(p);m!==l&&c.push(m)}let p=c.length;for(let l=0;l<p;++l)this.setElementByPos(l,c[l]);return this.cut(p-1)}eraseElementByIterator(l){let c=l.o;return this.eraseElementByPos(c),l=l.next()}find(l){for(let c=0;c<this.i;++c)if(this.getElementByPos(c)===l)return new m(c,this);return this.end()}reverse(){let l=0,c=this.i-1;for(;l<c;){let p=this.getElementByPos(l);this.setElementByPos(l,this.getElementByPos(c)),this.setElementByPos(c,p),l+=1,c-=1}}unique(){if(this.i<=1)return this.i;let l=1,c=this.getElementByPos(0);for(let p=1;p<this.i;++p){let m=this.getElementByPos(p);m!==c&&(c=m,this.setElementByPos(l++,m))}for(;this.i>l;)this.popBack();return this.i}sort(l){let c=[];for(let l=0;l<this.i;++l)c.push(this.getElementByPos(l));c.sort(l);for(let l=0;l<this.i;++l)this.setElementByPos(l,c[l])}shrinkToFit(){if(0===this.i)return;let l=[];this.forEach(function(c){l.push(c)}),this.P=Math.max(Math.ceil(this.i/this.F),1),this.i=this.j=this.R=this.D=this.N=0,this.A=[];for(let l=0;l<this.P;++l)this.A.push(Array(this.F));for(let c=0;c<l.length;++c)this.pushBack(l[c])}forEach(l){for(let c=0;c<this.i;++c)l(this.getElementByPos(c),c,this)}[Symbol.iterator](){return(function*(){for(let l=0;l<this.i;++l)yield this.getElementByPos(l)}).bind(this)()}};l.default=y}),rL=O(l=>{A(),th(),e4(),Object.defineProperty(l,"t",{value:!0}),l.TreeNodeEnableIndex=l.TreeNode=void 0;var c=class{constructor(l,c){this.ee=1,this.u=void 0,this.l=void 0,this.U=void 0,this.W=void 0,this.tt=void 0,this.u=l,this.l=c}L(){let l=this;if(1===l.ee&&l.tt.tt===l)l=l.W;else if(l.U)for(l=l.U;l.W;)l=l.W;else{let c=l.tt;for(;c.U===l;)c=(l=c).tt;l=c}return l}B(){let l=this;if(l.W){for(l=l.W;l.U;)l=l.U;return l}{let c=l.tt;for(;c.W===l;)c=(l=c).tt;return l.W!==c?c:l}}te(){let l=this.tt,c=this.W,p=c.U;return l.tt===this?l.tt=c:l.U===this?l.U=c:l.W=c,c.tt=l,c.U=this,this.tt=c,this.W=p,p&&(p.tt=this),c}se(){let l=this.tt,c=this.U,p=c.W;return l.tt===this?l.tt=c:l.U===this?l.U=c:l.W=c,c.tt=l,c.W=this,this.tt=c,this.U=p,p&&(p.tt=this),c}};l.TreeNode=c;var p=class extends c{constructor(){super(...arguments),this.rt=1}te(){let l=super.te();return this.ie(),l.ie(),l}se(){let l=super.se();return this.ie(),l.ie(),l}ie(){this.rt=1,this.U&&(this.rt+=this.U.rt),this.W&&(this.rt+=this.W.rt)}};l.TreeNodeEnableIndex=p}),rD=O(l=>{A(),th(),e4(),Object.defineProperty(l,"t",{value:!0}),l.default=void 0;var c=rL(),p=rT(),m=rB(),y=class extends p.Container{constructor(l=function(l,c){return l<c?-1:l>c?1:0},p=!1){super(),this.Y=void 0,this.v=l,p?(this.re=c.TreeNodeEnableIndex,this.M=function(l,c,p){let m=this.ne(l,c,p);if(m){let l=m.tt;for(;l!==this.h;)l.rt+=1,l=l.tt;let c=this.he(m);if(c){let{parentNode:l,grandParent:p,curNode:m}=c;l.ie(),p.ie(),m.ie()}}return this.i},this.V=function(l){let c=this.fe(l);for(;c!==this.h;)c.rt-=1,c=c.tt}):(this.re=c.TreeNode,this.M=function(l,c,p){let m=this.ne(l,c,p);return m&&this.he(m),this.i},this.V=this.fe),this.h=new this.re}X(l,c){let p=this.h;for(;l;){let m=this.v(l.u,c);if(m<0)l=l.W;else{if(!(m>0))return l;p=l,l=l.U}}return p}Z(l,c){let p=this.h;for(;l;)0>=this.v(l.u,c)?l=l.W:(p=l,l=l.U);return p}$(l,c){let p=this.h;for(;l;){let m=this.v(l.u,c);if(m<0)p=l,l=l.W;else{if(!(m>0))return l;l=l.U}}return p}rr(l,c){let p=this.h;for(;l;)0>this.v(l.u,c)?(p=l,l=l.W):l=l.U;return p}ue(l){for(;;){let c=l.tt;if(c===this.h)return;if(1===l.ee){l.ee=0;return}if(l===c.U){let p=c.W;if(1===p.ee)p.ee=0,c.ee=1,c===this.Y?this.Y=c.te():c.te();else if(p.W&&1===p.W.ee){p.ee=c.ee,c.ee=0,p.W.ee=0,c===this.Y?this.Y=c.te():c.te();return}else p.U&&1===p.U.ee?(p.ee=1,p.U.ee=0,p.se()):(p.ee=1,l=c)}else{let p=c.U;if(1===p.ee)p.ee=0,c.ee=1,c===this.Y?this.Y=c.se():c.se();else if(p.U&&1===p.U.ee){p.ee=c.ee,c.ee=0,p.U.ee=0,c===this.Y?this.Y=c.se():c.se();return}else p.W&&1===p.W.ee?(p.ee=1,p.W.ee=0,p.te()):(p.ee=1,l=c)}}}fe(l){if(1===this.i)return this.clear(),this.h;let c=l;for(;c.U||c.W;){if(c.W)for(c=c.W;c.U;)c=c.U;else c=c.U;[l.u,c.u]=[c.u,l.u],[l.l,c.l]=[c.l,l.l],l=c}this.h.U===c?this.h.U=c.tt:this.h.W===c&&(this.h.W=c.tt),this.ue(c);let p=c.tt;return c===p.U?p.U=void 0:p.W=void 0,this.i-=1,this.Y.ee=0,p}oe(l,c){return void 0!==l&&(!!(this.oe(l.U,c)||c(l))||this.oe(l.W,c))}he(l){for(;;){let c=l.tt;if(0===c.ee)return;let p=c.tt;if(c===p.U){let m=p.W;if(m&&1===m.ee){if(m.ee=c.ee=0,p===this.Y)return;p.ee=1,l=p;continue}if(l===c.W){if(l.ee=0,l.U&&(l.U.tt=c),l.W&&(l.W.tt=p),c.W=l.U,p.U=l.W,l.U=c,l.W=p,p===this.Y)this.Y=l,this.h.tt=l;else{let c=p.tt;c.U===p?c.U=l:c.W=l}return l.tt=p.tt,c.tt=l,p.tt=l,p.ee=1,{parentNode:c,grandParent:p,curNode:l}}c.ee=0,p===this.Y?this.Y=p.se():p.se(),p.ee=1}else{let m=p.U;if(m&&1===m.ee){if(m.ee=c.ee=0,p===this.Y)return;p.ee=1,l=p;continue}if(l===c.U){if(l.ee=0,l.U&&(l.U.tt=p),l.W&&(l.W.tt=c),p.W=l.U,c.U=l.W,l.U=p,l.W=c,p===this.Y)this.Y=l,this.h.tt=l;else{let c=p.tt;c.U===p?c.U=l:c.W=l}return l.tt=p.tt,c.tt=l,p.tt=l,p.ee=1,{parentNode:c,grandParent:p,curNode:l}}c.ee=0,p===this.Y?this.Y=p.te():p.te(),p.ee=1}return}}ne(l,c,p){if(void 0===this.Y){this.i+=1,this.Y=new this.re(l,c),this.Y.ee=0,this.Y.tt=this.h,this.h.tt=this.Y,this.h.U=this.Y,this.h.W=this.Y;return}let m,y=this.h.U,_=this.v(y.u,l);if(0===_){y.l=c;return}if(_>0)y.U=new this.re(l,c),y.U.tt=y,m=y.U,this.h.U=m;else{let y=this.h.W,_=this.v(y.u,l);if(0===_){y.l=c;return}if(_<0)y.W=new this.re(l,c),y.W.tt=y,m=y.W,this.h.W=m;else{if(void 0!==p){let y=p.o;if(y!==this.h){let p=this.v(y.u,l);if(0===p){y.l=c;return}if(p>0){let p=y.L(),_=this.v(p.u,l);if(0===_){p.l=c;return}_<0&&(m=new this.re(l,c),void 0===p.W?(p.W=m,m.tt=p):(y.U=m,m.tt=y))}}}if(void 0===m)for(m=this.Y;;){let p=this.v(m.u,l);if(p>0){if(void 0===m.U){m.U=new this.re(l,c),m.U.tt=m,m=m.U;break}m=m.U}else if(p<0){if(void 0===m.W){m.W=new this.re(l,c),m.W.tt=m,m=m.W;break}m=m.W}else{m.l=c;return}}}}return this.i+=1,m}I(l,c){for(;l;){let p=this.v(l.u,c);if(p<0)l=l.W;else{if(!(p>0))return l;l=l.U}}return l||this.h}clear(){this.i=0,this.Y=void 0,this.h.tt=void 0,this.h.U=this.h.W=void 0}updateKeyByIterator(l,c){let p=l.o;if(p===this.h&&(0,m.throwIteratorAccessError)(),1===this.i)return p.u=c,!0;if(p===this.h.U)return this.v(p.B().u,c)>0&&(p.u=c,!0);if(p===this.h.W)return 0>this.v(p.L().u,c)&&(p.u=c,!0);let y=p.L().u;if(this.v(y,c)>=0)return!1;let _=p.B().u;return!(0>=this.v(_,c))&&(p.u=c,!0)}eraseElementByPos(l){if(l<0||l>this.i-1)throw RangeError();let c=0,p=this;return this.oe(this.Y,function(m){return l===c?(p.V(m),!0):(c+=1,!1)}),this.i}eraseElementByKey(l){if(0===this.i)return!1;let c=this.I(this.Y,l);return c!==this.h&&(this.V(c),!0)}eraseElementByIterator(l){let c=l.o;c===this.h&&(0,m.throwIteratorAccessError)();let p=void 0===c.W;return 0===l.iteratorType?p&&l.next():p&&void 0!==c.U||l.next(),this.V(c),l}forEach(l){let c=0;for(let p of this)l(p,c++,this)}getElementByPos(l){if(l<0||l>this.i-1)throw RangeError();let c,p=0;for(let m of this){if(p===l){c=m;break}p+=1}return c}getHeight(){if(0===this.i)return 0;let e=function(l){return l?Math.max(e(l.U),e(l.W))+1:0};return e(this.Y)}};l.default=y}),rF=O(l=>{A(),th(),e4(),Object.defineProperty(l,"t",{value:!0}),l.default=void 0;var c=rT(),p=rB(),m=class extends c.ContainerIterator{constructor(l,c,m){super(m),this.o=l,this.h=c,0===this.iteratorType?(this.pre=function(){return this.o===this.h.U&&(0,p.throwIteratorAccessError)(),this.o=this.o.L(),this},this.next=function(){return this.o===this.h&&(0,p.throwIteratorAccessError)(),this.o=this.o.B(),this}):(this.pre=function(){return this.o===this.h.W&&(0,p.throwIteratorAccessError)(),this.o=this.o.B(),this},this.next=function(){return this.o===this.h&&(0,p.throwIteratorAccessError)(),this.o=this.o.L(),this})}get index(){let l=this.o,c=this.h.tt;if(l===this.h)return c?c.rt-1:0;let p=0;for(l.U&&(p+=l.U.rt);l!==c;){let c=l.tt;l===c.W&&(p+=1,c.U&&(p+=c.U.rt)),l=c}return p}};l.default=m}),rW=O(l=>{A(),th(),e4(),Object.defineProperty(l,"t",{value:!0}),l.default=void 0;var c=sp(rD()),p=sp(rF()),m=rB();function sp(l){return l&&l.t?l:{default:l}}var y=class t extends p.default{constructor(l,c,p,m){super(l,c,m),this.container=p}get pointer(){return this.o===this.h&&(0,m.throwIteratorAccessError)(),this.o.u}copy(){return new t(this.o,this.h,this.container,this.iteratorType)}},_=class extends c.default{constructor(l=[],c,p){super(c,p);let m=this;l.forEach(function(l){m.insert(l)})}*K(l){void 0!==l&&(yield*this.K(l.U),yield l.u,yield*this.K(l.W))}begin(){return new y(this.h.U||this.h,this.h,this)}end(){return new y(this.h,this.h,this)}rBegin(){return new y(this.h.W||this.h,this.h,this,1)}rEnd(){return new y(this.h,this.h,this,1)}front(){return this.h.U?this.h.U.u:void 0}back(){return this.h.W?this.h.W.u:void 0}insert(l,c){return this.M(l,void 0,c)}find(l){return new y(this.I(this.Y,l),this.h,this)}lowerBound(l){return new y(this.X(this.Y,l),this.h,this)}upperBound(l){return new y(this.Z(this.Y,l),this.h,this)}reverseLowerBound(l){return new y(this.$(this.Y,l),this.h,this)}reverseUpperBound(l){return new y(this.rr(this.Y,l),this.h,this)}union(l){let c=this;return l.forEach(function(l){c.insert(l)}),this.i}[Symbol.iterator](){return this.K(this.Y)}};l.default=_}),r$=O(l=>{A(),th(),e4(),Object.defineProperty(l,"t",{value:!0}),l.default=void 0;var c=ap(rD()),p=ap(rF()),m=rB();function ap(l){return l&&l.t?l:{default:l}}var y=class t extends p.default{constructor(l,c,p,m){super(l,c,m),this.container=p}get pointer(){this.o===this.h&&(0,m.throwIteratorAccessError)();let l=this;return new Proxy([],{get:(c,p)=>"0"===p?l.o.u:"1"===p?l.o.l:void 0,set(c,p,m){if("1"!==p)throw TypeError("props must be 1");return l.o.l=m,!0}})}copy(){return new t(this.o,this.h,this.container,this.iteratorType)}},_=class extends c.default{constructor(l=[],c,p){super(c,p);let m=this;l.forEach(function(l){m.setElement(l[0],l[1])})}*K(l){void 0!==l&&(yield*this.K(l.U),yield[l.u,l.l],yield*this.K(l.W))}begin(){return new y(this.h.U||this.h,this.h,this)}end(){return new y(this.h,this.h,this)}rBegin(){return new y(this.h.W||this.h,this.h,this,1)}rEnd(){return new y(this.h,this.h,this,1)}front(){if(0===this.i)return;let l=this.h.U;return[l.u,l.l]}back(){if(0===this.i)return;let l=this.h.W;return[l.u,l.l]}lowerBound(l){return new y(this.X(this.Y,l),this.h,this)}upperBound(l){return new y(this.Z(this.Y,l),this.h,this)}reverseLowerBound(l){return new y(this.$(this.Y,l),this.h,this)}reverseUpperBound(l){return new y(this.rr(this.Y,l),this.h,this)}setElement(l,c,p){return this.M(l,c,p)}find(l){return new y(this.I(this.Y,l),this.h,this)}getElementByKey(l){return this.I(this.Y,l).l}union(l){let c=this;return l.forEach(function(l){c.setElement(l[0],l[1])}),this.i}[Symbol.iterator](){return this.K(this.Y)}};l.default=_}),rq=O(l=>{function cE(l){let c=typeof l;return"object"===c&&null!==l||"function"===c}A(),th(),e4(),Object.defineProperty(l,"t",{value:!0}),l.default=cE}),rV=O(l=>{A(),th(),e4(),Object.defineProperty(l,"t",{value:!0}),l.HashContainerIterator=l.HashContainer=void 0;var c=rT(),p=fE(rq()),m=rB();function fE(l){return l&&l.t?l:{default:l}}var y=class extends c.ContainerIterator{constructor(l,c,p){super(p),this.o=l,this.h=c,0===this.iteratorType?(this.pre=function(){return this.o.L===this.h&&(0,m.throwIteratorAccessError)(),this.o=this.o.L,this},this.next=function(){return this.o===this.h&&(0,m.throwIteratorAccessError)(),this.o=this.o.B,this}):(this.pre=function(){return this.o.B===this.h&&(0,m.throwIteratorAccessError)(),this.o=this.o.B,this},this.next=function(){return this.o===this.h&&(0,m.throwIteratorAccessError)(),this.o=this.o.L,this})}};l.HashContainerIterator=y;var _=class extends c.Container{constructor(){super(),this.H=[],this.g={},this.HASH_TAG=Symbol("@@HASH_TAG"),Object.setPrototypeOf(this.g,null),this.h={},this.h.L=this.h.B=this.p=this._=this.h}V(l){let{L:c,B:p}=l;c.B=p,p.L=c,l===this.p&&(this.p=p),l===this._&&(this._=c),this.i-=1}M(l,c,m){let y;if(void 0===m&&(m=(0,p.default)(l)),m){let p=l[this.HASH_TAG];if(void 0!==p)return this.H[p].l=c,this.i;Object.defineProperty(l,this.HASH_TAG,{value:this.H.length,configurable:!0}),y={u:l,l:c,L:this._,B:this.h},this.H.push(y)}else{let p=this.g[l];if(p)return p.l=c,this.i;y={u:l,l:c,L:this._,B:this.h},this.g[l]=y}return 0===this.i?(this.p=y,this.h.B=y):this._.B=y,this._=y,this.h.L=y,++this.i}I(l,c){if(void 0===c&&(c=(0,p.default)(l)),!c)return this.g[l]||this.h;{let c=l[this.HASH_TAG];return void 0===c?this.h:this.H[c]}}clear(){let l=this.HASH_TAG;this.H.forEach(function(c){delete c.u[l]}),this.H=[],this.g={},Object.setPrototypeOf(this.g,null),this.i=0,this.p=this._=this.h.L=this.h.B=this.h}eraseElementByKey(l,c){let m;if(void 0===c&&(c=(0,p.default)(l)),c){let c=l[this.HASH_TAG];if(void 0===c)return!1;delete l[this.HASH_TAG],m=this.H[c],delete this.H[c]}else{if(void 0===(m=this.g[l]))return!1;delete this.g[l]}return this.V(m),!0}eraseElementByIterator(l){let c=l.o;return c===this.h&&(0,m.throwIteratorAccessError)(),this.V(c),l.next()}eraseElementByPos(l){if(l<0||l>this.i-1)throw RangeError();let c=this.p;for(;l--;)c=c.B;return this.V(c),this.i}};l.HashContainer=_}),rH=O(l=>{A(),th(),e4(),Object.defineProperty(l,"t",{value:!0}),l.default=void 0;var c=rV(),p=rB(),m=class t extends c.HashContainerIterator{constructor(l,c,p,m){super(l,c,m),this.container=p}get pointer(){return this.o===this.h&&(0,p.throwIteratorAccessError)(),this.o.u}copy(){return new t(this.o,this.h,this.container,this.iteratorType)}},y=class extends c.HashContainer{constructor(l=[]){super();let c=this;l.forEach(function(l){c.insert(l)})}begin(){return new m(this.p,this.h,this)}end(){return new m(this.h,this.h,this)}rBegin(){return new m(this._,this.h,this,1)}rEnd(){return new m(this.h,this.h,this,1)}front(){return this.p.u}back(){return this._.u}insert(l,c){return this.M(l,void 0,c)}getElementByPos(l){if(l<0||l>this.i-1)throw RangeError();let c=this.p;for(;l--;)c=c.B;return c.u}find(l,c){return new m(this.I(l,c),this.h,this)}forEach(l){let c=0,p=this.p;for(;p!==this.h;)l(p.u,c++,this),p=p.B}[Symbol.iterator](){return(function*(){let l=this.p;for(;l!==this.h;)yield l.u,l=l.B}).bind(this)()}};l.default=y}),rQ=O(l=>{A(),th(),e4(),Object.defineProperty(l,"t",{value:!0}),l.default=void 0;var c=rV(),p=bE(rq()),m=rB();function bE(l){return l&&l.t?l:{default:l}}var y=class t extends c.HashContainerIterator{constructor(l,c,p,m){super(l,c,m),this.container=p}get pointer(){this.o===this.h&&(0,m.throwIteratorAccessError)();let l=this;return new Proxy([],{get:(c,p)=>"0"===p?l.o.u:"1"===p?l.o.l:void 0,set(c,p,m){if("1"!==p)throw TypeError("props must be 1");return l.o.l=m,!0}})}copy(){return new t(this.o,this.h,this.container,this.iteratorType)}},_=class extends c.HashContainer{constructor(l=[]){super();let c=this;l.forEach(function(l){c.setElement(l[0],l[1])})}begin(){return new y(this.p,this.h,this)}end(){return new y(this.h,this.h,this)}rBegin(){return new y(this._,this.h,this,1)}rEnd(){return new y(this.h,this.h,this,1)}front(){if(0!==this.i)return[this.p.u,this.p.l]}back(){if(0!==this.i)return[this._.u,this._.l]}setElement(l,c,p){return this.M(l,c,p)}getElementByKey(l,c){if(void 0===c&&(c=(0,p.default)(l)),c){let c=l[this.HASH_TAG];return void 0!==c?this.H[c].l:void 0}let m=this.g[l];return m?m.l:void 0}getElementByPos(l){if(l<0||l>this.i-1)throw RangeError();let c=this.p;for(;l--;)c=c.B;return[c.u,c.l]}find(l,c){return new y(this.I(l,c),this.h,this)}forEach(l){let c=0,p=this.p;for(;p!==this.h;)l([p.u,p.l],c++,this),p=p.B}[Symbol.iterator](){return(function*(){let l=this.p;for(;l!==this.h;)yield[l.u,l.l],l=l.B}).bind(this)()}};l.default=_}),rz=O(l=>{A(),th(),e4(),Object.defineProperty(l,"t",{value:!0}),Object.defineProperty(l,"Deque",{enumerable:!0,get:function(){return v.default}}),Object.defineProperty(l,"HashMap",{enumerable:!0,get:function(){return x.default}}),Object.defineProperty(l,"HashSet",{enumerable:!0,get:function(){return R.default}}),Object.defineProperty(l,"LinkList",{enumerable:!0,get:function(){return _.default}}),Object.defineProperty(l,"OrderedMap",{enumerable:!0,get:function(){return T.default}}),Object.defineProperty(l,"OrderedSet",{enumerable:!0,get:function(){return k.default}}),Object.defineProperty(l,"PriorityQueue",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(l,"Queue",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(l,"Stack",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(l,"Vector",{enumerable:!0,get:function(){return y.default}});var c=at(rR()),p=at(rP()),m=at(rC()),y=at(rj()),_=at(rU()),v=at(rN()),k=at(rW()),T=at(r$()),R=at(rH()),x=at(rQ());function at(l){return l&&l.t?l:{default:l}}}),rK=O((l,c)=>{A(),th(),e4();var p=rz().OrderedSet,m=rs()("number-allocator:trace"),y=rs()("number-allocator:error");function Re(l,c){this.low=l,this.high=c}function ut(l,c){if(!(this instanceof ut))return new ut(l,c);this.min=l,this.max=c,this.ss=new p([],(l,c)=>l.compare(c)),m("Create"),this.clear()}Re.prototype.equals=function(l){return this.low===l.low&&this.high===l.high},Re.prototype.compare=function(l){return this.low<l.low&&this.high<l.low?-1:l.low<this.low&&l.high<this.low?1:0},ut.prototype.firstVacant=function(){return 0===this.ss.size()?null:this.ss.front().low},ut.prototype.alloc=function(){if(0===this.ss.size())return m("alloc():empty"),null;let l=this.ss.begin(),c=l.pointer.low,p=l.pointer.high;return c+1<=p?this.ss.updateKeyByIterator(l,new Re(c+1,p)):this.ss.eraseElementByPos(0),m("alloc():"+c),c},ut.prototype.use=function(l){let c=new Re(l,l),p=this.ss.lowerBound(c);if(!p.equals(this.ss.end())){let y=p.pointer.low,_=p.pointer.high;return p.pointer.equals(c)?(this.ss.eraseElementByIterator(p),m("use():"+l),!0):!(y>l)&&(y===l?this.ss.updateKeyByIterator(p,new Re(y+1,_)):_===l?this.ss.updateKeyByIterator(p,new Re(y,_-1)):(this.ss.updateKeyByIterator(p,new Re(l+1,_)),this.ss.insert(new Re(y,l-1))),m("use():"+l),!0)}return m("use():failed"),!1},ut.prototype.free=function(l){if(l<this.min||l>this.max){y("free():"+l+" is out of range");return}let c=new Re(l,l),p=this.ss.upperBound(c);if(p.equals(this.ss.end())){if(p.equals(this.ss.begin())){this.ss.insert(c);return}p.pre();let m=p.pointer.high;p.pointer.high+1===l?this.ss.updateKeyByIterator(p,new Re(m,l)):this.ss.insert(c)}else if(p.equals(this.ss.begin())){if(l+1===p.pointer.low){let c=p.pointer.high;this.ss.updateKeyByIterator(p,new Re(l,c))}else this.ss.insert(c)}else{let m=p.pointer.low,y=p.pointer.high;p.pre();let _=p.pointer.low;p.pointer.high+1===l?l+1===m?(this.ss.eraseElementByIterator(p),this.ss.updateKeyByIterator(p,new Re(_,y))):this.ss.updateKeyByIterator(p,new Re(_,l)):l+1===m?(this.ss.eraseElementByIterator(p.next()),this.ss.insert(new Re(l,y))):this.ss.insert(c)}m("free():"+l)},ut.prototype.clear=function(){m("clear()"),this.ss.clear(),this.ss.insert(new Re(this.min,this.max))},ut.prototype.intervalCount=function(){return this.ss.size()},ut.prototype.dump=function(){for(let l of(console.log("length:"+this.ss.size()),this.ss))console.log(l)},c.exports=ut}),rY=O((l,c)=>{A(),th(),e4();var p=rK();c.exports.NumberAllocator=p}),rG=O(l=>{A(),th(),e4(),Object.defineProperty(l,"__esModule",{value:!0});var c=rk(),p=rY(),m=class{constructor(l){l>0&&(this.aliasToTopic=new c.LRUCache({max:l}),this.topicToAlias={},this.numberAllocator=new p.NumberAllocator(1,l),this.max=l,this.length=0)}put(l,c){if(0===c||c>this.max)return!1;let p=this.aliasToTopic.get(c);return p&&delete this.topicToAlias[p],this.aliasToTopic.set(c,l),this.topicToAlias[l]=c,this.numberAllocator.use(c),this.length=this.aliasToTopic.size,!0}getTopicByAlias(l){return this.aliasToTopic.get(l)}getAliasByTopic(l){let c=this.topicToAlias[l];return"u">typeof c&&this.aliasToTopic.get(c),c}clear(){this.aliasToTopic.clear(),this.topicToAlias={},this.numberAllocator.clear(),this.length=0}getLruAlias(){return this.numberAllocator.firstVacant()||[...this.aliasToTopic.keys()][this.aliasToTopic.size-1]}};l.default=m}),rZ=O(l=>{A(),th(),e4();var c=l&&l.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(l,"__esModule",{value:!0});var p=rI(),m=c(rG()),y=rA();l.default=(l,c)=>{l.log("_handleConnack");let{options:_}=l,v=5===_.protocolVersion?c.reasonCode:c.returnCode;if(clearTimeout(l.connackTimer),delete l.topicAliasSend,c.properties){if(c.properties.topicAliasMaximum){if(c.properties.topicAliasMaximum>65535){l.emit("error",Error("topicAliasMaximum from broker is out of range"));return}c.properties.topicAliasMaximum>0&&(l.topicAliasSend=new m.default(c.properties.topicAliasMaximum))}c.properties.serverKeepAlive&&_.keepalive&&(_.keepalive=c.properties.serverKeepAlive),c.properties.maximumPacketSize&&(_.properties||(_.properties={}),_.properties.maximumPacketSize=c.properties.maximumPacketSize)}if(0===v)l.reconnecting=!1,l._onConnect(c);else if(v>0){let c=new y.ErrorWithReasonCode(`Connection refused: ${p.ReasonCodes[v]}`,v);l.emit("error",c),l.options.reconnectOnConnackError&&l._cleanUp(!0)}}}),rJ=O(l=>{A(),th(),e4(),Object.defineProperty(l,"__esModule",{value:!0}),l.default=(l,c,p)=>{l.log("handling pubrel packet");let m="u">typeof p?p:l.noop,{messageId:y}=c,_={cmd:"pubcomp",messageId:y};l.incomingStore.get(c,(c,p)=>{c?l._sendPacket(_,m):(l.emit("message",p.topic,p.payload,p),l.handleMessage(p,c=>{if(c)return m(c);l.incomingStore.del(p,l.noop),l._sendPacket(_,m)}))})}}),rX=O(l=>{A(),th(),e4();var c=l&&l.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(l,"__esModule",{value:!0});var p=c(rE()),m=c(rO()),y=c(rZ()),_=c(rI()),v=c(rJ());l.default=(l,c,A)=>{let{options:k}=l;if(5===k.protocolVersion&&k.properties&&k.properties.maximumPacketSize&&k.properties.maximumPacketSize<c.length)return l.emit("error",Error(`exceeding packets size ${c.cmd}`)),l.end({reasonCode:149,properties:{reasonString:"Maximum packet size was exceeded"}}),l;switch(l.log("_handlePacket :: emitting packetreceive"),l.emit("packetreceive",c),c.cmd){case"publish":(0,p.default)(l,c,A);break;case"puback":case"pubrec":case"pubcomp":case"suback":case"unsuback":l.reschedulePing(),(0,_.default)(l,c),A();break;case"pubrel":l.reschedulePing(),(0,v.default)(l,c,A);break;case"connack":(0,y.default)(l,c),A();break;case"auth":l.reschedulePing(),(0,m.default)(l,c),A();break;case"pingresp":l.log("_handlePacket :: received pingresp"),l.reschedulePing(!0),A();break;case"disconnect":l.emit("disconnect",c),A();break;default:l.log("_handlePacket :: unknown command"),A()}}}),r1=O(l=>{A(),th(),e4();var c=l&&l.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(l,"__esModule",{value:!0}),l.TypedEventEmitter=void 0;var p=c((tj(),Q(tT))),m=rA(),y=class{};l.TypedEventEmitter=y,(0,m.applyMixin)(y,p.default)}),r2=O(l=>{A(),th(),e4(),Object.defineProperty(l,"__esModule",{value:!0}),l.isReactNativeBrowser=l.isWebWorker=void 0;var c,Sp=()=>{var l,c;return!!("object"==typeof self&&!(null===(c=null===(l=self?.constructor)||void 0===l?void 0:l.name)||void 0===c)&&c.includes("WorkerGlobalScope"))},p="u">typeof window&&("u">typeof navigator&&(null===(c=navigator.userAgent)||void 0===c?void 0:c.toLowerCase().indexOf(" electron/"))>-1&&null!=k&&k.versions?!Object.prototype.hasOwnProperty.call(k.versions,"electron"):"u">typeof window.document)||Sp()||"u">typeof navigator&&"ReactNative"===navigator.product;l.isWebWorker=Sp(),l.isReactNativeBrowser="u">typeof navigator&&"ReactNative"===navigator.product,l.default=p}),r3=O((l,c)=>{var m,y;A(),th(),e4(),m=l,y=function(l){var c,p=void 0===Number.MAX_SAFE_INTEGER?9007199254740991:Number.MAX_SAFE_INTEGER,m=new WeakMap,y=(c=function(l,c){return m.set(l,c),c},function(l){var y=m.get(l),_=void 0===y?l.size:y<1073741824?y+1:0;if(!l.has(_))return c(l,_);if(l.size<536870912){for(;l.has(_);)_=Math.floor(1073741824*Math.random());return c(l,_)}if(l.size>p)throw Error("Congratulations, you created a collection of unique numbers which uses all available integers!");for(;l.has(_);)_=Math.floor(Math.random()*p);return c(l,_)});l.addUniqueNumber=function(l){var c=y(l);return l.add(c),c},l.generateUniqueNumber=y},"object"==typeof l&&"u">typeof c?y(l):"function"==typeof define&&p.amdO?define(["exports"],y):y((m="u">typeof globalThis?globalThis:m||self).fastUniqueNumbers={})}),r6=O((l,c)=>{var m,y;A(),th(),e4(),m=l,y=function(l,c){l.load=function(l){var p=new Map([[0,function(){}]]),m=new Map([[0,function(){}]]),y=new Map,_=new Worker(l);return _.addEventListener("message",function(l){var c=l.data;if(void 0!==c.method&&"call"===c.method){var _=c.params,v=_.timerId,A=_.timerType;if("interval"===A){var k=p.get(v);if("number"==typeof k){var T=y.get(k);if(void 0===T||T.timerId!==v||T.timerType!==A)throw Error("The timer is in an undefined state.")}else if("u">typeof k)k();else throw Error("The timer is in an undefined state.")}else if("timeout"===A){var R=m.get(v);if("number"==typeof R){var x=y.get(R);if(void 0===x||x.timerId!==v||x.timerType!==A)throw Error("The timer is in an undefined state.")}else if("u">typeof R)R(),m.delete(v);else throw Error("The timer is in an undefined state.")}}else if(null===c.error&&"number"==typeof c.id){var B=c.id,U=y.get(B);if(void 0===U)throw Error("The timer is in an undefined state.");var N=U.timerId,L=U.timerType;y.delete(B),"interval"===L?p.delete(N):m.delete(N)}else throw Error(c.error.message)}),{clearInterval:function(l){var m=c.generateUniqueNumber(y);y.set(m,{timerId:l,timerType:"interval"}),p.set(l,m),_.postMessage({id:m,method:"clear",params:{timerId:l,timerType:"interval"}})},clearTimeout:function(l){var p=c.generateUniqueNumber(y);y.set(p,{timerId:l,timerType:"timeout"}),m.set(l,p),_.postMessage({id:p,method:"clear",params:{timerId:l,timerType:"timeout"}})},setInterval:function(l){var m=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,y=c.generateUniqueNumber(p);return p.set(y,function(){l(),"function"==typeof p.get(y)&&_.postMessage({id:null,method:"set",params:{delay:m,now:performance.now(),timerId:y,timerType:"interval"}})}),_.postMessage({id:null,method:"set",params:{delay:m,now:performance.now(),timerId:y,timerType:"interval"}}),y},setTimeout:function(l){var p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,y=c.generateUniqueNumber(m);return m.set(y,l),_.postMessage({id:null,method:"set",params:{delay:p,now:performance.now(),timerId:y,timerType:"timeout"}}),y}}}},"object"==typeof l&&"u">typeof c?y(l,r3()):"function"==typeof define&&p.amdO?define(["exports","fast-unique-numbers"],y):y((m="u">typeof globalThis?globalThis:m||self).workerTimersBroker={},m.fastUniqueNumbers)}),r4=O((l,c)=>{var m,y;A(),th(),e4(),m=l,y=function(l,c){var p,m,y=(p=c.load,m=null,function(){if(null!==m)return m;var l=new Blob(['(()=>{var e={472:(e,t,r)=>{var o,i;void 0===(i="function"==typeof(o=function(){"use strict";var e=new Map,t=new Map,r=function(t){var r=e.get(t);if(void 0===r)throw new Error(\'There is no interval scheduled with the given id "\'.concat(t,\'".\'));clearTimeout(r),e.delete(t)},o=function(e){var r=t.get(e);if(void 0===r)throw new Error(\'There is no timeout scheduled with the given id "\'.concat(e,\'".\'));clearTimeout(r),t.delete(e)},i=function(e,t){var r,o=performance.now();return{expected:o+(r=e-Math.max(0,o-t)),remainingDelay:r}},n=function e(t,r,o,i){var n=performance.now();n>o?postMessage({id:null,method:"call",params:{timerId:r,timerType:i}}):t.set(r,setTimeout(e,o-n,t,r,o,i))},a=function(t,r,o){var a=i(t,o),s=a.expected,d=a.remainingDelay;e.set(r,setTimeout(n,d,e,r,s,"interval"))},s=function(e,r,o){var a=i(e,o),s=a.expected,d=a.remainingDelay;t.set(r,setTimeout(n,d,t,r,s,"timeout"))};addEventListener("message",(function(e){var t=e.data;try{if("clear"===t.method){var i=t.id,n=t.params,d=n.timerId,c=n.timerType;if("interval"===c)r(d),postMessage({error:null,id:i});else{if("timeout"!==c)throw new Error(\'The given type "\'.concat(c,\'" is not supported\'));o(d),postMessage({error:null,id:i})}}else{if("set"!==t.method)throw new Error(\'The given method "\'.concat(t.method,\'" is not supported\'));var u=t.params,l=u.delay,p=u.now,m=u.timerId,v=u.timerType;if("interval"===v)a(l,m,p);else{if("timeout"!==v)throw new Error(\'The given type "\'.concat(v,\'" is not supported\'));s(l,m,p)}}}catch(e){postMessage({error:{message:e.message},id:t.id,result:null})}}))})?o.call(t,r,t,e):o)||(e.exports=i)}},t={};function r(o){var i=t[o];if(void 0!==i)return i.exports;var n=t[o]={exports:{}};return e[o](n,n.exports,r),n.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";r(472)})()})();'],{type:"application/javascript; charset=utf-8"}),c=URL.createObjectURL(l);return m=p(c),setTimeout(function(){return URL.revokeObjectURL(c)}),m});l.clearInterval=function(l){return y().clearInterval(l)},l.clearTimeout=function(l){return y().clearTimeout(l)},l.setInterval=function(){var l;return(l=y()).setInterval.apply(l,arguments)},l.setTimeout=function(){var l;return(l=y()).setTimeout.apply(l,arguments)}},"object"==typeof l&&"u">typeof c?y(l,r6()):"function"==typeof define&&p.amdO?define(["exports","worker-timers-broker"],y):y((m="u">typeof globalThis?globalThis:m||self).workerTimers={},m.workerTimersBroker)}),r5=O(l=>{A(),th(),e4();var c,p=l&&l.__createBinding||(Object.create?function(l,c,p,m){void 0===m&&(m=p);var y=Object.getOwnPropertyDescriptor(c,p);(!y||("get"in y?!c.__esModule:y.writable||y.configurable))&&(y={enumerable:!0,get:function(){return c[p]}}),Object.defineProperty(l,m,y)}:function(l,c,p,m){void 0===m&&(m=p),l[m]=c[p]}),m=l&&l.__setModuleDefault||(Object.create?function(l,c){Object.defineProperty(l,"default",{enumerable:!0,value:c})}:function(l,c){l.default=c}),y=l&&l.__importStar||(c=function(l){return(c=Object.getOwnPropertyNames||function(l){var c=[];for(var p in l)Object.prototype.hasOwnProperty.call(l,p)&&(c[c.length]=p);return c})(l)},function(l){if(l&&l.__esModule)return l;var y={};if(null!=l)for(var _=c(l),v=0;v<_.length;v++)"default"!==_[v]&&p(y,l,_[v]);return m(y,l),y});Object.defineProperty(l,"__esModule",{value:!0});var _=y(r2()),v=r4(),k={set:v.setInterval,clear:v.clearInterval},T={set:(l,c)=>setInterval(l,c),clear:l=>clearInterval(l)};l.default=l=>{switch(l){case"native":return T;case"worker":return k;default:return!_.default||_.isWebWorker||_.isReactNativeBrowser?T:k}}}),r8=O(l=>{A(),th(),e4();var c=l&&l.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(l,"__esModule",{value:!0});var p=c(r5()),m=class{get keepaliveTimeoutTimestamp(){return this._keepaliveTimeoutTimestamp}get intervalEvery(){return this._intervalEvery}get keepalive(){return this._keepalive}constructor(l,c){this.destroyed=!1,this.client=l,this.timer="object"==typeof c&&"set"in c&&"clear"in c?c:(0,p.default)(c),this.setKeepalive(l.options.keepalive)}clear(){this.timerId&&(this.timer.clear(this.timerId),this.timerId=null)}setKeepalive(l){if(isNaN(l*=1e3)||l<=0||l>2147483647)throw Error(`Keepalive value must be an integer between 0 and 2147483647. Provided value is ${l}`);this._keepalive=l,this.reschedule(),this.client.log(`KeepaliveManager: set keepalive to ${l}ms`)}destroy(){this.clear(),this.destroyed=!0}reschedule(){if(this.destroyed)return;this.clear(),this.counter=0;let l=Math.ceil(1.5*this._keepalive);this._keepaliveTimeoutTimestamp=Date.now()+l,this._intervalEvery=Math.ceil(this._keepalive/2),this.timerId=this.timer.set(()=>{this.destroyed||(this.counter+=1,2===this.counter?this.client.sendPing():this.counter>2&&this.client.onKeepaliveTimeout())},this._intervalEvery)}};l.default=m}),r7=O(l=>{A(),th(),e4();var c,p=l&&l.__createBinding||(Object.create?function(l,c,p,m){void 0===m&&(m=p);var y=Object.getOwnPropertyDescriptor(c,p);(!y||("get"in y?!c.__esModule:y.writable||y.configurable))&&(y={enumerable:!0,get:function(){return c[p]}}),Object.defineProperty(l,m,y)}:function(l,c,p,m){void 0===m&&(m=p),l[m]=c[p]}),m=l&&l.__setModuleDefault||(Object.create?function(l,c){Object.defineProperty(l,"default",{enumerable:!0,value:c})}:function(l,c){l.default=c}),y=l&&l.__importStar||(c=function(l){return(c=Object.getOwnPropertyNames||function(l){var c=[];for(var p in l)Object.prototype.hasOwnProperty.call(l,p)&&(c[c.length]=p);return c})(l)},function(l){if(l&&l.__esModule)return l;var y={};if(null!=l)for(var _=c(l),v=0;v<_.length;v++)"default"!==_[v]&&p(y,l,_[v]);return m(y,l),y}),_=l&&l.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(l,"__esModule",{value:!0});var v=_(td()),k=_(rd()),T=_(rp()),R=t8(),x=_(rb()),B=y(rm()),U=_(rs()),N=_(r_()),L=_(rX()),D=rA(),W=r1(),V=_(r8()),H=y(r2()),K=globalThis.setImmediate||((...l)=>{let c=l.shift();(0,D.nextTick)(()=>{c(...l)})}),J={keepalive:60,reschedulePings:!0,protocolId:"MQTT",protocolVersion:4,reconnectPeriod:1e3,connectTimeout:3e4,clean:!0,resubscribe:!0,subscribeBatchSize:null,writeCache:!0,timerVariant:"auto"},X=class t extends W.TypedEventEmitter{static defaultId(){return`mqttjs_${Math.random().toString(16).substr(2,8)}`}constructor(l,c){for(let l in super(),this.options=c||{},J)typeof this.options[l]>"u"?this.options[l]=J[l]:this.options[l]=c[l];this.log=this.options.log||(0,U.default)("mqttjs:client"),this.noop=this._noop.bind(this),this.log("MqttClient :: version:",t.VERSION),H.isWebWorker?this.log("MqttClient :: environment","webworker"):this.log("MqttClient :: environment",H.default?"browser":"node"),this.log("MqttClient :: options.protocol",c.protocol),this.log("MqttClient :: options.protocolVersion",c.protocolVersion),this.log("MqttClient :: options.username",c.username),this.log("MqttClient :: options.keepalive",c.keepalive),this.log("MqttClient :: options.reconnectPeriod",c.reconnectPeriod),this.log("MqttClient :: options.rejectUnauthorized",c.rejectUnauthorized),this.log("MqttClient :: options.properties.topicAliasMaximum",c.properties?c.properties.topicAliasMaximum:void 0),this.options.clientId="string"==typeof c.clientId?c.clientId:t.defaultId(),this.log("MqttClient :: clientId",this.options.clientId),this.options.customHandleAcks=5===c.protocolVersion&&c.customHandleAcks?c.customHandleAcks:(...l)=>{l[3](null,0)},this.options.writeCache||(k.default.writeToStream.cacheNumbers=!1),this.streamBuilder=l,this.messageIdProvider=typeof this.options.messageIdProvider>"u"?new T.default:this.options.messageIdProvider,this.outgoingStore=c.outgoingStore||new N.default,this.incomingStore=c.incomingStore||new N.default,this.queueQoSZero=void 0===c.queueQoSZero||c.queueQoSZero,this._resubscribeTopics={},this.messageIdToTopic={},this.keepaliveManager=null,this.connected=!1,this.disconnecting=!1,this.reconnecting=!1,this.queue=[],this.connackTimer=null,this.reconnectTimer=null,this._storeProcessing=!1,this._packetIdsDuringStoreProcessing={},this._storeProcessingQueue=[],this.outgoing={},this._firstConnection=!0,c.properties&&c.properties.topicAliasMaximum>0&&(c.properties.topicAliasMaximum>65535?this.log("MqttClient :: options.properties.topicAliasMaximum is out of range"):this.topicAliasRecv=new v.default(c.properties.topicAliasMaximum)),this.on("connect",()=>{let{queue:l}=this,n=()=>{let c=l.shift();this.log("deliver :: entry %o",c);let p=null;if(!c){this._resubscribe();return}p=c.packet,this.log("deliver :: call _sendPacket for %o",p);let m=!0;p.messageId&&0!==p.messageId&&(this.messageIdProvider.register(p.messageId)||(m=!1)),m?this._sendPacket(p,l=>{c.cb&&c.cb(l),n()}):(this.log("messageId: %d has already used. The message is skipped and removed.",p.messageId),n())};this.log("connect :: sending queued packets"),n()}),this.on("close",()=>{this.log("close :: connected set to `false`"),this.connected=!1,this.log("close :: clearing connackTimer"),clearTimeout(this.connackTimer),this._destroyKeepaliveManager(),this.topicAliasRecv&&this.topicAliasRecv.clear(),this.log("close :: calling _setupReconnect"),this._setupReconnect()}),this.options.manualConnect||(this.log("MqttClient :: setting up stream"),this.connect())}handleAuth(l,c){c()}handleMessage(l,c){c()}_nextId(){return this.messageIdProvider.allocate()}getLastMessageId(){return this.messageIdProvider.getLastAllocated()}connect(){var l;let c=new R.Writable,p=k.default.parser(this.options),m=null,y=[];this.log("connect :: calling method to clear reconnect"),this._clearReconnect(),this.disconnected&&!this.reconnecting&&(this.incomingStore=this.options.incomingStore||new N.default,this.outgoingStore=this.options.outgoingStore||new N.default,this.disconnecting=!1,this.disconnected=!1),this.log("connect :: using streamBuilder provided to client to create stream"),this.stream=this.streamBuilder(this),p.on("packet",l=>{this.log("parser :: on packet push to packets array."),y.push(l)});let s=()=>{this.log("work :: getting next packet in queue");let l=y.shift();if(l)this.log("work :: packet pulled from queue"),(0,L.default)(this,l,a);else{this.log("work :: no packets in queue");let l=m;m=null,this.log("work :: done flag is %s",!!l),l&&l()}},a=()=>{if(y.length)(0,D.nextTick)(s);else{let l=m;m=null,l()}};c._write=(l,c,y)=>{m=y,this.log("writable stream :: parsing buffer"),p.parse(l),s()},this.log("connect :: pipe stream to writable stream"),this.stream.pipe(c),this.stream.on("error",l=>{this.log("streamErrorHandler :: error",l.message),l.code?(this.log("streamErrorHandler :: emitting error"),this.emit("error",l)):this.noop(l)}),this.stream.on("close",()=>{this.log("(%s)stream :: on close",this.options.clientId),this._flushVolatile(),this.log("stream: emit close to MqttClient"),this.emit("close")}),this.log("connect: sending packet `connect`");let _={cmd:"connect",protocolId:this.options.protocolId,protocolVersion:this.options.protocolVersion,clean:this.options.clean,clientId:this.options.clientId,keepalive:this.options.keepalive,username:this.options.username,password:this.options.password,properties:this.options.properties};if(this.options.will&&(_.will=Object.assign(Object.assign({},this.options.will),{payload:null===(l=this.options.will)||void 0===l?void 0:l.payload})),this.topicAliasRecv&&(_.properties||(_.properties={}),this.topicAliasRecv&&(_.properties.topicAliasMaximum=this.topicAliasRecv.max)),this._writePacket(_),p.on("error",this.emit.bind(this,"error")),this.options.properties){if(!this.options.properties.authenticationMethod&&this.options.properties.authenticationData)return this.end(()=>this.emit("error",Error("Packet has no Authentication Method"))),this;if(this.options.properties.authenticationMethod&&this.options.authPacket&&"object"==typeof this.options.authPacket){let l=Object.assign({cmd:"auth",reasonCode:0},this.options.authPacket);this._writePacket(l)}}return this.stream.setMaxListeners(1e3),clearTimeout(this.connackTimer),this.connackTimer=setTimeout(()=>{this.log("!!connectTimeout hit!! Calling _cleanUp with force `true`"),this.emit("error",Error("connack timeout")),this._cleanUp(!0)},this.options.connectTimeout),this}publish(l,c,p,m){this.log("publish :: message `%s` to topic `%s`",c,l);let{options:y}=this;"function"==typeof p&&(m=p,p=null),p=p||{};let{qos:_,retain:v,dup:A,properties:k,cbStorePut:T}=p=Object.assign(Object.assign({},{qos:0,retain:!1,dup:!1}),p);if(this._checkDisconnecting(m))return this;let g=()=>{let p=0;if((1===_||2===_)&&null===(p=this._nextId()))return this.log("No messageId left"),!1;let R={cmd:"publish",topic:l,payload:c,qos:_,retain:v,messageId:p,dup:A};switch(5===y.protocolVersion&&(R.properties=k),this.log("publish :: qos",_),_){case 1:case 2:this.outgoing[R.messageId]={volatile:!1,cb:m||this.noop},this.log("MqttClient:publish: packet cmd: %s",R.cmd),this._sendPacket(R,void 0,T);break;default:this.log("MqttClient:publish: packet cmd: %s",R.cmd),this._sendPacket(R,m,T)}return!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!g())&&this._storeProcessingQueue.push({invoke:g,cbStorePut:p.cbStorePut,callback:m}),this}publishAsync(l,c,p){return new Promise((m,y)=>{this.publish(l,c,p,(l,c)=>{l?y(l):m(c)})})}subscribe(l,c,p){let m=this.options.protocolVersion;"function"==typeof c&&(p=c),p=p||this.noop;let y=!1,_=[];"string"==typeof l?_=l=[l]:Array.isArray(l)?_=l:"object"==typeof l&&(y=l.resubscribe,delete l.resubscribe,_=Object.keys(l));let v=B.validateTopics(_);if(null!==v)return K(p,Error(`Invalid topic ${v}`)),this;if(this._checkDisconnecting(p))return this.log("subscribe: discconecting true"),this;let A={qos:0};5===m&&(A.nl=!1,A.rap=!1,A.rh=0);let k=(c=Object.assign(Object.assign({},A),c)).properties,T=[],h=(l,p)=>{if(p=p||c,!Object.prototype.hasOwnProperty.call(this._resubscribeTopics,l)||this._resubscribeTopics[l].qos<p.qos||y){let c={topic:l,qos:p.qos};5===m&&(c.nl=p.nl,c.rap=p.rap,c.rh=p.rh,c.properties=k),this.log("subscribe: pushing topic `%s` and qos `%s` to subs list",c.topic,c.qos),T.push(c)}};if(Array.isArray(l)?l.forEach(l=>{this.log("subscribe: array topic %s",l),h(l)}):Object.keys(l).forEach(c=>{this.log("subscribe: object topic %s, %o",c,l[c]),h(c,l[c])}),!T.length)return p(null,[]),this;let g=(l,c)=>{let p={cmd:"subscribe",subscriptions:l,messageId:c};if(k&&(p.properties=k),this.options.resubscribe){this.log("subscribe :: resubscribe true");let c=[];l.forEach(l=>{if(this.options.reconnectPeriod>0){let p={qos:l.qos};5===m&&(p.nl=l.nl||!1,p.rap=l.rap||!1,p.rh=l.rh||0,p.properties=l.properties),this._resubscribeTopics[l.topic]=p,c.push(l.topic)}}),this.messageIdToTopic[p.messageId]=c}let y=new Promise((c,m)=>{this.outgoing[p.messageId]={volatile:!0,cb(p,y){if(!p){let{granted:c}=y;for(let p=0;p<c.length;p+=1)l[p].qos=c[p]}p?m(new D.ErrorWithSubackPacket(p.message,y)):c(y)}}});return this.log("subscribe :: call _sendPacket"),this._sendPacket(p),y},b=()=>{var l;let c=null!==(l=this.options.subscribeBatchSize)&&void 0!==l?l:T.length,m=[];for(let l=0;l<T.length;l+=c){let p=T.slice(l,l+c),y=this._nextId();if(null===y)return this.log("No messageId left"),!1;m.push(g(p,y))}return Promise.all(m).then(l=>{p(null,T,l.at(-1))}).catch(l=>{p(l,T,l.packet)}),!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!b())&&this._storeProcessingQueue.push({invoke:b,callback:p}),this}subscribeAsync(l,c){return new Promise((p,m)=>{this.subscribe(l,c,(l,c)=>{l?m(l):p(c)})})}unsubscribe(l,c,p){"string"==typeof l&&(l=[l]),"function"==typeof c&&(p=c),p=p||this.noop;let m=B.validateTopics(l);if(null!==m)return K(p,Error(`Invalid topic ${m}`)),this;if(this._checkDisconnecting(p))return this;let o=()=>{let m=this._nextId();if(null===m)return this.log("No messageId left"),!1;let y={cmd:"unsubscribe",messageId:m,unsubscriptions:[]};return"string"==typeof l?y.unsubscriptions=[l]:Array.isArray(l)&&(y.unsubscriptions=l),this.options.resubscribe&&y.unsubscriptions.forEach(l=>{delete this._resubscribeTopics[l]}),"object"==typeof c&&c.properties&&(y.properties=c.properties),this.outgoing[y.messageId]={volatile:!0,cb:p},this.log("unsubscribe: call _sendPacket"),this._sendPacket(y),!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!o())&&this._storeProcessingQueue.push({invoke:o,callback:p}),this}unsubscribeAsync(l,c){return new Promise((p,m)=>{this.unsubscribe(l,c,(l,c)=>{l?m(l):p(c)})})}end(l,c,p){this.log("end :: (%s)",this.options.clientId),(null==l||"boolean"!=typeof l)&&(p=p||c,c=l,l=!1),"object"!=typeof c&&(p=p||c,c=null),this.log("end :: cb? %s",!!p),p&&"function"==typeof p||(p=this.noop);let n=()=>{this.log("end :: closeStores: closing incoming and outgoing stores"),this.disconnected=!0,this.incomingStore.close(l=>{this.outgoingStore.close(c=>{if(this.log("end :: closeStores: emitting end"),this.emit("end"),p){let m=l||c;this.log("end :: closeStores: invoking callback with args"),p(m)}})}),this._deferredReconnect?this._deferredReconnect():(0===this.options.reconnectPeriod||this.options.manualConnect)&&(this.disconnecting=!1)},o=()=>{this.log("end :: (%s) :: finish :: calling _cleanUp with force %s",this.options.clientId,l),this._cleanUp(l,()=>{this.log("end :: finish :: calling process.nextTick on closeStores"),(0,D.nextTick)(n)},c)};return this.disconnecting?p():(this._clearReconnect(),this.disconnecting=!0,!l&&Object.keys(this.outgoing).length>0?(this.log("end :: (%s) :: calling finish in 10ms once outgoing is empty",this.options.clientId),this.once("outgoingEmpty",setTimeout.bind(null,o,10))):(this.log("end :: (%s) :: immediately calling finish",this.options.clientId),o())),this}endAsync(l,c){return new Promise((p,m)=>{this.end(l,c,l=>{l?m(l):p()})})}removeOutgoingMessage(l){if(this.outgoing[l]){let{cb:c}=this.outgoing[l];this._removeOutgoingAndStoreMessage(l,()=>{c(Error("Message removed"))})}return this}reconnect(l){this.log("client reconnect");let r=()=>{l?(this.options.incomingStore=l.incomingStore,this.options.outgoingStore=l.outgoingStore):(this.options.incomingStore=null,this.options.outgoingStore=null),this.incomingStore=this.options.incomingStore||new N.default,this.outgoingStore=this.options.outgoingStore||new N.default,this.disconnecting=!1,this.disconnected=!1,this._deferredReconnect=null,this._reconnect()};return this.disconnecting&&!this.disconnected?this._deferredReconnect=r:r(),this}_flushVolatile(){this.outgoing&&(this.log("_flushVolatile :: deleting volatile messages from the queue and setting their callbacks as error function"),Object.keys(this.outgoing).forEach(l=>{this.outgoing[l].volatile&&"function"==typeof this.outgoing[l].cb&&(this.outgoing[l].cb(Error("Connection closed")),delete this.outgoing[l])}))}_flush(){this.outgoing&&(this.log("_flush: queue exists? %b",!!this.outgoing),Object.keys(this.outgoing).forEach(l=>{"function"==typeof this.outgoing[l].cb&&(this.outgoing[l].cb(Error("Connection closed")),delete this.outgoing[l])}))}_removeTopicAliasAndRecoverTopicName(l){let c;l.properties&&(c=l.properties.topicAlias);let p=l.topic.toString();if(this.log("_removeTopicAliasAndRecoverTopicName :: alias %d, topic %o",c,p),0===p.length){if(typeof c>"u"||typeof(p=this.topicAliasSend.getTopicByAlias(c))>"u")return Error("Unregistered Topic Alias");l.topic=p}c&&delete l.properties.topicAlias}_checkDisconnecting(l){return this.disconnecting&&(l&&l!==this.noop?l(Error("client disconnecting")):this.emit("error",Error("client disconnecting"))),this.disconnecting}_reconnect(){this.log("_reconnect: emitting reconnect to client"),this.emit("reconnect"),this.connected?(this.end(()=>{this.connect()}),this.log("client already connected. disconnecting first.")):(this.log("_reconnect: calling connect"),this.connect())}_setupReconnect(){this.disconnecting||this.reconnectTimer||!(this.options.reconnectPeriod>0)?this.log("_setupReconnect :: doing nothing..."):(this.reconnecting||(this.log("_setupReconnect :: emit `offline` state"),this.emit("offline"),this.log("_setupReconnect :: set `reconnecting` to `true`"),this.reconnecting=!0),this.log("_setupReconnect :: setting reconnectTimer for %d ms",this.options.reconnectPeriod),this.reconnectTimer=setInterval(()=>{this.log("reconnectTimer :: reconnect triggered!"),this._reconnect()},this.options.reconnectPeriod))}_clearReconnect(){this.log("_clearReconnect : clearing reconnect timer"),this.reconnectTimer&&(clearInterval(this.reconnectTimer),this.reconnectTimer=null)}_cleanUp(l,c,p={}){if(c&&(this.log("_cleanUp :: done callback provided for on stream close"),this.stream.on("close",c)),this.log("_cleanUp :: forced? %s",l),l)0===this.options.reconnectPeriod&&this.options.clean&&this._flush(),this.log("_cleanUp :: (%s) :: destroying stream",this.options.clientId),this.stream.destroy();else{let l=Object.assign({cmd:"disconnect"},p);this.log("_cleanUp :: (%s) :: call _sendPacket with disconnect packet",this.options.clientId),this._sendPacket(l,()=>{this.log("_cleanUp :: (%s) :: destroying stream",this.options.clientId),K(()=>{this.stream.end(()=>{this.log("_cleanUp :: (%s) :: stream destroyed",this.options.clientId)})})})}this.disconnecting||this.reconnecting||(this.log("_cleanUp :: client not disconnecting/reconnecting. Clearing and resetting reconnect."),this._clearReconnect(),this._setupReconnect()),this._destroyKeepaliveManager(),c&&!this.connected&&(this.log("_cleanUp :: (%s) :: removing stream `done` callback `close` listener",this.options.clientId),this.stream.removeListener("close",c),c())}_storeAndSend(l,c,p){this.log("storeAndSend :: store packet with cmd %s to outgoingStore",l.cmd);let m=l,y;if("publish"===m.cmd&&(m=(0,x.default)(l),y=this._removeTopicAliasAndRecoverTopicName(m)))return c&&c(y);this.outgoingStore.put(m,m=>{if(m)return c&&c(m);p(),this._writePacket(l,c)})}_applyTopicAlias(l){if(5===this.options.protocolVersion&&"publish"===l.cmd){let c;l.properties&&(c=l.properties.topicAlias);let p=l.topic.toString();if(this.topicAliasSend){if(c){if(0!==p.length&&(this.log("applyTopicAlias :: register topic: %s - alias: %d",p,c),!this.topicAliasSend.put(p,c)))return this.log("applyTopicAlias :: error out of range. topic: %s - alias: %d",p,c),Error("Sending Topic Alias out of range")}else 0!==p.length&&(this.options.autoAssignTopicAlias?(c=this.topicAliasSend.getAliasByTopic(p))?(l.topic="",l.properties=Object.assign(Object.assign({},l.properties),{topicAlias:c}),this.log("applyTopicAlias :: auto assign(use) topic: %s - alias: %d",p,c)):(c=this.topicAliasSend.getLruAlias(),this.topicAliasSend.put(p,c),l.properties=Object.assign(Object.assign({},l.properties),{topicAlias:c}),this.log("applyTopicAlias :: auto assign topic: %s - alias: %d",p,c)):this.options.autoUseTopicAlias&&(c=this.topicAliasSend.getAliasByTopic(p))&&(l.topic="",l.properties=Object.assign(Object.assign({},l.properties),{topicAlias:c}),this.log("applyTopicAlias :: auto use topic: %s - alias: %d",p,c)))}else if(c)return this.log("applyTopicAlias :: error out of range. topic: %s - alias: %d",p,c),Error("Sending Topic Alias out of range")}}_noop(l){this.log("noop ::",l)}_writePacket(l,c){this.log("_writePacket :: packet: %O",l),this.log("_writePacket :: emitting `packetsend`"),this.emit("packetsend",l),this.log("_writePacket :: writing to stream");let p=k.default.writeToStream(l,this.stream,this.options);this.log("_writePacket :: writeToStream result %s",p),!p&&c&&c!==this.noop?(this.log("_writePacket :: handle events on `drain` once through callback."),this.stream.once("drain",c)):c&&(this.log("_writePacket :: invoking cb"),c())}_sendPacket(l,c,p,m){this.log("_sendPacket :: (%s) ::  start",this.options.clientId),p=p||this.noop,c=c||this.noop;let y=this._applyTopicAlias(l);if(y){c(y);return}if(!this.connected){if("auth"===l.cmd){this._writePacket(l,c);return}this.log("_sendPacket :: client not connected. Storing packet offline."),this._storePacket(l,c,p);return}if(m){this._writePacket(l,c);return}switch(l.cmd){case"publish":break;case"pubrel":this._storeAndSend(l,c,p);return;default:this._writePacket(l,c);return}switch(l.qos){case 2:case 1:this._storeAndSend(l,c,p);break;default:this._writePacket(l,c)}this.log("_sendPacket :: (%s) ::  end",this.options.clientId)}_storePacket(l,c,p){this.log("_storePacket :: packet: %o",l),this.log("_storePacket :: cb? %s",!!c),p=p||this.noop;let m=l;if("publish"===m.cmd){m=(0,x.default)(l);let p=this._removeTopicAliasAndRecoverTopicName(m);if(p)return c&&c(p)}let y=m.qos||0;0===y&&this.queueQoSZero||"publish"!==m.cmd?this.queue.push({packet:m,cb:c}):y>0?(c=this.outgoing[m.messageId]?this.outgoing[m.messageId].cb:null,this.outgoingStore.put(m,l=>{if(l)return c&&c(l);p()})):c&&c(Error("No connection to broker"))}_setupKeepaliveManager(){this.log("_setupKeepaliveManager :: keepalive %d (seconds)",this.options.keepalive),!this.keepaliveManager&&this.options.keepalive&&(this.keepaliveManager=new V.default(this,this.options.timerVariant))}_destroyKeepaliveManager(){this.keepaliveManager&&(this.log("_destroyKeepaliveManager :: destroying keepalive manager"),this.keepaliveManager.destroy(),this.keepaliveManager=null)}reschedulePing(l=!1){this.keepaliveManager&&this.options.keepalive&&(l||this.options.reschedulePings)&&this._reschedulePing()}_reschedulePing(){this.log("_reschedulePing :: rescheduling ping"),this.keepaliveManager.reschedule()}sendPing(){this.log("_sendPing :: sending pingreq"),this._sendPacket({cmd:"pingreq"})}onKeepaliveTimeout(){this.emit("error",Error("Keepalive timeout")),this.log("onKeepaliveTimeout :: calling _cleanUp with force true"),this._cleanUp(!0)}_resubscribe(){this.log("_resubscribe");let l=Object.keys(this._resubscribeTopics);if(!this._firstConnection&&(this.options.clean||this.options.protocolVersion>=4&&!this.connackPacket.sessionPresent)&&l.length>0){if(this.options.resubscribe){if(5===this.options.protocolVersion){this.log("_resubscribe: protocolVersion 5");for(let c=0;c<l.length;c++){let p={};p[l[c]]=this._resubscribeTopics[l[c]],p.resubscribe=!0,this.subscribe(p,{properties:p[l[c]].properties})}}else this._resubscribeTopics.resubscribe=!0,this.subscribe(this._resubscribeTopics)}else this._resubscribeTopics={}}this._firstConnection=!1}_onConnect(l){if(this.disconnected){this.emit("connect",l);return}this.connackPacket=l,this.messageIdProvider.clear(),this._setupKeepaliveManager(),this.connected=!0;let r=()=>{let c=this.outgoingStore.createStream(),n=()=>{c.destroy(),c=null,this._flushStoreProcessingQueue(),o()},o=()=>{this._storeProcessing=!1,this._packetIdsDuringStoreProcessing={}};this.once("close",n),c.on("error",l=>{o(),this._flushStoreProcessingQueue(),this.removeListener("close",n),this.emit("error",l)});let s=()=>{if(!c)return;let l=c.read(1),p;if(!l){c.once("readable",s);return}if(this._storeProcessing=!0,this._packetIdsDuringStoreProcessing[l.messageId]){s();return}this.disconnecting||this.reconnectTimer?c.destroy&&c.destroy():(p=this.outgoing[l.messageId]?this.outgoing[l.messageId].cb:null,this.outgoing[l.messageId]={volatile:!1,cb(l,c){p&&p(l,c),s()}},this._packetIdsDuringStoreProcessing[l.messageId]=!0,this.messageIdProvider.register(l.messageId)?this._sendPacket(l,void 0,void 0,!0):this.log("messageId: %d has already used.",l.messageId))};c.on("end",()=>{let c=!0;for(let l in this._packetIdsDuringStoreProcessing)if(!this._packetIdsDuringStoreProcessing[l]){c=!1;break}this.removeListener("close",n),c?(o(),this._invokeAllStoreProcessingQueue(),this.emit("connect",l)):r()}),s()};r()}_invokeStoreProcessingQueue(){if(!this._storeProcessing&&this._storeProcessingQueue.length>0){let l=this._storeProcessingQueue[0];if(l&&l.invoke())return this._storeProcessingQueue.shift(),!0}return!1}_invokeAllStoreProcessingQueue(){for(;this._invokeStoreProcessingQueue(););}_flushStoreProcessingQueue(){for(let l of this._storeProcessingQueue)l.cbStorePut&&l.cbStorePut(Error("Connection closed")),l.callback&&l.callback(Error("Connection closed"));this._storeProcessingQueue.splice(0)}_removeOutgoingAndStoreMessage(l,c){delete this.outgoing[l],this.outgoingStore.del({messageId:l},(p,m)=>{c(p,m),this.messageIdProvider.deallocate(l),this._invokeStoreProcessingQueue()})}};X.VERSION=D.MQTTJS_VERSION,l.default=X}),r9=O(l=>{A(),th(),e4(),Object.defineProperty(l,"__esModule",{value:!0});var c=rY(),p=class{constructor(){this.numberAllocator=new c.NumberAllocator(1,65535)}allocate(){return this.lastId=this.numberAllocator.alloc(),this.lastId}getLastAllocated(){return this.lastId}register(l){return this.numberAllocator.use(l)}deallocate(l){this.numberAllocator.free(l)}clear(){this.numberAllocator.clear()}};l.default=p});function wr(l){throw RangeError(ii[l])}function Fp(l,c){let p=l.split("@"),m="";return p.length>1&&(m=p[0]+"@",l=p[1]),m+(function(l,c){let p=[],m=l.length;for(;m--;)p[m]=c(l[m]);return p})((l=l.replace(ir,".")).split("."),c).join(".")}function Vp(l){let c=[],p=0,m=l.length;for(;p<m;){let y=l.charCodeAt(p++);if(y>=55296&&y<=56319&&p<m){let m=l.charCodeAt(p++);(64512&m)==56320?c.push(((1023&y)<<10)+(1023&m)+65536):(c.push(y),p--)}else c.push(y)}return c}var ie,it,ir,ii,is,ia,il,iu,ih,ic,id,ip=Ae(()=>{A(),th(),e4(),ie=/^xn--/,it=/[^\0-\x7E]/,ir=/[\x2E\u3002\uFF0E\uFF61]/g,ii={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},is=Math.floor,ia=String.fromCharCode,il=function(l,c){return l+22+75*(l<26)-((0!=c)<<5)},iu=function(l,c,p){let m=0;for(l=p?is(l/700):l>>1,l+=is(l/c);l>455;m+=36)l=is(l/35);return is(m+36*l/(l+38))},ih=function(l){var c;let p=[],m=l.length,y=0,_=128,v=72,A=l.lastIndexOf("-");A<0&&(A=0);for(let c=0;c<A;++c)l.charCodeAt(c)>=128&&wr("not-basic"),p.push(l.charCodeAt(c));for(let k=A>0?A+1:0;k<m;){let A=y;for(let p=1,_=36;;_+=36){k>=m&&wr("invalid-input");let A=(c=l.charCodeAt(k++))-48<10?c-22:c-65<26?c-65:c-97<26?c-97:36;(A>=36||A>is((2147483647-y)/p))&&wr("overflow"),y+=A*p;let T=_<=v?1:_>=v+26?26:_-v;if(A<T)break;let R=36-T;p>is(2147483647/R)&&wr("overflow"),p*=R}let T=p.length+1;v=iu(y-A,T,0==A),is(y/T)>2147483647-_&&wr("overflow"),_+=is(y/T),y%=T,p.splice(y++,0,_)}return String.fromCodePoint(...p)},ic=function(l){let c=[],p=(l=Vp(l)).length,m=128,y=0,_=72;for(let p of l)p<128&&c.push(ia(p));let v=c.length,A=v;for(v&&c.push("-");A<p;){let p=2147483647;for(let c of l)c>=m&&c<p&&(p=c);let k=A+1;for(let T of(p-m>is((2147483647-y)/k)&&wr("overflow"),y+=(p-m)*k,m=p,l))if(T<m&&++y>2147483647&&wr("overflow"),T==m){let l=y;for(let p=36;;p+=36){let m=p<=_?1:p>=_+26?26:p-_;if(l<m)break;let y=l-m,v=36-m;c.push(ia(il(m+y%v,0))),l=is(y/v)}c.push(ia(il(l,0))),_=iu(y,k,A==v),y=0,++A}++y,++m}return c.join("")},(id={version:"2.1.0",ucs2:{decode:Vp,encode:l=>String.fromCodePoint(...l)},decode:ih,encode:ic,toASCII:function(l){return Fp(l,function(l){return it.test(l)?"xn--"+ic(l):l})},toUnicode:function(l){return Fp(l,function(l){return ie.test(l)?ih(l.slice(4).toLowerCase()):l})}}).decode,id.encode,id.toASCII,id.toUnicode,id.ucs2,id.version});function b1(l,c){return Object.prototype.hasOwnProperty.call(l,c)}var ig,ib,im,i_,iE=Ae(()=>{A(),th(),e4(),ig=function(l,c,p,m){c=c||"&",p=p||"=";var y={};if("string"!=typeof l||0===l.length)return y;var _=/\+/g;l=l.split(c);var v=1e3;m&&"number"==typeof m.maxKeys&&(v=m.maxKeys);var A=l.length;v>0&&A>v&&(A=v);for(var k=0;k<A;++k){var T,R,x,B,U=l[k].replace(_,"%20"),N=U.indexOf(p);N>=0?(T=U.substr(0,N),R=U.substr(N+1)):(T=U,R=""),x=decodeURIComponent(T),B=decodeURIComponent(R),b1(y,x)?Array.isArray(y[x])?y[x].push(B):y[x]=[y[x],B]:y[x]=B}return y},ib=function(l){switch(typeof l){case"string":return l;case"boolean":return l?"true":"false";case"number":return isFinite(l)?l:"";default:return""}},im=function(l,c,p,m){return c=c||"&",p=p||"=",null===l&&(l=void 0),"object"==typeof l?Object.keys(l).map(function(m){var y=encodeURIComponent(ib(m))+p;return Array.isArray(l[m])?l[m].map(function(l){return y+encodeURIComponent(ib(l))}).join(c):y+encodeURIComponent(ib(l[m]))}).join(c):m?encodeURIComponent(ib(m))+p+encodeURIComponent(ib(l)):""},(i_={}).decode=i_.parse=ig,i_.encode=i_.stringify=im,i_.decode,i_.encode,i_.parse,i_.stringify});function Wa(){throw Error("setTimeout has not been defined")}function $a(){throw Error("clearTimeout has not been defined")}function Jp(l){if(iA===setTimeout)return setTimeout(l,0);if((iA===Wa||!iA)&&setTimeout)return iA=setTimeout,setTimeout(l,0);try{return iA(l,0)}catch{try{return iA.call(null,l,0)}catch{return iA.call(this||iO,l,0)}}}function _1(){iP&&iT&&(iP=!1,iT.length?iR=iT.concat(iR):iC=-1,iR.length&&Xp())}function Xp(){if(!iP){var l=Jp(_1);iP=!0;for(var c=iR.length;c;){for(iT=iR,iR=[];++iC<c;)iT&&iT[iC].run();iC=-1,c=iR.length}iT=null,iP=!1,function(l){if(iI===clearTimeout)return clearTimeout(l);if((iI===$a||!iI)&&clearTimeout)return iI=clearTimeout,clearTimeout(l);try{iI(l)}catch{try{return iI.call(null,l)}catch{return iI.call(this||iO,l)}}}(l)}}function Qp(l,c){(this||iO).fun=l,(this||iO).array=c}function At(){}var iS,iA,iI,iO,ik,iT,iR,iP,iC,ix,iB=Ae(()=>{A(),th(),e4(),iO="u">typeof globalThis?globalThis:"u">typeof self?self:p.g,ik=iS={},function(){try{iA="function"==typeof setTimeout?setTimeout:Wa}catch{iA=Wa}try{iI="function"==typeof clearTimeout?clearTimeout:$a}catch{iI=$a}}(),iR=[],iP=!1,iC=-1,ik.nextTick=function(l){var c=Array(arguments.length-1);if(arguments.length>1)for(var p=1;p<arguments.length;p++)c[p-1]=arguments[p];iR.push(new Qp(l,c)),1!==iR.length||iP||Jp(Xp)},Qp.prototype.run=function(){(this||iO).fun.apply(null,(this||iO).array)},ik.title="browser",ik.browser=!0,ik.env={},ik.argv=[],ik.version="",ik.versions={},ik.on=At,ik.addListener=At,ik.once=At,ik.off=At,ik.removeListener=At,ik.removeAllListeners=At,ik.emit=At,ik.prependListener=At,ik.prependOnceListener=At,ik.listeners=function(l){return[]},ik.binding=function(l){throw Error("process.binding is not supported")},ik.cwd=function(){return"/"},ik.chdir=function(l){throw Error("process.chdir is not supported")},ik.umask=function(){return 0},(ix=iS).addListener,ix.argv,ix.binding,ix.browser,ix.chdir,ix.cwd,ix.emit,ix.env,ix.listeners,ix.nextTick,ix.off,ix.on,ix.once,ix.prependListener,ix.prependOnceListener,ix.removeAllListeners,ix.removeListener,ix.title,ix.umask,ix.version,ix.versions});function m1(){if(ij)return iM;ij=!0;var l,c,p=iM={};function i(){throw Error("setTimeout has not been defined")}function n(){throw Error("clearTimeout has not been defined")}function o(c){if(l===setTimeout)return setTimeout(c,0);if((l===i||!l)&&setTimeout)return l=setTimeout,setTimeout(c,0);try{return l(c,0)}catch{try{return l.call(null,c,0)}catch{return l.call(this||iU,c,0)}}}function s(l){if(c===clearTimeout)return clearTimeout(l);if((c===n||!c)&&clearTimeout)return c=clearTimeout,clearTimeout(l);try{return c(l)}catch{try{return c.call(null,l)}catch{return c.call(this||iU,l)}}}!function(){try{l="function"==typeof setTimeout?setTimeout:i}catch{l=i}try{c="function"==typeof clearTimeout?clearTimeout:n}catch{c=n}}();var m,y=[],_=!1,v=-1;function h(){_&&m&&(_=!1,m.length?y=m.concat(y):v=-1,y.length&&g())}function g(){if(!_){var l=o(h);_=!0;for(var c=y.length;c;){for(m=y,y=[];++v<c;)m&&m[v].run();v=-1,c=y.length}m=null,_=!1,s(l)}}function b(l,c){(this||iU).fun=l,(this||iU).array=c}function E(){}return p.nextTick=function(l){var c=Array(arguments.length-1);if(arguments.length>1)for(var p=1;p<arguments.length;p++)c[p-1]=arguments[p];y.push(new b(l,c)),1!==y.length||_||o(g)},b.prototype.run=function(){(this||iU).fun.apply(null,(this||iU).array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=E,p.addListener=E,p.once=E,p.off=E,p.removeListener=E,p.removeAllListeners=E,p.emit=E,p.prependListener=E,p.prependOnceListener=E,p.listeners=function(l){return[]},p.binding=function(l){throw Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(l){throw Error("process.chdir is not supported")},p.umask=function(){return 0},iM}var iM,ij,iU,iN,iL=Ae(()=>{A(),th(),e4(),iM={},ij=!1,iU="u">typeof globalThis?globalThis:"u">typeof self?self:p.g,(iN=m1()).platform="browser",iN.addListener,iN.argv,iN.binding,iN.browser,iN.chdir,iN.cwd,iN.emit,iN.env,iN.listeners,iN.nextTick,iN.off,iN.on,iN.once,iN.prependListener,iN.prependOnceListener,iN.removeAllListeners,iN.removeListener,iN.title,iN.umask,iN.version,iN.versions});function v1(){if(iF)return iD;iF=!0;var l=iN;function e(l){if("string"!=typeof l)throw TypeError("Path must be a string. Received "+JSON.stringify(l))}function r(l,c){for(var p,m="",y=0,_=-1,v=0,A=0;A<=l.length;++A){if(A<l.length)p=l.charCodeAt(A);else{if(47===p)break;p=47}if(47===p){if(!(_===A-1||1===v)){if(_!==A-1&&2===v){if(m.length<2||2!==y||46!==m.charCodeAt(m.length-1)||46!==m.charCodeAt(m.length-2)){if(m.length>2){var k=m.lastIndexOf("/");if(k!==m.length-1){-1===k?(m="",y=0):y=(m=m.slice(0,k)).length-1-m.lastIndexOf("/"),_=A,v=0;continue}}else if(2===m.length||1===m.length){m="",y=0,_=A,v=0;continue}}c&&(m.length>0?m+="/..":m="..",y=2)}else m.length>0?m+="/"+l.slice(_+1,A):m=l.slice(_+1,A),y=A-_-1}_=A,v=0}else 46===p&&-1!==v?++v:v=-1}return m}function i(l,c){var p=c.dir||c.root,m=c.base||(c.name||"")+(c.ext||"");return p?p===c.root?p+m:p+l+m:m}var c={resolve:function(){for(var c,p,m="",y=!1,_=arguments.length-1;_>=-1&&!y;_--)_>=0?c=arguments[_]:(void 0===p&&(p=l.cwd()),c=p),e(c),0!==c.length&&(m=c+"/"+m,y=47===c.charCodeAt(0));return m=r(m,!y),y?m.length>0?"/"+m:"/":m.length>0?m:"."},normalize:function(l){if(e(l),0===l.length)return".";var c=47===l.charCodeAt(0),p=47===l.charCodeAt(l.length-1);return 0!==(l=r(l,!c)).length||c||(l="."),l.length>0&&p&&(l+="/"),c?"/"+l:l},isAbsolute:function(l){return e(l),l.length>0&&47===l.charCodeAt(0)},join:function(){if(0==arguments.length)return".";for(var l,p=0;p<arguments.length;++p){var m=arguments[p];e(m),m.length>0&&(void 0===l?l=m:l+="/"+m)}return void 0===l?".":c.normalize(l)},relative:function(l,p){if(e(l),e(p),l===p||(l=c.resolve(l))===(p=c.resolve(p)))return"";for(var m=1;m<l.length&&47===l.charCodeAt(m);++m);for(var y=l.length,_=y-m,v=1;v<p.length&&47===p.charCodeAt(v);++v);for(var A=p.length,k=A-v,T=_<k?_:k,R=-1,x=0;x<=T;++x){if(x===T){if(k>T){if(47===p.charCodeAt(v+x))return p.slice(v+x+1);if(0===x)return p.slice(v+x)}else _>T&&(47===l.charCodeAt(m+x)?R=x:0===x&&(R=0));break}var B=l.charCodeAt(m+x);if(B!==p.charCodeAt(v+x))break;47===B&&(R=x)}var U="";for(x=m+R+1;x<=y;++x)(x===y||47===l.charCodeAt(x))&&(0===U.length?U+="..":U+="/..");return U.length>0?U+p.slice(v+R):(v+=R,47===p.charCodeAt(v)&&++v,p.slice(v))},_makeLong:function(l){return l},dirname:function(l){if(e(l),0===l.length)return".";for(var c=l.charCodeAt(0),p=47===c,m=-1,y=!0,_=l.length-1;_>=1;--_)if(47===(c=l.charCodeAt(_))){if(!y){m=_;break}}else y=!1;return -1===m?p?"/":".":p&&1===m?"//":l.slice(0,m)},basename:function(l,c){if(void 0!==c&&"string"!=typeof c)throw TypeError('"ext" argument must be a string');e(l);var p,m=0,y=-1,_=!0;if(void 0!==c&&c.length>0&&c.length<=l.length){if(c.length===l.length&&c===l)return"";var v=c.length-1,A=-1;for(p=l.length-1;p>=0;--p){var k=l.charCodeAt(p);if(47===k){if(!_){m=p+1;break}}else -1===A&&(_=!1,A=p+1),v>=0&&(k===c.charCodeAt(v)?-1==--v&&(y=p):(v=-1,y=A))}return m===y?y=A:-1===y&&(y=l.length),l.slice(m,y)}for(p=l.length-1;p>=0;--p)if(47===l.charCodeAt(p)){if(!_){m=p+1;break}}else -1===y&&(_=!1,y=p+1);return -1===y?"":l.slice(m,y)},extname:function(l){e(l);for(var c=-1,p=0,m=-1,y=!0,_=0,v=l.length-1;v>=0;--v){var A=l.charCodeAt(v);if(47===A){if(!y){p=v+1;break}continue}-1===m&&(y=!1,m=v+1),46===A?-1===c?c=v:1!==_&&(_=1):-1!==c&&(_=-1)}return -1===c||-1===m||0===_||1===_&&c===m-1&&c===p+1?"":l.slice(c,m)},format:function(l){if(null===l||"object"!=typeof l)throw TypeError('The "pathObject" argument must be of type Object. Received type '+typeof l);return i("/",l)},parse:function(l){e(l);var c={root:"",dir:"",base:"",ext:"",name:""};if(0===l.length)return c;var p,m=l.charCodeAt(0),y=47===m;y?(c.root="/",p=1):p=0;for(var _=-1,v=0,A=-1,k=!0,T=l.length-1,R=0;T>=p;--T){if(47===(m=l.charCodeAt(T))){if(!k){v=T+1;break}continue}-1===A&&(k=!1,A=T+1),46===m?-1===_?_=T:1!==R&&(R=1):-1!==_&&(R=-1)}return -1===_||-1===A||0===R||1===R&&_===A-1&&_===v+1?-1!==A&&(0===v&&y?c.base=c.name=l.slice(1,A):c.base=c.name=l.slice(v,A)):(0===v&&y?(c.name=l.slice(1,_),c.base=l.slice(1,A)):(c.name=l.slice(v,_),c.base=l.slice(v,A)),c.ext=l.slice(_,A)),v>0?c.dir=l.slice(0,v-1):y&&(c.dir="/"),c},sep:"/",delimiter:":",win32:null,posix:null};return c.posix=c,iD=c}var iD,iF,iW,i$=Ae(()=>{A(),th(),e4(),iL(),iD={},iF=!1,iW=v1()}),iq={};function De(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function xi(l,c,p){if(l&&iQ.isObject(l)&&l instanceof De)return l;var m=new De;return m.parse(l,c,p),m}function P1(){if(i8)return i5;i8=!0;var l=ix;function e(l){if("string"!=typeof l)throw TypeError("Path must be a string. Received "+JSON.stringify(l))}function r(l,c){for(var p,m="",y=0,_=-1,v=0,A=0;A<=l.length;++A){if(A<l.length)p=l.charCodeAt(A);else{if(47===p)break;p=47}if(47===p){if(!(_===A-1||1===v)){if(_!==A-1&&2===v){if(m.length<2||2!==y||46!==m.charCodeAt(m.length-1)||46!==m.charCodeAt(m.length-2)){if(m.length>2){var k=m.lastIndexOf("/");if(k!==m.length-1){-1===k?(m="",y=0):y=(m=m.slice(0,k)).length-1-m.lastIndexOf("/"),_=A,v=0;continue}}else if(2===m.length||1===m.length){m="",y=0,_=A,v=0;continue}}c&&(m.length>0?m+="/..":m="..",y=2)}else m.length>0?m+="/"+l.slice(_+1,A):m=l.slice(_+1,A),y=A-_-1}_=A,v=0}else 46===p&&-1!==v?++v:v=-1}return m}function i(l,c){var p=c.dir||c.root,m=c.base||(c.name||"")+(c.ext||"");return p?p===c.root?p+m:p+l+m:m}var c={resolve:function(){for(var c,p,m="",y=!1,_=arguments.length-1;_>=-1&&!y;_--)_>=0?c=arguments[_]:(void 0===p&&(p=l.cwd()),c=p),e(c),0!==c.length&&(m=c+"/"+m,y=47===c.charCodeAt(0));return m=r(m,!y),y?m.length>0?"/"+m:"/":m.length>0?m:"."},normalize:function(l){if(e(l),0===l.length)return".";var c=47===l.charCodeAt(0),p=47===l.charCodeAt(l.length-1);return 0!==(l=r(l,!c)).length||c||(l="."),l.length>0&&p&&(l+="/"),c?"/"+l:l},isAbsolute:function(l){return e(l),l.length>0&&47===l.charCodeAt(0)},join:function(){if(0==arguments.length)return".";for(var l,p=0;p<arguments.length;++p){var m=arguments[p];e(m),m.length>0&&(void 0===l?l=m:l+="/"+m)}return void 0===l?".":c.normalize(l)},relative:function(l,p){if(e(l),e(p),l===p||(l=c.resolve(l))===(p=c.resolve(p)))return"";for(var m=1;m<l.length&&47===l.charCodeAt(m);++m);for(var y=l.length,_=y-m,v=1;v<p.length&&47===p.charCodeAt(v);++v);for(var A=p.length,k=A-v,T=_<k?_:k,R=-1,x=0;x<=T;++x){if(x===T){if(k>T){if(47===p.charCodeAt(v+x))return p.slice(v+x+1);if(0===x)return p.slice(v+x)}else _>T&&(47===l.charCodeAt(m+x)?R=x:0===x&&(R=0));break}var B=l.charCodeAt(m+x);if(B!==p.charCodeAt(v+x))break;47===B&&(R=x)}var U="";for(x=m+R+1;x<=y;++x)(x===y||47===l.charCodeAt(x))&&(0===U.length?U+="..":U+="/..");return U.length>0?U+p.slice(v+R):(v+=R,47===p.charCodeAt(v)&&++v,p.slice(v))},_makeLong:function(l){return l},dirname:function(l){if(e(l),0===l.length)return".";for(var c=l.charCodeAt(0),p=47===c,m=-1,y=!0,_=l.length-1;_>=1;--_)if(47===(c=l.charCodeAt(_))){if(!y){m=_;break}}else y=!1;return -1===m?p?"/":".":p&&1===m?"//":l.slice(0,m)},basename:function(l,c){if(void 0!==c&&"string"!=typeof c)throw TypeError('"ext" argument must be a string');e(l);var p,m=0,y=-1,_=!0;if(void 0!==c&&c.length>0&&c.length<=l.length){if(c.length===l.length&&c===l)return"";var v=c.length-1,A=-1;for(p=l.length-1;p>=0;--p){var k=l.charCodeAt(p);if(47===k){if(!_){m=p+1;break}}else -1===A&&(_=!1,A=p+1),v>=0&&(k===c.charCodeAt(v)?-1==--v&&(y=p):(v=-1,y=A))}return m===y?y=A:-1===y&&(y=l.length),l.slice(m,y)}for(p=l.length-1;p>=0;--p)if(47===l.charCodeAt(p)){if(!_){m=p+1;break}}else -1===y&&(_=!1,y=p+1);return -1===y?"":l.slice(m,y)},extname:function(l){e(l);for(var c=-1,p=0,m=-1,y=!0,_=0,v=l.length-1;v>=0;--v){var A=l.charCodeAt(v);if(47===A){if(!y){p=v+1;break}continue}-1===m&&(y=!1,m=v+1),46===A?-1===c?c=v:1!==_&&(_=1):-1!==c&&(_=-1)}return -1===c||-1===m||0===_||1===_&&c===m-1&&c===p+1?"":l.slice(c,m)},format:function(l){if(null===l||"object"!=typeof l)throw TypeError('The "pathObject" argument must be of type Object. Received type '+typeof l);return i("/",l)},parse:function(l){e(l);var c={root:"",dir:"",base:"",ext:"",name:""};if(0===l.length)return c;var p,m=l.charCodeAt(0),y=47===m;y?(c.root="/",p=1):p=0;for(var _=-1,v=0,A=-1,k=!0,T=l.length-1,R=0;T>=p;--T){if(47===(m=l.charCodeAt(T))){if(!k){v=T+1;break}continue}-1===A&&(k=!1,A=T+1),46===m?-1===_?_=T:1!==R&&(R=1):-1!==_&&(R=-1)}return -1===_||-1===A||0===R||1===R&&_===A-1&&_===v+1?-1!==A&&(0===v&&y?c.base=c.name=l.slice(1,A):c.base=c.name=l.slice(v,A)):(0===v&&y?(c.name=l.slice(1,_),c.base=l.slice(1,A)):(c.name=l.slice(v,_),c.base=l.slice(v,A)),c.ext=l.slice(_,A)),v>0?c.dir=l.slice(0,v-1):y&&(c.dir="/"),c},sep:"/",delimiter:":",win32:null,posix:null};return c.posix=c,i5=c}function F1(l){if("string"==typeof l)l=new URL(l);else if(!(l instanceof URL))throw new Deno.errors.InvalidData("invalid argument path , must be a string or URL");if("file:"!==l.protocol)throw new Deno.errors.InvalidData("invalid url scheme");return nn?W1(l):$1(l)}function W1(l){let c=l.hostname,p=l.pathname;for(let l=0;l<p.length;l++)if("%"===p[l]){let c=p.codePointAt(l+2)||32;if("2"===p[l+1]&&102===c||"5"===p[l+1]&&99===c)throw new Deno.errors.InvalidData("must not include encoded \\ or / characters")}if(p=decodeURIComponent(p=p.replace(ns,"\\")),""!==c)return`\\\\${c}${p}`;{let l=32|p.codePointAt(1),c=p[2];if(l<nr||l>ni||":"!==c)throw new Deno.errors.InvalidData("file url path must be absolute");return p.slice(1)}}function $1(l){if(""!==l.hostname)throw new Deno.errors.InvalidData("invalid file url hostname");let c=l.pathname;for(let l=0;l<c.length;l++)if("%"===c[l]){let p=c.codePointAt(l+2)||32;if("2"===c[l+1]&&102===p)throw new Deno.errors.InvalidData("must not include encoded / characters")}return decodeURIComponent(c)}function H1(l){let c=i7.resolve(l),p=l.charCodeAt(l.length-1);(p===nt||nn&&p===ne)&&c[c.length-1]!==i7.sep&&(c+="/");let m=new URL("file://");return c.includes("%")&&(c=c.replace(na,"%25")),!nn&&c.includes("\\")&&(c=c.replace(nl,"%5C")),c.includes(`
`)&&(c=c.replace(nh,"%0A")),c.includes("\r")&&(c=c.replace(nc,"%0D")),c.includes("	")&&(c=c.replace(nf,"%09")),m.pathname=c,m}function lg(l){if("string"==typeof l)l=new URL(l);else if(!(l instanceof URL))throw new Deno.errors.InvalidData("invalid argument path , must be a string or URL");if("file:"!==l.protocol)throw new Deno.errors.InvalidData("invalid url scheme");return nO?lS(l):uS(l)}function lS(l){let c=l.hostname,p=l.pathname;for(let l=0;l<p.length;l++)if("%"===p[l]){let c=p.codePointAt(l+2)||32;if("2"===p[l+1]&&102===c||"5"===p[l+1]&&99===c)throw new Deno.errors.InvalidData("must not include encoded \\ or / characters")}if(p=decodeURIComponent(p=p.replace(nk,"\\")),""!==c)return`\\\\${c}${p}`;{let l=32|p.codePointAt(1),c=p[2];if(l<nA||l>nI||":"!==c)throw new Deno.errors.InvalidData("file url path must be absolute");return p.slice(1)}}function uS(l){if(""!==l.hostname)throw new Deno.errors.InvalidData("invalid file url hostname");let c=l.pathname;for(let l=0;l<c.length;l++)if("%"===c[l]){let p=c.codePointAt(l+2)||32;if("2"===c[l+1]&&102===p)throw new Deno.errors.InvalidData("must not include encoded / characters")}return decodeURIComponent(c)}function ug(l){let c=iW.resolve(l),p=l.charCodeAt(l.length-1);(p===nS||nO&&p===nE)&&c[c.length-1]!==iW.sep&&(c+="/");let m=new URL("file://");return c.includes("%")&&(c=c.replace(nT,"%25")),!nO&&c.includes("\\")&&(c=c.replace(nR,"%5C")),c.includes(`
`)&&(c=c.replace(nP,"%0A")),c.includes("\r")&&(c=c.replace(nC,"%0D")),c.includes("	")&&(c=c.replace(nx,"%09")),m.pathname=c,m}Ir(iq,{URL:()=>n_,Url:()=>np,default:()=>iV,fileURLToPath:()=>lg,format:()=>ng,parse:()=>ny,pathToFileURL:()=>ug,resolve:()=>nb,resolveObject:()=>nm});var iV,iH,iQ,iz,iK,iY,iG,iZ,iJ,iX,i1,i2,i3,i6,i4,i5,i8,i7,i9,ne,nt,nr,ni,nn,ns,na,nl,nh,nc,nf,nd,np,ng,nb,nm,ny,n_,nE,nS,nA,nI,nO,nk,nT,nR,nP,nC,nx,nB=Ae(()=>{A(),th(),e4(),ip(),iE(),iB(),i$(),iL(),iV={},iH=id,iQ={isString:function(l){return"string"==typeof l},isObject:function(l){return"object"==typeof l&&null!==l},isNull:function(l){return null===l},isNullOrUndefined:function(l){return null==l}},iV.parse=xi,iV.resolve=function(l,c){return xi(l,!1,!0).resolve(c)},iV.resolveObject=function(l,c){return l?xi(l,!1,!0).resolveObject(c):c},iV.format=function(l){return iQ.isString(l)&&(l=xi(l)),l instanceof De?l.format():De.prototype.format.call(l)},iV.Url=De,iz=/^([a-z0-9.+-]+:)/i,iK=/:[0-9]*$/,iY=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,iZ=["%","/","?",";","#"].concat(iG=["'"].concat(["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r",`
`,"	"]))),iJ=["/","?","#"],iX=/^[+a-z0-9A-Z_-]{0,63}$/,i1=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,i2={javascript:!0,"javascript:":!0},i3={javascript:!0,"javascript:":!0},i6={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},i4=i_,De.prototype.parse=function(l,c,p){if(!iQ.isString(l))throw TypeError("Parameter 'url' must be a string, not "+typeof l);var m=l.indexOf("?"),y=-1!==m&&m<l.indexOf("#")?"?":"#",_=l.split(y);_[0]=_[0].replace(/\\/g,"/");var v=l=_.join(y);if(v=v.trim(),!p&&1===l.split("#").length){var A=iY.exec(v);if(A)return this.path=v,this.href=v,this.pathname=A[1],A[2]?(this.search=A[2],this.query=c?i4.parse(this.search.substr(1)):this.search.substr(1)):c&&(this.search="",this.query={}),this}var k=iz.exec(v);if(k){var T=(k=k[0]).toLowerCase();this.protocol=T,v=v.substr(k.length)}if(p||k||v.match(/^\/\/[^@\/]+@[^@\/]+/)){var R="//"===v.substr(0,2);!R||k&&i3[k]||(v=v.substr(2),this.slashes=!0)}if(!i3[k]&&(R||k&&!i6[k])){for(var x,B,U,N=-1,L=0;L<iJ.length;L++)-1!==(x=v.indexOf(iJ[L]))&&(-1===N||x<N)&&(N=x);for(-1!==(U=-1===N?v.lastIndexOf("@"):v.lastIndexOf("@",N))&&(B=v.slice(0,U),v=v.slice(U+1),this.auth=decodeURIComponent(B)),N=-1,L=0;L<iZ.length;L++)-1!==(x=v.indexOf(iZ[L]))&&(-1===N||x<N)&&(N=x);-1===N&&(N=v.length),this.host=v.slice(0,N),v=v.slice(N),this.parseHost(),this.hostname=this.hostname||"";var D="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!D)for(var W=this.hostname.split(/\./),V=(L=0,W.length);L<V;L++){var H=W[L];if(H&&!H.match(iX)){for(var K="",J=0,X=H.length;J<X;J++)H.charCodeAt(J)>127?K+="x":K+=H[J];if(!K.match(iX)){var ee=W.slice(0,L),et=W.slice(L+1),er=H.match(i1);er&&(ee.push(er[1]),et.unshift(er[2])),et.length&&(v="/"+et.join(".")+v),this.hostname=ee.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),D||(this.hostname=iH.toASCII(this.hostname));var ei=this.port?":"+this.port:"",en=this.hostname||"";this.host=en+ei,this.href+=this.host,D&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==v[0]&&(v="/"+v))}if(!i2[T])for(L=0,V=iG.length;L<V;L++){var eo=iG[L];if(-1!==v.indexOf(eo)){var es=encodeURIComponent(eo);es===eo&&(es=escape(eo)),v=v.split(eo).join(es)}}var ea=v.indexOf("#");-1!==ea&&(this.hash=v.substr(ea),v=v.slice(0,ea));var el=v.indexOf("?");if(-1!==el?(this.search=v.substr(el),this.query=v.substr(el+1),c&&(this.query=i4.parse(this.query)),v=v.slice(0,el)):c&&(this.search="",this.query={}),v&&(this.pathname=v),i6[T]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){ei=this.pathname||"";var eu=this.search||"";this.path=ei+eu}return this.href=this.format(),this},De.prototype.format=function(){var l=this.auth||"";l&&(l=(l=encodeURIComponent(l)).replace(/%3A/i,":")+"@");var c=this.protocol||"",p=this.pathname||"",m=this.hash||"",y=!1,_="";this.host?y=l+this.host:this.hostname&&(y=l+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(y+=":"+this.port)),this.query&&iQ.isObject(this.query)&&Object.keys(this.query).length&&(_=i4.stringify(this.query));var v=this.search||_&&"?"+_||"";return c&&":"!==c.substr(-1)&&(c+=":"),this.slashes||(!c||i6[c])&&!1!==y?(y="//"+(y||""),p&&"/"!==p.charAt(0)&&(p="/"+p)):y||(y=""),m&&"#"!==m.charAt(0)&&(m="#"+m),v&&"?"!==v.charAt(0)&&(v="?"+v),c+y+(p=p.replace(/[?#]/g,function(l){return encodeURIComponent(l)}))+(v=v.replace("#","%23"))+m},De.prototype.resolve=function(l){return this.resolveObject(xi(l,!1,!0)).format()},De.prototype.resolveObject=function(l){if(iQ.isString(l)){var c=new De;c.parse(l,!1,!0),l=c}for(var p=new De,m=Object.keys(this),y=0;y<m.length;y++){var _=m[y];p[_]=this[_]}if(p.hash=l.hash,""===l.href)return p.href=p.format(),p;if(l.slashes&&!l.protocol){for(var v=Object.keys(l),A=0;A<v.length;A++){var k=v[A];"protocol"!==k&&(p[k]=l[k])}return i6[p.protocol]&&p.hostname&&!p.pathname&&(p.path=p.pathname="/"),p.href=p.format(),p}if(l.protocol&&l.protocol!==p.protocol){if(!i6[l.protocol]){for(var T=Object.keys(l),R=0;R<T.length;R++){var x=T[R];p[x]=l[x]}return p.href=p.format(),p}if(p.protocol=l.protocol,l.host||i3[l.protocol])p.pathname=l.pathname;else{for(var B=(l.pathname||"").split("/");B.length&&!(l.host=B.shift()););l.host||(l.host=""),l.hostname||(l.hostname=""),""!==B[0]&&B.unshift(""),B.length<2&&B.unshift(""),p.pathname=B.join("/")}if(p.search=l.search,p.query=l.query,p.host=l.host||"",p.auth=l.auth,p.hostname=l.hostname||l.host,p.port=l.port,p.pathname||p.search){var U=p.pathname||"",N=p.search||"";p.path=U+N}return p.slashes=p.slashes||l.slashes,p.href=p.format(),p}var L=p.pathname&&"/"===p.pathname.charAt(0),D=l.host||l.pathname&&"/"===l.pathname.charAt(0),W=D||L||p.host&&l.pathname,V=W,H=p.pathname&&p.pathname.split("/")||[],K=(B=l.pathname&&l.pathname.split("/")||[],p.protocol&&!i6[p.protocol]);if(K&&(p.hostname="",p.port=null,p.host&&(""===H[0]?H[0]=p.host:H.unshift(p.host)),p.host="",l.protocol&&(l.hostname=null,l.port=null,l.host&&(""===B[0]?B[0]=l.host:B.unshift(l.host)),l.host=null),W=W&&(""===B[0]||""===H[0])),D)p.host=l.host||""===l.host?l.host:p.host,p.hostname=l.hostname||""===l.hostname?l.hostname:p.hostname,p.search=l.search,p.query=l.query,H=B;else if(B.length)H||(H=[]),H.pop(),H=H.concat(B),p.search=l.search,p.query=l.query;else if(!iQ.isNullOrUndefined(l.search))return K&&(p.hostname=p.host=H.shift(),(er=!!(p.host&&p.host.indexOf("@")>0)&&p.host.split("@"))&&(p.auth=er.shift(),p.host=p.hostname=er.shift())),p.search=l.search,p.query=l.query,iQ.isNull(p.pathname)&&iQ.isNull(p.search)||(p.path=(p.pathname?p.pathname:"")+(p.search?p.search:"")),p.href=p.format(),p;if(!H.length)return p.pathname=null,p.search?p.path="/"+p.search:p.path=null,p.href=p.format(),p;for(var J=H.slice(-1)[0],X=(p.host||l.host||H.length>1)&&("."===J||".."===J)||""===J,ee=0,et=H.length;et>=0;et--)"."===(J=H[et])?H.splice(et,1):".."===J?(H.splice(et,1),ee++):ee&&(H.splice(et,1),ee--);if(!W&&!V)for(;ee--;ee)H.unshift("..");!W||""===H[0]||H[0]&&"/"===H[0].charAt(0)||H.unshift(""),X&&"/"!==H.join("/").substr(-1)&&H.push("");var er,ei=""===H[0]||H[0]&&"/"===H[0].charAt(0);return K&&(p.hostname=p.host=ei?"":H.length?H.shift():"",(er=!!(p.host&&p.host.indexOf("@")>0)&&p.host.split("@"))&&(p.auth=er.shift(),p.host=p.hostname=er.shift())),(W=W||p.host&&H.length)&&!ei&&H.unshift(""),H.length?p.pathname=H.join("/"):(p.pathname=null,p.path=null),iQ.isNull(p.pathname)&&iQ.isNull(p.search)||(p.path=(p.pathname?p.pathname:"")+(p.search?p.search:"")),p.auth=l.auth||p.auth,p.slashes=p.slashes||l.slashes,p.href=p.format(),p},De.prototype.parseHost=function(){var l=this.host,c=iK.exec(l);c&&(":"!==(c=c[0])&&(this.port=c.substr(1)),l=l.substr(0,l.length-c.length)),l&&(this.hostname=l)},iV.Url,iV.format,iV.resolve,iV.resolveObject,i5={},i8=!1,i7=P1(),i9="u">typeof Deno?"windows"===Deno.build.os?"win32":Deno.build.os:void 0,iV.URL="u">typeof URL?URL:null,iV.pathToFileURL=H1,iV.fileURLToPath=F1,iV.Url,iV.format,iV.resolve,iV.resolveObject,iV.URL,ne=92,nt=47,nr=97,ni=122,nn="win32"===i9,ns=/\//g,na=/%/g,nl=/\\/g,nh=/\n/g,nc=/\r/g,nf=/\t/g,nd="u">typeof Deno?"windows"===Deno.build.os?"win32":Deno.build.os:void 0,iV.URL="u">typeof URL?URL:null,iV.pathToFileURL=ug,iV.fileURLToPath=lg,np=iV.Url,ng=iV.format,nb=iV.resolve,nm=iV.resolveObject,ny=iV.parse,n_=iV.URL,nE=92,nS=47,nA=97,nI=122,nO="win32"===nd,nk=/\//g,nT=/%/g,nR=/\\/g,nP=/\n/g,nC=/\r/g,nx=/\t/g}),nM=O((l,c)=>{A(),th(),e4(),c.exports=function(){throw Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}}),nj=O(l=>{A(),th(),e4(),Object.defineProperty(l,"__esModule",{value:!0}),l.BufferedDuplex=void 0,l.writev=gg;var c=t8(),p=(tu(),Q(e5));function gg(l,c){let m=Array(l.length);for(let c=0;c<l.length;c++)"string"==typeof l[c].chunk?m[c]=p.Buffer.from(l[c].chunk,"utf8"):m[c]=l[c].chunk;this._write(p.Buffer.concat(m),"binary",c)}var m=class extends c.Duplex{constructor(l,c,p){super({objectMode:!0}),this.proxy=c,this.socket=p,this.writeQueue=[],l.objectMode||(this._writev=gg.bind(this)),this.isSocketOpen=!1,this.proxy.on("data",l=>{!this.destroyed&&this.readable&&this.push(l)})}_read(l){this.proxy.read(l)}_write(l,c,p){this.isSocketOpen?this.writeToProxy(l,c,p):this.writeQueue.push({chunk:l,encoding:c,cb:p})}_final(l){this.writeQueue=[],this.proxy.end(l)}_destroy(l,c){this.writeQueue=[],this.proxy.destroy(),c(l)}socketReady(){this.emit("connect"),this.isSocketOpen=!0,this.processWriteQueue()}writeToProxy(l,c,p){!1===this.proxy.write(l,c)?this.proxy.once("drain",p):p()}processWriteQueue(){for(;this.writeQueue.length>0;){let{chunk:l,encoding:c,cb:p}=this.writeQueue.shift();this.writeToProxy(l,c,p)}}};l.BufferedDuplex=m}),nU=O(l=>{A(),th(),e4();var c=l&&l.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(l,"__esModule",{value:!0}),l.streamBuilder=l.browserStreamBuilder=void 0;var p=(tu(),Q(e5)),m=c(nM()),y=c(rs()),_=t8(),v=c(r2()),k=nj(),T=(0,y.default)("mqttjs:ws"),R=["rejectUnauthorized","ca","cert","key","pfx","passphrase"];function yg(l,c){let p=`${l.protocol}://${l.hostname}:${l.port}${l.path}`;return"function"==typeof l.transformWsUrl&&(p=l.transformWsUrl(p,l,c)),p}function wg(l){return l.port||("wss"===l.protocol?l.port=443:l.port=80),l.path||(l.path="/"),l.wsOptions||(l.wsOptions={}),v.default||l.forceNativeWebSocket||"wss"!==l.protocol||R.forEach(c=>{Object.prototype.hasOwnProperty.call(l,c)&&!Object.prototype.hasOwnProperty.call(l.wsOptions,c)&&(l.wsOptions[c]=l[c])}),l}function gS(l){let c=wg(l);if(c.hostname||(c.hostname=c.host),!c.hostname){if(typeof document>"u")throw Error("Could not determine host. Specify host manually.");let l=new URL(document.URL);c.hostname=l.hostname,c.port||(c.port=Number(l.port))}return void 0===c.objectMode&&(c.objectMode=!(!0===c.binary||void 0===c.binary)),c}function bS(l,c,p){T("createWebSocket"),T(`protocol: ${p.protocolId} ${p.protocolVersion}`);let y="MQIsdp"===p.protocolId&&3===p.protocolVersion?"mqttv3.1":"mqtt";return T(`creating new Websocket for url: ${c} and protocol: ${y}`),p.createWebsocket?p.createWebsocket(c,[y],p):new m.default(c,[y],p.wsOptions)}function yS(l,c){let p="MQIsdp"===c.protocolId&&3===c.protocolVersion?"mqttv3.1":"mqtt",m=yg(c,l),y;return(y=c.createWebsocket?c.createWebsocket(m,[p],c):new WebSocket(m,[p])).binaryType="arraybuffer",y}l.streamBuilder=(l,c)=>{T("streamBuilder");let p=wg(c);p.hostname=p.hostname||p.host||"localhost";let y=yg(p,l),_=bS(l,y,p),v=m.default.createWebSocketStream(_,p.wsOptions);return v.url=y,_.on("close",()=>{v.destroy()}),v},l.browserStreamBuilder=(l,c)=>{T("browserStreamBuilder");let m,y=gS(c).browserBufferSize||524288,v=c.browserBufferTimeout||1e3,A=!c.objectMode,R=yS(l,c),x=d(c,w,S);c.objectMode||(x._writev=k.writev.bind(x)),x.on("close",()=>{R.close()});let B="u">typeof R.addEventListener;function d(l,c,p){let m=new _.Transform({objectMode:l.objectMode});return m._write=c,m._flush=p,m}function h(){T("WebSocket onOpen"),m instanceof k.BufferedDuplex&&m.socketReady()}function g(l){T("WebSocket onClose",l),m.end(),m.destroy()}function b(l){T("WebSocket onError",l);let c=Error("WebSocket error");c.event=l,m.destroy(c)}async function E(l){if(!x||x.destroyed||!x.readable)return;let{data:c}=l;c=c instanceof ArrayBuffer?p.Buffer.from(c):c instanceof Blob?p.Buffer.from(await new Response(c).arrayBuffer()):p.Buffer.from(c,"utf8"),x.push(c)}function w(l,c,m){if(R.bufferedAmount>y){setTimeout(w,v,l,c,m);return}A&&"string"==typeof l&&(l=p.Buffer.from(l,"utf8"));try{R.send(l)}catch(l){return m(l)}m()}function S(l){R.close(),l()}return R.readyState===R.OPEN?(m=x).socket=R:(m=new k.BufferedDuplex(c,x,R),B?R.addEventListener("open",h):R.onopen=h),B?(R.addEventListener("close",g),R.addEventListener("error",b),R.addEventListener("message",E)):(R.onclose=g,R.onerror=b,R.onmessage=E),m}}),nN={};function xe(){throw Error("Node.js net module is not supported by JSPM core outside of Node.js")}Ir(nN,{Server:()=>xe,Socket:()=>xe,Stream:()=>xe,_createServerHandle:()=>xe,_normalizeArgs:()=>xe,_setSimultaneousAccepts:()=>xe,connect:()=>xe,createConnection:()=>xe,createServer:()=>xe,default:()=>nL,isIP:()=>xe,isIPv4:()=>xe,isIPv6:()=>xe});var nL,nD=Ae(()=>{A(),th(),e4(),nL={_createServerHandle:xe,_normalizeArgs:xe,_setSimultaneousAccepts:xe,connect:xe,createConnection:xe,createServer:xe,isIP:xe,isIPv4:xe,isIPv6:xe,Server:xe,Socket:xe,Stream:xe}}),nF=O((l,c)=>{A(),th(),e4(),c.exports={}}),nW=O(l=>{A(),th(),e4();var c=l&&l.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(l,"__esModule",{value:!0});var p=c((nD(),Q(nN))),m=c(rs()),y=c(nF()),_=(0,m.default)("mqttjs:tcp");l.default=(l,c)=>{if(c.port=c.port||1883,c.hostname=c.hostname||c.host||"localhost",c.socksProxy)return(0,y.default)(c.hostname,c.port,c.socksProxy,{timeout:c.socksTimeout});let{port:m,path:v}=c,A=c.hostname;return _("port %d and host %s",m,A),p.default.createConnection({port:m,host:A,path:v})}}),n$={};Ir(n$,{default:()=>nq});var nq,nV=Ae(()=>{A(),th(),e4(),nq={}}),nH=O(l=>{A(),th(),e4();var c=l&&l.__rest||function(l,c){var p={};for(var m in l)Object.prototype.hasOwnProperty.call(l,m)&&0>c.indexOf(m)&&(p[m]=l[m]);if(null!=l&&"function"==typeof Object.getOwnPropertySymbols)for(var y=0,m=Object.getOwnPropertySymbols(l);y<m.length;y++)0>c.indexOf(m[y])&&Object.prototype.propertyIsEnumerable.call(l,m[y])&&(p[m[y]]=l[m[y]]);return p},p=l&&l.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(l,"__esModule",{value:!0});var m=p((nV(),Q(n$))),y=p((nD(),Q(nN))),_=p(rs()),v=p(nF()),k=(0,_.default)("mqttjs:tls");function OS(l){let{host:p,port:y,socksProxy:_}=l,A=c(l,["host","port","socksProxy"]);return m.default.connect(_?Object.assign(Object.assign({},A),{socket:(0,v.default)(p,y,_,{timeout:l.socksTimeout})}):l)}l.default=(l,c)=>{c.port=c.port||8883,c.host=c.hostname||c.host||"localhost",0===y.default.isIP(c.host)&&(c.servername=c.host),c.rejectUnauthorized=!1!==c.rejectUnauthorized,delete c.path,k("port %d host %s rejectUnauthorized %b",c.port,c.host,c.rejectUnauthorized);let p=OS(c);function i(m){c.rejectUnauthorized&&l.emit("error",m),p.end()}return p.on("secureConnect",()=>{c.rejectUnauthorized&&!p.authorized?p.emit("error",Error("TLS not authorized")):p.removeListener("error",i)}),p.on("error",i),p}}),nQ=O(l=>{A(),th(),e4(),Object.defineProperty(l,"__esModule",{value:!0});var c,p,m,y=(tu(),Q(e5)),_=t8(),v=nj();function US(){let l=new _.Transform;return l._write=(l,p,m)=>{c.send({data:l.buffer,success(){m()},fail(l){m(Error(l))}})},l._flush=l=>{c.close({success(){l()}})},l}function NS(l){l.hostname||(l.hostname="localhost"),l.path||(l.path="/"),l.wsOptions||(l.wsOptions={})}function DS(l,c){let p="wxs"===l.protocol?"wss":"ws",m=`${p}://${l.hostname}${l.path}`;return l.port&&80!==l.port&&443!==l.port&&(m=`${p}://${l.hostname}:${l.port}${l.path}`),"function"==typeof l.transformWsUrl&&(m=l.transformWsUrl(m,l,c)),m}function jS(){c.onOpen(()=>{m.socketReady()}),c.onMessage(l=>{let{data:c}=l;c=c instanceof ArrayBuffer?y.Buffer.from(c):y.Buffer.from(c,"utf8"),p.push(c)}),c.onClose(()=>{m.emit("close"),m.end(),m.destroy()}),c.onError(l=>{let c=Error(l.errMsg);m.destroy(c)})}l.default=(l,y)=>{if(y.hostname=y.hostname||y.host,!y.hostname)throw Error("Could not determine host. Specify host manually.");let _="MQIsdp"===y.protocolId&&3===y.protocolVersion?"mqttv3.1":"mqtt";NS(y);let A=DS(y,l);c=wx.connectSocket({url:A,protocols:[_]}),p=US(),(m=new v.BufferedDuplex(y,p,c))._destroy=(l,p)=>{c.close({success(){p&&p(l)}})};let k=m.destroy;return m.destroy=(l,p)=>(m.destroy=k,setTimeout(()=>{c.close({fail(){m._destroy(l,p)}})},0),m),jS(),m}}),nz=O(l=>{A(),th(),e4(),Object.defineProperty(l,"__esModule",{value:!0});var c,p,m,y=(tu(),Q(e5)),_=t8(),v=nj(),k=!1;function HS(){let l=new _.Transform;return l._write=(l,p,m)=>{c.sendSocketMessage({data:l.buffer,success(){m()},fail(){m(Error())}})},l._flush=l=>{c.closeSocket({success(){l()}})},l}function VS(l){l.hostname||(l.hostname="localhost"),l.path||(l.path="/"),l.wsOptions||(l.wsOptions={})}function zS(l,c){let p="alis"===l.protocol?"wss":"ws",m=`${p}://${l.hostname}${l.path}`;return l.port&&80!==l.port&&443!==l.port&&(m=`${p}://${l.hostname}:${l.port}${l.path}`),"function"==typeof l.transformWsUrl&&(m=l.transformWsUrl(m,l,c)),m}function KS(){k||(k=!0,c.onSocketOpen(()=>{m.socketReady()}),c.onSocketMessage(l=>{if("string"==typeof l.data){let c=y.Buffer.from(l.data,"base64");p.push(c)}else{let c=new FileReader;c.addEventListener("load",()=>{let l=c.result;l=l instanceof ArrayBuffer?y.Buffer.from(l):y.Buffer.from(l,"utf8"),p.push(l)}),c.readAsArrayBuffer(l.data)}}),c.onSocketClose(()=>{m.end(),m.destroy()}),c.onSocketError(l=>{m.destroy(l)}))}l.default=(l,y)=>{if(y.hostname=y.hostname||y.host,!y.hostname)throw Error("Could not determine host. Specify host manually.");let _="MQIsdp"===y.protocolId&&3===y.protocolVersion?"mqttv3.1":"mqtt";VS(y);let A=zS(y,l);return(c=y.my).connectSocket({url:A,protocols:_}),p=HS(),m=new v.BufferedDuplex(y,p,c),KS(),m}}),nK=O(l=>{A(),th(),e4();var c=l&&l.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(l,"__esModule",{value:!0}),l.connectAsync=ZS;var p=c(rs()),m=c((nB(),Q(iq))),y=c(r7()),_=c(r2());"function"!=typeof(null==k?void 0:k.nextTick)&&(k.nextTick=setImmediate);var v=(0,p.default)("mqttjs"),T=null;function XS(l){let c;l.auth&&((c=l.auth.match(/^(.+):(.+)$/))?(l.username=c[1],l.password=c[2]):l.username=l.auth)}function Tg(l,c){var p,A,R;if(v("connecting to an MQTT broker..."),"object"!=typeof l||c||(c=l,l=""),c=c||{},l&&"string"==typeof l){let p=m.default.parse(l,!0),y={};if(null!=p.port&&(y.port=Number(p.port)),y.host=p.hostname,y.query=p.query,y.auth=p.auth,y.protocol=p.protocol,y.path=p.path,!(c=Object.assign(Object.assign({},y),c)).protocol)throw Error("Missing protocol");c.protocol=c.protocol.replace(/:$/,"")}if(c.unixSocket=c.unixSocket||(null===(p=c.protocol)||void 0===p?void 0:p.includes("+unix")),c.unixSocket?c.protocol=c.protocol.replace("+unix",""):!(null===(A=c.protocol)||void 0===A)&&A.startsWith("ws")||!(null===(R=c.protocol)||void 0===R)&&R.startsWith("wx")||delete c.path,XS(c),c.query&&"string"==typeof c.query.clientId&&(c.clientId=c.query.clientId),_.default||c.unixSocket?c.socksProxy=void 0:void 0===c.socksProxy&&"u">typeof k&&(c.socksProxy=k.env.MQTTJS_SOCKS_PROXY),c.cert&&c.key){if(c.protocol){if(-1===["mqtts","wss","wxs","alis"].indexOf(c.protocol))switch(c.protocol){case"mqtt":c.protocol="mqtts";break;case"ws":c.protocol="wss";break;case"wx":c.protocol="wxs";break;case"ali":c.protocol="alis";break;default:throw Error(`Unknown protocol for secure connection: "${c.protocol}"!`)}}else throw Error("Missing secure protocol key")}if(T||(T={},_.default||c.forceNativeWebSocket?(T.ws=nU().browserStreamBuilder,T.wss=nU().browserStreamBuilder,T.wx=nQ().default,T.wxs=nQ().default,T.ali=nz().default,T.alis=nz().default):(T.ws=nU().streamBuilder,T.wss=nU().streamBuilder,T.mqtt=nW().default,T.tcp=nW().default,T.ssl=nH().default,T.tls=T.ssl,T.mqtts=nH().default)),!T[c.protocol]){let l=-1!==["mqtts","wss"].indexOf(c.protocol);c.protocol=["mqtt","mqtts","ws","wss","wx","wxs","ali","alis"].filter((c,p)=>(!l||p%2!=0)&&"function"==typeof T[c])[0]}if(!1===c.clean&&!c.clientId)throw Error("Missing clientId for unclean clients");function o(l){return c.servers&&(l._reconnectCount&&l._reconnectCount!==c.servers.length||(l._reconnectCount=0),c.host=c.servers[l._reconnectCount].host,c.port=c.servers[l._reconnectCount].port,c.protocol=c.servers[l._reconnectCount].protocol?c.servers[l._reconnectCount].protocol:c.defaultProtocol,c.hostname=c.host,l._reconnectCount++),v("calling streambuilder for",c.protocol),T[c.protocol](l,c)}c.protocol&&(c.defaultProtocol=c.protocol);let x=new y.default(o,c);return x.on("error",()=>{}),x}function ZS(l,c,p=!0){return new Promise((m,y)=>{let _=Tg(l,c),v={connect:l=>{a(),m(_)},end:()=>{a(),m(_)},error:l=>{a(),_.end(),y(l)}};function a(){Object.keys(v).forEach(l=>{_.off(l,v[l])})}!1===p&&(v.close=()=>{v.error(Error("Couldn't connect to server"))}),Object.keys(v).forEach(l=>{_.on(l,v[l])})})}l.default=Tg}),nY=O(l=>{A(),th(),e4();var c,p=l&&l.__createBinding||(Object.create?function(l,c,p,m){void 0===m&&(m=p);var y=Object.getOwnPropertyDescriptor(c,p);(!y||("get"in y?!c.__esModule:y.writable||y.configurable))&&(y={enumerable:!0,get:function(){return c[p]}}),Object.defineProperty(l,m,y)}:function(l,c,p,m){void 0===m&&(m=p),l[m]=c[p]}),m=l&&l.__setModuleDefault||(Object.create?function(l,c){Object.defineProperty(l,"default",{enumerable:!0,value:c})}:function(l,c){l.default=c}),y=l&&l.__importStar||(c=function(l){return(c=Object.getOwnPropertyNames||function(l){var c=[];for(var p in l)Object.prototype.hasOwnProperty.call(l,p)&&(c[c.length]=p);return c})(l)},function(l){if(l&&l.__esModule)return l;var y={};if(null!=l)for(var _=c(l),v=0;v<_.length;v++)"default"!==_[v]&&p(y,l,_[v]);return m(y,l),y}),_=l&&l.__exportStar||function(l,c){for(var m in l)"default"===m||Object.prototype.hasOwnProperty.call(c,m)||p(c,l,m)},v=l&&l.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(l,"__esModule",{value:!0}),l.ReasonCodes=l.KeepaliveManager=l.UniqueMessageIdProvider=l.DefaultMessageIdProvider=l.Store=l.MqttClient=l.connectAsync=l.connect=l.Client=void 0;var k=v(r7());l.MqttClient=k.default;var T=v(rp());l.DefaultMessageIdProvider=T.default;var R=v(r9());l.UniqueMessageIdProvider=R.default;var x=v(r_());l.Store=x.default;var B=y(nK());l.connect=B.default,Object.defineProperty(l,"connectAsync",{enumerable:!0,get:function(){return B.connectAsync}});var U=v(r8());l.KeepaliveManager=U.default,l.Client=k.default,_(r7(),l),_(rA(),l);var N=rI();Object.defineProperty(l,"ReasonCodes",{enumerable:!0,get:function(){return N.ReasonCodes}})}),nG=O(l=>{A(),th(),e4();var c,p=l&&l.__createBinding||(Object.create?function(l,c,p,m){void 0===m&&(m=p);var y=Object.getOwnPropertyDescriptor(c,p);(!y||("get"in y?!c.__esModule:y.writable||y.configurable))&&(y={enumerable:!0,get:function(){return c[p]}}),Object.defineProperty(l,m,y)}:function(l,c,p,m){void 0===m&&(m=p),l[m]=c[p]}),m=l&&l.__setModuleDefault||(Object.create?function(l,c){Object.defineProperty(l,"default",{enumerable:!0,value:c})}:function(l,c){l.default=c}),y=l&&l.__importStar||(c=function(l){return(c=Object.getOwnPropertyNames||function(l){var c=[];for(var p in l)Object.prototype.hasOwnProperty.call(l,p)&&(c[c.length]=p);return c})(l)},function(l){if(l&&l.__esModule)return l;var y={};if(null!=l)for(var _=c(l),v=0;v<_.length;v++)"default"!==_[v]&&p(y,l,_[v]);return m(y,l),y}),_=l&&l.__exportStar||function(l,c){for(var m in l)"default"===m||Object.prototype.hasOwnProperty.call(c,m)||p(c,l,m)};Object.defineProperty(l,"__esModule",{value:!0});var v=y(nY());l.default=v,_(nY(),l)});c.Z=nG();/*! Bundled license information:

@jspm/core/nodelibs/browser/buffer.js:
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)

safe-buffer/index.js:
  (*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)
*/}}]);