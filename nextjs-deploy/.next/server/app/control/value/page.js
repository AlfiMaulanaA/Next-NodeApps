(()=>{var e={};e.id=6981,e.ids=[6981],e.modules={55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},39491:e=>{"use strict";e.exports=require("assert")},14300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},9523:e=>{"use strict";e.exports=require("dns")},82361:e=>{"use strict";e.exports=require("events")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},41808:e=>{"use strict";e.exports=require("net")},22037:e=>{"use strict";e.exports=require("os")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},76224:e=>{"use strict";e.exports=require("tty")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},57201:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>n.a,__next_app__:()=>x,originalPathname:()=>u,pages:()=>d,routeModule:()=>p,tree:()=>o});var r=t(67096),l=t(16132),a=t(37284),n=t.n(a),i=t(32564),c={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>i[e]);t.d(s,c);let o=["",{children:["control",{children:["value",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,83245)),"D:\\Alfi\\RnD\\IOT\\DEVELOPMENT\\App-Nodes\\app\\control\\value\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,35345)),"D:\\Alfi\\RnD\\IOT\\DEVELOPMENT\\App-Nodes\\app\\layout.tsx"],error:[()=>Promise.resolve().then(t.bind(t,38196)),"D:\\Alfi\\RnD\\IOT\\DEVELOPMENT\\App-Nodes\\app\\error.tsx"],"not-found":[()=>Promise.resolve().then(t.bind(t,44293)),"D:\\Alfi\\RnD\\IOT\\DEVELOPMENT\\App-Nodes\\app\\not-found.tsx"]}],d=["D:\\Alfi\\RnD\\IOT\\DEVELOPMENT\\App-Nodes\\app\\control\\value\\page.tsx"],u="/control/value/page",x={require:t,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:l.x.APP_PAGE,page:"/control/value/page",pathname:"/control/value",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},53295:(e,s,t)=>{Promise.resolve().then(t.bind(t,1449))},1449:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>AutomationValuesPage});var r=t(30784),l=t(9885),a=t(36482),n=t.n(a),i=t(9941),c=t(31362),o=t(73928),d=t(95555),u=t(40516),x=t(33770),p=t(76494),h=t(74050),j=t(90391),m=t(26303),v=t(46544),g=t(13422),f=t(99491),b=t(94112),N=t(47917),_=t(14723);function AutomationValuesPage(){let[e,s]=(0,l.useState)("disconnected"),[t,a]=(0,l.useState)([]),[y,A]=(0,l.useState)([]),[P,S]=(0,l.useState)([]),[q,C]=(0,l.useState)(!1),[E,k]=(0,l.useState)(null),[D,O]=(0,l.useState)(""),[M,T]=(0,l.useState)(""),[V,w]=(0,l.useState)(""),[R,I]=(0,l.useState)(""),[z,L]=(0,l.useState)(0),[Z,F]=(0,l.useState)(""),[Q,B]=(0,l.useState)(""),[G,$]=(0,l.useState)(!1),J=(0,l.useRef)();(0,l.useEffect)(()=>{let e=n().connect("ws://localhost:9000");return e.on("connect",()=>{s("connected"),e.subscribe("automation_value/data"),e.subscribe("modbus_value/data"),e.subscribe("modular_value/data")}),e.on("error",()=>s("error")),e.on("close",()=>s("disconnected")),e.on("message",(e,s)=>{let t=JSON.parse(s.toString());e.endsWith("automation_value/data")&&a(t),e.endsWith("modbus_value/data")&&A(t),e.endsWith("modular_value/data")&&S(t)}),J.current=e,()=>{e.end()}},[]);let resetForm=()=>{O(""),T(""),w(""),I(""),L(0),F(""),B(""),$(!1),k(null)},openModal=e=>{e?(k(e),O(e.name),T(e.topic),w(e.config.key_value),I(e.config.logic),L(e.config.value),F(e.relay.name),B(e.relay.pin),$(e.relay.logic)):resetForm(),C(!0)},remove=e=>{let s=JSON.stringify({name:e.name});J.current?.publish("automation_value/delete",s),i.Am.success("Deleted")},{searchQuery:W,setSearchQuery:U,filteredData:K}=(0,f.d)(t,["name","topic"]),{sorted:X,sortField:H,sortDirection:Y,handleSort:ee}=(0,b.E)(K),[es,et]=(0,l.useState)(1),er=Math.ceil(X.length/10),el=X.slice((es-1)*10,10*es);return(0,r.jsxs)(c.kV,{children:[(0,r.jsxs)("header",{className:"flex h-16 items-center justify-between border-b px-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[r.jsx(c.vP,{}),r.jsx(o.Z,{orientation:"vertical",className:"h-4"}),r.jsx(p.Z,{className:"w-5 h-5 text-muted-foreground"}),r.jsx("h1",{className:"text-lg font-semibold",children:"Automation Values"})]}),r.jsx(v.Z,{})]}),(0,r.jsxs)("div",{className:"p-6 space-y-4",children:[(0,r.jsxs)("div",{className:"flex flex-wrap justify-between items-center mb-4 gap-2",children:[r.jsx(d.z,{size:"sm",variant:"default",onClick:()=>openModal(),children:"Add Automation"}),r.jsx("input",{type:"text",placeholder:"Search...",className:"border rounded px-2 py-1 w-64",value:W,onChange:e=>U(e.target.value)})]}),(0,r.jsxs)(g.iA,{children:[r.jsx(g.xD,{children:(0,r.jsxs)(g.SC,{children:[r.jsx(g.ss,{children:"#"}),(0,r.jsxs)(g.ss,{onClick:()=>ee("name"),className:"cursor-pointer select-none",children:["Name / Topic ",r.jsx(h.Z,{className:"inline w-4 h-4 ml-1 align-middle"})]}),r.jsx(g.ss,{children:"Trigger"}),r.jsx(g.ss,{children:"Relay"}),r.jsx(g.ss,{children:"Actions"})]})}),r.jsx(g.RM,{children:el.length?el.map((e,s)=>(0,r.jsxs)(g.SC,{children:[r.jsx(g.pj,{children:(es-1)*10+s+1}),(0,r.jsxs)(g.pj,{children:[r.jsx("div",{className:"font-semibold",children:e.name}),r.jsx("div",{className:"text-muted text-xs",children:e.topic})]}),r.jsx(g.pj,{className:"text-center",children:(0,r.jsxs)("span",{className:"badge",children:[e.config.key_value," ",e.config.logic," ",e.config.value]})}),(0,r.jsxs)(g.pj,{className:"text-center",children:[e.relay.name," pin ",e.relay.pin," = ",r.jsx("strong",{children:e.relay.logic?"ON":"OFF"})]}),(0,r.jsxs)(g.pj,{className:"flex gap-1 justify-center",children:[r.jsx(d.z,{size:"icon",onClick:()=>openModal(e),children:r.jsx(j.Z,{})}),r.jsx(d.z,{size:"icon",variant:"destructive",onClick:()=>remove(e),children:r.jsx(m.Z,{})})]})]},s)):r.jsx(g.SC,{children:r.jsx(g.pj,{colSpan:5,className:"text-center text-muted-foreground py-8",children:'No automation data. Click "Add Automation" to create one.'})})})]}),r.jsx(N.tl,{className:"mt-4",children:(0,r.jsxs)(N.ng,{children:[r.jsx(N.dN,{onClick:()=>et(e=>Math.max(1,e-1))}),Array.from({length:er},(e,s)=>r.jsx(N.nt,{children:r.jsx(N.kN,{isActive:es===s+1,onClick:()=>et(s+1),children:s+1})},s)),r.jsx(N.$0,{onClick:()=>et(e=>Math.min(er,e+1))})]})}),r.jsx(u.Vq,{open:q,onOpenChange:C,children:(0,r.jsxs)(u.cZ,{children:[r.jsx(u.fK,{children:r.jsx(u.$N,{children:E?"Edit Automation":"Add Automation"})}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{children:"Device"}),(0,r.jsxs)(_.Ph,{value:D,onValueChange:O,children:[r.jsx(_.i4,{children:r.jsx(_.ki,{placeholder:"Select.."})}),r.jsx(_.Bw,{children:y.map(e=>r.jsx(_.Ql,{value:e.profile.name,children:e.profile.name},e.profile.name))})]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{children:"Topic"}),r.jsx(x.I,{value:M,onChange:e=>T(e.target.value)})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{children:"Variable"}),r.jsx(x.I,{value:V,onChange:e=>w(e.target.value)})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{children:"Logic"}),(0,r.jsxs)(_.Ph,{value:R,onValueChange:I,children:[r.jsx(_.i4,{children:r.jsx(_.ki,{placeholder:"Select.."})}),r.jsx(_.Bw,{children:[" >","<",">=","<=","==","!="].map(e=>r.jsx(_.Ql,{value:e,children:e},e))})]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{children:"Value"}),r.jsx(x.I,{type:"number",value:z,onChange:e=>L(Number(e.target.value))})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{children:"Relay Device"}),(0,r.jsxs)(_.Ph,{value:Z,onValueChange:F,children:[r.jsx(_.i4,{children:r.jsx(_.ki,{placeholder:"Select.."})}),r.jsx(_.Bw,{children:P.map(e=>r.jsx(_.Ql,{value:e.profile.name,children:e.profile.name},e.profile.name))})]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{children:"Pin"}),r.jsx(x.I,{value:Q,onChange:e=>B(e.target.value)})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{children:"Output Logic"}),(0,r.jsxs)(_.Ph,{value:G?"true":"false",onValueChange:e=>$("true"===e),children:[r.jsx(_.i4,{children:r.jsx(_.ki,{placeholder:"Select.."})}),(0,r.jsxs)(_.Bw,{children:[r.jsx(_.Ql,{value:"true",children:"True"}),r.jsx(_.Ql,{value:"false",children:"False"})]})]})]})]}),r.jsx(u.cN,{children:r.jsx(d.z,{onClick:()=>{let e=E?{...E,config:{key_value:V,logic:R,value:z},relay:{name:Z,pin:Q,logic:G}}:{name:D,topic:M,config:{key_value:V,logic:R,value:z},relay:{name:Z,pin:Q,logic:G}},s=E?"automation_value/update":"automation_value/create";J.current?.publish(s,JSON.stringify(e)),i.Am.success(E?"Updated":"Created"),C(!1)},children:E?"Update":"Create"})})]})})]})]})}},83245:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>n,__esModule:()=>a,default:()=>c});var r=t(95153);let l=(0,r.createProxy)(String.raw`D:\Alfi\RnD\IOT\DEVELOPMENT\App-Nodes\app\control\value\page.tsx`),{__esModule:a,$$typeof:n}=l,i=l.default,c=i}};var s=require("../../../webpack-runtime.js");s.C(e);var __webpack_exec__=e=>s(s.s=e),t=s.X(0,[5075,7783,6482,9941,5247,8794,6007,7803,1963,754,1890,3892,7640,516,6544,7578,9121],()=>__webpack_exec__(57201));module.exports=t})();