(()=>{var e={};e.id=4502,e.ids=[4502],e.modules={55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},39491:e=>{"use strict";e.exports=require("assert")},14300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},9523:e=>{"use strict";e.exports=require("dns")},82361:e=>{"use strict";e.exports=require("events")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},41808:e=>{"use strict";e.exports=require("net")},22037:e=>{"use strict";e.exports=require("os")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},76224:e=>{"use strict";e.exports=require("tty")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},59908:(e,r,s)=>{"use strict";s.r(r),s.d(r,{GlobalError:()=>n.a,__next_app__:()=>u,originalPathname:()=>p,pages:()=>d,routeModule:()=>x,tree:()=>c});var t=s(67096),i=s(16132),a=s(37284),n=s.n(a),o=s(32564),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);s.d(r,l);let c=["",{children:["control",{children:["manual",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,70930)),"D:\\Alfi\\RnD\\IOT\\DEVELOPMENT\\App-Nodes\\app\\control\\manual\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,35345)),"D:\\Alfi\\RnD\\IOT\\DEVELOPMENT\\App-Nodes\\app\\layout.tsx"],error:[()=>Promise.resolve().then(s.bind(s,38196)),"D:\\Alfi\\RnD\\IOT\\DEVELOPMENT\\App-Nodes\\app\\error.tsx"],"not-found":[()=>Promise.resolve().then(s.bind(s,44293)),"D:\\Alfi\\RnD\\IOT\\DEVELOPMENT\\App-Nodes\\app\\not-found.tsx"]}],d=["D:\\Alfi\\RnD\\IOT\\DEVELOPMENT\\App-Nodes\\app\\control\\manual\\page.tsx"],p="/control/manual/page",u={require:s,loadChunk:()=>Promise.resolve()},x=new t.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/control/manual/page",pathname:"/control/manual",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},61090:(e,r,s)=>{Promise.resolve().then(s.bind(s,17199))},17199:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>ModularDashboardPage});var t=s(30784),i=s(9885),a=s(61890),n=s(95555),o=s(20599),l=s(31362),c=s(73406),d=s(41129),p=s(73928),u=s(92327),x=s(37640);function ModularDashboardPage(){let[e,r]=(0,i.useState)([]),[s,m]=(0,i.useState)({}),[h,f]=(0,i.useState)({}),g=(0,x.w)(),b=(0,u.k)();(0,i.useEffect)(()=>{if(!b)return;let handleMessage=(e,s)=>{try{let t=JSON.parse(s.toString());Array.isArray(t)?r(t):t?.topic&&m(r=>({...r,[e]:t}))}catch(e){console.error("Failed to parse MQTT message",e)}};return b.on("message",handleMessage),b.subscribe("response_device_i2c"),b.subscribe("device_data/#"),()=>{b.unsubscribe("response_device_i2c"),b.unsubscribe("device_data/#"),b.off("message",handleMessage)}},[b]);let toggleVisibility=e=>{e&&f(r=>({...r,[e]:!r[e]}))};return(0,t.jsxs)(l.kV,{children:[(0,t.jsxs)("header",{className:"flex h-16 items-center justify-between border-b px-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[t.jsx(l.vP,{className:"-ml-1"}),t.jsx(p.Z,{orientation:"vertical",className:"mr-2 h-4"}),t.jsx(c.Z,{className:"h-5 w-5 text-muted-foreground"}),t.jsx("h1",{className:"text-lg font-semibold",children:"Modular Control Dashboard"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[t.jsx(a.C,{variant:"outline",className:`capitalize ${"connected"===g?"text-green-600 border-green-600":"error"===g?"text-red-600 border-red-600":"text-yellow-600 border-yellow-600"}`,children:g}),t.jsx(n.z,{variant:"outline",size:"icon",className:"h-8 w-8",onClick:()=>{b?.publish("command_device_i2c",JSON.stringify({command:"getDataI2C"}))},children:t.jsx(d.Z,{})})]})]}),t.jsx("div",{className:"p-4 space-y-4",children:e.length>0?e.map(e=>(0,t.jsxs)(o.Zb,{children:[(0,t.jsxs)(o.Ol,{className:"flex flex-col gap-1",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)(o.ll,{className:"text-base",children:[e.profile?.name," (",e.profile?.part_number,")"]}),(0,t.jsxs)("span",{className:"text-sm text-muted-foreground",children:["Addr: ",e.protocol_setting?.address]})]}),(0,t.jsxs)("div",{className:"flex justify-between text-sm text-muted-foreground",children:[(0,t.jsxs)("span",{children:["Topic: ",e.profile?.topic]}),t.jsx(n.z,{size:"sm",variant:"ghost",onClick:()=>toggleVisibility(e.profile?.id),children:h[e.profile?.id||""]?"Hide":"Show"})]})]}),h[e.profile?.id||""]&&t.jsx(o.aY,{className:"space-y-2 text-sm",children:t.jsx("pre",{className:"rounded bg-muted p-2 whitespace-pre-wrap",children:JSON.stringify(s[e.profile?.topic||""],null,2)})})]},e.profile?.id)):t.jsx(o.Zb,{children:t.jsx(o.aY,{className:"p-4 text-center text-muted-foreground",children:"No devices found. Click refresh to try again."})})})]})}},70930:(e,r,s)=>{"use strict";s.r(r),s.d(r,{$$typeof:()=>n,__esModule:()=>a,default:()=>l});var t=s(95153);let i=(0,t.createProxy)(String.raw`D:\Alfi\RnD\IOT\DEVELOPMENT\App-Nodes\app\control\manual\page.tsx`),{__esModule:a,$$typeof:n}=i,o=i.default,l=o}};var r=require("../../../webpack-runtime.js");r.C(e);var __webpack_exec__=e=>r(r.s=e),s=r.X(0,[5075,7783,6482,1881,754,599,1890,3892,7640],()=>__webpack_exec__(59908));module.exports=s})();