(()=>{var e={};e.id=1792,e.ids=[1792],e.modules={55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},39491:e=>{"use strict";e.exports=require("assert")},14300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},9523:e=>{"use strict";e.exports=require("dns")},82361:e=>{"use strict";e.exports=require("events")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},41808:e=>{"use strict";e.exports=require("net")},22037:e=>{"use strict";e.exports=require("os")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},76224:e=>{"use strict";e.exports=require("tty")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},305:(e,s,r)=>{"use strict";r.r(s),r.d(s,{GlobalError:()=>a.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>d,routeModule:()=>x,tree:()=>l});var t=r(67096),i=r(16132),o=r(37284),a=r.n(o),n=r(32564),c={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>n[e]);r.d(s,c);let l=["",{children:["control",{children:["logic",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,14809)),"D:\\Alfi\\RnD\\IOT\\DEVELOPMENT\\App-Nodes\\app\\control\\logic\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,35345)),"D:\\Alfi\\RnD\\IOT\\DEVELOPMENT\\App-Nodes\\app\\layout.tsx"],error:[()=>Promise.resolve().then(r.bind(r,38196)),"D:\\Alfi\\RnD\\IOT\\DEVELOPMENT\\App-Nodes\\app\\error.tsx"],"not-found":[()=>Promise.resolve().then(r.bind(r,44293)),"D:\\Alfi\\RnD\\IOT\\DEVELOPMENT\\App-Nodes\\app\\not-found.tsx"]}],d=["D:\\Alfi\\RnD\\IOT\\DEVELOPMENT\\App-Nodes\\app\\control\\logic\\page.tsx"],u="/control/logic/page",p={require:r,loadChunk:()=>Promise.resolve()},x=new t.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/control/logic/page",pathname:"/control/logic",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},15387:(e,s,r)=>{Promise.resolve().then(r.bind(r,97121))},97121:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>LogicControlPage});var t=r(30784),i=r(9885),o=r(61890),a=r(95555),n=r(20599),c=r(73928),l=r(31362),d=r(1753),u=r(41129),p=r(90391),x=r(26303),m=r(92327),g=r(9941);function LogicControlPage(){let[e,s]=(0,i.useState)([]),[r,h]=(0,i.useState)("disconnected"),_=(0,m.k)();(0,i.useEffect)(()=>{if(!_)return;let handleMessage=(e,r)=>{try{let t=JSON.parse(r.toString());"response_get_data"===e?s(t.data.read_data||[]):"response_control_drycontact"===e?"success"===t.status?(g.Am.success(t.message),refreshData(),restartService()):g.Am.error(t.message):"service/response"===e&&("success"===t.result?g.Am.success(t.message):g.Am.error(t.message))}catch(e){console.error("Failed to parse MQTT message",e),g.Am.error("MQTT parsing error")}};return _.on("message",handleMessage),_.subscribe("response_get_data"),_.subscribe("response_control_drycontact"),_.subscribe("service/response"),h("connected"),refreshData(),()=>{_.unsubscribe("response_get_data"),_.unsubscribe("response_control_drycontact"),_.unsubscribe("service/response"),_.off("message",handleMessage)}},[_]);let refreshData=()=>{_?.publish("command_control_drycontact",JSON.stringify({action:"get"}))},deleteConfig=e=>{_?.publish("command_control_drycontact",JSON.stringify({command:"delete",data:{id:e}})),g.Am.success("Configuration deleted"),restartService()},restartService=()=>{let e=JSON.stringify({action:"restart",services:["modular_i2c.service","drycontact_control.service"]});_?.publish("service/command",e)};return(0,t.jsxs)(l.kV,{children:[(0,t.jsxs)("header",{className:"flex h-16 items-center justify-between border-b px-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[t.jsx(l.vP,{className:"-ml-1"}),t.jsx(c.Z,{orientation:"vertical",className:"mr-2 h-4"}),t.jsx(d.Z,{className:"h-5 w-5 text-muted-foreground"}),t.jsx("h1",{className:"text-lg font-semibold",children:"Logic Control Configurations"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[t.jsx(o.C,{variant:"outline",className:`capitalize ${"connected"===r?"text-green-600 border-green-600":"error"===r?"text-red-600 border-red-600":"text-yellow-600 border-yellow-600"}`,children:r}),t.jsx(a.z,{variant:"outline",size:"icon",className:"h-8 w-8",onClick:refreshData,children:t.jsx(u.Z,{})})]})]}),t.jsx("div",{className:"p-4 space-y-4",children:e.length>0?e.map((e,s)=>(0,t.jsxs)(n.Zb,{children:[(0,t.jsxs)(n.Ol,{children:[(0,t.jsxs)(n.ll,{className:"text-base",children:[s+1,". ",e.customName||"N/A"]}),(0,t.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Addr: ",e.address," — Bus: ",e.bus," — Pin: ",e.pin," — Expected: ",e.expected_value?"True":"False"]})]}),(0,t.jsxs)(n.aY,{className:"space-y-2",children:[t.jsx("div",{className:"text-sm font-medium",children:"Control Relays:"}),e.control_relays.map((e,s)=>(0,t.jsxs)("div",{className:"text-sm border rounded p-2",children:[(0,t.jsxs)("div",{children:[t.jsx("strong",{children:e.customName})," — Addr: ",e.address,", Bus: ",e.bus,", Pin: ",e.pin]}),(0,t.jsxs)("div",{children:["Set: ",e.set_value?"True":"False",", Type: ",e.control_type,", Delay: ",e.delay,"s, Latching: ",e.latching_mode?"Yes":"No"]})]},s)),(0,t.jsxs)("div",{className:"flex gap-2 pt-2",children:[(0,t.jsxs)(a.z,{size:"sm",variant:"outline",children:[t.jsx(p.Z,{className:"h-4 w-4 mr-1"})," Edit"]}),(0,t.jsxs)(a.z,{size:"sm",variant:"destructive",onClick:()=>deleteConfig(e.id),children:[t.jsx(x.Z,{className:"h-4 w-4 mr-1"})," Delete"]})]})]})]},e.id)):t.jsx(n.Zb,{children:t.jsx(n.aY,{className:"p-4 text-center text-muted-foreground",children:"No dry contact configurations found."})})})]})}},14809:(e,s,r)=>{"use strict";r.r(s),r.d(s,{$$typeof:()=>a,__esModule:()=>o,default:()=>c});var t=r(95153);let i=(0,t.createProxy)(String.raw`D:\Alfi\RnD\IOT\DEVELOPMENT\App-Nodes\app\control\logic\page.tsx`),{__esModule:o,$$typeof:a}=i,n=i.default,c=n}};var s=require("../../../webpack-runtime.js");s.C(e);var __webpack_exec__=e=>s(s.s=e),r=s.X(0,[5075,7783,6482,9941,7734,8288,754,599,1890,3892],()=>__webpack_exec__(305));module.exports=r})();