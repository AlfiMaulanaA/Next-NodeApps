(()=>{var e={};e.id=7055,e.ids=[7055],e.modules={55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},57310:e=>{"use strict";e.exports=require("url")},16536:(e,a,t)=>{"use strict";t.r(a),t.d(a,{GlobalError:()=>s.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>x,tree:()=>o});var n=t(67096),l=t(16132),i=t(37284),s=t.n(i),r=t(32564),d={};for(let e in r)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>r[e]);t.d(a,d);let o=["",{children:["control",{children:["weather",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,14617)),"D:\\Alfi\\RnD\\IOT\\DEVELOPMENT\\App-Nodes\\app\\control\\weather\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,35345)),"D:\\Alfi\\RnD\\IOT\\DEVELOPMENT\\App-Nodes\\app\\layout.tsx"],error:[()=>Promise.resolve().then(t.bind(t,38196)),"D:\\Alfi\\RnD\\IOT\\DEVELOPMENT\\App-Nodes\\app\\error.tsx"],"not-found":[()=>Promise.resolve().then(t.bind(t,44293)),"D:\\Alfi\\RnD\\IOT\\DEVELOPMENT\\App-Nodes\\app\\not-found.tsx"]}],c=["D:\\Alfi\\RnD\\IOT\\DEVELOPMENT\\App-Nodes\\app\\control\\weather\\page.tsx"],u="/control/weather/page",m={require:t,loadChunk:()=>Promise.resolve()},x=new n.AppPageRouteModule({definition:{kind:l.x.APP_PAGE,page:"/control/weather/page",pathname:"/control/weather",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},96409:(e,a,t)=>{Promise.resolve().then(t.bind(t,97583))},97583:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>WeatherPage});var n=t(30784),l=t(9885),i=t(31362),s=t(73928),r=t(95555),d=t(40516),o=t(33770),c=t(14904),u=t(70279),m=t(53975),x=t(74768),g=t(67521),h=t(34328),p=t(4876),v=t(76494),j=t(17868),f=t(5987),b=t(87094),y=t(5705);let N=[{name:"Aceh",latitude:5.55,longitude:95.317},{name:"Sumatera Utara",latitude:3.5952,longitude:98.6722},{name:"Sumatera Barat",latitude:-.95,longitude:100.4167},{name:"Riau",latitude:.5333,longitude:101.45},{name:"Jambi",latitude:-1.61,longitude:103.6},{name:"Sumatera Selatan",latitude:-2.975,longitude:104.7754},{name:"Bengkulu",latitude:-3.8,longitude:102.27},{name:"Lampung",latitude:-5.45,longitude:105.2667},{name:"Kep. Bangka Belitung",latitude:-2.1333,longitude:106.1167},{name:"Kep. Riau",latitude:.9167,longitude:104.4667},{name:"DKI Jakarta",latitude:-6.2088,longitude:106.8456},{name:"Jawa Barat",latitude:-6.9175,longitude:107.6191},{name:"Jawa Tengah",latitude:-6.9667,longitude:110.4167},{name:"DI Yogyakarta",latitude:-7.7972,longitude:110.3688},{name:"Jawa Timur",latitude:-7.2575,longitude:112.7521},{name:"Banten",latitude:-6.1214,longitude:106.15},{name:"Bali",latitude:-8.65,longitude:115.2167},{name:"Nusa Tenggara Barat",latitude:-8.5833,longitude:116.1167},{name:"Nusa Tenggara Timur",latitude:-10.18,longitude:123.5833},{name:"Kalimantan Barat",latitude:0,longitude:109.3333},{name:"Kalimantan Tengah",latitude:-2.2167,longitude:113.9167},{name:"Kalimantan Selatan",latitude:-3.3167,longitude:114.5833},{name:"Kalimantan Timur",latitude:-.5,longitude:117.15},{name:"Kalimantan Utara",latitude:2.2167,longitude:116.8333},{name:"Sulawesi Utara",latitude:1.4748,longitude:124.8421},{name:"Sulawesi Tengah",latitude:-.9,longitude:119.867},{name:"Sulawesi Selatan",latitude:-5.1333,longitude:119.4167},{name:"Sulawesi Tenggara",latitude:-4,longitude:122.6},{name:"Gorontalo",latitude:.5,longitude:122.45},{name:"Sulawesi Barat",latitude:-2.6833,longitude:118.9167},{name:"Maluku",latitude:-3.7,longitude:128.18},{name:"Maluku Utara",latitude:1.58,longitude:127.3},{name:"Papua",latitude:-2.5333,longitude:140.7},{name:"Papua Barat",latitude:-.9,longitude:134.0833}];function getWeatherIcon(e,a){return 0===e?a?n.jsx(c.Z,{className:"text-yellow-400",size:48}):n.jsx(u.Z,{className:"text-gray-400",size:48}):[1,2,3].includes(e)?a?n.jsx(m.Z,{className:"text-yellow-300",size:48}):n.jsx(x.Z,{className:"text-gray-400",size:48}):[45,48].includes(e)?n.jsx(g.Z,{className:"text-gray-400",size:48}):[51,53,55,61,63,65,80,81,82].includes(e)?n.jsx(h.Z,{className:"text-blue-400",size:48}):[66,67,71,73,75,85,86].includes(e)?n.jsx(p.Z,{className:"text-blue-200",size:48}):[95,96,99].includes(e)?n.jsx(v.Z,{className:"text-yellow-500",size:48}):n.jsx(g.Z,{className:"text-gray-400",size:48})}function getWeatherDescription(e){return({0:"Clear Sky",1:"Mainly Clear",2:"Partly Cloudy",3:"Overcast",45:"Fog",48:"Depositing Rime Fog",51:"Light Drizzle",53:"Moderate Drizzle",55:"Dense Drizzle",56:"Light Freezing Drizzle",57:"Dense Freezing Drizzle",61:"Slight Rain",63:"Moderate Rain",65:"Heavy Rain",66:"Light Freezing Rain",67:"Heavy Freezing Rain",71:"Slight Snow Fall",73:"Moderate Snow Fall",75:"Heavy Snow Fall",77:"Snow Grains",80:"Slight Rain Showers",81:"Moderate Rain Showers",82:"Violent Rain Showers",85:"Slight Snow Showers",86:"Heavy Snow Showers",95:"Thunderstorm",96:"Thunderstorm with Slight Hail",99:"Thunderstorm with Heavy Hail"})[e]||"Unknown"}function WeatherPage(){let[e,a]=l.useState(N[10]),[t,c]=l.useState(null),[u,m]=l.useState(null),[x,g]=l.useState(!1),[h,p]=l.useState(!1),[v,C]=l.useState(""),[w,_]=l.useState(!1),[S,z]=l.useState({loc:N[10].name,lat:N[10].latitude,long:N[10].longitude,config:[{device:"",pin:1,address:0,bus:0,logic:!1}]});async function fetchWeather(){g(!0),c(null),m(null);try{let a=`https://api.open-meteo.com/v1/forecast?latitude=${e.latitude}&longitude=${e.longitude}&current_weather=true`,t=await fetch(a),n=await t.json();n&&n.current_weather&&(c(n.current_weather),m({elevation:n.elevation,timezone:n.timezone}))}catch(e){c(null),m(null)}finally{g(!1)}}function handleLocationChange(e){let t=N.find(a=>a.name===e.target.value);t&&(a(t),p(!1),C(""),z(e=>({...e,loc:t.name,lat:t.latitude,long:t.longitude})))}function setCurrentLocation(){navigator.geolocation?navigator.geolocation.getCurrentPosition(e=>{let t=e.coords.latitude,n=e.coords.longitude;a({name:"My Location",latitude:t,longitude:n}),p(!0),C(`${t.toFixed(4)}, ${n.toFixed(4)}`),z(e=>({...e,loc:"My Location",lat:t,long:n}))},()=>C("Unable to retrieve device location.")):C("Geolocation is not supported by this browser.")}function handleFormChange(e,a){z(t=>({...t,[e]:a}))}function handleConfigChange(e,a,t){z(n=>({...n,config:n.config.map((n,l)=>l===e?{...n,[a]:t}:n)}))}function addConfig(){z(e=>({...e,config:[...e.config,{device:"",pin:1,address:0,bus:0,logic:!1}]}))}function removeConfig(e){z(a=>({...a,config:a.config.filter((a,t)=>t!==e)}))}function submitConfig(e){e.preventDefault(),_(!1)}return l.useEffect(()=>{fetchWeather()},[e]),(0,n.jsxs)(i.kV,{children:[(0,n.jsxs)("header",{className:"flex h-16 items-center justify-between border-b px-4 bg-gradient-to-r from-gray-50 to-gray-100",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[n.jsx(i.vP,{}),n.jsx(s.Z,{orientation:"vertical",className:"h-4"}),n.jsx(j.Z,{className:"w-5 h-5 text-gray-600"}),n.jsx("h1",{className:"text-lg font-semibold text-gray-900",children:"Weather Information"})]}),(0,n.jsxs)(d.Vq,{open:w,onOpenChange:_,children:[n.jsx(d.hg,{asChild:!0,children:(0,n.jsxs)(r.z,{variant:"secondary",size:"sm",className:"flex items-center gap-1",children:[n.jsx(f.Z,{className:"w-4 h-4"})," Config Control"]})}),(0,n.jsxs)(d.cZ,{children:[n.jsx(d.fK,{children:n.jsx(d.$N,{children:"Device Configuration"})}),(0,n.jsxs)("form",{onSubmit:submitConfig,className:"space-y-4",children:[(0,n.jsxs)("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:"Location"}),n.jsx("select",{className:"w-full border rounded px-2 py-1",value:S.loc,onChange:e=>{handleFormChange("loc",e.target.value);let a=N.find(a=>a.name===e.target.value);a&&(handleFormChange("lat",a.latitude),handleFormChange("long",a.longitude))},children:N.map(e=>n.jsx("option",{value:e.name,children:e.name},e.name))})]}),(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,n.jsxs)("div",{children:[n.jsx("label",{className:"block text-sm font-medium",children:"Latitude"}),n.jsx(o.I,{value:S.lat,readOnly:!0})]}),(0,n.jsxs)("div",{children:[n.jsx("label",{className:"block text-sm font-medium",children:"Longitude"}),n.jsx(o.I,{value:S.long,readOnly:!0})]})]}),(0,n.jsxs)("div",{children:[n.jsx("h6",{className:"font-semibold mb-2",children:"Device Config"}),S.config.map((e,a)=>(0,n.jsxs)("div",{className:"border rounded p-3 mb-3 grid grid-cols-1 md:grid-cols-6 gap-2 items-end",children:[(0,n.jsxs)("div",{children:[n.jsx("label",{className:"block text-xs",children:"Device"}),(0,n.jsxs)("select",{className:"w-full border rounded px-2 py-1",value:e.device,onChange:e=>handleConfigChange(a,"device",e.target.value),children:[n.jsx("option",{value:"",children:"Select"}),n.jsx("option",{value:"relay_1",children:"relay_1"}),n.jsx("option",{value:"relay_2",children:"relay_2"}),n.jsx("option",{value:"relay_3",children:"relay_3"})]})]}),(0,n.jsxs)("div",{children:[n.jsx("label",{className:"block text-xs",children:"Pin"}),n.jsx(o.I,{type:"number",value:e.pin,onChange:e=>handleConfigChange(a,"pin",Number(e.target.value))})]}),(0,n.jsxs)("div",{children:[n.jsx("label",{className:"block text-xs",children:"Address"}),n.jsx(o.I,{type:"number",value:e.address,onChange:e=>handleConfigChange(a,"address",Number(e.target.value))})]}),(0,n.jsxs)("div",{children:[n.jsx("label",{className:"block text-xs",children:"Bus"}),n.jsx(o.I,{type:"number",value:e.bus,onChange:e=>handleConfigChange(a,"bus",Number(e.target.value))})]}),(0,n.jsxs)("div",{children:[n.jsx("label",{className:"block text-xs",children:"Logic"}),(0,n.jsxs)("select",{className:"w-full border rounded px-2 py-1",value:e.logic?"true":"false",onChange:e=>handleConfigChange(a,"logic","true"===e.target.value),children:[n.jsx("option",{value:"true",children:"True"}),n.jsx("option",{value:"false",children:"False"})]})]}),n.jsx("div",{className:"flex justify-end",children:n.jsx(r.z,{type:"button",variant:"destructive",size:"icon",onClick:()=>removeConfig(a),children:"\xd7"})})]},a)),n.jsx(r.z,{type:"button",variant:"outline",size:"sm",onClick:addConfig,children:"+ Add Config"})]}),(0,n.jsxs)(d.cN,{children:[n.jsx(r.z,{type:"submit",variant:"default",children:"Save"}),n.jsx(r.z,{type:"button",variant:"secondary",onClick:()=>_(!1),children:"Close"})]})]})]})]})]}),(0,n.jsxs)("main",{className:"max-w-2xl mx-auto w-full p-4",children:[(0,n.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-4",children:[(0,n.jsxs)("div",{className:"flex-1",children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:"Select Location"}),n.jsx("select",{className:"w-full border rounded px-2 py-1",value:e.name,onChange:handleLocationChange,children:N.map(e=>n.jsx("option",{value:e.name,children:e.name},e.name))})]}),(0,n.jsxs)(r.z,{variant:"outline",className:"mt-2 md:mt-6 flex items-center gap-1",onClick:setCurrentLocation,children:[n.jsx(b.Z,{className:"w-4 h-4"})," Get My Location"]})]}),h&&(0,n.jsxs)("div",{className:"rounded bg-gray-100 text-gray-700 px-4 py-2 mb-4 text-sm",children:["Your Location: ",v]}),(0,n.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6 border border-gray-200",children:[(0,n.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between mb-4 gap-4",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[t&&getWeatherIcon(t.weathercode,1===t.is_day),(0,n.jsxs)("div",{children:[n.jsx("div",{className:"text-2xl font-bold",children:t?t.temperature+"\xb0C":"-"}),n.jsx("div",{className:"text-sm text-gray-500",children:t?getWeatherDescription(t.weathercode):"No data"})]})]}),(0,n.jsxs)("div",{className:"text-right",children:[(0,n.jsxs)("div",{className:"font-semibold text-lg",children:["Weather in ",e.name]}),n.jsx("div",{className:"text-xs text-gray-500",children:t?t.time:"-"})]})]}),x?(0,n.jsxs)("div",{className:"flex items-center gap-2 text-gray-500",children:[n.jsx(y.Z,{className:"animate-spin"})," Loading weather data..."]}):t?(0,n.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 text-sm mb-4",children:[(0,n.jsxs)("div",{children:[n.jsx("b",{children:"Daytime:"})," ",void 0!==t.is_day?t.is_day?"Yes":"No":"-"]}),(0,n.jsxs)("div",{children:[n.jsx("b",{children:"Wind Speed:"})," ",t.windspeed," km/h"]}),(0,n.jsxs)("div",{children:[n.jsx("b",{children:"Wind Direction:"})," ",t.winddirection,"\xb0"]}),(0,n.jsxs)("div",{children:[n.jsx("b",{children:"Weather Code:"})," ",t.weathercode]}),u&&(0,n.jsxs)("div",{children:[n.jsx("b",{children:"Elevation:"})," ",u.elevation," m"]}),u&&(0,n.jsxs)("div",{children:[n.jsx("b",{children:"Timezone:"})," ",u.timezone]})]}):n.jsx("div",{className:"text-gray-500 mb-4",children:"No weather data available."}),(0,n.jsxs)("div",{className:"mt-6",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("h2",{className:"text-base font-semibold",children:"Device Config"}),n.jsx(r.z,{type:"button",variant:"outline",size:"sm",onClick:addConfig,children:"+ Add Config"})]}),n.jsx("div",{className:"space-y-4",children:S.config.map((e,a)=>(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-2 items-end border rounded p-3 bg-gray-50",children:[(0,n.jsxs)("div",{children:[n.jsx("label",{className:"block text-xs",children:"Device"}),(0,n.jsxs)("select",{className:"w-full border rounded px-2 py-1",value:e.device,onChange:e=>handleConfigChange(a,"device",e.target.value),children:[n.jsx("option",{value:"",children:"Select"}),n.jsx("option",{value:"relay_1",children:"relay_1"}),n.jsx("option",{value:"relay_2",children:"relay_2"}),n.jsx("option",{value:"relay_3",children:"relay_3"})]})]}),(0,n.jsxs)("div",{children:[n.jsx("label",{className:"block text-xs",children:"Pin"}),n.jsx(o.I,{type:"number",value:e.pin,onChange:e=>handleConfigChange(a,"pin",Number(e.target.value))})]}),(0,n.jsxs)("div",{children:[n.jsx("label",{className:"block text-xs",children:"Address"}),n.jsx(o.I,{type:"number",value:e.address,onChange:e=>handleConfigChange(a,"address",Number(e.target.value))})]}),(0,n.jsxs)("div",{children:[n.jsx("label",{className:"block text-xs",children:"Bus"}),n.jsx(o.I,{type:"number",value:e.bus,onChange:e=>handleConfigChange(a,"bus",Number(e.target.value))})]}),(0,n.jsxs)("div",{children:[n.jsx("label",{className:"block text-xs",children:"Logic"}),(0,n.jsxs)("select",{className:"w-full border rounded px-2 py-1",value:e.logic?"true":"false",onChange:e=>handleConfigChange(a,"logic","true"===e.target.value),children:[n.jsx("option",{value:"true",children:"True"}),n.jsx("option",{value:"false",children:"False"})]})]}),n.jsx("div",{className:"flex justify-end",children:n.jsx(r.z,{type:"button",variant:"destructive",size:"icon",onClick:()=>removeConfig(a),children:"\xd7"})})]},a))})]})]})]})]})}},14617:(e,a,t)=>{"use strict";t.r(a),t.d(a,{$$typeof:()=>s,__esModule:()=>i,default:()=>d});var n=t(95153);let l=(0,n.createProxy)(String.raw`D:\Alfi\RnD\IOT\DEVELOPMENT\App-Nodes\app\control\weather\page.tsx`),{__esModule:i,$$typeof:s}=l,r=l.default,d=r}};var a=require("../../../webpack-runtime.js");a.C(e);var __webpack_exec__=e=>a(a.s=e),t=a.X(0,[5075,1331,7914,754,516],()=>__webpack_exec__(16536));module.exports=t})();