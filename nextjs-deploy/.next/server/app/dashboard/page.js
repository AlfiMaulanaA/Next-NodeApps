(()=>{var e={};e.id=7702,e.ids=[7702],e.modules={55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},39491:e=>{"use strict";e.exports=require("assert")},14300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},9523:e=>{"use strict";e.exports=require("dns")},82361:e=>{"use strict";e.exports=require("events")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},41808:e=>{"use strict";e.exports=require("net")},22037:e=>{"use strict";e.exports=require("os")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},76224:e=>{"use strict";e.exports=require("tty")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},48400:(e,s,r)=>{"use strict";r.r(s),r.d(s,{GlobalError:()=>a.a,__next_app__:()=>u,originalPathname:()=>x,pages:()=>c,routeModule:()=>m,tree:()=>o});var t=r(67096),l=r(16132),i=r(37284),a=r.n(i),n=r(32564),d={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);r.d(s,d);let o=["",{children:["dashboard",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,1618)),"D:\\Alfi\\RnD\\IOT\\DEVELOPMENT\\App-Nodes\\app\\dashboard\\page.tsx"]}]},{loading:[()=>Promise.resolve().then(r.bind(r,77971)),"D:\\Alfi\\RnD\\IOT\\DEVELOPMENT\\App-Nodes\\app\\dashboard\\loading.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,35345)),"D:\\Alfi\\RnD\\IOT\\DEVELOPMENT\\App-Nodes\\app\\layout.tsx"],error:[()=>Promise.resolve().then(r.bind(r,38196)),"D:\\Alfi\\RnD\\IOT\\DEVELOPMENT\\App-Nodes\\app\\error.tsx"],"not-found":[()=>Promise.resolve().then(r.bind(r,44293)),"D:\\Alfi\\RnD\\IOT\\DEVELOPMENT\\App-Nodes\\app\\not-found.tsx"]}],c=["D:\\Alfi\\RnD\\IOT\\DEVELOPMENT\\App-Nodes\\app\\dashboard\\page.tsx"],x="/dashboard/page",u={require:r,loadChunk:()=>Promise.resolve()},m=new t.AppPageRouteModule({definition:{kind:l.x.APP_PAGE,page:"/dashboard/page",pathname:"/dashboard",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},99277:(e,s,r)=>{Promise.resolve().then(r.bind(r,58661))},35303:()=>{},58661:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>OverviewDashboard});var t=r(30784),l=r(9885),i=r(31362),a=r(73928),n=r(97849),d=r(39423),o=r(14172),c=r(50257),x=r(39120),u=r(14321),m=r(46544),p=r(20599),h=r(85282),f=r(92327),b=r(40162);function OverviewDashboard(){let e,s;let[r,g]=(0,l.useState)([]),[j,N]=(0,l.useState)(null),[v,_]=(0,l.useState)({});(0,l.useEffect)(()=>{let e=(0,f.k)();if(!e)return;let handleMessage=(e,s)=>{try{let r=JSON.parse(s.toString());if("response_device_modbus"===e&&Array.isArray(r)&&g(r),"batteryCharger"===e&&N(r),"modbus_snmp_summ"===e){let e=r["MODBUS SNMP STATUS"];if("string"==typeof e){let s=e.match(/^(.*?)\s+(.+?)$/);if(s){let e=s[1],r=s[2];_(s=>({...s,[e]:r}))}}}}catch(e){console.error("[MQTT] Invalid JSON:",e)}};return e.on("message",handleMessage),e.subscribe("response_device_modbus"),e.subscribe("batteryCharger"),e.subscribe("modbus_snmp_summ"),e.publish("command_device_modbus",JSON.stringify({command:"getDataModbus"})),()=>{e.unsubscribe("response_device_modbus"),e.unsubscribe("batteryCharger"),e.unsubscribe("modbus_snmp_summ"),e.off("message",handleMessage)}},[]);let y=(e=0,s=0,r.forEach(r=>{let t=v[r.profile?.name];t?.includes("success")?e++:s++}),{online:e,offline:s}),P=r.length,O=y.online,D=y.offline;return(0,t.jsxs)(i.kV,{children:[(0,t.jsxs)("header",{className:"flex h-16 shrink-0 items-center gap-2 border-b px-4",children:[t.jsx(i.vP,{className:"-ml-1"}),t.jsx(a.Z,{orientation:"vertical",className:"mr-2 h-4"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[t.jsx(n.Z,{className:"h-5 w-5"}),t.jsx("h1",{className:"text-lg font-semibold",children:"Node App"})]}),(0,t.jsxs)("div",{className:"ml-auto flex items-center gap-2",children:[!(0,b.d)()&&t.jsx(x.Z,{}),t.jsx(u.Z,{})]})]}),(0,t.jsxs)("div",{className:"flex flex-1 flex-col gap-4 p-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,t.jsxs)(p.Zb,{children:[(0,t.jsxs)(p.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(p.ll,{className:"text-sm font-medium",children:"Total Devices"}),t.jsx(d.Z,{className:"h-5 w-5 text-muted-foreground"})]}),(0,t.jsxs)(p.aY,{children:[t.jsx("div",{className:"text-2xl font-bold",children:P}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"All registered devices"})]})]}),(0,t.jsxs)(p.Zb,{children:[(0,t.jsxs)(p.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(p.ll,{className:"text-sm font-medium",children:"Online"}),t.jsx(o.Z,{className:"h-5 w-5 text-green-500"})]}),(0,t.jsxs)(p.aY,{children:[t.jsx("div",{className:"text-2xl font-bold",children:O}),(0,t.jsxs)("div",{className:"flex justify-between items-center mt-1",children:[t.jsx("p",{className:"text-xs text-muted-foreground",children:"Devices currently online"}),P===O&&P>0&&t.jsx("div",{className:"px-2 py-0.5 rounded-full bg-green-100 text-green-600 text-xs font-medium border border-green-300",children:"All devices is Online"})]})]})]}),(0,t.jsxs)(p.Zb,{children:[(0,t.jsxs)(p.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(p.ll,{className:"text-sm font-medium",children:"Offline"}),t.jsx(c.Z,{className:"h-5 w-5 text-red-500"})]}),(0,t.jsxs)(p.aY,{children:[t.jsx("div",{className:"text-2xl font-bold",children:D}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"Devices currently offline"})]})]})]}),t.jsx("div",{className:"mt-4",children:(0,t.jsxs)(h.mQ,{defaultValue:"modbus",className:"w-full",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)(h.dr,{children:[t.jsx(h.SP,{value:"modbus",children:"Device Modbus/SNMP"}),t.jsx(h.SP,{value:"battery",children:"Battery Charger"})]}),t.jsx(m.Z,{})]}),t.jsx(h.nU,{value:"modbus",className:"mt-2",children:(0,t.jsxs)(p.Zb,{children:[(0,t.jsxs)(p.Ol,{children:[t.jsx(p.ll,{children:"Device Modbus/SNMP"}),t.jsx(p.SZ,{children:"List of Modbus/SNMP devices"})]}),t.jsx(p.aY,{className:"text-sm text-muted-foreground",children:0===r.length?t.jsx("div",{children:"No Modbus/SNMP devices found."}):t.jsx("ul",{className:"space-y-2",children:r.map((e,s)=>(0,t.jsxs)("li",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between border-b pb-2 last:border-b-0 last:pb-0",children:[(0,t.jsxs)("div",{children:[t.jsx("span",{className:"font-semibold",children:e.profile?.name})," ",(0,t.jsxs)("span",{className:"ml-2 text-xs text-muted-foreground",children:["(",e.profile?.part_number,")"]}),t.jsx("div",{className:"text-xs",children:e.protocol_setting?.protocol==="Modbus RTU"?`Address: ${e.protocol_setting?.address}`:`IP: ${e.protocol_setting?.ip_address}`}),(0,t.jsxs)("div",{className:"text-xs",children:["Topic: ",e.profile?.topic]})]}),t.jsx("span",{className:`text-xs font-semibold ml-2 ${v[e.profile?.name]?.includes("success")?"text-green-600 bg-green-200 rounded-full px-2 py-1":"text-red-600 bg-red-200 rounded-full px-2 py-1"}`,children:v[e.profile?.name]?.includes("success")?"Online":"Offline"})]},e.profile?.name||s))})})]})}),t.jsx(h.nU,{value:"battery",className:"mt-2",children:(0,t.jsxs)(p.Zb,{children:[(0,t.jsxs)(p.Ol,{children:[t.jsx(p.ll,{children:"Battery Charger"}),t.jsx(p.SZ,{children:"Live data from charger via MQTT"})]}),t.jsx(p.aY,{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:j?Object.entries(j).map(([e,s])=>(0,t.jsxs)("div",{children:[t.jsx("div",{className:"font-semibold",children:e}),t.jsx("div",{className:"text-muted-foreground",children:String(s)})]},e)):t.jsx("div",{className:"col-span-full text-center",children:"Waiting for battery data..."})})]})})]})})]})]})}},77971:(e,s,r)=>{"use strict";function Loading(){return null}r.r(s),r.d(s,{default:()=>Loading})},1618:(e,s,r)=>{"use strict";r.r(s),r.d(s,{$$typeof:()=>a,__esModule:()=>i,default:()=>d});var t=r(95153);let l=(0,t.createProxy)(String.raw`D:\Alfi\RnD\IOT\DEVELOPMENT\App-Nodes\app\dashboard\page.tsx`),{__esModule:i,$$typeof:a}=l,n=l.default,d=n}};var s=require("../../webpack-runtime.js");s.C(e);var __webpack_exec__=e=>s(s.s=e),r=s.X(0,[5075,7783,6482,5247,8794,5371,5425,754,599,1890,3892,7640,6544,5282,5623],()=>__webpack_exec__(48400));module.exports=r})();