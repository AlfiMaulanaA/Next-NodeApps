(()=>{var e={};e.id=8884,e.ids=[8884],e.modules={55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},39491:e=>{"use strict";e.exports=require("assert")},14300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},9523:e=>{"use strict";e.exports=require("dns")},82361:e=>{"use strict";e.exports=require("events")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},41808:e=>{"use strict";e.exports=require("net")},22037:e=>{"use strict";e.exports=require("os")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},76224:e=>{"use strict";e.exports=require("tty")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},70173:(e,s,t)=>{"use strict";t.d(s,{Z:()=>i});var r=t(12125);let i=(0,r.Z)("layers",[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]])},51422:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>l.a,__next_app__:()=>x,originalPathname:()=>p,pages:()=>d,routeModule:()=>u,tree:()=>c});var r=t(67096),i=t(16132),o=t(37284),l=t.n(o),a=t(32564),n={};for(let e in a)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>a[e]);t.d(s,n);let c=["",{children:["devices",{children:["modbus",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,6626)),"D:\\Alfi\\RnD\\IOT\\DEVELOPMENT\\App-Nodes\\app\\devices\\modbus\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,35345)),"D:\\Alfi\\RnD\\IOT\\DEVELOPMENT\\App-Nodes\\app\\layout.tsx"],error:[()=>Promise.resolve().then(t.bind(t,38196)),"D:\\Alfi\\RnD\\IOT\\DEVELOPMENT\\App-Nodes\\app\\error.tsx"],"not-found":[()=>Promise.resolve().then(t.bind(t,44293)),"D:\\Alfi\\RnD\\IOT\\DEVELOPMENT\\App-Nodes\\app\\not-found.tsx"]}],d=["D:\\Alfi\\RnD\\IOT\\DEVELOPMENT\\App-Nodes\\app\\devices\\modbus\\page.tsx"],p="/devices/modbus/page",x={require:t,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/devices/modbus/page",pathname:"/devices/modbus",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},66093:(e,s,t)=>{Promise.resolve().then(t.bind(t,2580))},2580:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>DeviceManagerPage});var r=t(30784),i=t(9885),o=t(95555),l=t(13422),a=t(20599),n=t(33770),c=t(32451),d=t(40516),p=t(83475),x=t(41129),u=t(39423),m=t(88012),h=t(70173),j=t(74050),g=t(31362),f=t(73928);t(19300);var b=t(92327),v=t(46544),_=t(37640),N=t(94112),w=t(99491),M=t(47917),y=t(14723);function DeviceManagerPage(){let[e,s]=(0,i.useState)([]),[t,P]=(0,i.useState)(!1),[D,A]=(0,i.useState)(!1),[q,E]=(0,i.useState)(1),[T,O]=(0,i.useState)(""),[S,C]=(0,i.useState)({profile:{name:"",part_number:"",topic:""},protocol_setting:{protocol:"Modbus RTU",address:"",ip_address:"",port:"",baudrate:9600,parity:"NONE",bytesize:8,stop_bit:1,timeout:1e3,endianness:"Little Endian",snmp_version:"1",read_community:"public"}});(0,_.w)();let k=(0,b.k)();(0,i.useEffect)(()=>{if(!k)return;let handleMessage=(e,t)=>{try{let e=JSON.parse(t.toString());Array.isArray(e)&&s(e)}catch(e){console.error("Invalid JSON from MQTT",e)}};return k.on("message",handleMessage),k.subscribe("response_device_modbus"),k.publish("command_device_modbus",JSON.stringify({command:"getDataModbus"})),()=>{k.unsubscribe("response_device_modbus"),k.off("message",handleMessage)}},[k]);let{sorted:R,sortField:Z,sortDirection:I,handleSort:L}=(0,N.E)(e),{searchQuery:U,setSearchQuery:z,filteredData:V}=(0,w.d)(R,["profile.name","profile.part_number","profile.topic","protocol_setting.address","protocol_setting.ip_address"]),J=Math.ceil(V.length/5),G=V.slice((q-1)*5,5*q);return(0,r.jsxs)(g.kV,{children:[(0,r.jsxs)("header",{className:"flex h-16 items-center justify-between border-b px-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[r.jsx(g.vP,{className:"-ml-1"}),r.jsx(f.Z,{orientation:"vertical",className:"mr-2 h-4"}),r.jsx(p.Z,{className:"h-5 w-5"}),r.jsx("h1",{className:"text-lg font-semibold",children:"Modbus SNMP Management"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[r.jsx(v.Z,{}),r.jsx(o.z,{variant:"outline",size:"icon",className:"h-8 w-8",onClick:()=>k?.publish("command_device_modbus",JSON.stringify({command:"getDataModbus"})),children:r.jsx(x.Z,{})}),r.jsx(o.z,{size:"sm",variant:"default",onClick:()=>{C({profile:{name:"",part_number:"",topic:""},protocol_setting:{protocol:"Modbus RTU",address:"",ip_address:"",port:"",baudrate:9600,parity:"NONE",bytesize:8,stop_bit:1,timeout:1e3,endianness:"Little Endian",snmp_version:"1",read_community:"public"}}),O(""),A(!1),P(!0)},children:"Add Device"})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 m-4",children:[(0,r.jsxs)(a.Zb,{className:"shadow-sm hover:shadow-md transition-shadow",children:[(0,r.jsxs)(a.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(a.ll,{className:"text-sm font-medium",children:"Total Devices"}),r.jsx(u.Z,{className:"h-5 w-5  text-green-600"})]}),(0,r.jsxs)(a.aY,{children:[r.jsx("div",{className:"text-2xl font-bold",children:e.length}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"All connected devices"})]})]}),(0,r.jsxs)(a.Zb,{className:"shadow-sm hover:shadow-md transition-shadow",children:[(0,r.jsxs)(a.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(a.ll,{className:"text-sm font-medium",children:"Protocol Breakdown"}),r.jsx(m.Z,{className:"h-5 w-5 text-green-600"})]}),r.jsx(a.aY,{children:(0,r.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Modbus RTU"}),r.jsx("span",{className:"font-semibold",children:e.filter(e=>e.protocol_setting?.protocol?.toLowerCase()==="modbus rtu").length})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[r.jsx("span",{children:"SNMP"}),r.jsx("span",{className:"font-semibold",children:e.filter(e=>e.protocol_setting?.protocol?.toLowerCase()==="snmp").length})]})]})})]}),(0,r.jsxs)(a.Zb,{className:"shadow-sm hover:shadow-md transition-shadow",children:[(0,r.jsxs)(a.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(a.ll,{className:"text-sm font-medium",children:"Most Used Protocol"}),r.jsx(h.Z,{className:"h-5 w-5 text-green-600"})]}),(0,r.jsxs)(a.aY,{children:[r.jsx("div",{className:"text-xl font-semibold",children:(()=>{let s=e.filter(e=>e.protocol_setting?.protocol?.toLowerCase()==="modbus rtu").length,t=e.filter(e=>e.protocol_setting?.protocol?.toLowerCase()==="snmp").length;return s===t?"Equal Use":s>t?"Modbus RTU":"SNMP"})()}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Most common protocol"})]})]})]}),(0,r.jsxs)(a.Zb,{className:"m-4",children:[r.jsx(a.Ol,{children:(0,r.jsxs)("div",{className:"flex justify-between",children:[r.jsx(a.ll,{children:"Device List"}),r.jsx(n.I,{placeholder:"Search devices...",value:U,onChange:e=>z(e.target.value),className:"h-8 w-64"})]})}),(0,r.jsxs)(a.aY,{children:[(0,r.jsxs)(l.iA,{children:[r.jsx(l.xD,{children:(0,r.jsxs)(l.SC,{children:[r.jsx(l.ss,{children:"#"}),(0,r.jsxs)(l.ss,{children:["Device Name ",r.jsx(j.Z,{className:"inline mr-1 h-4 w-4"})]}),(0,r.jsxs)(l.ss,{children:["PN ",r.jsx(j.Z,{className:"inline mr-1 h-4 w-4"})]}),(0,r.jsxs)(l.ss,{children:["Address/IP ",r.jsx(j.Z,{className:"inline mr-1 h-4 w-4"})]}),(0,r.jsxs)(l.ss,{children:["Topic ",r.jsx(j.Z,{className:"inline mr-1 h-4 w-4"})]})]})}),r.jsx(l.RM,{children:G.length>0?G.map((e,s)=>(0,r.jsxs)(l.SC,{children:[r.jsx(l.pj,{children:(q-1)*5+s+1}),r.jsx(l.pj,{children:e.profile?.name}),r.jsx(l.pj,{children:e.profile?.part_number}),r.jsx(l.pj,{children:e.protocol_setting?.protocol==="Modbus RTU"?e.protocol_setting?.address:e.protocol_setting?.ip_address}),r.jsx(l.pj,{children:e.profile?.topic})]},e.profile?.name)):r.jsx(l.SC,{children:r.jsx(l.pj,{colSpan:6,className:"text-center",children:"No devices found."})})})]}),r.jsx(M.tl,{className:"mt-4",children:(0,r.jsxs)(M.ng,{children:[r.jsx(M.nt,{children:r.jsx(M.dN,{onClick:()=>E(e=>Math.max(e-1,1)),href:"#"})}),Array.from({length:J},(e,s)=>r.jsx(M.nt,{children:r.jsx(M.kN,{isActive:q===s+1,onClick:()=>E(s+1),href:"#",children:s+1})},s)),r.jsx(M.nt,{children:r.jsx(M.$0,{onClick:()=>E(e=>Math.min(e+1,J)),href:"#"})})]})})]})]}),r.jsx(d.Vq,{open:t,onOpenChange:P,children:(0,r.jsxs)(d.cZ,{children:[r.jsx(d.fK,{children:r.jsx(d.$N,{children:D?"Update Device":"Add New Device"})}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[r.jsx(c._,{children:"Device Name"}),r.jsx(n.I,{value:S.profile.name,onChange:e=>C({...S,profile:{...S.profile,name:e.target.value}})})]}),(0,r.jsxs)("div",{children:[r.jsx(c._,{children:"Part Number"}),r.jsx(n.I,{value:S.profile.part_number,onChange:e=>C({...S,profile:{...S.profile,part_number:e.target.value}})})]}),(0,r.jsxs)("div",{children:[r.jsx(c._,{children:"Topic"}),r.jsx(n.I,{value:S.profile.topic,onChange:e=>C({...S,profile:{...S.profile,topic:e.target.value}})})]}),(0,r.jsxs)("div",{children:[r.jsx(c._,{children:"Protocol"}),(0,r.jsxs)(y.Ph,{value:S.protocol_setting.protocol,onValueChange:e=>C({...S,protocol_setting:{...S.protocol_setting,protocol:e}}),children:[r.jsx(y.i4,{children:r.jsx(y.ki,{placeholder:"Select protocol"})}),(0,r.jsxs)(y.Bw,{children:[r.jsx(y.Ql,{value:"Modbus RTU",children:"Modbus RTU"}),r.jsx(y.Ql,{value:"SNMP",children:"SNMP"})]})]})]}),(0,r.jsxs)("div",{children:[r.jsx(c._,{children:"Modbus RTU"===S.protocol_setting.protocol?"Address":"IP Address"}),r.jsx(n.I,{value:"Modbus RTU"===S.protocol_setting.protocol?S.protocol_setting.address:S.protocol_setting.ip_address,onChange:e=>C({...S,protocol_setting:{...S.protocol_setting,["Modbus RTU"===S.protocol_setting.protocol?"address":"ip_address"]:e.target.value}})})]}),r.jsx(o.z,{onClick:()=>{let e=JSON.stringify({command:D?"updateDevice":"addDevice",device:S,...D&&T&&{old_name:T}});k?.publish("command_device_modbus",e),P(!1)},className:"col-span-2",children:D?"Update Device":"Add Device"})]})]})})]})}},32451:(e,s,t)=>{"use strict";t.d(s,{_:()=>c});var r=t(30784),i=t(9885),o=t(43618),l=t(91971),a=t(98699);let n=(0,l.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=i.forwardRef(({className:e,...s},t)=>r.jsx(o.f,{ref:t,className:(0,a.cn)(n(),e),...s}));c.displayName=o.f.displayName},6626:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>l,__esModule:()=>o,default:()=>n});var r=t(95153);let i=(0,r.createProxy)(String.raw`D:\Alfi\RnD\IOT\DEVELOPMENT\App-Nodes\app\devices\modbus\page.tsx`),{__esModule:o,$$typeof:l}=i,a=i.default,n=a}};var s=require("../../../webpack-runtime.js");s.C(e);var __webpack_exec__=e=>s(s.s=e),t=s.X(0,[5075,7783,6482,5247,8794,6007,5425,9039,7803,754,599,1890,3892,7640,516,6544,7578,9121],()=>__webpack_exec__(51422));module.exports=t})();