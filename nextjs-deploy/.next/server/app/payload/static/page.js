(()=>{var e={};e.id=6296,e.ids=[6296],e.modules={55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},39491:e=>{"use strict";e.exports=require("assert")},14300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},9523:e=>{"use strict";e.exports=require("dns")},82361:e=>{"use strict";e.exports=require("events")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},41808:e=>{"use strict";e.exports=require("net")},22037:e=>{"use strict";e.exports=require("os")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},76224:e=>{"use strict";e.exports=require("tty")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},90545:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>l.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>c,routeModule:()=>x,tree:()=>d});var s=r(67096),a=r(16132),n=r(37284),l=r.n(n),i=r(32564),o={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);r.d(t,o);let d=["",{children:["payload",{children:["static",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,22404)),"D:\\Alfi\\RnD\\IOT\\DEVELOPMENT\\App-Nodes\\app\\payload\\static\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,35345)),"D:\\Alfi\\RnD\\IOT\\DEVELOPMENT\\App-Nodes\\app\\layout.tsx"],error:[()=>Promise.resolve().then(r.bind(r,38196)),"D:\\Alfi\\RnD\\IOT\\DEVELOPMENT\\App-Nodes\\app\\error.tsx"],"not-found":[()=>Promise.resolve().then(r.bind(r,44293)),"D:\\Alfi\\RnD\\IOT\\DEVELOPMENT\\App-Nodes\\app\\not-found.tsx"]}],c=["D:\\Alfi\\RnD\\IOT\\DEVELOPMENT\\App-Nodes\\app\\payload\\static\\page.tsx"],u="/payload/static/page",p={require:r,loadChunk:()=>Promise.resolve()},x=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/payload/static/page",pathname:"/payload/static",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},64452:(e,t,r)=>{Promise.resolve().then(r.bind(r,6951))},6951:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>StaticPayloadPage});var s=r(30784),a=r(9885),n=r(36482),l=r.n(n),i=r(9941),o=r(31362),d=r(73928),c=r(95555),u=r(12125);let p=(0,u.Z)("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);var x=r(74050),h=r(33770),j=r(91971),v=r(98699);let m=(0,j.j)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),g=a.forwardRef(({className:e,variant:t,...r},a)=>s.jsx("div",{ref:a,role:"alert",className:(0,v.cn)(m({variant:t}),e),...r}));g.displayName="Alert";let f=a.forwardRef(({className:e,...t},r)=>s.jsx("h5",{ref:r,className:(0,v.cn)("mb-1 font-medium leading-none tracking-tight",e),...t}));f.displayName="AlertTitle";let y=a.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:(0,v.cn)("text-sm [&_p]:leading-relaxed",e),...t}));y.displayName="AlertDescription";var N=r(40516),b=r(13422),S=r(99491),C=r(94112),q=r(47917),k=r(46544);function StaticPayloadPage(){let[e,t]=(0,a.useState)("disconnected"),[r,n]=(0,a.useState)("list"),[u,j]=(0,a.useState)([]),[v,m]=(0,a.useState)(null),[f,y]=(0,a.useState)([]),[D,w]=(0,a.useState)({topic:"",interval:0,qos:0,lwt:!1,retain:!1}),[P,A]=(0,a.useState)(!1),[T,O]=(0,a.useState)(!1),[_,E]=(0,a.useState)(!1),[M,F]=(0,a.useState)(""),[z,R]=(0,a.useState)(null),I=(0,a.useRef)();(0,a.useEffect)(()=>{let e=l().connect("ws://localhost:9000");return e.on("connect",()=>t("connected")),e.on("error",()=>t("error")),e.on("close",()=>t("disconnected")),e.on("message",(e,t)=>{try{let e=JSON.parse(t.toString());j(Array.isArray(e)?e:u),"list"===r&&i.Am.success("Received latest payload list")}catch{i.Am.error("Invalid payload from broker")}}),I.current=e,()=>{e.end()}},[]);let send=(t,r)=>{if("connected"!==e)return i.Am.error("MQTT not connected");I.current?.publish("command/data/payload",JSON.stringify({command:t,...r}))},handleGet=()=>{F(""),send("getData",{})},handleDelete=e=>{w(u[e]),send("deleteData",{topic:u[e].topic}),F(`Delete command sent for topic: ${u[e].topic}`),setTimeout(handleGet,1e3)},openUpdateModal=e=>{R(e);let t=u[e];w({topic:t.topic,interval:t.interval,qos:t.qos,lwt:t.lwt,retain:t.retain}),y(Object.entries(t.data).map(([e,t])=>({key:e,type:"number"==typeof t?"int":"boolean"==typeof t?"boolean":Array.isArray(t)?"array":"object"==typeof t?"object":"string",value:"object"==typeof t?JSON.stringify(t):String(t)}))),O(!0)},openPreviewModal=e=>{m(e),E(!0)};function renderFields(e,t){return e.map((e,t)=>(0,s.jsxs)("div",{className:"flex gap-2 items-center mb-2",children:[s.jsx(h.I,{placeholder:"Key",value:e.key,onChange:e=>updateField(t,"key",e.target.value)}),(0,s.jsxs)("select",{value:e.type,onChange:e=>updateField(t,"type",e.target.value),className:"border rounded px-2 py-1",children:[s.jsx("option",{value:"string",children:"String"}),s.jsx("option",{value:"int",children:"Integer"}),s.jsx("option",{value:"boolean",children:"Boolean"}),s.jsx("option",{value:"object",children:"Object"}),s.jsx("option",{value:"array",children:"Array"})]}),s.jsx(h.I,{placeholder:`Value (${e.type})`,value:e.value,onChange:e=>updateField(t,"value",e.target.value)}),s.jsx(c.z,{variant:"destructive",onClick:()=>removeField(t),children:"\xd7"})]},t))}let{searchQuery:V,setSearchQuery:L,filteredData:G}=(0,S.d)(u,["topic"]),{sorted:Q,sortField:Z,sortDirection:$,handleSort:J}=(0,C.E)(G),[W,K]=(0,a.useState)(1),U=Math.ceil(Q.length/10),H=Q.slice((W-1)*10,10*W);return(0,s.jsxs)(o.kV,{children:[(0,s.jsxs)("header",{className:"flex h-16 items-center justify-between border-b px-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[s.jsx(o.vP,{}),s.jsx(d.Z,{orientation:"vertical",className:"h-4"}),s.jsx(p,{className:"w-5 h-5 text-muted-foreground"}),s.jsx("h1",{className:"text-lg font-semibold",children:"Static Custom Payload"})]}),s.jsx("div",{className:"flex items-center gap-2",children:s.jsx(k.Z,{})})]}),(0,s.jsxs)("div",{className:"p-6",children:[M&&s.jsx(g,{children:M}),(0,s.jsxs)("div",{className:"flex flex-wrap justify-between items-center mb-4 gap-2",children:[(0,s.jsxs)("div",{className:"flex gap-2",children:[s.jsx(c.z,{size:"sm",variant:"secondary",onClick:handleGet,children:"Get Data"}),s.jsx(c.z,{size:"sm",variant:"default",onClick:()=>{w({topic:"",interval:0,qos:0,lwt:!1,retain:!1}),y([]),A(!0)},children:"Create New Data"})]}),s.jsx("input",{type:"text",placeholder:"Search...",className:"border rounded px-2 py-1 w-64",value:V,onChange:e=>L(e.target.value)})]}),(0,s.jsxs)(b.iA,{children:[s.jsx(b.xD,{children:(0,s.jsxs)(b.SC,{children:[s.jsx(b.ss,{children:"#"}),(0,s.jsxs)(b.ss,{onClick:()=>J("topic"),className:"cursor-pointer select-none",children:["Topic ",s.jsx(x.Z,{className:"inline w-4 h-4 ml-1 align-middle"})]}),s.jsx(b.ss,{children:"Data"}),s.jsx(b.ss,{children:"Config"}),s.jsx(b.ss,{children:"Actions"})]})}),s.jsx(b.RM,{children:0===H.length?s.jsx(b.SC,{children:s.jsx(b.pj,{colSpan:5,className:"text-center text-warning",children:'No data received yet. Click "Get Data" to fetch the data.'})}):H.map((e,t)=>(0,s.jsxs)(b.SC,{children:[s.jsx(b.pj,{children:(W-1)*10+t+1}),s.jsx(b.pj,{children:e.topic}),s.jsx(b.pj,{children:s.jsx(b.iA,{className:"text-xs",children:s.jsx(b.RM,{children:Object.entries(e.data).map(([e,t])=>(0,s.jsxs)(b.SC,{children:[s.jsx(b.pj,{children:s.jsx("b",{children:e})}),s.jsx(b.pj,{children:"object"==typeof t?JSON.stringify(t):String(t)})]},e))})})}),s.jsx(b.pj,{children:(0,s.jsxs)("ul",{children:[(0,s.jsxs)("li",{children:["Interval ",e.interval," s"]}),(0,s.jsxs)("li",{children:["Qos ",e.qos]}),(0,s.jsxs)("li",{children:["LWT ",s.jsx("span",{className:e.lwt?"text-success":"text-danger",children:String(e.lwt)})]}),(0,s.jsxs)("li",{children:["Retain ",s.jsx("span",{className:e.retain?"text-success":"text-danger",children:String(e.retain)})]})]})}),(0,s.jsxs)(b.pj,{className:"flex flex-col gap-1 items-start",children:[s.jsx(c.z,{size:"sm",variant:"outline",onClick:()=>openPreviewModal(e.data),children:"Preview"}),s.jsx(c.z,{size:"sm",variant:"default",onClick:()=>openUpdateModal(t),children:"Update"}),s.jsx(c.z,{size:"sm",variant:"destructive",onClick:()=>handleDelete(t),children:"Delete"})]})]},t))})]}),s.jsx(q.tl,{className:"mt-4",children:(0,s.jsxs)(q.ng,{children:[s.jsx(q.dN,{onClick:()=>K(e=>Math.max(1,e-1))}),Array.from({length:U},(e,t)=>s.jsx(q.nt,{children:s.jsx(q.kN,{isActive:W===t+1,onClick:()=>K(t+1),children:t+1})},t)),s.jsx(q.$0,{onClick:()=>K(e=>Math.min(U,e+1))})]})}),s.jsx(N.Vq,{open:P,onOpenChange:A,children:(0,s.jsxs)(N.cZ,{children:[s.jsx(N.fK,{children:s.jsx(N.$N,{children:"Create New Data"})}),s.jsx(h.I,{placeholder:"Topic",value:D.topic,onChange:e=>w({...D,topic:e.target.value})}),(0,s.jsxs)("div",{className:"flex gap-2 mt-2",children:[s.jsx(h.I,{type:"number",placeholder:"Interval",value:D.interval,onChange:e=>w({...D,interval:Number(e.target.value)})}),(0,s.jsxs)("select",{value:D.qos,onChange:e=>w({...D,qos:Number(e.target.value)}),className:"border rounded px-2 py-1",children:[s.jsx("option",{value:0,children:"Qos 0"}),s.jsx("option",{value:1,children:"Qos 1"}),s.jsx("option",{value:2,children:"Qos 2"})]}),(0,s.jsxs)("select",{value:String(D.lwt),onChange:e=>w({...D,lwt:"true"===e.target.value}),className:"border rounded px-2 py-1",children:[s.jsx("option",{value:"true",children:"LWT True"}),s.jsx("option",{value:"false",children:"LWT False"})]}),(0,s.jsxs)("select",{value:String(D.retain),onChange:e=>w({...D,retain:"true"===e.target.value}),className:"border rounded px-2 py-1",children:[s.jsx("option",{value:"true",children:"Retain True"}),s.jsx("option",{value:"false",children:"Retain False"})]})]}),s.jsx("h4",{className:"mt-4",children:"Data Fields"}),renderFields(f,y),s.jsx(c.z,{size:"sm",variant:"default",onClick:addField,children:"Add Field"}),s.jsx(N.cN,{children:s.jsx(c.z,{variant:"default",onClick:()=>{send("writeData",{...D,data:Object.fromEntries(f.map(e=>[e.key,parseField(e)]))}),A(!1),F("Create command sent. Waiting for response..."),setTimeout(handleGet,1e3)},children:"Send Data"})})]})}),s.jsx(N.Vq,{open:T,onOpenChange:O,children:(0,s.jsxs)(N.cZ,{children:[s.jsx(N.fK,{children:s.jsx(N.$N,{children:"Update Data"})}),s.jsx(h.I,{placeholder:"Topic",value:D.topic,onChange:e=>w({...D,topic:e.target.value})}),(0,s.jsxs)("div",{className:"flex gap-2 mt-2",children:[s.jsx(h.I,{type:"number",placeholder:"Interval",value:D.interval,onChange:e=>w({...D,interval:Number(e.target.value)})}),(0,s.jsxs)("select",{value:D.qos,onChange:e=>w({...D,qos:Number(e.target.value)}),className:"border rounded px-2 py-1",children:[s.jsx("option",{value:0,children:"Qos 0"}),s.jsx("option",{value:1,children:"Qos 1"}),s.jsx("option",{value:2,children:"Qos 2"})]}),(0,s.jsxs)("select",{value:String(D.lwt),onChange:e=>w({...D,lwt:"true"===e.target.value}),className:"border rounded px-2 py-1",children:[s.jsx("option",{value:"true",children:"LWT True"}),s.jsx("option",{value:"false",children:"LWT False"})]}),(0,s.jsxs)("select",{value:String(D.retain),onChange:e=>w({...D,retain:"true"===e.target.value}),className:"border rounded px-2 py-1",children:[s.jsx("option",{value:"true",children:"Retain True"}),s.jsx("option",{value:"false",children:"Retain False"})]})]}),s.jsx("h4",{className:"mt-4",children:"Data Fields"}),renderFields(f,y),s.jsx(c.z,{size:"sm",variant:"default",onClick:addField,children:"Add Field"}),s.jsx(N.cN,{children:s.jsx(c.z,{variant:"default",onClick:()=>{send("updateData",{...D,data:Object.fromEntries(f.map(e=>[e.key,parseField(e)]))}),O(!1),F("Update command sent. Waiting for response..."),setTimeout(handleGet,1e3)},children:"Send Update"})})]})}),s.jsx(N.Vq,{open:_,onOpenChange:E,children:(0,s.jsxs)(N.cZ,{children:[s.jsx(N.fK,{children:s.jsx(N.$N,{children:"Preview JSON Payload"})}),s.jsx("pre",{className:"text-dark p-3 rounded text-xs bg-muted",style:{fontSize:"0.9rem"},children:JSON.stringify(v,null,2)})]})})]})]});function addField(){y([...f,{key:"",type:"string",value:""}])}function removeField(e){let t=[...f];t.splice(e,1),y(t)}function updateField(e,t,r){let s=[...f];s[e]={...s[e],[t]:r},y(s)}function parseField(e){if("number"===e.type)return Number(e.value);if("boolean"===e.type)return"true"===e.value;try{return JSON.parse(e.value)}catch{return e.value}}}},99491:(e,t,r)=>{"use strict";r.d(t,{d:()=>useSearchFilter});var s=r(9885);function getValueByKeyPath(e,t){let r=t.split("."),s=e;for(let e of r){if(!s||"object"!=typeof s)return"";s=s[e]}return String(s??"")}function useSearchFilter(e,t){let[r,a]=(0,s.useState)(""),n=(0,s.useMemo)(()=>{if(!r)return e;let s=r.toLowerCase();return e.filter(e=>t.some(t=>getValueByKeyPath(e,t).toLowerCase().includes(s)))},[r,e,t]);return{searchQuery:r,setSearchQuery:a,filteredData:n}}},22404:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>l,__esModule:()=>n,default:()=>o});var s=r(95153);let a=(0,s.createProxy)(String.raw`D:\Alfi\RnD\IOT\DEVELOPMENT\App-Nodes\app\payload\static\page.tsx`),{__esModule:n,$$typeof:l}=a,i=a.default,o=i}};var t=require("../../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),r=t.X(0,[5075,7783,6482,9941,8794,6007,754,1890,3892,7640,516,6544,7578],()=>__webpack_exec__(90545));module.exports=r})();