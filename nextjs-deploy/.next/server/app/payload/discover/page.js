(()=>{var e={};e.id=4763,e.ids=[4763],e.modules={55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},57310:e=>{"use strict";e.exports=require("url")},7721:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>l.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>d,routeModule:()=>p,tree:()=>o});var a=t(67096),r=t(16132),n=t(37284),l=t.n(n),c=t(32564),i={};for(let e in c)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>c[e]);t.d(s,i);let o=["",{children:["payload",{children:["discover",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,22550)),"D:\\Alfi\\RnD\\IOT\\DEVELOPMENT\\App-Nodes\\app\\payload\\discover\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,35345)),"D:\\Alfi\\RnD\\IOT\\DEVELOPMENT\\App-Nodes\\app\\layout.tsx"],error:[()=>Promise.resolve().then(t.bind(t,38196)),"D:\\Alfi\\RnD\\IOT\\DEVELOPMENT\\App-Nodes\\app\\error.tsx"],"not-found":[()=>Promise.resolve().then(t.bind(t,44293)),"D:\\Alfi\\RnD\\IOT\\DEVELOPMENT\\App-Nodes\\app\\not-found.tsx"]}],d=["D:\\Alfi\\RnD\\IOT\\DEVELOPMENT\\App-Nodes\\app\\payload\\discover\\page.tsx"],x="/payload/discover/page",m={require:t,loadChunk:()=>Promise.resolve()},p=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/payload/discover/page",pathname:"/payload/discover",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},93081:(e,s,t)=>{Promise.resolve().then(t.bind(t,41684))},41684:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>MqttPage});var a=t(30784),r=t(9885),n=t(31362),l=t(73928),c=t(20599),i=t(33770),o=t(95555),d=t(85282),x=t(61890),m=t(9941),p=t(14172),u=t(5705),h=t(50257),j=t(62751),N=t(41240),g=t(41129),f=t(19891),v=t(73397),y=t(53488);function MqttPage(){let[e,s]=(0,r.useState)(""),[t,w]=(0,r.useState)(9e3),[b,P]=(0,r.useState)("Disconnected"),[_,D]=(0,r.useState)("messages"),[A,T]=(0,r.useState)([]),[E,C]=(0,r.useState)(new Map),[M,O]=(0,r.useState)(new Set),S=(0,r.useRef)(null);return(0,a.jsxs)(n.kV,{children:[(0,a.jsxs)("header",{className:"flex h-16 items-center justify-between border-b px-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(n.vP,{className:"-ml-1"}),a.jsx(l.Z,{orientation:"vertical",className:"mr-2 h-4"}),a.jsx(N.Z,{className:"h-5 w-5 text-muted-foreground"}),a.jsx("h1",{className:"text-lg font-semibold",children:"Logic Control Configurations"})]}),a.jsx("div",{className:"flex items-center gap-2",children:a.jsx(o.z,{variant:"outline",size:"icon",className:"h-8 w-8",onClick:()=>window.location.reload(),children:a.jsx(g.Z,{})})})]}),(0,a.jsxs)("div",{className:"p-6 space-y-6",children:[(0,a.jsxs)(c.Zb,{children:[a.jsx(c.Ol,{children:(0,a.jsxs)(c.ll,{className:"text-primary flex items-center gap-2",children:[a.jsx(j.Z,{className:"h-5 w-5"})," MQTT Manual Connect"]})}),(0,a.jsxs)(c.aY,{className:"grid md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-sm font-medium",children:"Broker Host"}),a.jsx(i.I,{placeholder:"e.g. 192.168.0.100",value:e,onChange:e=>s(e.target.value)})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-sm font-medium",children:"Port"}),a.jsx(i.I,{type:"number",placeholder:"e.g. 9000",value:t,onChange:e=>w(Number(e.target.value))})]}),(0,a.jsxs)("div",{className:"flex items-end gap-2",children:[a.jsx(o.z,{className:"w-full",disabled:"Connected"===b,onClick:()=>{if(!e||!t){m.Am.warning("Please enter broker host and port.");return}P("Connecting...");let s=`ws://${e}:${t}`,a=new WebSocket(s);a.onopen=()=>{P("Connected"),m.Am.success("Connected to MQTT broker"),a.send(JSON.stringify({action:"subscribe",topic:"#"}))},a.onerror=()=>{P("Failed to Connect"),m.Am.error("Failed to connect to broker")},a.onclose=()=>{P("Disconnected"),m.Am.error("Disconnected from broker")},a.onmessage=e=>{try{let s=JSON.parse(e.data),t=new Date().toLocaleString(),a={topic:s.topic,payload:s.payload,timestamp:t};T(e=>[a,...e.slice(0,99)]),C(e=>new Map(e).set(s.topic,s.payload)),O(e=>new Set(e).add(s.topic))}catch(e){console.error("Message parsing error:",e)}},S.current=a},children:"Connect"}),a.jsx(o.z,{variant:"destructive",className:"w-full",disabled:"Connected"!==b,onClick:()=>{S.current?.readyState===WebSocket.OPEN&&(S.current.close(),m.Am.info("Disconnected from MQTT broker"))},children:"Disconnect"})]}),(0,a.jsxs)("div",{className:"md:col-span-3 pt-2 flex items-center gap-2",children:[a.jsx("span",{className:"font-medium",children:"Status:"}),(0,a.jsxs)(x.C,{variant:"outline",className:"flex items-center gap-2",children:[(()=>{switch(b){case"Connected":return a.jsx(p.Z,{className:"h-4 w-4 text-green-500"});case"Connecting...":return a.jsx(u.Z,{className:"h-4 w-4 text-yellow-500 animate-spin"});case"Failed to Connect":return a.jsx(h.Z,{className:"h-4 w-4 text-red-500"});default:return a.jsx(j.Z,{className:"h-4 w-4 text-gray-400"})}})(),b]})]})]})]}),(0,a.jsxs)(d.mQ,{value:_,onValueChange:D,className:"w-full",children:[(0,a.jsxs)(d.dr,{className:"w-full justify-start",children:[(0,a.jsxs)(d.SP,{value:"messages",children:[a.jsx(f.Z,{className:"h-4 w-4 mr-1"})," Messages"]}),(0,a.jsxs)(d.SP,{value:"topics",children:[a.jsx(v.Z,{className:"h-4 w-4 mr-1"})," Topics Discovery"]}),(0,a.jsxs)(d.SP,{value:"allTopics",children:[a.jsx(y.Z,{className:"h-4 w-4 mr-1"})," All Topics"]})]}),a.jsx(d.nU,{value:"messages",children:(0,a.jsxs)(c.Zb,{children:[a.jsx(c.Ol,{children:(0,a.jsxs)(c.ll,{className:"flex items-center gap-2",children:[a.jsx(f.Z,{className:"h-5 w-5"})," Received Messages"]})}),a.jsx(c.aY,{className:"max-h-[450px] overflow-y-auto",children:0===A.length?a.jsx("p",{className:"text-center text-muted-foreground",children:"No messages received yet."}):a.jsx("ul",{className:"space-y-3",children:A.map((e,s)=>(0,a.jsxs)("li",{children:[(0,a.jsxs)("div",{className:"text-sm font-semibold text-primary flex justify-between",children:[a.jsx("span",{children:e.topic}),a.jsx("span",{className:"text-xs text-muted-foreground",children:e.timestamp})]}),a.jsx("div",{className:"font-mono text-sm text-muted-foreground",children:e.payload})]},s))})})]})}),a.jsx(d.nU,{value:"topics",children:(0,a.jsxs)(c.Zb,{children:[a.jsx(c.Ol,{children:(0,a.jsxs)(c.ll,{className:"flex items-center gap-2",children:[a.jsx(v.Z,{className:"h-5 w-5"})," Discovered Topics"]})}),a.jsx(c.aY,{className:"max-h-[450px] overflow-y-auto",children:0===E.size?a.jsx("p",{className:"text-center text-muted-foreground",children:"No topics discovered yet."}):a.jsx("ul",{className:"space-y-2",children:Array.from(E.entries()).map(([e,s],t)=>(0,a.jsxs)("li",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"font-medium",children:e}),a.jsx("span",{className:"font-mono text-xs text-muted-foreground",children:s})]},t))})})]})}),a.jsx(d.nU,{value:"allTopics",children:(0,a.jsxs)(c.Zb,{children:[a.jsx(c.Ol,{children:(0,a.jsxs)(c.ll,{className:"flex items-center gap-2",children:[a.jsx(y.Z,{className:"h-5 w-5"})," All Received Topics"]})}),a.jsx(c.aY,{className:"max-h-[450px] overflow-y-auto",children:0===M.size?a.jsx("p",{className:"text-center text-muted-foreground",children:"No topics received yet."}):a.jsx("ul",{className:"space-y-1 text-sm",children:Array.from(M).map((e,s)=>(0,a.jsxs)("li",{children:[s+1,". ",a.jsx("span",{className:"font-medium",children:e})]},s))})})]})})]})]})]})}},22550:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>l,__esModule:()=>n,default:()=>i});var a=t(95153);let r=(0,a.createProxy)(String.raw`D:\Alfi\RnD\IOT\DEVELOPMENT\App-Nodes\app\payload\discover\page.tsx`),{__esModule:n,$$typeof:l}=r,c=r.default,i=c}};var s=require("../../../webpack-runtime.js");s.C(e);var __webpack_exec__=e=>s(s.s=e),t=s.X(0,[5075,9941,5247,5371,3071,779,754,599,1890,5282],()=>__webpack_exec__(7721));module.exports=t})();