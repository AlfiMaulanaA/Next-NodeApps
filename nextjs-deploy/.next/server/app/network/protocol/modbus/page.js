(()=>{var e={};e.id=274,e.ids=[274],e.modules={55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},39491:e=>{"use strict";e.exports=require("assert")},14300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},9523:e=>{"use strict";e.exports=require("dns")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},41808:e=>{"use strict";e.exports=require("net")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},76224:e=>{"use strict";e.exports=require("tty")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},21562:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>p,originalPathname:()=>d,pages:()=>l,routeModule:()=>m,tree:()=>u});var r=s(67096),o=s(16132),a=s(37284),n=s.n(a),i=s(32564),c={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>i[e]);s.d(t,c);let u=["",{children:["network",{children:["protocol",{children:["modbus",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,85432)),"D:\\Alfi\\RnD\\IOT\\DEVELOPMENT\\App-Nodes\\app\\network\\protocol\\modbus\\page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,35345)),"D:\\Alfi\\RnD\\IOT\\DEVELOPMENT\\App-Nodes\\app\\layout.tsx"],error:[()=>Promise.resolve().then(s.bind(s,38196)),"D:\\Alfi\\RnD\\IOT\\DEVELOPMENT\\App-Nodes\\app\\error.tsx"],"not-found":[()=>Promise.resolve().then(s.bind(s,44293)),"D:\\Alfi\\RnD\\IOT\\DEVELOPMENT\\App-Nodes\\app\\not-found.tsx"]}],l=["D:\\Alfi\\RnD\\IOT\\DEVELOPMENT\\App-Nodes\\app\\network\\protocol\\modbus\\page.tsx"],d="/network/protocol/modbus/page",p={require:s,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:o.x.APP_PAGE,page:"/network/protocol/modbus/page",pathname:"/network/protocol/modbus",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:u}})},97029:(e,t,s)=>{Promise.resolve().then(s.bind(s,71676))},71676:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>ModbusTCPPage});var r=s(30784),o=s(9885),a=s(33770),n=s(95555),i=s(73928),c=s(31362),u=s(88012),l=s(20644),d=s(54108),p=s(52995),m=s(21145),x=s(92327);function ModbusTCPPage(){let[e,t]=(0,o.useState)(""),[s,b]=(0,o.useState)(""),[h,g]=(0,o.useState)(""),[f,N]=(0,o.useState)(null);(0,o.useEffect)(()=>{let e=(0,x.k)();return N(e),e.subscribe("IOT/Containment/modbustcp/setting/data"),e.subscribe("IOT/Containment/modbustcp/status"),e.on("message",(e,s)=>{let r=JSON.parse(s.toString());"IOT/Containment/modbustcp/setting/data"===e?(t(r.modbus_tcp_ip),b(r.modbus_tcp_port)):"IOT/Containment/modbustcp/status"===e&&g(r.modbusTCPStatus||"Unknown status")}),()=>{e.unsubscribe("IOT/Containment/modbustcp/setting/data"),e.unsubscribe("IOT/Containment/modbustcp/status"),e.end()}},[]);let requestModbusSettings=()=>{f&&f.publish("IOT/Containment/modbustcp/setting/command",JSON.stringify({command:"read"}))},restartService=async()=>{try{await m.Z.post("/api/restart-protocol"),alert("Service restarted successfully.")}catch(e){alert("Failed to restart service: "+e.message)}};return(0,r.jsxs)(c.kV,{children:[(0,r.jsxs)("header",{className:"flex h-16 items-center justify-between border-b px-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[r.jsx(c.vP,{className:"-ml-1"}),r.jsx(i.Z,{orientation:"vertical",className:"h-4"}),r.jsx(u.Z,{className:"w-5 h-5 text-primary"}),r.jsx("h1",{className:"text-lg font-semibold tracking-tight",children:"Modbus TCP Communication"})]}),(0,r.jsxs)(n.z,{variant:"outline",size:"sm",onClick:()=>{f&&f.publish("IOT/Containment/modbustcp/status/command",JSON.stringify({command:"check status"}))},children:[r.jsx(l.Z,{className:"w-4 h-4 mr-1"})," Check Status"]})]}),(0,r.jsxs)("div",{className:"p-6 space-y-8",children:[(0,r.jsxs)("section",{className:"bg-background shadow-md p-6 rounded-2xl border space-y-2",children:[(0,r.jsxs)("h2",{className:"text-xl font-bold flex items-center gap-2",children:[r.jsx(d.Z,{className:"w-5 h-5"})," Modbus TCP Status"]}),r.jsx("p",{className:h?"text-green-600 bg-green-100 p-2 rounded font-bold":"text-red-500 bg-red-100 p-2 rounded font-bold",children:h||"No status available"})]}),(0,r.jsxs)("section",{className:"bg-background shadow-md p-6 rounded-2xl border space-y-4",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("h2",{className:"text-xl font-bold flex items-center gap-2",children:[r.jsx(d.Z,{className:"w-5 h-5"})," Modbus TCP Settings"]}),(0,r.jsxs)(n.z,{size:"sm",variant:"secondary",onClick:requestModbusSettings,children:[r.jsx(l.Z,{className:"w-4 h-4 mr-1"})," Request"]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"text-sm font-medium",children:"IP Address"}),r.jsx(a.I,{value:e,onChange:e=>t(e.target.value),placeholder:"192.168.1.100"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"text-sm font-medium",children:"Port"}),r.jsx(a.I,{type:"number",value:s,onChange:e=>b(Number(e.target.value)),placeholder:"502"})]})]}),(0,r.jsxs)(n.z,{className:"mt-4",onClick:()=>{f&&(f.publish("IOT/Containment/modbustcp/setting/command",JSON.stringify({command:"write",modbus_tcp_ip:e,modbus_tcp_port:s})),setTimeout(()=>{requestModbusSettings()},2e3),restartService())},children:[r.jsx(p.Z,{className:"w-4 h-4 mr-2"})," Save Settings"]})]})]})]})}},85432:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>n,__esModule:()=>a,default:()=>c});var r=s(95153);let o=(0,r.createProxy)(String.raw`D:\Alfi\RnD\IOT\DEVELOPMENT\App-Nodes\app\network\protocol\modbus\page.tsx`),{__esModule:a,$$typeof:n}=o,i=o.default,c=i}};var t=require("../../../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),s=t.X(0,[5075,7783,6482,1145,6306,754,3892],()=>__webpack_exec__(21562));module.exports=s})();