(()=>{var e={};e.id=1110,e.ids=[1110],e.modules={55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},39491:e=>{"use strict";e.exports=require("assert")},14300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},9523:e=>{"use strict";e.exports=require("dns")},82361:e=>{"use strict";e.exports=require("events")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},41808:e=>{"use strict";e.exports=require("net")},22037:e=>{"use strict";e.exports=require("os")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},76224:e=>{"use strict";e.exports=require("tty")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},58359:()=>{},93739:()=>{},33979:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>o.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>c,routeModule:()=>x,tree:()=>d});var r=t(67096),n=t(16132),i=t(37284),o=t.n(i),a=t(32564),l={};for(let e in a)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>a[e]);t.d(s,l);let d=["",{children:["network",{children:["mqtt",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,39095)),"D:\\Alfi\\RnD\\IOT\\DEVELOPMENT\\App-Nodes\\app\\network\\mqtt\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,35345)),"D:\\Alfi\\RnD\\IOT\\DEVELOPMENT\\App-Nodes\\app\\layout.tsx"],error:[()=>Promise.resolve().then(t.bind(t,38196)),"D:\\Alfi\\RnD\\IOT\\DEVELOPMENT\\App-Nodes\\app\\error.tsx"],"not-found":[()=>Promise.resolve().then(t.bind(t,44293)),"D:\\Alfi\\RnD\\IOT\\DEVELOPMENT\\App-Nodes\\app\\not-found.tsx"]}],c=["D:\\Alfi\\RnD\\IOT\\DEVELOPMENT\\App-Nodes\\app\\network\\mqtt\\page.tsx"],u="/network/mqtt/page",p={require:t,loadChunk:()=>Promise.resolve()},x=new r.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/network/mqtt/page",pathname:"/network/mqtt",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},56398:(e,s,t)=>{Promise.resolve().then(t.bind(t,67438))},67438:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>MqttConfigPage});var r=t(30784),n=t(9885),i=t(36482),o=t.n(i),a=t(9941),l=t(31362),d=t(73928),c=t(20599),u=t(95555),p=t(33770),x=t(85282),m=t(40516),h=t(14172),g=t(50257),f=t(5705),j=t(83475),q=t(20644),_=t(90391);function MqttConfigPage(){let[e,s]=(0,n.useState)("disconnected"),[t,i]=(0,n.useState)("mqtt"),[c,b]=(0,n.useState)(null),[v,N]=(0,n.useState)(null),[w,P]=(0,n.useState)({username:"",password:"",broker_address:"",broker_port:0}),[k,E]=(0,n.useState)(!1),C=(0,n.useRef)(),handleInput=(e,s)=>{P(t=>({...t,[e]:s}))};(0,n.useEffect)(()=>{let e=o().connect("ws://localhost:9000");return e.on("connect",()=>{s("connected"),e.subscribe("mqtt_config"),e.subscribe("mqtt_config_modbus"),e.subscribe("service/response"),e.publish("mqtt_config/request",JSON.stringify({action:"readConfiguration"})),e.publish("mqtt_config_modbus/request",JSON.stringify({action:"readConfiguration"}))}),e.on("error",()=>s("error")),e.on("close",()=>s("disconnected")),e.on("message",(e,s)=>{let t=JSON.parse(s.toString());e.endsWith("mqtt_config")?b(t):e.endsWith("mqtt_config_modbus")?N(t):e.endsWith("service/response")&&a.Am.success(t.message||"Service response")}),C.current=e,()=>{e.end()}},[]);let openEditModal=()=>{let e="mqtt"===t?c:v;e?(P(e),E(!0)):a.Am.error("Configuration not loaded yet")};return(0,r.jsxs)(l.kV,{children:[(0,r.jsxs)("header",{className:"flex h-16 items-center justify-between border-b px-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[r.jsx(l.vP,{className:"-ml-1"}),r.jsx(d.Z,{orientation:"vertical",className:"h-4"}),r.jsx(j.Z,{className:"w-5 h-5 text-muted-foreground"}),r.jsx("h1",{className:"text-lg font-semibold",children:"MQTT Configuration"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:["connected"===e?r.jsx(h.Z,{className:"w-4 h-4 text-green-500"}):"error"===e?r.jsx(g.Z,{className:"w-4 h-4 text-red-500"}):r.jsx(f.Z,{className:"w-4 h-4 animate-spin text-yellow-500"}),r.jsx("span",{className:"capitalize text-sm",children:e}),r.jsx(u.z,{variant:"outline",size:"icon",onClick:()=>window.location.reload(),children:r.jsx(q.Z,{className:"w-4 h-4"})})]})]}),(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)(x.mQ,{value:t,onValueChange:e=>i(e),children:[(0,r.jsxs)(x.dr,{children:[r.jsx(x.SP,{value:"mqtt",children:"MQTT Modular"}),r.jsx(x.SP,{value:"modbus",children:"MQTT Modbus"})]}),r.jsx(x.nU,{value:"mqtt",children:r.jsx(ConfigView,{config:c,onEdit:openEditModal})}),r.jsx(x.nU,{value:"modbus",children:r.jsx(ConfigView,{config:v,onEdit:openEditModal})})]}),(0,r.jsxs)(m.Vq,{open:k,onOpenChange:E,children:[r.jsx(m.hg,{asChild:!0}),(0,r.jsxs)(m.cZ,{children:[r.jsx(m.fK,{children:r.jsx(m.$N,{children:"Edit Configuration"})}),(0,r.jsxs)("div",{className:"space-y-3",children:[r.jsx(p.I,{placeholder:"Username",value:w.username,onChange:e=>handleInput("username",e.target.value)}),r.jsx(p.I,{placeholder:"Password",value:w.password,type:"password",onChange:e=>handleInput("password",e.target.value)}),r.jsx(p.I,{placeholder:"Broker Address",value:w.broker_address,onChange:e=>handleInput("broker_address",e.target.value)}),r.jsx(p.I,{placeholder:"Broker Port",type:"number",value:w.broker_port,onChange:e=>handleInput("broker_port",Number(e.target.value))}),(0,r.jsxs)(u.z,{onClick:()=>{C.current?.publish("mqtt"===t?"mqtt_config/update":"mqtt_config_modbus/update",JSON.stringify(w)),E(!1),C.current?.publish("service/command",JSON.stringify({action:"restart",services:["mqtt_config.service","mqtt_modbus.service"]})),a.Am.success("Configuration updated & service restarted")},children:[r.jsx(_.Z,{className:"w-4 h-4 mr-1"})," Save"]})]})]})]})]})]})}function ConfigView({config:e,onEdit:s}){return e?(0,r.jsxs)(c.Zb,{children:[r.jsx(c.Ol,{children:(0,r.jsxs)(c.ll,{children:["Connection: ",e.broker_address,":",e.broker_port]})}),(0,r.jsxs)(c.aY,{children:[r.jsx("table",{className:"text-sm w-full",children:(0,r.jsxs)("tbody",{children:[(0,r.jsxs)("tr",{children:[r.jsx("td",{className:"font-medium",children:"Username"}),r.jsx("td",{children:e.username||"—"})]}),(0,r.jsxs)("tr",{children:[r.jsx("td",{className:"font-medium",children:"Password"}),r.jsx("td",{children:e.password?"••••••":"—"})]}),(0,r.jsxs)("tr",{children:[r.jsx("td",{className:"font-medium",children:"Broker Address"}),r.jsx("td",{children:e.broker_address})]}),(0,r.jsxs)("tr",{children:[r.jsx("td",{className:"font-medium",children:"Broker Port"}),r.jsx("td",{children:e.broker_port})]})]})}),(0,r.jsxs)(u.z,{className:"mt-4",onClick:s,children:[r.jsx(_.Z,{className:"w-4 h-4 mr-1"})," Update Configuration"]})]})]}):r.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading..."})}},39095:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>o,__esModule:()=>i,default:()=>l});var r=t(95153);let n=(0,r.createProxy)(String.raw`D:\Alfi\RnD\IOT\DEVELOPMENT\App-Nodes\app\network\mqtt\page.tsx`),{__esModule:i,$$typeof:o}=n,a=n.default,l=a}};var s=require("../../../webpack-runtime.js");s.C(e);var __webpack_exec__=e=>s(s.s=e),t=s.X(0,[5075,7783,6482,9941,5247,5371,9526,754,599,516,5282],()=>__webpack_exec__(33979));module.exports=t})();