(()=>{var e={};e.id=3353,e.ids=[3353],e.modules={55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},39491:e=>{"use strict";e.exports=require("assert")},14300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},9523:e=>{"use strict";e.exports=require("dns")},82361:e=>{"use strict";e.exports=require("events")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},41808:e=>{"use strict";e.exports=require("net")},22037:e=>{"use strict";e.exports=require("os")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},76224:e=>{"use strict";e.exports=require("tty")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},58359:()=>{},93739:()=>{},85574:(e,s,r)=>{"use strict";r.d(s,{Z:()=>i});var t=r(12125);let i=(0,t.Z)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]])},42931:(e,s,r)=>{"use strict";r.r(s),r.d(s,{GlobalError:()=>a.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>d,routeModule:()=>x,tree:()=>c});var t=r(67096),i=r(16132),n=r(37284),a=r.n(n),o=r(32564),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);r.d(s,l);let c=["",{children:["settings",{children:["library",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,99837)),"D:\\Alfi\\RnD\\IOT\\DEVELOPMENT\\App-Nodes\\app\\settings\\library\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,35345)),"D:\\Alfi\\RnD\\IOT\\DEVELOPMENT\\App-Nodes\\app\\layout.tsx"],error:[()=>Promise.resolve().then(r.bind(r,38196)),"D:\\Alfi\\RnD\\IOT\\DEVELOPMENT\\App-Nodes\\app\\error.tsx"],"not-found":[()=>Promise.resolve().then(r.bind(r,44293)),"D:\\Alfi\\RnD\\IOT\\DEVELOPMENT\\App-Nodes\\app\\not-found.tsx"]}],d=["D:\\Alfi\\RnD\\IOT\\DEVELOPMENT\\App-Nodes\\app\\settings\\library\\page.tsx"],u="/settings/library/page",p={require:r,loadChunk:()=>Promise.resolve()},x=new t.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/settings/library/page",pathname:"/settings/library",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},62906:(e,s,r)=>{Promise.resolve().then(r.bind(r,62924))},62924:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>FileLibraryPage});var t=r(30784),i=r(9885),n=r(36482),a=r.n(n),o=r(9941),l=r(61890),c=r(95555),d=r(20599),u=r(73928),p=r(31362),x=r(1753),m=r(41129),g=r(85574),f=r(33770);function FileLibraryPage(){let[e,s]=(0,i.useState)("disconnected"),[r,n]=(0,i.useState)(null),h=(0,i.useRef)(null);(0,i.useEffect)(()=>{let e=a().connect("ws://localhost:9000");return e.on("connect",()=>{s("connected"),e.subscribe("response_file_transfer"),e.subscribe("service/response")}),e.on("error",()=>{s("error")}),e.on("close",()=>{s("disconnected")}),e.on("message",(e,s)=>{let r=JSON.parse(s.toString());"response_file_transfer"===e?"success"===r.status&&"upload"===r.action?(o.Am.success("devices.json uploaded successfully."),restartService()):"error"===r.status&&o.Am.error(r.message||"Upload failed"):"service/response"===e&&("success"===r.result?o.Am.success(r.message||"Service restarted successfully."):o.Am.error(r.message||"Service restart failed."))}),h.current=e,()=>{e.end()}},[]);let downloadFile=()=>{o.Am.loading("Downloading devices.json...");let e=JSON.stringify({action:"download",filepath:"../MODBUS_SNMP/JSON/Config/Library/devices.json"});h.current?.publish("command_download_file",e)},uploadFile=e=>{let s=new FileReader;s.onload=()=>{let e=s.result,r=JSON.stringify({action:"upload",filepath:"../MODBUS_SNMP/JSON/Config/Library/devices.json",content:e});h.current?.publish("command_upload_file",r),o.Am.loading("Uploading devices.json...")},s.readAsText(e)},restartService=()=>{let e=JSON.stringify({action:"restart",services:["MODBUS_SNMP.service"]});h.current?.publish("service/command",e),o.Am.loading("Restarting MODBUS_SNMP.service...")};return(0,t.jsxs)(p.kV,{children:[(0,t.jsxs)("header",{className:"flex h-16 items-center justify-between border-b px-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[t.jsx(p.vP,{className:"-ml-1"}),t.jsx(u.Z,{orientation:"vertical",className:"mr-2 h-4"}),t.jsx(x.Z,{className:"h-5 w-5 text-muted-foreground"}),t.jsx("h1",{className:"text-lg font-semibold",children:"File Library Management"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[t.jsx(l.C,{variant:"outline",className:`capitalize ${"connected"===e?"text-green-600 border-green-600":"error"===e?"text-red-600 border-red-600":"text-yellow-600 border-yellow-600"}`,children:e}),t.jsx(c.z,{variant:"outline",size:"icon",className:"h-8 w-8",onClick:()=>{o.Am.info("Refreshing MQTT connection..."),h.current?.end(!0,()=>{window.location.reload()})},children:t.jsx(m.Z,{className:"w-4 h-4"})})]})]}),t.jsx("div",{className:"p-6 space-y-6",children:(0,t.jsxs)(d.Zb,{children:[t.jsx(d.Ol,{children:t.jsx(d.ll,{className:"text-base",children:"devices.json File Control"})}),(0,t.jsxs)(d.aY,{className:"grid md:grid-cols-2 gap-4",children:[(0,t.jsxs)(c.z,{onClick:()=>{confirm("Download devices.json file?")&&downloadFile()},className:"w-full",children:[t.jsx(g.Z,{className:"mr-2 h-4 w-4"})," Download devices.json"]}),(0,t.jsxs)("div",{children:[t.jsx(f.I,{type:"file",accept:".json",onChange:e=>{let s=e.target.files?.[0];if(s){if(n(s.name),"devices.json"!==s.name){o.Am.error("Invalid file. Please select devices.json");return}confirm("Upload and replace devices.json file?")&&uploadFile(s)}}}),r&&(0,t.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:["Selected: ",r]})]})]})]})})]})}},99837:(e,s,r)=>{"use strict";r.r(s),r.d(s,{$$typeof:()=>a,__esModule:()=>n,default:()=>l});var t=r(95153);let i=(0,t.createProxy)(String.raw`D:\Alfi\RnD\IOT\DEVELOPMENT\App-Nodes\app\settings\library\page.tsx`),{__esModule:n,$$typeof:a}=i,o=i.default,l=o}};var s=require("../../../webpack-runtime.js");s.C(e);var __webpack_exec__=e=>s(s.s=e),r=s.X(0,[5075,7783,6482,9941,7734,754,599,1890],()=>__webpack_exec__(42931));module.exports=r})();