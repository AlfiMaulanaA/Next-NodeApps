exports.id=6482,exports.ids=[6482],exports.modules={8541:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(40577);let AbortSignal=class AbortSignal extends i.EventTarget{constructor(){throw super(),TypeError("AbortSignal cannot be constructed directly")}get aborted(){let e=s.get(this);if("boolean"!=typeof e)throw TypeError(`Expected 'this' to be an 'AbortSignal' object, but got ${this===null?"null":typeof this}`);return e}};function createAbortSignal(){let e=Object.create(AbortSignal.prototype);return i.EventTarget.call(e),s.set(e,!1),e}function abortSignal(e){!1===s.get(e)&&(s.set(e,!0),e.dispatchEvent({type:"abort"}))}i.defineEventAttribute(AbortSignal.prototype,"abort");let s=new WeakMap;Object.defineProperties(AbortSignal.prototype,{aborted:{enumerable:!0}}),"function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag&&Object.defineProperty(AbortSignal.prototype,Symbol.toStringTag,{configurable:!0,value:"AbortSignal"});let AbortController=class AbortController{constructor(){n.set(this,createAbortSignal())}get signal(){return getSignal(this)}abort(){abortSignal(getSignal(this))}};let n=new WeakMap;function getSignal(e){let t=n.get(e);if(null==t)throw TypeError(`Expected 'this' to be an 'AbortController' object, but got ${null===e?"null":typeof e}`);return t}Object.defineProperties(AbortController.prototype,{signal:{enumerable:!0},abort:{enumerable:!0}}),"function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag&&Object.defineProperty(AbortController.prototype,Symbol.toStringTag,{configurable:!0,value:"AbortController"}),t.AbortController=AbortController,t.AbortSignal=AbortSignal,t.default=AbortController,e.exports=AbortController,e.exports.AbortController=e.exports.default=AbortController,e.exports.AbortSignal=AbortSignal},31967:(e,t,r)=>{"use strict";let{Buffer:i}=r(14300),s=Symbol.for("BufferList");function BufferList(e){if(!(this instanceof BufferList))return new BufferList(e);BufferList._init.call(this,e)}BufferList._init=function(e){Object.defineProperty(this,s,{value:!0}),this._bufs=[],this.length=0,e&&this.append(e)},BufferList.prototype._new=function(e){return new BufferList(e)},BufferList.prototype._offset=function(e){if(0===e)return[0,0];let t=0;for(let r=0;r<this._bufs.length;r++){let i=t+this._bufs[r].length;if(e<i||r===this._bufs.length-1)return[r,e-t];t=i}},BufferList.prototype._reverseOffset=function(e){let t=e[0],r=e[1];for(let e=0;e<t;e++)r+=this._bufs[e].length;return r},BufferList.prototype.getBuffers=function(){return this._bufs},BufferList.prototype.get=function(e){if(e>this.length||e<0)return;let t=this._offset(e);return this._bufs[t[0]][t[1]]},BufferList.prototype.slice=function(e,t){return"number"==typeof e&&e<0&&(e+=this.length),"number"==typeof t&&t<0&&(t+=this.length),this.copy(null,0,e,t)},BufferList.prototype.copy=function(e,t,r,s){if(("number"!=typeof r||r<0)&&(r=0),("number"!=typeof s||s>this.length)&&(s=this.length),r>=this.length||s<=0)return e||i.alloc(0);let n=!!e,o=this._offset(r),a=s-r,l=a,h=n&&t||0,u=o[1];if(0===r&&s===this.length){if(!n)return 1===this._bufs.length?this._bufs[0]:i.concat(this._bufs,this.length);for(let t=0;t<this._bufs.length;t++)this._bufs[t].copy(e,h),h+=this._bufs[t].length;return e}if(l<=this._bufs[o[0]].length-u)return n?this._bufs[o[0]].copy(e,t,u,u+l):this._bufs[o[0]].slice(u,u+l);n||(e=i.allocUnsafe(a));for(let t=o[0];t<this._bufs.length;t++){let r=this._bufs[t].length-u;if(l>r)this._bufs[t].copy(e,h,u),h+=r;else{this._bufs[t].copy(e,h,u,u+l),h+=r;break}l-=r,u&&(u=0)}return e.length>h?e.slice(0,h):e},BufferList.prototype.shallowSlice=function(e,t){if(e=e||0,t="number"!=typeof t?this.length:t,e<0&&(e+=this.length),t<0&&(t+=this.length),e===t)return this._new();let r=this._offset(e),i=this._offset(t),s=this._bufs.slice(r[0],i[0]+1);return 0===i[1]?s.pop():s[s.length-1]=s[s.length-1].slice(0,i[1]),0!==r[1]&&(s[0]=s[0].slice(r[1])),this._new(s)},BufferList.prototype.toString=function(e,t,r){return this.slice(t,r).toString(e)},BufferList.prototype.consume=function(e){if(Number.isNaN(e=Math.trunc(e))||e<=0)return this;for(;this._bufs.length;)if(e>=this._bufs[0].length)e-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift();else{this._bufs[0]=this._bufs[0].slice(e),this.length-=e;break}return this},BufferList.prototype.duplicate=function(){let e=this._new();for(let t=0;t<this._bufs.length;t++)e.append(this._bufs[t]);return e},BufferList.prototype.append=function(e){return this._attach(e,BufferList.prototype._appendBuffer)},BufferList.prototype.prepend=function(e){return this._attach(e,BufferList.prototype._prependBuffer,!0)},BufferList.prototype._attach=function(e,t,r){if(null==e)return this;if(e.buffer)t.call(this,i.from(e.buffer,e.byteOffset,e.byteLength));else if(Array.isArray(e)){let[i,s]=r?[e.length-1,-1]:[0,1];for(let n=i;n>=0&&n<e.length;n+=s)this._attach(e[n],t,r)}else if(this._isBufferList(e)){let[i,s]=r?[e._bufs.length-1,-1]:[0,1];for(let n=i;n>=0&&n<e._bufs.length;n+=s)this._attach(e._bufs[n],t,r)}else"number"==typeof e&&(e=e.toString()),t.call(this,i.from(e));return this},BufferList.prototype._appendBuffer=function(e){this._bufs.push(e),this.length+=e.length},BufferList.prototype._prependBuffer=function(e){this._bufs.unshift(e),this.length+=e.length},BufferList.prototype.indexOf=function(e,t,r){if(void 0===r&&"string"==typeof t&&(r=t,t=void 0),"function"==typeof e||Array.isArray(e))throw TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if("number"==typeof e?e=i.from([e]):"string"==typeof e?e=i.from(e,r):this._isBufferList(e)?e=e.slice():Array.isArray(e.buffer)?e=i.from(e.buffer,e.byteOffset,e.byteLength):i.isBuffer(e)||(e=i.from(e)),isNaN(t=Number(t||0))&&(t=0),t<0&&(t=this.length+t),t<0&&(t=0),0===e.length)return t>this.length?this.length:t;let s=this._offset(t),n=s[0],o=s[1];for(;n<this._bufs.length;n++){let t=this._bufs[n];for(;o<t.length;){let r=t.length-o;if(r>=e.length){let r=t.indexOf(e,o);if(-1!==r)return this._reverseOffset([n,r]);o=t.length-e.length+1}else{let t=this._reverseOffset([n,o]);if(this._match(t,e))return t;o++}}o=0}return -1},BufferList.prototype._match=function(e,t){if(this.length-e<t.length)return!1;for(let r=0;r<t.length;r++)if(this.get(e+r)!==t[r])return!1;return!0},function(){let e={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readBigInt64BE:8,readBigInt64LE:8,readBigUInt64BE:8,readBigUInt64LE:8,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(let t in e)!function(t){null===e[t]?BufferList.prototype[t]=function(e,r){return this.slice(e,e+r)[t](0,r)}:BufferList.prototype[t]=function(r=0){return this.slice(r,r+e[t])[t](0)}}(t)}(),BufferList.prototype._isBufferList=function(e){return e instanceof BufferList||BufferList.isBufferList(e)},BufferList.isBufferList=function(e){return null!=e&&e[s]},e.exports=BufferList},70668:(e,t,r)=>{"use strict";let i=r(57407).Duplex,s=r(83001),n=r(31967);function BufferListStream(e){if(!(this instanceof BufferListStream))return new BufferListStream(e);if("function"==typeof e){this._callback=e;let t=(function(e){this._callback&&(this._callback(e),this._callback=null)}).bind(this);this.on("pipe",function(e){e.on("error",t)}),this.on("unpipe",function(e){e.removeListener("error",t)}),e=null}n._init.call(this,e),i.call(this)}s(BufferListStream,i),Object.assign(BufferListStream.prototype,n.prototype),BufferListStream.prototype._new=function(e){return new BufferListStream(e)},BufferListStream.prototype._write=function(e,t,r){this._appendBuffer(e),"function"==typeof r&&r()},BufferListStream.prototype._read=function(e){if(!this.length)return this.push(null);e=Math.min(e,this.length),this.push(this.slice(0,e)),this.consume(e)},BufferListStream.prototype.end=function(e){i.prototype.end.call(this,e),this._callback&&(this._callback(null,this.slice()),this._callback=null)},BufferListStream.prototype._destroy=function(e,t){this._bufs.length=0,this.length=0,t(e)},BufferListStream.prototype._isBufferList=function(e){return e instanceof BufferListStream||e instanceof n||BufferListStream.isBufferList(e)},BufferListStream.isBufferList=n.isBufferList,e.exports=BufferListStream,e.exports.BufferListStream=BufferListStream,e.exports.BufferList=n},40577:(e,t)=>{"use strict";/**
 * @author Toru Nagashima <https://github.com/mysticatea>
 * @copyright 2015 Toru Nagashima. All rights reserved.
 * See LICENSE file in root directory for full license.
 */Object.defineProperty(t,"__esModule",{value:!0});let r=new WeakMap,i=new WeakMap;function pd(e){let t=r.get(e);return console.assert(null!=t,"'this' is expected an Event object, but got",e),t}function setCancelFlag(e){if(null!=e.passiveListener){"undefined"!=typeof console&&"function"==typeof console.error&&console.error("Unable to preventDefault inside passive event listener invocation.",e.passiveListener);return}e.event.cancelable&&(e.canceled=!0,"function"==typeof e.event.preventDefault&&e.event.preventDefault())}function Event(e,t){r.set(this,{eventTarget:e,event:t,eventPhase:2,currentTarget:e,canceled:!1,stopped:!1,immediateStopped:!1,passiveListener:null,timeStamp:t.timeStamp||Date.now()}),Object.defineProperty(this,"isTrusted",{value:!1,enumerable:!0});let i=Object.keys(t);for(let e=0;e<i.length;++e){let t=i[e];t in this||Object.defineProperty(this,t,defineRedirectDescriptor(t))}}function defineRedirectDescriptor(e){return{get(){return pd(this).event[e]},set(t){pd(this).event[e]=t},configurable:!0,enumerable:!0}}function defineCallDescriptor(e){return{value(){let t=pd(this).event;return t[e].apply(t,arguments)},configurable:!0,enumerable:!0}}function defineWrapper(e,t){let r=Object.keys(t);if(0===r.length)return e;function CustomEvent(t,r){e.call(this,t,r)}CustomEvent.prototype=Object.create(e.prototype,{constructor:{value:CustomEvent,configurable:!0,writable:!0}});for(let i=0;i<r.length;++i){let s=r[i];if(!(s in e.prototype)){let e=Object.getOwnPropertyDescriptor(t,s),r="function"==typeof e.value;Object.defineProperty(CustomEvent.prototype,s,r?defineCallDescriptor(s):defineRedirectDescriptor(s))}}return CustomEvent}function getWrapper(e){if(null==e||e===Object.prototype)return Event;let t=i.get(e);return null==t&&(t=defineWrapper(getWrapper(Object.getPrototypeOf(e)),e),i.set(e,t)),t}function wrapEvent(e,t){let r=getWrapper(Object.getPrototypeOf(t));return new r(e,t)}function isStopped(e){return pd(e).immediateStopped}function setEventPhase(e,t){pd(e).eventPhase=t}function setCurrentTarget(e,t){pd(e).currentTarget=t}function setPassiveListener(e,t){pd(e).passiveListener=t}Event.prototype={get type(){return pd(this).event.type},get target(){return pd(this).eventTarget},get currentTarget(){return pd(this).currentTarget},composedPath(){let e=pd(this).currentTarget;return null==e?[]:[e]},get NONE(){return 0},get CAPTURING_PHASE(){return 1},get AT_TARGET(){return 2},get BUBBLING_PHASE(){return 3},get eventPhase(){return pd(this).eventPhase},stopPropagation(){let e=pd(this);e.stopped=!0,"function"==typeof e.event.stopPropagation&&e.event.stopPropagation()},stopImmediatePropagation(){let e=pd(this);e.stopped=!0,e.immediateStopped=!0,"function"==typeof e.event.stopImmediatePropagation&&e.event.stopImmediatePropagation()},get bubbles(){return!!pd(this).event.bubbles},get cancelable(){return!!pd(this).event.cancelable},preventDefault(){setCancelFlag(pd(this))},get defaultPrevented(){return pd(this).canceled},get composed(){return!!pd(this).event.composed},get timeStamp(){return pd(this).timeStamp},get srcElement(){return pd(this).eventTarget},get cancelBubble(){return pd(this).stopped},set cancelBubble(value){if(!value)return;let e=pd(this);e.stopped=!0,"boolean"==typeof e.event.cancelBubble&&(e.event.cancelBubble=!0)},get returnValue(){return!pd(this).canceled},set returnValue(value){value||setCancelFlag(pd(this))},initEvent(){}},Object.defineProperty(Event.prototype,"constructor",{value:Event,configurable:!0,writable:!0}),"undefined"!=typeof window&&void 0!==window.Event&&(Object.setPrototypeOf(Event.prototype,window.Event.prototype),i.set(window.Event.prototype,Event));let s=new WeakMap;function isObject(e){return null!==e&&"object"==typeof e}function getListeners(e){let t=s.get(e);if(null==t)throw TypeError("'this' is expected an EventTarget object, but got another value.");return t}function defineEventAttributeDescriptor(e){return{get(){let t=getListeners(this),r=t.get(e);for(;null!=r;){if(3===r.listenerType)return r.listener;r=r.next}return null},set(t){"function"==typeof t||isObject(t)||(t=null);let r=getListeners(this),i=null,s=r.get(e);for(;null!=s;)3===s.listenerType?null!==i?i.next=s.next:null!==s.next?r.set(e,s.next):r.delete(e):i=s,s=s.next;if(null!==t){let s={listener:t,listenerType:3,passive:!1,once:!1,next:null};null===i?r.set(e,s):i.next=s}},configurable:!0,enumerable:!0}}function defineEventAttribute(e,t){Object.defineProperty(e,`on${t}`,defineEventAttributeDescriptor(t))}function defineCustomEventTarget(e){function CustomEventTarget(){EventTarget.call(this)}CustomEventTarget.prototype=Object.create(EventTarget.prototype,{constructor:{value:CustomEventTarget,configurable:!0,writable:!0}});for(let t=0;t<e.length;++t)defineEventAttribute(CustomEventTarget.prototype,e[t]);return CustomEventTarget}function EventTarget(){if(this instanceof EventTarget){s.set(this,new Map);return}if(1==arguments.length&&Array.isArray(arguments[0]))return defineCustomEventTarget(arguments[0]);if(arguments.length>0){let e=Array(arguments.length);for(let t=0;t<arguments.length;++t)e[t]=arguments[t];return defineCustomEventTarget(e)}throw TypeError("Cannot call a class as a function")}EventTarget.prototype={addEventListener(e,t,r){if(null==t)return;if("function"!=typeof t&&!isObject(t))throw TypeError("'listener' should be a function or an object.");let i=getListeners(this),s=isObject(r),n=s?!!r.capture:!!r,o=n?1:2,a={listener:t,listenerType:o,passive:s&&!!r.passive,once:s&&!!r.once,next:null},l=i.get(e);if(void 0===l){i.set(e,a);return}let h=null;for(;null!=l;){if(l.listener===t&&l.listenerType===o)return;h=l,l=l.next}h.next=a},removeEventListener(e,t,r){if(null==t)return;let i=getListeners(this),s=isObject(r)?!!r.capture:!!r,n=s?1:2,o=null,a=i.get(e);for(;null!=a;){if(a.listener===t&&a.listenerType===n){null!==o?o.next=a.next:null!==a.next?i.set(e,a.next):i.delete(e);return}o=a,a=a.next}},dispatchEvent(e){if(null==e||"string"!=typeof e.type)throw TypeError('"event.type" should be a string.');let t=getListeners(this),r=e.type,i=t.get(r);if(null==i)return!0;let s=wrapEvent(this,e),n=null;for(;null!=i;){if(i.once?null!==n?n.next=i.next:null!==i.next?t.set(r,i.next):t.delete(r):n=i,setPassiveListener(s,i.passive?i.listener:null),"function"==typeof i.listener)try{i.listener.call(this,s)}catch(e){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(e)}else 3!==i.listenerType&&"function"==typeof i.listener.handleEvent&&i.listener.handleEvent(s);if(isStopped(s))break;i=i.next}return setPassiveListener(s,null),setEventPhase(s,0),setCurrentTarget(s,null),!s.defaultPrevented}},Object.defineProperty(EventTarget.prototype,"constructor",{value:EventTarget,configurable:!0,writable:!0}),"undefined"!=typeof window&&void 0!==window.EventTarget&&Object.setPrototypeOf(EventTarget.prototype,window.EventTarget.prototype),t.defineEventAttribute=defineEventAttribute,t.EventTarget=EventTarget,t.default=EventTarget,e.exports=EventTarget,e.exports.EventTarget=e.exports.default=EventTarget,e.exports.defineEventAttribute=defineEventAttribute},20719:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createAddUniqueNumber=void 0,t.createAddUniqueNumber=e=>t=>{let r=e(t);return t.add(r),r}},65222:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createCache=void 0,t.createCache=e=>(t,r)=>(e.set(t,r),r)},54092:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createGenerateUniqueNumber=void 0;let r=void 0===Number.MAX_SAFE_INTEGER?9007199254740991:Number.MAX_SAFE_INTEGER;t.createGenerateUniqueNumber=(e,t)=>i=>{let s=t.get(i),n=void 0===s?i.size:s<1073741824?s+1:0;if(!i.has(n))return e(i,n);if(i.size<536870912){for(;i.has(n);)n=Math.floor(1073741824*Math.random());return e(i,n)}if(i.size>r)throw Error("Congratulations, you created a collection of unique numbers which uses all available integers!");for(;i.has(n);)n=Math.floor(Math.random()*r);return e(i,n)}},42435:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={addUniqueNumber:!0,generateUniqueNumber:!0};t.generateUniqueNumber=t.addUniqueNumber=void 0;var s=r(20719),n=r(65222),o=r(54092),a=r(60836);Object.keys(a).forEach(function(e){!("default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(i,e))&&(e in t&&t[e]===a[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))});let l=new WeakMap,h=(0,n.createCache)(l),u=t.generateUniqueNumber=(0,o.createGenerateUniqueNumber)(h,l);t.addUniqueNumber=(0,s.createAddUniqueNumber)(u)},7031:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},99195:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},43320:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},16543:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},68127:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},44852:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},60836:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(7031);Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===i[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}}))});var s=r(99195);Object.keys(s).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===s[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return s[e]}}))});var n=r(43320);Object.keys(n).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===n[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}}))});var o=r(16543);Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===o[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}}))});var a=r(68127);Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===a[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))});var l=r(44852);Object.keys(l).forEach(function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===l[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return l[e]}}))})},83001:(e,t,r)=>{try{var i=r(73837);if("function"!=typeof i.inherits)throw"";e.exports=i.inherits}catch(t){e.exports=r(71547)}},71547:e=>{"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var TempCtor=function(){};TempCtor.prototype=t.prototype,e.prototype=new TempCtor,e.prototype.constructor=e}}},31546:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AddressError=void 0;let AddressError=class AddressError extends Error{constructor(e,t){super(e),this.name="AddressError",null!==t&&(this.parseMessage=t)}};t.AddressError=AddressError},11828:(e,t)=>{"use strict";function isInSubnet(e){return!(this.subnetMask<e.subnetMask)&&this.mask(e.subnetMask)===e.mask()}function isCorrect(e){return function(){return this.addressMinusSuffix===this.correctForm()&&(this.subnetMask===e&&!this.parsedSubnet||this.parsedSubnet===String(this.subnetMask))}}Object.defineProperty(t,"__esModule",{value:!0}),t.isCorrect=t.isInSubnet=void 0,t.isInSubnet=isInSubnet,t.isCorrect=isCorrect},39934:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var s=Object.getOwnPropertyDescriptor(t,r);(!s||("get"in s?!t.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,s)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return s(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.v6=t.AddressError=t.Address6=t.Address4=void 0;let o=r(17954);Object.defineProperty(t,"Address4",{enumerable:!0,get:function(){return o.Address4}});let a=r(80011);Object.defineProperty(t,"Address6",{enumerable:!0,get:function(){return a.Address6}});let l=r(31546);Object.defineProperty(t,"AddressError",{enumerable:!0,get:function(){return l.AddressError}});let h=n(r(43355));t.v6={helpers:h}},17954:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var s=Object.getOwnPropertyDescriptor(t,r);(!s||("get"in s?!t.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,s)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return s(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Address4=void 0;let o=n(r(11828)),a=n(r(49277)),l=r(31546),h=r(70615),u=r(11069);let Address4=class Address4{constructor(e){this.groups=a.GROUPS,this.parsedAddress=[],this.parsedSubnet="",this.subnet="/32",this.subnetMask=32,this.v4=!0,this.isCorrect=o.isCorrect(a.BITS),this.isInSubnet=o.isInSubnet,this.address=e;let t=a.RE_SUBNET_STRING.exec(e);if(t){if(this.parsedSubnet=t[0].replace("/",""),this.subnetMask=parseInt(this.parsedSubnet,10),this.subnet=`/${this.subnetMask}`,this.subnetMask<0||this.subnetMask>a.BITS)throw new l.AddressError("Invalid subnet mask.");e=e.replace(a.RE_SUBNET_STRING,"")}this.addressMinusSuffix=e,this.parsedAddress=this.parse(e)}static isValid(e){try{return new Address4(e),!0}catch(e){return!1}}parse(e){let t=e.split(".");if(!e.match(a.RE_ADDRESS))throw new l.AddressError("Invalid IPv4 address.");return t}correctForm(){return this.parsedAddress.map(e=>parseInt(e,10)).join(".")}static fromHex(e){let t;let r=e.replace(/:/g,"").padStart(8,"0"),i=[];for(t=0;t<8;t+=2){let e=r.slice(t,t+2);i.push(parseInt(e,16))}return new Address4(i.join("."))}static fromInteger(e){return Address4.fromHex(e.toString(16))}static fromArpa(e){let t=e.replace(/(\.in-addr\.arpa)?\.$/,""),r=t.split(".").reverse().join(".");return new Address4(r)}toHex(){return this.parsedAddress.map(e=>(0,u.sprintf)("%02x",parseInt(e,10))).join(":")}toArray(){return this.parsedAddress.map(e=>parseInt(e,10))}toGroup6(){let e;let t=[];for(e=0;e<a.GROUPS;e+=2){let r=(0,u.sprintf)("%02x%02x",parseInt(this.parsedAddress[e],10),parseInt(this.parsedAddress[e+1],10));t.push((0,u.sprintf)("%x",parseInt(r,16)))}return t.join(":")}bigInteger(){return new h.BigInteger(this.parsedAddress.map(e=>(0,u.sprintf)("%02x",parseInt(e,10))).join(""),16)}_startAddress(){return new h.BigInteger(this.mask()+"0".repeat(a.BITS-this.subnetMask),2)}startAddress(){return Address4.fromBigInteger(this._startAddress())}startAddressExclusive(){let e=new h.BigInteger("1");return Address4.fromBigInteger(this._startAddress().add(e))}_endAddress(){return new h.BigInteger(this.mask()+"1".repeat(a.BITS-this.subnetMask),2)}endAddress(){return Address4.fromBigInteger(this._endAddress())}endAddressExclusive(){let e=new h.BigInteger("1");return Address4.fromBigInteger(this._endAddress().subtract(e))}static fromBigInteger(e){return Address4.fromInteger(parseInt(e.toString(),10))}mask(e){return void 0===e&&(e=this.subnetMask),this.getBitsBase2(0,e)}getBitsBase2(e,t){return this.binaryZeroPad().slice(e,t)}reverseForm(e){e||(e={});let t=this.correctForm().split(".").reverse().join(".");return e.omitSuffix?t:(0,u.sprintf)("%s.in-addr.arpa.",t)}isMulticast(){return this.isInSubnet(new Address4("224.0.0.0/4"))}binaryZeroPad(){return this.bigInteger().toString(2).padStart(a.BITS,"0")}groupForV6(){let e=this.parsedAddress;return this.address.replace(a.RE_ADDRESS,(0,u.sprintf)('<span class="hover-group group-v4 group-6">%s</span>.<span class="hover-group group-v4 group-7">%s</span>',e.slice(0,2).join("."),e.slice(2,4).join(".")))}};t.Address4=Address4},80011:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var s=Object.getOwnPropertyDescriptor(t,r);(!s||("get"in s?!t.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,s)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return s(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Address6=void 0;let o=n(r(11828)),a=n(r(49277)),l=n(r(54617)),h=n(r(43355)),u=r(17954),c=r(55353),d=r(31546),p=r(70615),g=r(11069);function assert(e){if(!e)throw Error("Assertion failed.")}function addCommas(e){let t=/(\d+)(\d{3})/;for(;t.test(e);)e=e.replace(t,"$1,$2");return e}function spanLeadingZeroes4(e){return e=(e=e.replace(/^(0{1,})([1-9]+)$/,'<span class="parse-error">$1</span>$2')).replace(/^(0{1,})(0)$/,'<span class="parse-error">$1</span>$2')}function compact(e,t){let r;let i=[],s=[];for(r=0;r<e.length;r++)r<t[0]?i.push(e[r]):r>t[1]&&s.push(e[r]);return i.concat(["compact"]).concat(s)}function paddedHex(e){return(0,g.sprintf)("%04x",parseInt(e,16))}function unsignByte(e){return 255&e}let Address6=class Address6{constructor(e,t){this.addressMinusSuffix="",this.parsedSubnet="",this.subnet="/128",this.subnetMask=128,this.v4=!1,this.zone="",this.isInSubnet=o.isInSubnet,this.isCorrect=o.isCorrect(l.BITS),void 0===t?this.groups=l.GROUPS:this.groups=t,this.address=e;let r=l.RE_SUBNET_STRING.exec(e);if(r){if(this.parsedSubnet=r[0].replace("/",""),this.subnetMask=parseInt(this.parsedSubnet,10),this.subnet=`/${this.subnetMask}`,Number.isNaN(this.subnetMask)||this.subnetMask<0||this.subnetMask>l.BITS)throw new d.AddressError("Invalid subnet mask.");e=e.replace(l.RE_SUBNET_STRING,"")}else if(/\//.test(e))throw new d.AddressError("Invalid subnet mask.");let i=l.RE_ZONE_STRING.exec(e);i&&(this.zone=i[0],e=e.replace(l.RE_ZONE_STRING,"")),this.addressMinusSuffix=e,this.parsedAddress=this.parse(this.addressMinusSuffix)}static isValid(e){try{return new Address6(e),!0}catch(e){return!1}}static fromBigInteger(e){let t;let r=e.toString(16).padStart(32,"0"),i=[];for(t=0;t<l.GROUPS;t++)i.push(r.slice(4*t,(t+1)*4));return new Address6(i.join(":"))}static fromURL(e){let t,r;let i=null;if(-1!==e.indexOf("[")&&-1!==e.indexOf("]:")){if(null===(r=l.RE_URL_WITH_PORT.exec(e)))return{error:"failed to parse address with port",address:null,port:null};t=r[1],i=r[2]}else if(-1!==e.indexOf("/")){if(e=e.replace(/^[a-z0-9]+:\/\//,""),null===(r=l.RE_URL.exec(e)))return{error:"failed to parse address from URL",address:null,port:null};t=r[1]}else t=e;return i?((i=parseInt(i,10))<0||i>65536)&&(i=null):i=null,{address:new Address6(t),port:i}}static fromAddress4(e){let t=new u.Address4(e),r=l.BITS-(a.BITS-t.subnetMask);return new Address6(`::ffff:${t.correctForm()}/${r}`)}static fromArpa(e){let t=e.replace(/(\.ip6\.arpa)?\.$/,"");if(63!==t.length)throw new d.AddressError("Invalid 'ip6.arpa' form.");let r=t.split(".").reverse();for(let e=7;e>0;e--){let t=4*e;r.splice(t,0,":")}return new Address6(t=r.join(""))}microsoftTranscription(){return(0,g.sprintf)("%s.ipv6-literal.net",this.correctForm().replace(/:/g,"-"))}mask(e=this.subnetMask){return this.getBitsBase2(0,e)}possibleSubnets(e=128){let t=l.BITS-this.subnetMask,r=Math.abs(e-l.BITS),i=t-r;return i<0?"0":addCommas(new p.BigInteger("2",10).pow(i).toString(10))}_startAddress(){return new p.BigInteger(this.mask()+"0".repeat(l.BITS-this.subnetMask),2)}startAddress(){return Address6.fromBigInteger(this._startAddress())}startAddressExclusive(){let e=new p.BigInteger("1");return Address6.fromBigInteger(this._startAddress().add(e))}_endAddress(){return new p.BigInteger(this.mask()+"1".repeat(l.BITS-this.subnetMask),2)}endAddress(){return Address6.fromBigInteger(this._endAddress())}endAddressExclusive(){let e=new p.BigInteger("1");return Address6.fromBigInteger(this._endAddress().subtract(e))}getScope(){let e=l.SCOPES[this.getBits(12,16).intValue()];return"Global unicast"===this.getType()&&"Link local"!==e&&(e="Global"),e||"Unknown"}getType(){for(let e of Object.keys(l.TYPES))if(this.isInSubnet(new Address6(e)))return l.TYPES[e];return"Global unicast"}getBits(e,t){return new p.BigInteger(this.getBitsBase2(e,t),2)}getBitsBase2(e,t){return this.binaryZeroPad().slice(e,t)}getBitsBase16(e,t){let r=t-e;if(r%4!=0)throw Error("Length of bits to retrieve must be divisible by four");return this.getBits(e,t).toString(16).padStart(r/4,"0")}getBitsPastSubnet(){return this.getBitsBase2(this.subnetMask,l.BITS)}reverseForm(e){e||(e={});let t=Math.floor(this.subnetMask/4),r=this.canonicalForm().replace(/:/g,"").split("").slice(0,t).reverse().join(".");return t>0?e.omitSuffix?r:(0,g.sprintf)("%s.ip6.arpa.",r):e.omitSuffix?"":"ip6.arpa."}correctForm(){let e;let t=[],r=0,i=[];for(e=0;e<this.parsedAddress.length;e++){let t=parseInt(this.parsedAddress[e],16);0===t&&r++,0!==t&&r>0&&(r>1&&i.push([e-r,e-1]),r=0)}r>1&&i.push([this.parsedAddress.length-r,this.parsedAddress.length-1]);let s=i.map(e=>e[1]-e[0]+1);if(i.length>0){let e=s.indexOf(Math.max(...s));t=compact(this.parsedAddress,i[e])}else t=this.parsedAddress;for(e=0;e<t.length;e++)"compact"!==t[e]&&(t[e]=parseInt(t[e],16).toString(16));let n=t.join(":");return(n=(n=n.replace(/^compact$/,"::")).replace(/^compact|compact$/,":")).replace(/compact/,"")}binaryZeroPad(){return this.bigInteger().toString(2).padStart(l.BITS,"0")}parse4in6(e){let t=e.split(":"),r=t.slice(-1)[0],i=r.match(a.RE_ADDRESS);if(i){this.parsedAddress4=i[0],this.address4=new u.Address4(this.parsedAddress4);for(let t=0;t<this.address4.groups;t++)if(/^0[0-9]+/.test(this.address4.parsedAddress[t]))throw new d.AddressError("IPv4 addresses can't have leading zeroes.",e.replace(a.RE_ADDRESS,this.address4.parsedAddress.map(spanLeadingZeroes4).join(".")));this.v4=!0,t[t.length-1]=this.address4.toGroup6(),e=t.join(":")}return e}parse(e){e=this.parse4in6(e);let t=e.match(l.RE_BAD_CHARACTERS);if(t)throw new d.AddressError((0,g.sprintf)("Bad character%s detected in address: %s",t.length>1?"s":"",t.join("")),e.replace(l.RE_BAD_CHARACTERS,'<span class="parse-error">$1</span>'));let r=e.match(l.RE_BAD_ADDRESS);if(r)throw new d.AddressError((0,g.sprintf)("Address failed regex: %s",r.join("")),e.replace(l.RE_BAD_ADDRESS,'<span class="parse-error">$1</span>'));let i=[],s=e.split("::");if(2===s.length){let e=s[0].split(":"),t=s[1].split(":");1===e.length&&""===e[0]&&(e=[]),1===t.length&&""===t[0]&&(t=[]);let r=this.groups-(e.length+t.length);if(!r)throw new d.AddressError("Error parsing groups");this.elidedGroups=r,this.elisionBegin=e.length,this.elisionEnd=e.length+this.elidedGroups,i=i.concat(e);for(let e=0;e<r;e++)i.push("0");i=i.concat(t)}else if(1===s.length)i=e.split(":"),this.elidedGroups=0;else throw new d.AddressError("Too many :: groups found");if((i=i.map(e=>(0,g.sprintf)("%x",parseInt(e,16)))).length!==this.groups)throw new d.AddressError("Incorrect number of groups found");return i}canonicalForm(){return this.parsedAddress.map(paddedHex).join(":")}decimal(){return this.parsedAddress.map(e=>(0,g.sprintf)("%05d",parseInt(e,16))).join(":")}bigInteger(){return new p.BigInteger(this.parsedAddress.map(paddedHex).join(""),16)}to4(){let e=this.binaryZeroPad().split("");return u.Address4.fromHex(new p.BigInteger(e.slice(96,128).join(""),2).toString(16))}to4in6(){let e=this.to4(),t=new Address6(this.parsedAddress.slice(0,6).join(":"),6),r=t.correctForm(),i="";return/:$/.test(r)||(i=":"),r+i+e.address}inspectTeredo(){let e=this.getBitsBase16(0,32),t=this.getBits(80,96).xor(new p.BigInteger("ffff",16)).toString(),r=u.Address4.fromHex(this.getBitsBase16(32,64)),i=u.Address4.fromHex(this.getBits(96,128).xor(new p.BigInteger("ffffffff",16)).toString(16)),s=this.getBits(64,80),n=this.getBitsBase2(64,80),o=s.testBit(15),a=s.testBit(14),l=s.testBit(8),h=s.testBit(9),c=new p.BigInteger(n.slice(2,6)+n.slice(8,16),2).toString(10);return{prefix:(0,g.sprintf)("%s:%s",e.slice(0,4),e.slice(4,8)),server4:r.address,client4:i.address,flags:n,coneNat:o,microsoft:{reserved:a,universalLocal:h,groupIndividual:l,nonce:c},udpPort:t}}inspect6to4(){let e=this.getBitsBase16(0,16),t=u.Address4.fromHex(this.getBitsBase16(16,48));return{prefix:(0,g.sprintf)("%s",e.slice(0,4)),gateway:t.address}}to6to4(){if(!this.is4())return null;let e=["2002",this.getBitsBase16(96,112),this.getBitsBase16(112,128),"","/16"].join(":");return new Address6(e)}toByteArray(){let e=this.bigInteger().toByteArray();return 17===e.length&&0===e[0]?e.slice(1):e}toUnsignedByteArray(){return this.toByteArray().map(unsignByte)}static fromByteArray(e){return this.fromUnsignedByteArray(e.map(unsignByte))}static fromUnsignedByteArray(e){let t=new p.BigInteger("256",10),r=new p.BigInteger("0",10),i=new p.BigInteger("1",10);for(let s=e.length-1;s>=0;s--)r=r.add(i.multiply(new p.BigInteger(e[s].toString(10),10))),i=i.multiply(t);return Address6.fromBigInteger(r)}isCanonical(){return this.addressMinusSuffix===this.canonicalForm()}isLinkLocal(){return"1111111010000000000000000000000000000000000000000000000000000000"===this.getBitsBase2(0,64)}isMulticast(){return"Multicast"===this.getType()}is4(){return this.v4}isTeredo(){return this.isInSubnet(new Address6("2001::/32"))}is6to4(){return this.isInSubnet(new Address6("2002::/16"))}isLoopback(){return"Loopback"===this.getType()}href(e){return e=void 0===e?"":(0,g.sprintf)(":%s",e),(0,g.sprintf)("http://[%s]%s/",this.correctForm(),e)}link(e){e||(e={}),void 0===e.className&&(e.className=""),void 0===e.prefix&&(e.prefix="/#address="),void 0===e.v4&&(e.v4=!1);let t=this.correctForm;return(e.v4&&(t=this.to4in6),e.className)?(0,g.sprintf)('<a href="%1$s%2$s" class="%3$s">%2$s</a>',e.prefix,t.call(this),e.className):(0,g.sprintf)('<a href="%1$s%2$s">%2$s</a>',e.prefix,t.call(this))}group(){if(0===this.elidedGroups)return h.simpleGroup(this.address).join(":");assert("number"==typeof this.elidedGroups),assert("number"==typeof this.elisionBegin);let e=[],[t,r]=this.address.split("::");t.length?e.push(...h.simpleGroup(t)):e.push("");let i=["hover-group"];for(let e=this.elisionBegin;e<this.elisionBegin+this.elidedGroups;e++)i.push((0,g.sprintf)("group-%d",e));return e.push((0,g.sprintf)('<span class="%s"></span>',i.join(" "))),r.length?e.push(...h.simpleGroup(r,this.elisionEnd)):e.push(""),this.is4()&&(assert(this.address4 instanceof u.Address4),e.pop(),e.push(this.address4.groupForV6())),e.join(":")}regularExpressionString(e=!1){let t=[],r=new Address6(this.correctForm());if(0===r.elidedGroups)t.push((0,c.simpleRegularExpression)(r.parsedAddress));else if(r.elidedGroups===l.GROUPS)t.push((0,c.possibleElisions)(l.GROUPS));else{let e=r.address.split("::");e[0].length&&t.push((0,c.simpleRegularExpression)(e[0].split(":"))),assert("number"==typeof r.elidedGroups),t.push((0,c.possibleElisions)(r.elidedGroups,0!==e[0].length,0!==e[1].length)),e[1].length&&t.push((0,c.simpleRegularExpression)(e[1].split(":"))),t=[t.join(":")]}return e||(t=["(?=^|",c.ADDRESS_BOUNDARY,"|[^\\w\\:])(",...t,")(?=[^\\w\\:]|",c.ADDRESS_BOUNDARY,"|$)"]),t.join("")}regularExpression(e=!1){return RegExp(this.regularExpressionString(e),"i")}};t.Address6=Address6},49277:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RE_SUBNET_STRING=t.RE_ADDRESS=t.GROUPS=t.BITS=void 0,t.BITS=32,t.GROUPS=4,t.RE_ADDRESS=/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/g,t.RE_SUBNET_STRING=/\/\d{1,2}$/},54617:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RE_URL_WITH_PORT=t.RE_URL=t.RE_ZONE_STRING=t.RE_SUBNET_STRING=t.RE_BAD_ADDRESS=t.RE_BAD_CHARACTERS=t.TYPES=t.SCOPES=t.GROUPS=t.BITS=void 0,t.BITS=128,t.GROUPS=8,t.SCOPES={0:"Reserved",1:"Interface local",2:"Link local",4:"Admin local",5:"Site local",8:"Organization local",14:"Global",15:"Reserved"},t.TYPES={"ff01::1/128":"Multicast (All nodes on this interface)","ff01::2/128":"Multicast (All routers on this interface)","ff02::1/128":"Multicast (All nodes on this link)","ff02::2/128":"Multicast (All routers on this link)","ff05::2/128":"Multicast (All routers in this site)","ff02::5/128":"Multicast (OSPFv3 AllSPF routers)","ff02::6/128":"Multicast (OSPFv3 AllDR routers)","ff02::9/128":"Multicast (RIP routers)","ff02::a/128":"Multicast (EIGRP routers)","ff02::d/128":"Multicast (PIM routers)","ff02::16/128":"Multicast (MLDv2 reports)","ff01::fb/128":"Multicast (mDNSv6)","ff02::fb/128":"Multicast (mDNSv6)","ff05::fb/128":"Multicast (mDNSv6)","ff02::1:2/128":"Multicast (All DHCP servers and relay agents on this link)","ff05::1:2/128":"Multicast (All DHCP servers and relay agents in this site)","ff02::1:3/128":"Multicast (All DHCP servers on this link)","ff05::1:3/128":"Multicast (All DHCP servers in this site)","::/128":"Unspecified","::1/128":"Loopback","ff00::/8":"Multicast","fe80::/10":"Link-local unicast"},t.RE_BAD_CHARACTERS=/([^0-9a-f:/%])/gi,t.RE_BAD_ADDRESS=/([0-9a-f]{5,}|:{3,}|[^:]:$|^:[^:]|\/$)/gi,t.RE_SUBNET_STRING=/\/\d{1,3}(?=%|$)/,t.RE_ZONE_STRING=/%.*$/,t.RE_URL=new RegExp(/^\[{0,1}([0-9a-f:]+)\]{0,1}/),t.RE_URL_WITH_PORT=new RegExp(/\[([0-9a-f:]+)\]:([0-9]{1,5})/)},43355:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.simpleGroup=t.spanLeadingZeroes=t.spanAll=t.spanAllZeroes=void 0;let i=r(11069);function spanAllZeroes(e){return e.replace(/(0+)/g,'<span class="zero">$1</span>')}function spanAll(e,t=0){let r=e.split("");return r.map((e,r)=>(0,i.sprintf)('<span class="digit value-%s position-%d">%s</span>',e,r+t,spanAllZeroes(e))).join("")}function spanLeadingZeroesSimple(e){return e.replace(/^(0+)/,'<span class="zero">$1</span>')}function spanLeadingZeroes(e){let t=e.split(":");return t.map(e=>spanLeadingZeroesSimple(e)).join(":")}function simpleGroup(e,t=0){let r=e.split(":");return r.map((e,r)=>/group-v4/.test(e)?e:(0,i.sprintf)('<span class="hover-group group-%d">%s</span>',r+t,spanLeadingZeroesSimple(e)))}t.spanAllZeroes=spanAllZeroes,t.spanAll=spanAll,t.spanLeadingZeroes=spanLeadingZeroes,t.simpleGroup=simpleGroup},55353:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var s=Object.getOwnPropertyDescriptor(t,r);(!s||("get"in s?!t.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,s)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return s(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.possibleElisions=t.simpleRegularExpression=t.ADDRESS_BOUNDARY=t.padGroup=t.groupPossibilities=void 0;let o=n(r(54617)),a=r(11069);function groupPossibilities(e){return(0,a.sprintf)("(%s)",e.join("|"))}function padGroup(e){return e.length<4?(0,a.sprintf)("0{0,%d}%s",4-e.length,e):e}function simpleRegularExpression(e){let t=[];e.forEach((e,r)=>{let i=parseInt(e,16);0===i&&t.push(r)});let r=t.map(t=>e.map((e,r)=>{if(r===t){let t=0===r||r===o.GROUPS-1?":":"";return groupPossibilities([padGroup(e),t])}return padGroup(e)}).join(":"));return r.push(e.map(padGroup).join(":")),groupPossibilities(r)}function possibleElisions(e,t,r){let i=[];t||r||i.push("::"),t&&r&&i.push(""),(r&&!t||!r&&t)&&i.push(":"),i.push((0,a.sprintf)("%s(:0{1,4}){1,%d}",t?"":":",e-1)),i.push((0,a.sprintf)("(0{1,4}:){1,%d}%s",e-1,r?"":":")),i.push((0,a.sprintf)("(0{1,4}:){%d}0{1,4}",e-1));for(let t=1;t<e-1;t++)for(let r=1;r<e-t;r++)i.push((0,a.sprintf)("(0{1,4}:){%d}:(0{1,4}:){%d}0{1,4}",r,e-r-t-1));return groupPossibilities(i)}t.groupPossibilities=groupPossibilities,t.padGroup=padGroup,t.ADDRESS_BOUNDARY="[^A-Fa-f0-9:]",t.simpleRegularExpression=simpleRegularExpression,t.possibleElisions=possibleElisions},58083:(e,t)=>{"use strict";Object.defineProperty(t,"t",{value:!0}),t.ContainerIterator=t.Container=t.Base=void 0;let ContainerIterator=class ContainerIterator{constructor(e=0){this.iteratorType=e}equals(e){return this.o===e.o}};t.ContainerIterator=ContainerIterator;let Base=class Base{constructor(){this.i=0}get length(){return this.i}size(){return this.i}empty(){return 0===this.i}};t.Base=Base;let Container=class Container extends Base{};t.Container=Container},31703:(e,t,r)=>{"use strict";Object.defineProperty(t,"t",{value:!0}),t.HashContainerIterator=t.HashContainer=void 0;var i=r(58083),s=_interopRequireDefault(r(52115)),n=r(86850);function _interopRequireDefault(e){return e&&e.t?e:{default:e}}let HashContainerIterator=class HashContainerIterator extends i.ContainerIterator{constructor(e,t,r){super(r),this.o=e,this.h=t,0===this.iteratorType?(this.pre=function(){return this.o.L===this.h&&(0,n.throwIteratorAccessError)(),this.o=this.o.L,this},this.next=function(){return this.o===this.h&&(0,n.throwIteratorAccessError)(),this.o=this.o.B,this}):(this.pre=function(){return this.o.B===this.h&&(0,n.throwIteratorAccessError)(),this.o=this.o.B,this},this.next=function(){return this.o===this.h&&(0,n.throwIteratorAccessError)(),this.o=this.o.L,this})}};t.HashContainerIterator=HashContainerIterator;let HashContainer=class HashContainer extends i.Container{constructor(){super(),this.H=[],this.g={},this.HASH_TAG=Symbol("@@HASH_TAG"),Object.setPrototypeOf(this.g,null),this.h={},this.h.L=this.h.B=this.p=this._=this.h}V(e){let{L:t,B:r}=e;t.B=r,r.L=t,e===this.p&&(this.p=r),e===this._&&(this._=t),this.i-=1}M(e,t,r){let i;if(void 0===r&&(r=(0,s.default)(e)),r){let r=e[this.HASH_TAG];if(void 0!==r)return this.H[r].l=t,this.i;Object.defineProperty(e,this.HASH_TAG,{value:this.H.length,configurable:!0}),i={u:e,l:t,L:this._,B:this.h},this.H.push(i)}else{let r=this.g[e];if(r)return r.l=t,this.i;i={u:e,l:t,L:this._,B:this.h},this.g[e]=i}return 0===this.i?(this.p=i,this.h.B=i):this._.B=i,this._=i,this.h.L=i,++this.i}I(e,t){if(void 0===t&&(t=(0,s.default)(e)),!t)return this.g[e]||this.h;{let t=e[this.HASH_TAG];return void 0===t?this.h:this.H[t]}}clear(){let e=this.HASH_TAG;this.H.forEach(function(t){delete t.u[e]}),this.H=[],this.g={},Object.setPrototypeOf(this.g,null),this.i=0,this.p=this._=this.h.L=this.h.B=this.h}eraseElementByKey(e,t){let r;if(void 0===t&&(t=(0,s.default)(e)),t){let t=e[this.HASH_TAG];if(void 0===t)return!1;delete e[this.HASH_TAG],r=this.H[t],delete this.H[t]}else{if(void 0===(r=this.g[e]))return!1;delete this.g[e]}return this.V(r),!0}eraseElementByIterator(e){let t=e.o;return t===this.h&&(0,n.throwIteratorAccessError)(),this.V(t),e.next()}eraseElementByPos(e){if(e<0||e>this.i-1)throw RangeError();let t=this.p;for(;e--;)t=t.B;return this.V(t),this.i}};t.HashContainer=HashContainer},40672:(e,t,r)=>{"use strict";Object.defineProperty(t,"t",{value:!0}),t.default=void 0;var i=r(31703),s=_interopRequireDefault(r(52115)),n=r(86850);function _interopRequireDefault(e){return e&&e.t?e:{default:e}}let HashMapIterator=class HashMapIterator extends i.HashContainerIterator{constructor(e,t,r,i){super(e,t,i),this.container=r}get pointer(){this.o===this.h&&(0,n.throwIteratorAccessError)();let e=this;return new Proxy([],{get:(t,r)=>"0"===r?e.o.u:"1"===r?e.o.l:void 0,set(t,r,i){if("1"!==r)throw TypeError("props must be 1");return e.o.l=i,!0}})}copy(){return new HashMapIterator(this.o,this.h,this.container,this.iteratorType)}};let HashMap=class HashMap extends i.HashContainer{constructor(e=[]){super();let t=this;e.forEach(function(e){t.setElement(e[0],e[1])})}begin(){return new HashMapIterator(this.p,this.h,this)}end(){return new HashMapIterator(this.h,this.h,this)}rBegin(){return new HashMapIterator(this._,this.h,this,1)}rEnd(){return new HashMapIterator(this.h,this.h,this,1)}front(){if(0!==this.i)return[this.p.u,this.p.l]}back(){if(0!==this.i)return[this._.u,this._.l]}setElement(e,t,r){return this.M(e,t,r)}getElementByKey(e,t){if(void 0===t&&(t=(0,s.default)(e)),t){let t=e[this.HASH_TAG];return void 0!==t?this.H[t].l:void 0}let r=this.g[e];return r?r.l:void 0}getElementByPos(e){if(e<0||e>this.i-1)throw RangeError();let t=this.p;for(;e--;)t=t.B;return[t.u,t.l]}find(e,t){let r=this.I(e,t);return new HashMapIterator(r,this.h,this)}forEach(e){let t=0,r=this.p;for(;r!==this.h;)e([r.u,r.l],t++,this),r=r.B}[Symbol.iterator](){return(function*(){let e=this.p;for(;e!==this.h;)yield[e.u,e.l],e=e.B}).bind(this)()}};t.default=HashMap},50407:(e,t,r)=>{"use strict";Object.defineProperty(t,"t",{value:!0}),t.default=void 0;var i=r(31703),s=r(86850);let HashSetIterator=class HashSetIterator extends i.HashContainerIterator{constructor(e,t,r,i){super(e,t,i),this.container=r}get pointer(){return this.o===this.h&&(0,s.throwIteratorAccessError)(),this.o.u}copy(){return new HashSetIterator(this.o,this.h,this.container,this.iteratorType)}};let HashSet=class HashSet extends i.HashContainer{constructor(e=[]){super();let t=this;e.forEach(function(e){t.insert(e)})}begin(){return new HashSetIterator(this.p,this.h,this)}end(){return new HashSetIterator(this.h,this.h,this)}rBegin(){return new HashSetIterator(this._,this.h,this,1)}rEnd(){return new HashSetIterator(this.h,this.h,this,1)}front(){return this.p.u}back(){return this._.u}insert(e,t){return this.M(e,void 0,t)}getElementByPos(e){if(e<0||e>this.i-1)throw RangeError();let t=this.p;for(;e--;)t=t.B;return t.u}find(e,t){let r=this.I(e,t);return new HashSetIterator(r,this.h,this)}forEach(e){let t=0,r=this.p;for(;r!==this.h;)e(r.u,t++,this),r=r.B}[Symbol.iterator](){return(function*(){let e=this.p;for(;e!==this.h;)yield e.u,e=e.B}).bind(this)()}};t.default=HashSet},1306:(e,t,r)=>{"use strict";Object.defineProperty(t,"t",{value:!0}),t.default=void 0;var i=r(58083);let PriorityQueue=class PriorityQueue extends i.Base{constructor(e=[],t=function(e,t){return e>t?-1:e<t?1:0},r=!0){if(super(),this.v=t,Array.isArray(e))this.C=r?[...e]:e;else{this.C=[];let t=this;e.forEach(function(e){t.C.push(e)})}this.i=this.C.length;let i=this.i>>1;for(let e=this.i-1>>1;e>=0;--e)this.k(e,i)}m(e){let t=this.C[e];for(;e>0;){let r=e-1>>1,i=this.C[r];if(0>=this.v(i,t))break;this.C[e]=i,e=r}this.C[e]=t}k(e,t){let r=this.C[e];for(;e<t;){let t=e<<1|1,i=t+1,s=this.C[t];if(i<this.i&&this.v(s,this.C[i])>0&&(t=i,s=this.C[i]),this.v(s,r)>=0)break;this.C[e]=s,e=t}this.C[e]=r}clear(){this.i=0,this.C.length=0}push(e){this.C.push(e),this.m(this.i),this.i+=1}pop(){if(0===this.i)return;let e=this.C[0],t=this.C.pop();return this.i-=1,this.i&&(this.C[0]=t,this.k(0,this.i>>1)),e}top(){return this.C[0]}find(e){return this.C.indexOf(e)>=0}remove(e){let t=this.C.indexOf(e);return!(t<0)&&(0===t?this.pop():t===this.i-1?(this.C.pop(),this.i-=1):(this.C.splice(t,1,this.C.pop()),this.i-=1,this.m(t),this.k(t,this.i>>1)),!0)}updateItem(e){let t=this.C.indexOf(e);return!(t<0)&&(this.m(t),this.k(t,this.i>>1),!0)}toArray(){return[...this.C]}};t.default=PriorityQueue},87537:(e,t,r)=>{"use strict";Object.defineProperty(t,"t",{value:!0}),t.default=void 0;var i=r(58083);let Queue=class Queue extends i.Base{constructor(e=[]){super(),this.j=0,this.q=[];let t=this;e.forEach(function(e){t.push(e)})}clear(){this.q=[],this.i=this.j=0}push(e){let t=this.q.length;if(this.j/t>.5&&this.j+this.i>=t&&t>4096){let t=this.i;for(let e=0;e<t;++e)this.q[e]=this.q[this.j+e];this.j=0,this.q[this.i]=e}else this.q[this.j+this.i]=e;return++this.i}pop(){if(0===this.i)return;let e=this.q[this.j++];return this.i-=1,e}front(){if(0!==this.i)return this.q[this.j]}};t.default=Queue},91476:(e,t,r)=>{"use strict";Object.defineProperty(t,"t",{value:!0}),t.default=void 0;var i=r(58083);let Stack=class Stack extends i.Base{constructor(e=[]){super(),this.S=[];let t=this;e.forEach(function(e){t.push(e)})}clear(){this.i=0,this.S=[]}push(e){return this.S.push(e),this.i+=1,this.i}pop(){if(0!==this.i)return this.i-=1,this.S.pop()}top(){return this.S[this.i-1]}};t.default=Stack},15662:(e,t,r)=>{"use strict";Object.defineProperty(t,"t",{value:!0}),t.RandomIterator=void 0;var i=r(58083),s=r(86850);let RandomIterator=class RandomIterator extends i.ContainerIterator{constructor(e,t){super(t),this.o=e,0===this.iteratorType?(this.pre=function(){return 0===this.o&&(0,s.throwIteratorAccessError)(),this.o-=1,this},this.next=function(){return this.o===this.container.size()&&(0,s.throwIteratorAccessError)(),this.o+=1,this}):(this.pre=function(){return this.o===this.container.size()-1&&(0,s.throwIteratorAccessError)(),this.o+=1,this},this.next=function(){return -1===this.o&&(0,s.throwIteratorAccessError)(),this.o-=1,this})}get pointer(){return this.container.getElementByPos(this.o)}set pointer(e){this.container.setElementByPos(this.o,e)}};t.RandomIterator=RandomIterator},66830:(e,t,r)=>{"use strict";Object.defineProperty(t,"t",{value:!0}),t.default=void 0;var i=r(58083);let SequentialContainer=class SequentialContainer extends i.Container{};t.default=SequentialContainer},68681:(e,t,r)=>{"use strict";Object.defineProperty(t,"t",{value:!0}),t.default=void 0;var i=_interopRequireDefault(r(66830)),s=r(15662);function _interopRequireDefault(e){return e&&e.t?e:{default:e}}let DequeIterator=class DequeIterator extends s.RandomIterator{constructor(e,t,r){super(e,r),this.container=t}copy(){return new DequeIterator(this.o,this.container,this.iteratorType)}};let Deque=class Deque extends i.default{constructor(e=[],t=4096){super(),this.j=0,this.D=0,this.R=0,this.N=0,this.P=0,this.A=[];let r=(()=>{if("number"==typeof e.length)return e.length;if("number"==typeof e.size)return e.size;if("function"==typeof e.size)return e.size();throw TypeError("Cannot get the length or size of the container")})();this.F=t,this.P=Math.max(Math.ceil(r/this.F),1);for(let e=0;e<this.P;++e)this.A.push(Array(this.F));let i=Math.ceil(r/this.F);this.j=this.R=(this.P>>1)-(i>>1),this.D=this.N=this.F-r%this.F>>1;let s=this;e.forEach(function(e){s.pushBack(e)})}T(){let e=[],t=Math.max(this.P>>1,1);for(let r=0;r<t;++r)e[r]=Array(this.F);for(let t=this.j;t<this.P;++t)e[e.length]=this.A[t];for(let t=0;t<this.R;++t)e[e.length]=this.A[t];e[e.length]=[...this.A[this.R]],this.j=t,this.R=e.length-1;for(let r=0;r<t;++r)e[e.length]=Array(this.F);this.A=e,this.P=e.length}O(e){let t=this.D+e+1,r=t%this.F,i=r-1,s=this.j+(t-r)/this.F;return 0===r&&(s-=1),s%=this.P,i<0&&(i+=this.F),{curNodeBucketIndex:s,curNodePointerIndex:i}}clear(){this.A=[Array(this.F)],this.P=1,this.j=this.R=this.i=0,this.D=this.N=this.F>>1}begin(){return new DequeIterator(0,this)}end(){return new DequeIterator(this.i,this)}rBegin(){return new DequeIterator(this.i-1,this,1)}rEnd(){return new DequeIterator(-1,this,1)}front(){if(0!==this.i)return this.A[this.j][this.D]}back(){if(0!==this.i)return this.A[this.R][this.N]}pushBack(e){return this.i&&(this.N<this.F-1?this.N+=1:(this.R<this.P-1?this.R+=1:this.R=0,this.N=0),this.R===this.j&&this.N===this.D&&this.T()),this.i+=1,this.A[this.R][this.N]=e,this.i}popBack(){if(0===this.i)return;let e=this.A[this.R][this.N];return 1!==this.i&&(this.N>0?this.N-=1:(this.R>0?this.R-=1:this.R=this.P-1,this.N=this.F-1)),this.i-=1,e}pushFront(e){return this.i&&(this.D>0?this.D-=1:(this.j>0?this.j-=1:this.j=this.P-1,this.D=this.F-1),this.j===this.R&&this.D===this.N&&this.T()),this.i+=1,this.A[this.j][this.D]=e,this.i}popFront(){if(0===this.i)return;let e=this.A[this.j][this.D];return 1!==this.i&&(this.D<this.F-1?this.D+=1:(this.j<this.P-1?this.j+=1:this.j=0,this.D=0)),this.i-=1,e}getElementByPos(e){if(e<0||e>this.i-1)throw RangeError();let{curNodeBucketIndex:t,curNodePointerIndex:r}=this.O(e);return this.A[t][r]}setElementByPos(e,t){if(e<0||e>this.i-1)throw RangeError();let{curNodeBucketIndex:r,curNodePointerIndex:i}=this.O(e);this.A[r][i]=t}insert(e,t,r=1){if(e<0||e>this.i)throw RangeError();if(0===e)for(;r--;)this.pushFront(t);else if(e===this.i)for(;r--;)this.pushBack(t);else{let i=[];for(let t=e;t<this.i;++t)i.push(this.getElementByPos(t));this.cut(e-1);for(let e=0;e<r;++e)this.pushBack(t);for(let e=0;e<i.length;++e)this.pushBack(i[e])}return this.i}cut(e){if(e<0)return this.clear(),0;let{curNodeBucketIndex:t,curNodePointerIndex:r}=this.O(e);return this.R=t,this.N=r,this.i=e+1,this.i}eraseElementByPos(e){if(e<0||e>this.i-1)throw RangeError();if(0===e)this.popFront();else if(e===this.i-1)this.popBack();else{let t=[];for(let r=e+1;r<this.i;++r)t.push(this.getElementByPos(r));this.cut(e),this.popBack();let r=this;t.forEach(function(e){r.pushBack(e)})}return this.i}eraseElementByValue(e){if(0===this.i)return 0;let t=[];for(let r=0;r<this.i;++r){let i=this.getElementByPos(r);i!==e&&t.push(i)}let r=t.length;for(let e=0;e<r;++e)this.setElementByPos(e,t[e]);return this.cut(r-1)}eraseElementByIterator(e){let t=e.o;return this.eraseElementByPos(t),e=e.next()}find(e){for(let t=0;t<this.i;++t)if(this.getElementByPos(t)===e)return new DequeIterator(t,this);return this.end()}reverse(){let e=0,t=this.i-1;for(;e<t;){let r=this.getElementByPos(e);this.setElementByPos(e,this.getElementByPos(t)),this.setElementByPos(t,r),e+=1,t-=1}}unique(){if(this.i<=1)return this.i;let e=1,t=this.getElementByPos(0);for(let r=1;r<this.i;++r){let i=this.getElementByPos(r);i!==t&&(t=i,this.setElementByPos(e++,i))}for(;this.i>e;)this.popBack();return this.i}sort(e){let t=[];for(let e=0;e<this.i;++e)t.push(this.getElementByPos(e));t.sort(e);for(let e=0;e<this.i;++e)this.setElementByPos(e,t[e])}shrinkToFit(){if(0===this.i)return;let e=[];this.forEach(function(t){e.push(t)}),this.P=Math.max(Math.ceil(this.i/this.F),1),this.i=this.j=this.R=this.D=this.N=0,this.A=[];for(let e=0;e<this.P;++e)this.A.push(Array(this.F));for(let t=0;t<e.length;++t)this.pushBack(e[t])}forEach(e){for(let t=0;t<this.i;++t)e(this.getElementByPos(t),t,this)}[Symbol.iterator](){return(function*(){for(let e=0;e<this.i;++e)yield this.getElementByPos(e)}).bind(this)()}};t.default=Deque},23896:(e,t,r)=>{"use strict";Object.defineProperty(t,"t",{value:!0}),t.default=void 0;var i=_interopRequireDefault(r(66830)),s=r(58083),n=r(86850);function _interopRequireDefault(e){return e&&e.t?e:{default:e}}let LinkListIterator=class LinkListIterator extends s.ContainerIterator{constructor(e,t,r,i){super(i),this.o=e,this.h=t,this.container=r,0===this.iteratorType?(this.pre=function(){return this.o.L===this.h&&(0,n.throwIteratorAccessError)(),this.o=this.o.L,this},this.next=function(){return this.o===this.h&&(0,n.throwIteratorAccessError)(),this.o=this.o.B,this}):(this.pre=function(){return this.o.B===this.h&&(0,n.throwIteratorAccessError)(),this.o=this.o.B,this},this.next=function(){return this.o===this.h&&(0,n.throwIteratorAccessError)(),this.o=this.o.L,this})}get pointer(){return this.o===this.h&&(0,n.throwIteratorAccessError)(),this.o.l}set pointer(e){this.o===this.h&&(0,n.throwIteratorAccessError)(),this.o.l=e}copy(){return new LinkListIterator(this.o,this.h,this.container,this.iteratorType)}};let LinkList=class LinkList extends i.default{constructor(e=[]){super(),this.h={},this.p=this._=this.h.L=this.h.B=this.h;let t=this;e.forEach(function(e){t.pushBack(e)})}V(e){let{L:t,B:r}=e;t.B=r,r.L=t,e===this.p&&(this.p=r),e===this._&&(this._=t),this.i-=1}G(e,t){let r=t.B,i={l:e,L:t,B:r};t.B=i,r.L=i,t===this.h&&(this.p=i),r===this.h&&(this._=i),this.i+=1}clear(){this.i=0,this.p=this._=this.h.L=this.h.B=this.h}begin(){return new LinkListIterator(this.p,this.h,this)}end(){return new LinkListIterator(this.h,this.h,this)}rBegin(){return new LinkListIterator(this._,this.h,this,1)}rEnd(){return new LinkListIterator(this.h,this.h,this,1)}front(){return this.p.l}back(){return this._.l}getElementByPos(e){if(e<0||e>this.i-1)throw RangeError();let t=this.p;for(;e--;)t=t.B;return t.l}eraseElementByPos(e){if(e<0||e>this.i-1)throw RangeError();let t=this.p;for(;e--;)t=t.B;return this.V(t),this.i}eraseElementByValue(e){let t=this.p;for(;t!==this.h;)t.l===e&&this.V(t),t=t.B;return this.i}eraseElementByIterator(e){let t=e.o;return t===this.h&&(0,n.throwIteratorAccessError)(),e=e.next(),this.V(t),e}pushBack(e){return this.G(e,this._),this.i}popBack(){if(0===this.i)return;let e=this._.l;return this.V(this._),e}pushFront(e){return this.G(e,this.h),this.i}popFront(){if(0===this.i)return;let e=this.p.l;return this.V(this.p),e}setElementByPos(e,t){if(e<0||e>this.i-1)throw RangeError();let r=this.p;for(;e--;)r=r.B;r.l=t}insert(e,t,r=1){if(e<0||e>this.i)throw RangeError();if(r<=0)return this.i;if(0===e)for(;r--;)this.pushFront(t);else if(e===this.i)for(;r--;)this.pushBack(t);else{let i=this.p;for(let t=1;t<e;++t)i=i.B;let s=i.B;for(this.i+=r;r--;)i.B={l:t,L:i},i.B.L=i,i=i.B;i.B=s,s.L=i}return this.i}find(e){let t=this.p;for(;t!==this.h;){if(t.l===e)return new LinkListIterator(t,this.h,this);t=t.B}return this.end()}reverse(){if(this.i<=1)return;let e=this.p,t=this._,r=0;for(;r<<1<this.i;){let i=e.l;e.l=t.l,t.l=i,e=e.B,t=t.L,r+=1}}unique(){if(this.i<=1)return this.i;let e=this.p;for(;e!==this.h;){let t=e;for(;t.B!==this.h&&t.l===t.B.l;)t=t.B,this.i-=1;e.B=t.B,e.B.L=e,e=e.B}return this.i}sort(e){if(this.i<=1)return;let t=[];this.forEach(function(e){t.push(e)}),t.sort(e);let r=this.p;t.forEach(function(e){r.l=e,r=r.B})}merge(e){let t=this;if(0===this.i)e.forEach(function(e){t.pushBack(e)});else{let r=this.p;e.forEach(function(e){for(;r!==t.h&&r.l<=e;)r=r.B;t.G(e,r.L)})}return this.i}forEach(e){let t=this.p,r=0;for(;t!==this.h;)e(t.l,r++,this),t=t.B}[Symbol.iterator](){return(function*(){if(0===this.i)return;let e=this.p;for(;e!==this.h;)yield e.l,e=e.B}).bind(this)()}};t.default=LinkList},98050:(e,t,r)=>{"use strict";Object.defineProperty(t,"t",{value:!0}),t.default=void 0;var i=_interopRequireDefault(r(66830)),s=r(15662);function _interopRequireDefault(e){return e&&e.t?e:{default:e}}let VectorIterator=class VectorIterator extends s.RandomIterator{constructor(e,t,r){super(e,r),this.container=t}copy(){return new VectorIterator(this.o,this.container,this.iteratorType)}};let Vector=class Vector extends i.default{constructor(e=[],t=!0){if(super(),Array.isArray(e))this.J=t?[...e]:e,this.i=e.length;else{this.J=[];let t=this;e.forEach(function(e){t.pushBack(e)})}}clear(){this.i=0,this.J.length=0}begin(){return new VectorIterator(0,this)}end(){return new VectorIterator(this.i,this)}rBegin(){return new VectorIterator(this.i-1,this,1)}rEnd(){return new VectorIterator(-1,this,1)}front(){return this.J[0]}back(){return this.J[this.i-1]}getElementByPos(e){if(e<0||e>this.i-1)throw RangeError();return this.J[e]}eraseElementByPos(e){if(e<0||e>this.i-1)throw RangeError();return this.J.splice(e,1),this.i-=1,this.i}eraseElementByValue(e){let t=0;for(let r=0;r<this.i;++r)this.J[r]!==e&&(this.J[t++]=this.J[r]);return this.i=this.J.length=t,this.i}eraseElementByIterator(e){let t=e.o;return e=e.next(),this.eraseElementByPos(t),e}pushBack(e){return this.J.push(e),this.i+=1,this.i}popBack(){if(0!==this.i)return this.i-=1,this.J.pop()}setElementByPos(e,t){if(e<0||e>this.i-1)throw RangeError();this.J[e]=t}insert(e,t,r=1){if(e<0||e>this.i)throw RangeError();return this.J.splice(e,0,...Array(r).fill(t)),this.i+=r,this.i}find(e){for(let t=0;t<this.i;++t)if(this.J[t]===e)return new VectorIterator(t,this);return this.end()}reverse(){this.J.reverse()}unique(){let e=1;for(let t=1;t<this.i;++t)this.J[t]!==this.J[t-1]&&(this.J[e++]=this.J[t]);return this.i=this.J.length=e,this.i}sort(e){this.J.sort(e)}forEach(e){for(let t=0;t<this.i;++t)e(this.J[t],t,this)}[Symbol.iterator](){return(function*(){yield*this.J}).bind(this)()}};t.default=Vector},68381:(e,t,r)=>{"use strict";Object.defineProperty(t,"t",{value:!0}),t.default=void 0;var i=r(58083),s=r(86850);let TreeIterator=class TreeIterator extends i.ContainerIterator{constructor(e,t,r){super(r),this.o=e,this.h=t,0===this.iteratorType?(this.pre=function(){return this.o===this.h.U&&(0,s.throwIteratorAccessError)(),this.o=this.o.L(),this},this.next=function(){return this.o===this.h&&(0,s.throwIteratorAccessError)(),this.o=this.o.B(),this}):(this.pre=function(){return this.o===this.h.W&&(0,s.throwIteratorAccessError)(),this.o=this.o.B(),this},this.next=function(){return this.o===this.h&&(0,s.throwIteratorAccessError)(),this.o=this.o.L(),this})}get index(){let e=this.o,t=this.h.tt;if(e===this.h)return t?t.rt-1:0;let r=0;for(e.U&&(r+=e.U.rt);e!==t;){let t=e.tt;e===t.W&&(r+=1,t.U&&(r+=t.U.rt)),e=t}return r}};t.default=TreeIterator},71003:(e,t)=>{"use strict";Object.defineProperty(t,"t",{value:!0}),t.TreeNodeEnableIndex=t.TreeNode=void 0;let TreeNode=class TreeNode{constructor(e,t){this.ee=1,this.u=void 0,this.l=void 0,this.U=void 0,this.W=void 0,this.tt=void 0,this.u=e,this.l=t}L(){let e=this;if(1===e.ee&&e.tt.tt===e)e=e.W;else if(e.U)for(e=e.U;e.W;)e=e.W;else{let t=e.tt;for(;t.U===e;)t=(e=t).tt;e=t}return e}B(){let e=this;if(e.W){for(e=e.W;e.U;)e=e.U;return e}{let t=e.tt;for(;t.W===e;)t=(e=t).tt;return e.W!==t?t:e}}te(){let e=this.tt,t=this.W,r=t.U;return e.tt===this?e.tt=t:e.U===this?e.U=t:e.W=t,t.tt=e,t.U=this,this.tt=t,this.W=r,r&&(r.tt=this),t}se(){let e=this.tt,t=this.U,r=t.W;return e.tt===this?e.tt=t:e.U===this?e.U=t:e.W=t,t.tt=e,t.W=this,this.tt=t,this.U=r,r&&(r.tt=this),t}};t.TreeNode=TreeNode;let TreeNodeEnableIndex=class TreeNodeEnableIndex extends TreeNode{constructor(){super(...arguments),this.rt=1}te(){let e=super.te();return this.ie(),e.ie(),e}se(){let e=super.se();return this.ie(),e.ie(),e}ie(){this.rt=1,this.U&&(this.rt+=this.U.rt),this.W&&(this.rt+=this.W.rt)}};t.TreeNodeEnableIndex=TreeNodeEnableIndex},26910:(e,t,r)=>{"use strict";Object.defineProperty(t,"t",{value:!0}),t.default=void 0;var i=r(71003),s=r(58083),n=r(86850);let TreeContainer=class TreeContainer extends s.Container{constructor(e=function(e,t){return e<t?-1:e>t?1:0},t=!1){super(),this.Y=void 0,this.v=e,t?(this.re=i.TreeNodeEnableIndex,this.M=function(e,t,r){let i=this.ne(e,t,r);if(i){let e=i.tt;for(;e!==this.h;)e.rt+=1,e=e.tt;let t=this.he(i);if(t){let{parentNode:e,grandParent:r,curNode:i}=t;e.ie(),r.ie(),i.ie()}}return this.i},this.V=function(e){let t=this.fe(e);for(;t!==this.h;)t.rt-=1,t=t.tt}):(this.re=i.TreeNode,this.M=function(e,t,r){let i=this.ne(e,t,r);return i&&this.he(i),this.i},this.V=this.fe),this.h=new this.re}X(e,t){let r=this.h;for(;e;){let i=this.v(e.u,t);if(i<0)e=e.W;else{if(!(i>0))return e;r=e,e=e.U}}return r}Z(e,t){let r=this.h;for(;e;){let i=this.v(e.u,t);i<=0?e=e.W:(r=e,e=e.U)}return r}$(e,t){let r=this.h;for(;e;){let i=this.v(e.u,t);if(i<0)r=e,e=e.W;else{if(!(i>0))return e;e=e.U}}return r}rr(e,t){let r=this.h;for(;e;){let i=this.v(e.u,t);i<0?(r=e,e=e.W):e=e.U}return r}ue(e){for(;;){let t=e.tt;if(t===this.h)return;if(1===e.ee){e.ee=0;return}if(e===t.U){let r=t.W;if(1===r.ee)r.ee=0,t.ee=1,t===this.Y?this.Y=t.te():t.te();else{if(r.W&&1===r.W.ee){r.ee=t.ee,t.ee=0,r.W.ee=0,t===this.Y?this.Y=t.te():t.te();return}r.U&&1===r.U.ee?(r.ee=1,r.U.ee=0,r.se()):(r.ee=1,e=t)}}else{let r=t.U;if(1===r.ee)r.ee=0,t.ee=1,t===this.Y?this.Y=t.se():t.se();else{if(r.U&&1===r.U.ee){r.ee=t.ee,t.ee=0,r.U.ee=0,t===this.Y?this.Y=t.se():t.se();return}r.W&&1===r.W.ee?(r.ee=1,r.W.ee=0,r.te()):(r.ee=1,e=t)}}}}fe(e){if(1===this.i)return this.clear(),this.h;let t=e;for(;t.U||t.W;){if(t.W)for(t=t.W;t.U;)t=t.U;else t=t.U;[e.u,t.u]=[t.u,e.u],[e.l,t.l]=[t.l,e.l],e=t}this.h.U===t?this.h.U=t.tt:this.h.W===t&&(this.h.W=t.tt),this.ue(t);let r=t.tt;return t===r.U?r.U=void 0:r.W=void 0,this.i-=1,this.Y.ee=0,r}oe(e,t){if(void 0===e)return!1;let r=this.oe(e.U,t);return!!(r||t(e))||this.oe(e.W,t)}he(e){for(;;){let t=e.tt;if(0===t.ee)return;let r=t.tt;if(t===r.U){let i=r.W;if(i&&1===i.ee){if(i.ee=t.ee=0,r===this.Y)return;r.ee=1,e=r;continue}if(e===t.W){if(e.ee=0,e.U&&(e.U.tt=t),e.W&&(e.W.tt=r),t.W=e.U,r.U=e.W,e.U=t,e.W=r,r===this.Y)this.Y=e,this.h.tt=e;else{let t=r.tt;t.U===r?t.U=e:t.W=e}return e.tt=r.tt,t.tt=e,r.tt=e,r.ee=1,{parentNode:t,grandParent:r,curNode:e}}t.ee=0,r===this.Y?this.Y=r.se():r.se(),r.ee=1}else{let i=r.U;if(i&&1===i.ee){if(i.ee=t.ee=0,r===this.Y)return;r.ee=1,e=r;continue}if(e===t.U){if(e.ee=0,e.U&&(e.U.tt=r),e.W&&(e.W.tt=t),r.W=e.U,t.U=e.W,e.U=r,e.W=t,r===this.Y)this.Y=e,this.h.tt=e;else{let t=r.tt;t.U===r?t.U=e:t.W=e}return e.tt=r.tt,t.tt=e,r.tt=e,r.ee=1,{parentNode:t,grandParent:r,curNode:e}}t.ee=0,r===this.Y?this.Y=r.te():r.te(),r.ee=1}return}}ne(e,t,r){let i;if(void 0===this.Y){this.i+=1,this.Y=new this.re(e,t),this.Y.ee=0,this.Y.tt=this.h,this.h.tt=this.Y,this.h.U=this.Y,this.h.W=this.Y;return}let s=this.h.U,n=this.v(s.u,e);if(0===n){s.l=t;return}if(n>0)s.U=new this.re(e,t),s.U.tt=s,i=s.U,this.h.U=i;else{let s=this.h.W,n=this.v(s.u,e);if(0===n){s.l=t;return}if(n<0)s.W=new this.re(e,t),s.W.tt=s,i=s.W,this.h.W=i;else{if(void 0!==r){let s=r.o;if(s!==this.h){let r=this.v(s.u,e);if(0===r){s.l=t;return}if(r>0){let r=s.L(),n=this.v(r.u,e);if(0===n){r.l=t;return}n<0&&(i=new this.re(e,t),void 0===r.W?(r.W=i,i.tt=r):(s.U=i,i.tt=s))}}}if(void 0===i)for(i=this.Y;;){let r=this.v(i.u,e);if(r>0){if(void 0===i.U){i.U=new this.re(e,t),i.U.tt=i,i=i.U;break}i=i.U}else if(r<0){if(void 0===i.W){i.W=new this.re(e,t),i.W.tt=i,i=i.W;break}i=i.W}else{i.l=t;return}}}}return this.i+=1,i}I(e,t){for(;e;){let r=this.v(e.u,t);if(r<0)e=e.W;else{if(!(r>0))return e;e=e.U}}return e||this.h}clear(){this.i=0,this.Y=void 0,this.h.tt=void 0,this.h.U=this.h.W=void 0}updateKeyByIterator(e,t){let r=e.o;if(r===this.h&&(0,n.throwIteratorAccessError)(),1===this.i)return r.u=t,!0;if(r===this.h.U)return this.v(r.B().u,t)>0&&(r.u=t,!0);if(r===this.h.W)return 0>this.v(r.L().u,t)&&(r.u=t,!0);let i=r.L().u;if(this.v(i,t)>=0)return!1;let s=r.B().u;return!(0>=this.v(s,t))&&(r.u=t,!0)}eraseElementByPos(e){if(e<0||e>this.i-1)throw RangeError();let t=0,r=this;return this.oe(this.Y,function(i){return e===t?(r.V(i),!0):(t+=1,!1)}),this.i}eraseElementByKey(e){if(0===this.i)return!1;let t=this.I(this.Y,e);return t!==this.h&&(this.V(t),!0)}eraseElementByIterator(e){let t=e.o;t===this.h&&(0,n.throwIteratorAccessError)();let r=void 0===t.W,i=0===e.iteratorType;return i?r&&e.next():r&&void 0!==t.U||e.next(),this.V(t),e}forEach(e){let t=0;for(let r of this)e(r,t++,this)}getElementByPos(e){let t;if(e<0||e>this.i-1)throw RangeError();let r=0;for(let i of this){if(r===e){t=i;break}r+=1}return t}getHeight(){if(0===this.i)return 0;let traversal=function(e){return e?Math.max(traversal(e.U),traversal(e.W))+1:0};return traversal(this.Y)}};t.default=TreeContainer},99884:(e,t,r)=>{"use strict";Object.defineProperty(t,"t",{value:!0}),t.default=void 0;var i=_interopRequireDefault(r(26910)),s=_interopRequireDefault(r(68381)),n=r(86850);function _interopRequireDefault(e){return e&&e.t?e:{default:e}}let OrderedMapIterator=class OrderedMapIterator extends s.default{constructor(e,t,r,i){super(e,t,i),this.container=r}get pointer(){this.o===this.h&&(0,n.throwIteratorAccessError)();let e=this;return new Proxy([],{get:(t,r)=>"0"===r?e.o.u:"1"===r?e.o.l:void 0,set(t,r,i){if("1"!==r)throw TypeError("props must be 1");return e.o.l=i,!0}})}copy(){return new OrderedMapIterator(this.o,this.h,this.container,this.iteratorType)}};let OrderedMap=class OrderedMap extends i.default{constructor(e=[],t,r){super(t,r);let i=this;e.forEach(function(e){i.setElement(e[0],e[1])})}*K(e){void 0!==e&&(yield*this.K(e.U),yield[e.u,e.l],yield*this.K(e.W))}begin(){return new OrderedMapIterator(this.h.U||this.h,this.h,this)}end(){return new OrderedMapIterator(this.h,this.h,this)}rBegin(){return new OrderedMapIterator(this.h.W||this.h,this.h,this,1)}rEnd(){return new OrderedMapIterator(this.h,this.h,this,1)}front(){if(0===this.i)return;let e=this.h.U;return[e.u,e.l]}back(){if(0===this.i)return;let e=this.h.W;return[e.u,e.l]}lowerBound(e){let t=this.X(this.Y,e);return new OrderedMapIterator(t,this.h,this)}upperBound(e){let t=this.Z(this.Y,e);return new OrderedMapIterator(t,this.h,this)}reverseLowerBound(e){let t=this.$(this.Y,e);return new OrderedMapIterator(t,this.h,this)}reverseUpperBound(e){let t=this.rr(this.Y,e);return new OrderedMapIterator(t,this.h,this)}setElement(e,t,r){return this.M(e,t,r)}find(e){let t=this.I(this.Y,e);return new OrderedMapIterator(t,this.h,this)}getElementByKey(e){let t=this.I(this.Y,e);return t.l}union(e){let t=this;return e.forEach(function(e){t.setElement(e[0],e[1])}),this.i}[Symbol.iterator](){return this.K(this.Y)}};t.default=OrderedMap},14929:(e,t,r)=>{"use strict";Object.defineProperty(t,"t",{value:!0}),t.default=void 0;var i=_interopRequireDefault(r(26910)),s=_interopRequireDefault(r(68381)),n=r(86850);function _interopRequireDefault(e){return e&&e.t?e:{default:e}}let OrderedSetIterator=class OrderedSetIterator extends s.default{constructor(e,t,r,i){super(e,t,i),this.container=r}get pointer(){return this.o===this.h&&(0,n.throwIteratorAccessError)(),this.o.u}copy(){return new OrderedSetIterator(this.o,this.h,this.container,this.iteratorType)}};let OrderedSet=class OrderedSet extends i.default{constructor(e=[],t,r){super(t,r);let i=this;e.forEach(function(e){i.insert(e)})}*K(e){void 0!==e&&(yield*this.K(e.U),yield e.u,yield*this.K(e.W))}begin(){return new OrderedSetIterator(this.h.U||this.h,this.h,this)}end(){return new OrderedSetIterator(this.h,this.h,this)}rBegin(){return new OrderedSetIterator(this.h.W||this.h,this.h,this,1)}rEnd(){return new OrderedSetIterator(this.h,this.h,this,1)}front(){return this.h.U?this.h.U.u:void 0}back(){return this.h.W?this.h.W.u:void 0}insert(e,t){return this.M(e,void 0,t)}find(e){let t=this.I(this.Y,e);return new OrderedSetIterator(t,this.h,this)}lowerBound(e){let t=this.X(this.Y,e);return new OrderedSetIterator(t,this.h,this)}upperBound(e){let t=this.Z(this.Y,e);return new OrderedSetIterator(t,this.h,this)}reverseLowerBound(e){let t=this.$(this.Y,e);return new OrderedSetIterator(t,this.h,this)}reverseUpperBound(e){let t=this.rr(this.Y,e);return new OrderedSetIterator(t,this.h,this)}union(e){let t=this;return e.forEach(function(e){t.insert(e)}),this.i}[Symbol.iterator](){return this.K(this.Y)}};t.default=OrderedSet},82925:(e,t,r)=>{"use strict";Object.defineProperty(t,"hU",{enumerable:!0,get:function(){return i.default}}),_interopRequireDefault(r(91476)),_interopRequireDefault(r(87537)),_interopRequireDefault(r(1306)),_interopRequireDefault(r(98050)),_interopRequireDefault(r(23896)),_interopRequireDefault(r(68681));var i=_interopRequireDefault(r(14929));function _interopRequireDefault(e){return e&&e.t?e:{default:e}}_interopRequireDefault(r(99884)),_interopRequireDefault(r(50407)),_interopRequireDefault(r(40672))},52115:(e,t)=>{"use strict";function checkObject(e){let t=typeof e;return"object"===t&&null!==e||"function"===t}Object.defineProperty(t,"t",{value:!0}),t.default=checkObject},86850:(e,t)=>{"use strict";function throwIteratorAccessError(){throw RangeError("Iterator access denied!")}Object.defineProperty(t,"t",{value:!0}),t.throwIteratorAccessError=throwIteratorAccessError},70615:function(e,t){(function(){function BigInteger(e,t,r){null!=e&&("number"==typeof e?this.fromNumber(e,t,r):null==t&&"string"!=typeof e?this.fromString(e,256):this.fromString(e,t))}function nbi(){return new BigInteger(null)}function am1(e,t,r,i,s,n){for(;--n>=0;){var o=t*this[e++]+r[i]+s;s=Math.floor(o/67108864),r[i++]=67108863&o}return s}function am2(e,t,r,i,s,n){for(var o=32767&t,a=t>>15;--n>=0;){var l=32767&this[e],h=this[e++]>>15,u=a*l+h*o;s=((l=o*l+((32767&u)<<15)+r[i]+(1073741823&s))>>>30)+(u>>>15)+a*h+(s>>>30),r[i++]=1073741823&l}return s}function am3(e,t,r,i,s,n){for(var o=16383&t,a=t>>14;--n>=0;){var l=16383&this[e],h=this[e++]>>14,u=a*l+h*o;s=((l=o*l+((16383&u)<<14)+r[i]+s)>>28)+(u>>14)+a*h,r[i++]=268435455&l}return s}var t="undefined"!=typeof navigator;t&&"Microsoft Internet Explorer"==navigator.appName?(BigInteger.prototype.am=am2,n=30):t&&"Netscape"!=navigator.appName?(BigInteger.prototype.am=am1,n=26):(BigInteger.prototype.am=am3,n=28),BigInteger.prototype.DB=n,BigInteger.prototype.DM=(1<<n)-1,BigInteger.prototype.DV=1<<n,BigInteger.prototype.FV=4503599627370496,BigInteger.prototype.F1=52-n,BigInteger.prototype.F2=2*n-52;var r=[];for(a=0,o=48;a<=9;++a)r[o++]=a;for(a=10,o=97;a<36;++a)r[o++]=a;for(a=10,o=65;a<36;++a)r[o++]=a;function int2char(e){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(e)}function intAt(e,t){var i=r[e.charCodeAt(t)];return null==i?-1:i}function bnpCopyTo(e){for(var t=this.t-1;t>=0;--t)e[t]=this[t];e.t=this.t,e.s=this.s}function bnpFromInt(e){this.t=1,this.s=e<0?-1:0,e>0?this[0]=e:e<-1?this[0]=e+this.DV:this.t=0}function nbv(e){var t=nbi();return t.fromInt(e),t}function bnpFromString(e,t){if(16==t)r=4;else if(8==t)r=3;else if(256==t)r=8;else if(2==t)r=1;else if(32==t)r=5;else if(4==t)r=2;else{this.fromRadix(e,t);return}this.t=0,this.s=0;for(var r,i=e.length,s=!1,n=0;--i>=0;){var o=8==r?255&e[i]:intAt(e,i);if(o<0){"-"==e.charAt(i)&&(s=!0);continue}s=!1,0==n?this[this.t++]=o:n+r>this.DB?(this[this.t-1]|=(o&(1<<this.DB-n)-1)<<n,this[this.t++]=o>>this.DB-n):this[this.t-1]|=o<<n,(n+=r)>=this.DB&&(n-=this.DB)}8==r&&(128&e[0])!=0&&(this.s=-1,n>0&&(this[this.t-1]|=(1<<this.DB-n)-1<<n)),this.clamp(),s&&BigInteger.ZERO.subTo(this,this)}function bnpClamp(){for(var e=this.s&this.DM;this.t>0&&this[this.t-1]==e;)--this.t}function bnToString(e){if(this.s<0)return"-"+this.negate().toString(e);if(16==e)t=4;else if(8==e)t=3;else if(2==e)t=1;else if(32==e)t=5;else{if(4!=e)return this.toRadix(e);t=2}var t,r,i=(1<<t)-1,s=!1,n="",o=this.t,a=this.DB-o*this.DB%t;if(o-- >0)for(a<this.DB&&(r=this[o]>>a)>0&&(s=!0,n=int2char(r));o>=0;)a<t?r=(this[o]&(1<<a)-1)<<t-a|this[--o]>>(a+=this.DB-t):(r=this[o]>>(a-=t)&i,a<=0&&(a+=this.DB,--o)),r>0&&(s=!0),s&&(n+=int2char(r));return s?n:"0"}function bnNegate(){var e=nbi();return BigInteger.ZERO.subTo(this,e),e}function bnAbs(){return this.s<0?this.negate():this}function bnCompareTo(e){var t=this.s-e.s;if(0!=t)return t;var r=this.t;if(0!=(t=r-e.t))return this.s<0?-t:t;for(;--r>=0;)if(0!=(t=this[r]-e[r]))return t;return 0}function nbits(e){var t,r=1;return 0!=(t=e>>>16)&&(e=t,r+=16),0!=(t=e>>8)&&(e=t,r+=8),0!=(t=e>>4)&&(e=t,r+=4),0!=(t=e>>2)&&(e=t,r+=2),0!=(t=e>>1)&&(e=t,r+=1),r}function bnBitLength(){return this.t<=0?0:this.DB*(this.t-1)+nbits(this[this.t-1]^this.s&this.DM)}function bnpDLShiftTo(e,t){var r;for(r=this.t-1;r>=0;--r)t[r+e]=this[r];for(r=e-1;r>=0;--r)t[r]=0;t.t=this.t+e,t.s=this.s}function bnpDRShiftTo(e,t){for(var r=e;r<this.t;++r)t[r-e]=this[r];t.t=Math.max(this.t-e,0),t.s=this.s}function bnpLShiftTo(e,t){var r,i=e%this.DB,s=this.DB-i,n=(1<<s)-1,o=Math.floor(e/this.DB),a=this.s<<i&this.DM;for(r=this.t-1;r>=0;--r)t[r+o+1]=this[r]>>s|a,a=(this[r]&n)<<i;for(r=o-1;r>=0;--r)t[r]=0;t[o]=a,t.t=this.t+o+1,t.s=this.s,t.clamp()}function bnpRShiftTo(e,t){t.s=this.s;var r=Math.floor(e/this.DB);if(r>=this.t){t.t=0;return}var i=e%this.DB,s=this.DB-i,n=(1<<i)-1;t[0]=this[r]>>i;for(var o=r+1;o<this.t;++o)t[o-r-1]|=(this[o]&n)<<s,t[o-r]=this[o]>>i;i>0&&(t[this.t-r-1]|=(this.s&n)<<s),t.t=this.t-r,t.clamp()}function bnpSubTo(e,t){for(var r=0,i=0,s=Math.min(e.t,this.t);r<s;)i+=this[r]-e[r],t[r++]=i&this.DM,i>>=this.DB;if(e.t<this.t){for(i-=e.s;r<this.t;)i+=this[r],t[r++]=i&this.DM,i>>=this.DB;i+=this.s}else{for(i+=this.s;r<e.t;)i-=e[r],t[r++]=i&this.DM,i>>=this.DB;i-=e.s}t.s=i<0?-1:0,i<-1?t[r++]=this.DV+i:i>0&&(t[r++]=i),t.t=r,t.clamp()}function bnpMultiplyTo(e,t){var r=this.abs(),i=e.abs(),s=r.t;for(t.t=s+i.t;--s>=0;)t[s]=0;for(s=0;s<i.t;++s)t[s+r.t]=r.am(0,i[s],t,s,0,r.t);t.s=0,t.clamp(),this.s!=e.s&&BigInteger.ZERO.subTo(t,t)}function bnpSquareTo(e){for(var t=this.abs(),r=e.t=2*t.t;--r>=0;)e[r]=0;for(r=0;r<t.t-1;++r){var i=t.am(r,t[r],e,2*r,0,1);(e[r+t.t]+=t.am(r+1,2*t[r],e,2*r+1,i,t.t-r-1))>=t.DV&&(e[r+t.t]-=t.DV,e[r+t.t+1]=1)}e.t>0&&(e[e.t-1]+=t.am(r,t[r],e,2*r,0,1)),e.s=0,e.clamp()}function bnpDivRemTo(e,t,r){var i=e.abs();if(!(i.t<=0)){var s=this.abs();if(s.t<i.t){null!=t&&t.fromInt(0),null!=r&&this.copyTo(r);return}null==r&&(r=nbi());var n=nbi(),o=this.s,a=e.s,l=this.DB-nbits(i[i.t-1]);l>0?(i.lShiftTo(l,n),s.lShiftTo(l,r)):(i.copyTo(n),s.copyTo(r));var h=n.t,u=n[h-1];if(0!=u){var c=u*(1<<this.F1)+(h>1?n[h-2]>>this.F2:0),d=this.FV/c,p=(1<<this.F1)/c,g=1<<this.F2,b=r.t,m=b-h,_=null==t?nbi():t;for(n.dlShiftTo(m,_),r.compareTo(_)>=0&&(r[r.t++]=1,r.subTo(_,r)),BigInteger.ONE.dlShiftTo(h,_),_.subTo(n,n);n.t<h;)n[n.t++]=0;for(;--m>=0;){var y=r[--b]==u?this.DM:Math.floor(r[b]*d+(r[b-1]+g)*p);if((r[b]+=n.am(0,y,r,m,0,h))<y)for(n.dlShiftTo(m,_),r.subTo(_,r);r[b]<--y;)r.subTo(_,r)}null!=t&&(r.drShiftTo(h,t),o!=a&&BigInteger.ZERO.subTo(t,t)),r.t=h,r.clamp(),l>0&&r.rShiftTo(l,r),o<0&&BigInteger.ZERO.subTo(r,r)}}}function bnMod(e){var t=nbi();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(BigInteger.ZERO)>0&&e.subTo(t,t),t}function Classic(e){this.m=e}function cConvert(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e}function cRevert(e){return e}function cReduce(e){e.divRemTo(this.m,null,e)}function cMulTo(e,t,r){e.multiplyTo(t,r),this.reduce(r)}function cSqrTo(e,t){e.squareTo(t),this.reduce(t)}function bnpInvDigit(){if(this.t<1)return 0;var e=this[0];if((1&e)==0)return 0;var t=3&e;return(t=(t=(t=(t=t*(2-(15&e)*t)&15)*(2-(255&e)*t)&255)*(2-((65535&e)*t&65535))&65535)*(2-e*t%this.DV)%this.DV)>0?this.DV-t:-t}function Montgomery(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function montConvert(e){var t=nbi();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(BigInteger.ZERO)>0&&this.m.subTo(t,t),t}function montRevert(e){var t=nbi();return e.copyTo(t),this.reduce(t),t}function montReduce(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(var t=0;t<this.m.t;++t){var r=32767&e[t],i=r*this.mpl+((r*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(r=t+this.m.t,e[r]+=this.m.am(0,i,e,t,0,this.m.t);e[r]>=e.DV;)e[r]-=e.DV,e[++r]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)}function montSqrTo(e,t){e.squareTo(t),this.reduce(t)}function montMulTo(e,t,r){e.multiplyTo(t,r),this.reduce(r)}function bnpIsEven(){return(this.t>0?1&this[0]:this.s)==0}function bnpExp(e,t){if(e>4294967295||e<1)return BigInteger.ONE;var r=nbi(),i=nbi(),s=t.convert(this),n=nbits(e)-1;for(s.copyTo(r);--n>=0;)if(t.sqrTo(r,i),(e&1<<n)>0)t.mulTo(i,s,r);else{var o=r;r=i,i=o}return t.revert(r)}function bnModPowInt(e,t){var r;return r=e<256||t.isEven()?new Classic(t):new Montgomery(t),this.exp(e,r)}function bnClone(){var e=nbi();return this.copyTo(e),e}function bnIntValue(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return -1}else if(1==this.t)return this[0];else if(0==this.t)return 0;return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function bnByteValue(){return 0==this.t?this.s:this[0]<<24>>24}function bnShortValue(){return 0==this.t?this.s:this[0]<<16>>16}function bnpChunkSize(e){return Math.floor(Math.LN2*this.DB/Math.log(e))}function bnSigNum(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1}function bnpToRadix(e){if(null==e&&(e=10),0==this.signum()||e<2||e>36)return"0";var t=this.chunkSize(e),r=Math.pow(e,t),i=nbv(r),s=nbi(),n=nbi(),o="";for(this.divRemTo(i,s,n);s.signum()>0;)o=(r+n.intValue()).toString(e).substr(1)+o,s.divRemTo(i,s,n);return n.intValue().toString(e)+o}function bnpFromRadix(e,t){this.fromInt(0),null==t&&(t=10);for(var r=this.chunkSize(t),i=Math.pow(t,r),s=!1,n=0,o=0,a=0;a<e.length;++a){var l=intAt(e,a);if(l<0){"-"==e.charAt(a)&&0==this.signum()&&(s=!0);continue}o=t*o+l,++n>=r&&(this.dMultiply(i),this.dAddOffset(o,0),n=0,o=0)}n>0&&(this.dMultiply(Math.pow(t,n)),this.dAddOffset(o,0)),s&&BigInteger.ZERO.subTo(this,this)}function bnpFromNumber(e,t,r){if("number"==typeof t){if(e<2)this.fromInt(1);else for(this.fromNumber(e,r),this.testBit(e-1)||this.bitwiseTo(BigInteger.ONE.shiftLeft(e-1),op_or,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(t);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(BigInteger.ONE.shiftLeft(e-1),this)}else{var i=[],s=7&e;i.length=(e>>3)+1,t.nextBytes(i),s>0?i[0]&=(1<<s)-1:i[0]=0,this.fromString(i,256)}}function bnToByteArray(){var e=this.t,t=[];t[0]=this.s;var r,i=this.DB-e*this.DB%8,s=0;if(e-- >0)for(i<this.DB&&(r=this[e]>>i)!=(this.s&this.DM)>>i&&(t[s++]=r|this.s<<this.DB-i);e>=0;)i<8?r=(this[e]&(1<<i)-1)<<8-i|this[--e]>>(i+=this.DB-8):(r=this[e]>>(i-=8)&255,i<=0&&(i+=this.DB,--e)),(128&r)!=0&&(r|=-256),0==s&&(128&this.s)!=(128&r)&&++s,(s>0||r!=this.s)&&(t[s++]=r);return t}function bnEquals(e){return 0==this.compareTo(e)}function bnMin(e){return 0>this.compareTo(e)?this:e}function bnMax(e){return this.compareTo(e)>0?this:e}function bnpBitwiseTo(e,t,r){var i,s,n=Math.min(e.t,this.t);for(i=0;i<n;++i)r[i]=t(this[i],e[i]);if(e.t<this.t){for(s=e.s&this.DM,i=n;i<this.t;++i)r[i]=t(this[i],s);r.t=this.t}else{for(s=this.s&this.DM,i=n;i<e.t;++i)r[i]=t(s,e[i]);r.t=e.t}r.s=t(this.s,e.s),r.clamp()}function op_and(e,t){return e&t}function bnAnd(e){var t=nbi();return this.bitwiseTo(e,op_and,t),t}function op_or(e,t){return e|t}function bnOr(e){var t=nbi();return this.bitwiseTo(e,op_or,t),t}function op_xor(e,t){return e^t}function bnXor(e){var t=nbi();return this.bitwiseTo(e,op_xor,t),t}function op_andnot(e,t){return e&~t}function bnAndNot(e){var t=nbi();return this.bitwiseTo(e,op_andnot,t),t}function bnNot(){for(var e=nbi(),t=0;t<this.t;++t)e[t]=this.DM&~this[t];return e.t=this.t,e.s=~this.s,e}function bnShiftLeft(e){var t=nbi();return e<0?this.rShiftTo(-e,t):this.lShiftTo(e,t),t}function bnShiftRight(e){var t=nbi();return e<0?this.lShiftTo(-e,t):this.rShiftTo(e,t),t}function lbit(e){if(0==e)return -1;var t=0;return(65535&e)==0&&(e>>=16,t+=16),(255&e)==0&&(e>>=8,t+=8),(15&e)==0&&(e>>=4,t+=4),(3&e)==0&&(e>>=2,t+=2),(1&e)==0&&++t,t}function bnGetLowestSetBit(){for(var e=0;e<this.t;++e)if(0!=this[e])return e*this.DB+lbit(this[e]);return this.s<0?this.t*this.DB:-1}function cbit(e){for(var t=0;0!=e;)e&=e-1,++t;return t}function bnBitCount(){for(var e=0,t=this.s&this.DM,r=0;r<this.t;++r)e+=cbit(this[r]^t);return e}function bnTestBit(e){var t=Math.floor(e/this.DB);return t>=this.t?0!=this.s:(this[t]&1<<e%this.DB)!=0}function bnpChangeBit(e,t){var r=BigInteger.ONE.shiftLeft(e);return this.bitwiseTo(r,t,r),r}function bnSetBit(e){return this.changeBit(e,op_or)}function bnClearBit(e){return this.changeBit(e,op_andnot)}function bnFlipBit(e){return this.changeBit(e,op_xor)}function bnpAddTo(e,t){for(var r=0,i=0,s=Math.min(e.t,this.t);r<s;)i+=this[r]+e[r],t[r++]=i&this.DM,i>>=this.DB;if(e.t<this.t){for(i+=e.s;r<this.t;)i+=this[r],t[r++]=i&this.DM,i>>=this.DB;i+=this.s}else{for(i+=this.s;r<e.t;)i+=e[r],t[r++]=i&this.DM,i>>=this.DB;i+=e.s}t.s=i<0?-1:0,i>0?t[r++]=i:i<-1&&(t[r++]=this.DV+i),t.t=r,t.clamp()}function bnAdd(e){var t=nbi();return this.addTo(e,t),t}function bnSubtract(e){var t=nbi();return this.subTo(e,t),t}function bnMultiply(e){var t=nbi();return this.multiplyTo(e,t),t}function bnSquare(){var e=nbi();return this.squareTo(e),e}function bnDivide(e){var t=nbi();return this.divRemTo(e,t,null),t}function bnRemainder(e){var t=nbi();return this.divRemTo(e,null,t),t}function bnDivideAndRemainder(e){var t=nbi(),r=nbi();return this.divRemTo(e,t,r),[t,r]}function bnpDMultiply(e){this[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()}function bnpDAddOffset(e,t){if(0!=e){for(;this.t<=t;)this[this.t++]=0;for(this[t]+=e;this[t]>=this.DV;)this[t]-=this.DV,++t>=this.t&&(this[this.t++]=0),++this[t]}}function NullExp(){}function nNop(e){return e}function nMulTo(e,t,r){e.multiplyTo(t,r)}function nSqrTo(e,t){e.squareTo(t)}function bnPow(e){return this.exp(e,new NullExp)}function bnpMultiplyLowerTo(e,t,r){var i,s=Math.min(this.t+e.t,t);for(r.s=0,r.t=s;s>0;)r[--s]=0;for(i=r.t-this.t;s<i;++s)r[s+this.t]=this.am(0,e[s],r,s,0,this.t);for(i=Math.min(e.t,t);s<i;++s)this.am(0,e[s],r,s,0,t-s);r.clamp()}function bnpMultiplyUpperTo(e,t,r){--t;var i=r.t=this.t+e.t-t;for(r.s=0;--i>=0;)r[i]=0;for(i=Math.max(t-this.t,0);i<e.t;++i)r[this.t+i-t]=this.am(t-i,e[i],r,0,0,this.t+i-t);r.clamp(),r.drShiftTo(1,r)}function Barrett(e){this.r2=nbi(),this.q3=nbi(),BigInteger.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}function barrettConvert(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(0>e.compareTo(this.m))return e;var t=nbi();return e.copyTo(t),this.reduce(t),t}function barrettRevert(e){return e}function barrettReduce(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);0>e.compareTo(this.r2);)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;)e.subTo(this.m,e)}function barrettSqrTo(e,t){e.squareTo(t),this.reduce(t)}function barrettMulTo(e,t,r){e.multiplyTo(t,r),this.reduce(r)}function bnModPow(e,t){var r,i,s=e.bitLength(),n=nbv(1);if(s<=0)return n;r=s<18?1:s<48?3:s<144?4:s<768?5:6,i=s<8?new Classic(t):t.isEven()?new Barrett(t):new Montgomery(t);var o=[],a=3,l=r-1,h=(1<<r)-1;if(o[1]=i.convert(this),r>1){var u=nbi();for(i.sqrTo(o[1],u);a<=h;)o[a]=nbi(),i.mulTo(u,o[a-2],o[a]),a+=2}var c,d,p=e.t-1,g=!0,b=nbi();for(s=nbits(e[p])-1;p>=0;){for(s>=l?c=e[p]>>s-l&h:(c=(e[p]&(1<<s+1)-1)<<l-s,p>0&&(c|=e[p-1]>>this.DB+s-l)),a=r;(1&c)==0;)c>>=1,--a;if((s-=a)<0&&(s+=this.DB,--p),g)o[c].copyTo(n),g=!1;else{for(;a>1;)i.sqrTo(n,b),i.sqrTo(b,n),a-=2;a>0?i.sqrTo(n,b):(d=n,n=b,b=d),i.mulTo(b,o[c],n)}for(;p>=0&&(e[p]&1<<s)==0;)i.sqrTo(n,b),d=n,n=b,b=d,--s<0&&(s=this.DB-1,--p)}return i.revert(n)}function bnGCD(e){var t=this.s<0?this.negate():this.clone(),r=e.s<0?e.negate():e.clone();if(0>t.compareTo(r)){var i=t;t=r,r=i}var s=t.getLowestSetBit(),n=r.getLowestSetBit();if(n<0)return t;for(s<n&&(n=s),n>0&&(t.rShiftTo(n,t),r.rShiftTo(n,r));t.signum()>0;)(s=t.getLowestSetBit())>0&&t.rShiftTo(s,t),(s=r.getLowestSetBit())>0&&r.rShiftTo(s,r),t.compareTo(r)>=0?(t.subTo(r,t),t.rShiftTo(1,t)):(r.subTo(t,r),r.rShiftTo(1,r));return n>0&&r.lShiftTo(n,r),r}function bnpModInt(e){if(e<=0)return 0;var t=this.DV%e,r=this.s<0?e-1:0;if(this.t>0){if(0==t)r=this[0]%e;else for(var i=this.t-1;i>=0;--i)r=(t*r+this[i])%e}return r}function bnModInverse(e){var t=e.isEven();if(this.isEven()&&t||0==e.signum())return BigInteger.ZERO;for(var r=e.clone(),i=this.clone(),s=nbv(1),n=nbv(0),o=nbv(0),a=nbv(1);0!=r.signum();){for(;r.isEven();)r.rShiftTo(1,r),t?(s.isEven()&&n.isEven()||(s.addTo(this,s),n.subTo(e,n)),s.rShiftTo(1,s)):n.isEven()||n.subTo(e,n),n.rShiftTo(1,n);for(;i.isEven();)i.rShiftTo(1,i),t?(o.isEven()&&a.isEven()||(o.addTo(this,o),a.subTo(e,a)),o.rShiftTo(1,o)):a.isEven()||a.subTo(e,a),a.rShiftTo(1,a);r.compareTo(i)>=0?(r.subTo(i,r),t&&s.subTo(o,s),n.subTo(a,n)):(i.subTo(r,i),t&&o.subTo(s,o),a.subTo(n,a))}return 0!=i.compareTo(BigInteger.ONE)?BigInteger.ZERO:a.compareTo(e)>=0?a.subtract(e):0>a.signum()&&(a.addTo(e,a),0>a.signum())?a.add(e):a}Classic.prototype.convert=cConvert,Classic.prototype.revert=cRevert,Classic.prototype.reduce=cReduce,Classic.prototype.mulTo=cMulTo,Classic.prototype.sqrTo=cSqrTo,Montgomery.prototype.convert=montConvert,Montgomery.prototype.revert=montRevert,Montgomery.prototype.reduce=montReduce,Montgomery.prototype.mulTo=montMulTo,Montgomery.prototype.sqrTo=montSqrTo,BigInteger.prototype.copyTo=bnpCopyTo,BigInteger.prototype.fromInt=bnpFromInt,BigInteger.prototype.fromString=bnpFromString,BigInteger.prototype.clamp=bnpClamp,BigInteger.prototype.dlShiftTo=bnpDLShiftTo,BigInteger.prototype.drShiftTo=bnpDRShiftTo,BigInteger.prototype.lShiftTo=bnpLShiftTo,BigInteger.prototype.rShiftTo=bnpRShiftTo,BigInteger.prototype.subTo=bnpSubTo,BigInteger.prototype.multiplyTo=bnpMultiplyTo,BigInteger.prototype.squareTo=bnpSquareTo,BigInteger.prototype.divRemTo=bnpDivRemTo,BigInteger.prototype.invDigit=bnpInvDigit,BigInteger.prototype.isEven=bnpIsEven,BigInteger.prototype.exp=bnpExp,BigInteger.prototype.toString=bnToString,BigInteger.prototype.negate=bnNegate,BigInteger.prototype.abs=bnAbs,BigInteger.prototype.compareTo=bnCompareTo,BigInteger.prototype.bitLength=bnBitLength,BigInteger.prototype.mod=bnMod,BigInteger.prototype.modPowInt=bnModPowInt,BigInteger.ZERO=nbv(0),BigInteger.ONE=nbv(1),NullExp.prototype.convert=nNop,NullExp.prototype.revert=nNop,NullExp.prototype.mulTo=nMulTo,NullExp.prototype.sqrTo=nSqrTo,Barrett.prototype.convert=barrettConvert,Barrett.prototype.revert=barrettRevert,Barrett.prototype.reduce=barrettReduce,Barrett.prototype.mulTo=barrettMulTo,Barrett.prototype.sqrTo=barrettSqrTo;var i=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],s=67108864/i[i.length-1];function bnIsProbablePrime(e){var t,r=this.abs();if(1==r.t&&r[0]<=i[i.length-1]){for(t=0;t<i.length;++t)if(r[0]==i[t])return!0;return!1}if(r.isEven())return!1;for(t=1;t<i.length;){for(var n=i[t],o=t+1;o<i.length&&n<s;)n*=i[o++];for(n=r.modInt(n);t<o;)if(n%i[t++]==0)return!1}return r.millerRabin(e)}function bnpMillerRabin(e){var t=this.subtract(BigInteger.ONE),r=t.getLowestSetBit();if(r<=0)return!1;var s=t.shiftRight(r);(e=e+1>>1)>i.length&&(e=i.length);for(var n=nbi(),o=0;o<e;++o){n.fromInt(i[Math.floor(Math.random()*i.length)]);var a=n.modPow(s,this);if(0!=a.compareTo(BigInteger.ONE)&&0!=a.compareTo(t)){for(var l=1;l++<r&&0!=a.compareTo(t);)if(0==(a=a.modPowInt(2,this)).compareTo(BigInteger.ONE))return!1;if(0!=a.compareTo(t))return!1}}return!0}function rng_seed_int(e){h[u++]^=255&e,h[u++]^=e>>8&255,h[u++]^=e>>16&255,h[u++]^=e>>24&255,u>=g&&(u-=g)}function rng_seed_time(){rng_seed_int(new Date().getTime())}if(BigInteger.prototype.chunkSize=bnpChunkSize,BigInteger.prototype.toRadix=bnpToRadix,BigInteger.prototype.fromRadix=bnpFromRadix,BigInteger.prototype.fromNumber=bnpFromNumber,BigInteger.prototype.bitwiseTo=bnpBitwiseTo,BigInteger.prototype.changeBit=bnpChangeBit,BigInteger.prototype.addTo=bnpAddTo,BigInteger.prototype.dMultiply=bnpDMultiply,BigInteger.prototype.dAddOffset=bnpDAddOffset,BigInteger.prototype.multiplyLowerTo=bnpMultiplyLowerTo,BigInteger.prototype.multiplyUpperTo=bnpMultiplyUpperTo,BigInteger.prototype.modInt=bnpModInt,BigInteger.prototype.millerRabin=bnpMillerRabin,BigInteger.prototype.clone=bnClone,BigInteger.prototype.intValue=bnIntValue,BigInteger.prototype.byteValue=bnByteValue,BigInteger.prototype.shortValue=bnShortValue,BigInteger.prototype.signum=bnSigNum,BigInteger.prototype.toByteArray=bnToByteArray,BigInteger.prototype.equals=bnEquals,BigInteger.prototype.min=bnMin,BigInteger.prototype.max=bnMax,BigInteger.prototype.and=bnAnd,BigInteger.prototype.or=bnOr,BigInteger.prototype.xor=bnXor,BigInteger.prototype.andNot=bnAndNot,BigInteger.prototype.not=bnNot,BigInteger.prototype.shiftLeft=bnShiftLeft,BigInteger.prototype.shiftRight=bnShiftRight,BigInteger.prototype.getLowestSetBit=bnGetLowestSetBit,BigInteger.prototype.bitCount=bnBitCount,BigInteger.prototype.testBit=bnTestBit,BigInteger.prototype.setBit=bnSetBit,BigInteger.prototype.clearBit=bnClearBit,BigInteger.prototype.flipBit=bnFlipBit,BigInteger.prototype.add=bnAdd,BigInteger.prototype.subtract=bnSubtract,BigInteger.prototype.multiply=bnMultiply,BigInteger.prototype.divide=bnDivide,BigInteger.prototype.remainder=bnRemainder,BigInteger.prototype.divideAndRemainder=bnDivideAndRemainder,BigInteger.prototype.modPow=bnModPow,BigInteger.prototype.modInverse=bnModInverse,BigInteger.prototype.pow=bnPow,BigInteger.prototype.gcd=bnGCD,BigInteger.prototype.isProbablePrime=bnIsProbablePrime,BigInteger.prototype.square=bnSquare,BigInteger.prototype.Barrett=Barrett,null==h){if(h=[],u=0,"undefined"!=typeof window&&window.crypto){if(window.crypto.getRandomValues){var n,o,a,l,h,u,c,d=new Uint8Array(32);for(window.crypto.getRandomValues(d),c=0;c<32;++c)h[u++]=d[c]}else if("Netscape"==navigator.appName&&navigator.appVersion<"5"){var p=window.crypto.random(32);for(c=0;c<p.length;++c)h[u++]=255&p.charCodeAt(c)}}for(;u<g;)c=Math.floor(65536*Math.random()),h[u++]=c>>>8,h[u++]=255&c;u=0,rng_seed_time()}function rng_get_byte(){if(null==l){for(rng_seed_time(),(l=prng_newstate()).init(h),u=0;u<h.length;++u)h[u]=0;u=0}return l.next()}function rng_get_bytes(e){var t;for(t=0;t<e.length;++t)e[t]=rng_get_byte()}function SecureRandom(){}function Arcfour(){this.i=0,this.j=0,this.S=[]}function ARC4init(e){var t,r,i;for(t=0;t<256;++t)this.S[t]=t;for(t=0,r=0;t<256;++t)r=r+this.S[t]+e[t%e.length]&255,i=this.S[t],this.S[t]=this.S[r],this.S[r]=i;this.i=0,this.j=0}function ARC4next(){var e;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,e=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=e,this.S[e+this.S[this.i]&255]}function prng_newstate(){return new Arcfour}SecureRandom.prototype.nextBytes=rng_get_bytes,Arcfour.prototype.init=ARC4init,Arcfour.prototype.next=ARC4next;var g=256;e.exports={default:BigInteger,BigInteger:BigInteger,SecureRandom:SecureRandom}}).call(this)},10149:(e,t,r)=>{let i=e.exports,{Buffer:s}=r(14300);for(let e in i.types={0:"reserved",1:"connect",2:"connack",3:"publish",4:"puback",5:"pubrec",6:"pubrel",7:"pubcomp",8:"subscribe",9:"suback",10:"unsubscribe",11:"unsuback",12:"pingreq",13:"pingresp",14:"disconnect",15:"auth"},i.requiredHeaderFlags={1:0,2:0,4:0,5:0,6:2,7:0,8:2,9:0,10:2,11:0,12:0,13:0,14:0,15:0},i.requiredHeaderFlagsErrors={},i.requiredHeaderFlags){let t=i.requiredHeaderFlags[e];i.requiredHeaderFlagsErrors[e]="Invalid header flag bits, must be 0x"+t.toString(16)+" for "+i.types[e]+" packet"}for(let e in i.codes={},i.types){let t=i.types[e];i.codes[t]=e}for(let e in i.CMD_SHIFT=4,i.CMD_MASK=240,i.DUP_MASK=8,i.QOS_MASK=3,i.QOS_SHIFT=1,i.RETAIN_MASK=1,i.VARBYTEINT_MASK=127,i.VARBYTEINT_FIN_MASK=128,i.VARBYTEINT_MAX=268435455,i.SESSIONPRESENT_MASK=1,i.SESSIONPRESENT_HEADER=s.from([i.SESSIONPRESENT_MASK]),i.CONNACK_HEADER=s.from([i.codes.connack<<i.CMD_SHIFT]),i.USERNAME_MASK=128,i.PASSWORD_MASK=64,i.WILL_RETAIN_MASK=32,i.WILL_QOS_MASK=24,i.WILL_QOS_SHIFT=3,i.WILL_FLAG_MASK=4,i.CLEAN_SESSION_MASK=2,i.CONNECT_HEADER=s.from([i.codes.connect<<i.CMD_SHIFT]),i.properties={sessionExpiryInterval:17,willDelayInterval:24,receiveMaximum:33,maximumPacketSize:39,topicAliasMaximum:34,requestResponseInformation:25,requestProblemInformation:23,userProperties:38,authenticationMethod:21,authenticationData:22,payloadFormatIndicator:1,messageExpiryInterval:2,contentType:3,responseTopic:8,correlationData:9,maximumQoS:36,retainAvailable:37,assignedClientIdentifier:18,reasonString:31,wildcardSubscriptionAvailable:40,subscriptionIdentifiersAvailable:41,sharedSubscriptionAvailable:42,serverKeepAlive:19,responseInformation:26,serverReference:28,topicAlias:35,subscriptionIdentifier:11},i.propertiesCodes={},i.properties){let t=i.properties[e];i.propertiesCodes[t]=e}function genHeader(e){return[0,1,2].map(t=>[0,1].map(r=>[0,1].map(n=>{let o=s.alloc(1);return o.writeUInt8(i.codes[e]<<i.CMD_SHIFT|(r?i.DUP_MASK:0)|t<<i.QOS_SHIFT|n,0,!0),o})))}i.propertiesTypes={sessionExpiryInterval:"int32",willDelayInterval:"int32",receiveMaximum:"int16",maximumPacketSize:"int32",topicAliasMaximum:"int16",requestResponseInformation:"byte",requestProblemInformation:"byte",userProperties:"pair",authenticationMethod:"string",authenticationData:"binary",payloadFormatIndicator:"byte",messageExpiryInterval:"int32",contentType:"string",responseTopic:"string",correlationData:"binary",maximumQoS:"int8",retainAvailable:"byte",assignedClientIdentifier:"string",reasonString:"string",wildcardSubscriptionAvailable:"byte",subscriptionIdentifiersAvailable:"byte",sharedSubscriptionAvailable:"byte",serverKeepAlive:"int16",responseInformation:"string",serverReference:"string",topicAlias:"int16",subscriptionIdentifier:"var"},i.PUBLISH_HEADER=genHeader("publish"),i.SUBSCRIBE_HEADER=genHeader("subscribe"),i.SUBSCRIBE_OPTIONS_QOS_MASK=3,i.SUBSCRIBE_OPTIONS_NL_MASK=1,i.SUBSCRIBE_OPTIONS_NL_SHIFT=2,i.SUBSCRIBE_OPTIONS_RAP_MASK=1,i.SUBSCRIBE_OPTIONS_RAP_SHIFT=3,i.SUBSCRIBE_OPTIONS_RH_MASK=3,i.SUBSCRIBE_OPTIONS_RH_SHIFT=4,i.SUBSCRIBE_OPTIONS_RH=[0,16,32],i.SUBSCRIBE_OPTIONS_NL=4,i.SUBSCRIBE_OPTIONS_RAP=8,i.SUBSCRIBE_OPTIONS_QOS=[0,1,2],i.UNSUBSCRIBE_HEADER=genHeader("unsubscribe"),i.ACKS={unsuback:genHeader("unsuback"),puback:genHeader("puback"),pubcomp:genHeader("pubcomp"),pubrel:genHeader("pubrel"),pubrec:genHeader("pubrec")},i.SUBACK_HEADER=s.from([i.codes.suback<<i.CMD_SHIFT]),i.VERSION3=s.from([3]),i.VERSION4=s.from([4]),i.VERSION5=s.from([5]),i.VERSION131=s.from([131]),i.VERSION132=s.from([132]),i.QOS=[0,1,2].map(e=>s.from([e])),i.EMPTY={pingreq:s.from([i.codes.pingreq<<4,0]),pingresp:s.from([i.codes.pingresp<<4,0]),disconnect:s.from([i.codes.disconnect<<4,0])},i.MQTT5_PUBACK_PUBREC_CODES={0:"Success",16:"No matching subscribers",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",144:"Topic Name invalid",145:"Packet identifier in use",151:"Quota exceeded",153:"Payload format invalid"},i.MQTT5_PUBREL_PUBCOMP_CODES={0:"Success",146:"Packet Identifier not found"},i.MQTT5_SUBACK_CODES={0:"Granted QoS 0",1:"Granted QoS 1",2:"Granted QoS 2",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",143:"Topic Filter invalid",145:"Packet Identifier in use",151:"Quota exceeded",158:"Shared Subscriptions not supported",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"},i.MQTT5_UNSUBACK_CODES={0:"Success",17:"No subscription existed",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",143:"Topic Filter invalid",145:"Packet Identifier in use"},i.MQTT5_DISCONNECT_CODES={0:"Normal disconnection",4:"Disconnect with Will Message",128:"Unspecified error",129:"Malformed Packet",130:"Protocol Error",131:"Implementation specific error",135:"Not authorized",137:"Server busy",139:"Server shutting down",141:"Keep Alive timeout",142:"Session taken over",143:"Topic Filter invalid",144:"Topic Name invalid",147:"Receive Maximum exceeded",148:"Topic Alias invalid",149:"Packet too large",150:"Message rate too high",151:"Quota exceeded",152:"Administrative action",153:"Payload format invalid",154:"Retain not supported",155:"QoS not supported",156:"Use another server",157:"Server moved",158:"Shared Subscriptions not supported",159:"Connection rate exceeded",160:"Maximum connect time",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"},i.MQTT5_AUTH_CODES={0:"Success",24:"Continue authentication",25:"Re-authenticate"}},31586:(e,t,r)=>{let i=r(10127),{EventEmitter:s}=r(82361),{Buffer:n}=r(14300);function generate(e,t){let r=new Accumulator;return i(e,r,t),r.concat()}let Accumulator=class Accumulator extends s{constructor(){super(),this._array=Array(20),this._i=0}write(e){return this._array[this._i++]=e,!0}concat(){let e,t=0,r=Array(this._array.length),i=this._array,s=0;for(e=0;e<i.length&&void 0!==i[e];e++)"string"!=typeof i[e]?r[e]=i[e].length:r[e]=n.byteLength(i[e]),t+=r[e];let o=n.allocUnsafe(t);for(e=0;e<i.length&&void 0!==i[e];e++)"string"!=typeof i[e]?i[e].copy(o,s):o.write(i[e],s),s+=r[e];return o}destroy(e){e&&this.emit("error",e)}};e.exports=generate},35056:(e,t,r)=>{t.parser=r(60198).parser,t.generate=r(31586),t.writeToStream=r(10127)},97970:(e,t,r)=>{let{Buffer:i}=r(14300),s={},n=i.isBuffer(i.from([1,2]).subarray(0,1));function generateBuffer(e){let t=i.allocUnsafe(2);return t.writeUInt8(e>>8,0),t.writeUInt8(255&e,1),t}function generateCache(){for(let e=0;e<65536;e++)s[e]=generateBuffer(e)}function genBufVariableByteInt(e){let t=0,r=0,s=i.allocUnsafe(4);do t=e%128|0,(e=e/128|0)>0&&(t|=128),s.writeUInt8(t,r++);while(e>0&&r<4);return e>0&&(r=0),n?s.subarray(0,r):s.slice(0,r)}function generate4ByteBuffer(e){let t=i.allocUnsafe(4);return t.writeUInt32BE(e,0),t}e.exports={cache:s,generateCache,generateNumber:generateBuffer,genBufVariableByteInt,generate4ByteBuffer}},74774:e=>{let Packet=class Packet{constructor(){this.cmd=null,this.retain=!1,this.qos=0,this.dup=!1,this.length=-1,this.topic=null,this.payload=null}};e.exports=Packet},60198:(e,t,r)=>{let i=r(70668),{EventEmitter:s}=r(82361),n=r(74774),o=r(10149),a=r(17783)("mqtt-packet:parser");let Parser=class Parser extends s{constructor(){super(),this.parser=this.constructor.parser}static parser(e){return this instanceof Parser?(this.settings=e||{},this._states=["_parseHeader","_parseLength","_parsePayload","_newPacket"],this._resetState(),this):new Parser().parser(e)}_resetState(){a("_resetState: resetting packet, error, _list, and _stateCounter"),this.packet=new n,this.error=null,this._list=i(),this._stateCounter=0}parse(e){for(this.error&&this._resetState(),this._list.append(e),a("parse: current state: %s",this._states[this._stateCounter]);(-1!==this.packet.length||this._list.length>0)&&this[this._states[this._stateCounter]]()&&!this.error;)this._stateCounter++,a("parse: state complete. _stateCounter is now: %d",this._stateCounter),a("parse: packet.length: %d, buffer list length: %d",this.packet.length,this._list.length),this._stateCounter>=this._states.length&&(this._stateCounter=0);return a("parse: exited while loop. packet: %d, buffer list length: %d",this.packet.length,this._list.length),this._list.length}_parseHeader(){let e=this._list.readUInt8(0),t=e>>o.CMD_SHIFT;this.packet.cmd=o.types[t];let r=o.requiredHeaderFlags[t];return null!=r&&(15&e)!==r?this._emitError(Error(o.requiredHeaderFlagsErrors[t])):(this.packet.retain=(e&o.RETAIN_MASK)!=0,this.packet.qos=e>>o.QOS_SHIFT&o.QOS_MASK,this.packet.qos>2)?this._emitError(Error("Packet must not have both QoS bits set to 1")):(this.packet.dup=(e&o.DUP_MASK)!=0,a("_parseHeader: packet: %o",this.packet),this._list.consume(1),!0)}_parseLength(){let e=this._parseVarByteNum(!0);return e&&(this.packet.length=e.value,this._list.consume(e.bytes)),a("_parseLength %d",e.value),!!e}_parsePayload(){a("_parsePayload: payload %O",this._list);let e=!1;if(0===this.packet.length||this._list.length>=this.packet.length){switch(this._pos=0,this.packet.cmd){case"connect":this._parseConnect();break;case"connack":this._parseConnack();break;case"publish":this._parsePublish();break;case"puback":case"pubrec":case"pubrel":case"pubcomp":this._parseConfirmation();break;case"subscribe":this._parseSubscribe();break;case"suback":this._parseSuback();break;case"unsubscribe":this._parseUnsubscribe();break;case"unsuback":this._parseUnsuback();break;case"pingreq":case"pingresp":break;case"disconnect":this._parseDisconnect();break;case"auth":this._parseAuth();break;default:this._emitError(Error("Not supported"))}e=!0}return a("_parsePayload complete result: %s",e),e}_parseConnect(){let e,t,r,i;a("_parseConnect");let s={},n=this.packet,l=this._parseString();if(null===l)return this._emitError(Error("Cannot parse protocolId"));if("MQTT"!==l&&"MQIsdp"!==l)return this._emitError(Error("Invalid protocolId"));if(n.protocolId=l,this._pos>=this._list.length)return this._emitError(Error("Packet too short"));if(n.protocolVersion=this._list.readUInt8(this._pos),n.protocolVersion>=128&&(n.bridgeMode=!0,n.protocolVersion=n.protocolVersion-128),3!==n.protocolVersion&&4!==n.protocolVersion&&5!==n.protocolVersion)return this._emitError(Error("Invalid protocol version"));if(this._pos++,this._pos>=this._list.length)return this._emitError(Error("Packet too short"));if(1&this._list.readUInt8(this._pos))return this._emitError(Error("Connect flag bit 0 must be 0, but got 1"));s.username=this._list.readUInt8(this._pos)&o.USERNAME_MASK,s.password=this._list.readUInt8(this._pos)&o.PASSWORD_MASK,s.will=this._list.readUInt8(this._pos)&o.WILL_FLAG_MASK;let h=!!(this._list.readUInt8(this._pos)&o.WILL_RETAIN_MASK),u=(this._list.readUInt8(this._pos)&o.WILL_QOS_MASK)>>o.WILL_QOS_SHIFT;if(s.will)n.will={},n.will.retain=h,n.will.qos=u;else{if(h)return this._emitError(Error("Will Retain Flag must be set to zero when Will Flag is set to 0"));if(u)return this._emitError(Error("Will QoS must be set to zero when Will Flag is set to 0"))}if(n.clean=(this._list.readUInt8(this._pos)&o.CLEAN_SESSION_MASK)!=0,this._pos++,n.keepalive=this._parseNum(),-1===n.keepalive)return this._emitError(Error("Packet too short"));if(5===n.protocolVersion){let e=this._parseProperties();Object.getOwnPropertyNames(e).length&&(n.properties=e)}let c=this._parseString();if(null===c)return this._emitError(Error("Packet too short"));if(n.clientId=c,a("_parseConnect: packet.clientId: %s",n.clientId),s.will){if(5===n.protocolVersion){let e=this._parseProperties();Object.getOwnPropertyNames(e).length&&(n.will.properties=e)}if(null===(e=this._parseString()))return this._emitError(Error("Cannot parse will topic"));if(n.will.topic=e,a("_parseConnect: packet.will.topic: %s",n.will.topic),null===(t=this._parseBuffer()))return this._emitError(Error("Cannot parse will payload"));n.will.payload=t,a("_parseConnect: packet.will.paylaod: %s",n.will.payload)}if(s.username){if(null===(i=this._parseString()))return this._emitError(Error("Cannot parse username"));n.username=i,a("_parseConnect: packet.username: %s",n.username)}if(s.password){if(null===(r=this._parseBuffer()))return this._emitError(Error("Cannot parse password"));n.password=r}return this.settings=n,a("_parseConnect: complete"),n}_parseConnack(){a("_parseConnack");let e=this.packet;if(this._list.length<1)return null;let t=this._list.readUInt8(this._pos++);if(t>1)return this._emitError(Error("Invalid connack flags, bits 7-1 must be set to 0"));if(e.sessionPresent=!!(t&o.SESSIONPRESENT_MASK),5===this.settings.protocolVersion)this._list.length>=2?e.reasonCode=this._list.readUInt8(this._pos++):e.reasonCode=0;else{if(this._list.length<2)return null;e.returnCode=this._list.readUInt8(this._pos++)}if(-1===e.returnCode||-1===e.reasonCode)return this._emitError(Error("Cannot parse return code"));if(5===this.settings.protocolVersion){let t=this._parseProperties();Object.getOwnPropertyNames(t).length&&(e.properties=t)}a("_parseConnack: complete")}_parsePublish(){a("_parsePublish");let e=this.packet;if(e.topic=this._parseString(),null===e.topic)return this._emitError(Error("Cannot parse topic"));if(!(e.qos>0)||this._parseMessageId()){if(5===this.settings.protocolVersion){let t=this._parseProperties();Object.getOwnPropertyNames(t).length&&(e.properties=t)}e.payload=this._list.slice(this._pos,e.length),a("_parsePublish: payload from buffer list: %o",e.payload)}}_parseSubscribe(){let e,t,r,i,s,n,l;a("_parseSubscribe");let h=this.packet;if(h.subscriptions=[],this._parseMessageId()){if(5===this.settings.protocolVersion){let e=this._parseProperties();Object.getOwnPropertyNames(e).length&&(h.properties=e)}if(h.length<=0)return this._emitError(Error("Malformed subscribe, no payload specified"));for(;this._pos<h.length;){if(null===(e=this._parseString()))return this._emitError(Error("Cannot parse topic"));if(this._pos>=h.length)return this._emitError(Error("Malformed Subscribe Payload"));if(t=this._parseByte(),5===this.settings.protocolVersion){if(192&t)return this._emitError(Error("Invalid subscribe topic flag bits, bits 7-6 must be 0"))}else if(252&t)return this._emitError(Error("Invalid subscribe topic flag bits, bits 7-2 must be 0"));if((r=t&o.SUBSCRIBE_OPTIONS_QOS_MASK)>2)return this._emitError(Error("Invalid subscribe QoS, must be <= 2"));if(n=(t>>o.SUBSCRIBE_OPTIONS_NL_SHIFT&o.SUBSCRIBE_OPTIONS_NL_MASK)!=0,s=(t>>o.SUBSCRIBE_OPTIONS_RAP_SHIFT&o.SUBSCRIBE_OPTIONS_RAP_MASK)!=0,(i=t>>o.SUBSCRIBE_OPTIONS_RH_SHIFT&o.SUBSCRIBE_OPTIONS_RH_MASK)>2)return this._emitError(Error("Invalid retain handling, must be <= 2"));l={topic:e,qos:r},5===this.settings.protocolVersion?(l.nl=n,l.rap=s,l.rh=i):this.settings.bridgeMode&&(l.rh=0,l.rap=!0,l.nl=!0),a("_parseSubscribe: push subscription `%s` to subscription",l),h.subscriptions.push(l)}}}_parseSuback(){a("_parseSuback");let e=this.packet;if(this.packet.granted=[],this._parseMessageId()){if(5===this.settings.protocolVersion){let t=this._parseProperties();Object.getOwnPropertyNames(t).length&&(e.properties=t)}if(e.length<=0)return this._emitError(Error("Malformed suback, no payload specified"));for(;this._pos<this.packet.length;){let e=this._list.readUInt8(this._pos++);if(5===this.settings.protocolVersion){if(!o.MQTT5_SUBACK_CODES[e])return this._emitError(Error("Invalid suback code"))}else if(e>2&&128!==e)return this._emitError(Error("Invalid suback QoS, must be 0, 1, 2 or 128"));this.packet.granted.push(e)}}}_parseUnsubscribe(){a("_parseUnsubscribe");let e=this.packet;if(e.unsubscriptions=[],this._parseMessageId()){if(5===this.settings.protocolVersion){let t=this._parseProperties();Object.getOwnPropertyNames(t).length&&(e.properties=t)}if(e.length<=0)return this._emitError(Error("Malformed unsubscribe, no payload specified"));for(;this._pos<e.length;){let t=this._parseString();if(null===t)return this._emitError(Error("Cannot parse topic"));a("_parseUnsubscribe: push topic `%s` to unsubscriptions",t),e.unsubscriptions.push(t)}}}_parseUnsuback(){a("_parseUnsuback");let e=this.packet;if(!this._parseMessageId())return this._emitError(Error("Cannot parse messageId"));if((3===this.settings.protocolVersion||4===this.settings.protocolVersion)&&2!==e.length)return this._emitError(Error("Malformed unsuback, payload length must be 2"));if(e.length<=0)return this._emitError(Error("Malformed unsuback, no payload specified"));if(5===this.settings.protocolVersion){let t=this._parseProperties();for(Object.getOwnPropertyNames(t).length&&(e.properties=t),e.granted=[];this._pos<this.packet.length;){let e=this._list.readUInt8(this._pos++);if(!o.MQTT5_UNSUBACK_CODES[e])return this._emitError(Error("Invalid unsuback code"));this.packet.granted.push(e)}}}_parseConfirmation(){a("_parseConfirmation: packet.cmd: `%s`",this.packet.cmd);let e=this.packet;if(this._parseMessageId(),5===this.settings.protocolVersion){if(e.length>2){switch(e.reasonCode=this._parseByte(),this.packet.cmd){case"puback":case"pubrec":if(!o.MQTT5_PUBACK_PUBREC_CODES[e.reasonCode])return this._emitError(Error("Invalid "+this.packet.cmd+" reason code"));break;case"pubrel":case"pubcomp":if(!o.MQTT5_PUBREL_PUBCOMP_CODES[e.reasonCode])return this._emitError(Error("Invalid "+this.packet.cmd+" reason code"))}a("_parseConfirmation: packet.reasonCode `%d`",e.reasonCode)}else e.reasonCode=0;if(e.length>3){let t=this._parseProperties();Object.getOwnPropertyNames(t).length&&(e.properties=t)}}return!0}_parseDisconnect(){let e=this.packet;if(a("_parseDisconnect"),5===this.settings.protocolVersion){this._list.length>0?(e.reasonCode=this._parseByte(),o.MQTT5_DISCONNECT_CODES[e.reasonCode]||this._emitError(Error("Invalid disconnect reason code"))):e.reasonCode=0;let t=this._parseProperties();Object.getOwnPropertyNames(t).length&&(e.properties=t)}return a("_parseDisconnect result: true"),!0}_parseAuth(){a("_parseAuth");let e=this.packet;if(5!==this.settings.protocolVersion)return this._emitError(Error("Not supported auth packet for this version MQTT"));if(e.reasonCode=this._parseByte(),!o.MQTT5_AUTH_CODES[e.reasonCode])return this._emitError(Error("Invalid auth reason code"));let t=this._parseProperties();return Object.getOwnPropertyNames(t).length&&(e.properties=t),a("_parseAuth: result: true"),!0}_parseMessageId(){let e=this.packet;return(e.messageId=this._parseNum(),null===e.messageId)?(this._emitError(Error("Cannot parse messageId")),!1):(a("_parseMessageId: packet.messageId %d",e.messageId),!0)}_parseString(e){let t=this._parseNum(),r=t+this._pos;if(-1===t||r>this._list.length||r>this.packet.length)return null;let i=this._list.toString("utf8",this._pos,r);return this._pos+=t,a("_parseString: result: %s",i),i}_parseStringPair(){return a("_parseStringPair"),{name:this._parseString(),value:this._parseString()}}_parseBuffer(){let e=this._parseNum(),t=e+this._pos;if(-1===e||t>this._list.length||t>this.packet.length)return null;let r=this._list.slice(this._pos,t);return this._pos+=e,a("_parseBuffer: result: %o",r),r}_parseNum(){if(this._list.length-this._pos<2)return -1;let e=this._list.readUInt16BE(this._pos);return this._pos+=2,a("_parseNum: result: %s",e),e}_parse4ByteNum(){if(this._list.length-this._pos<4)return -1;let e=this._list.readUInt32BE(this._pos);return this._pos+=4,a("_parse4ByteNum: result: %s",e),e}_parseVarByteNum(e){let t;a("_parseVarByteNum");let r=0,i=1,s=0,n=!1,l=this._pos?this._pos:0;for(;r<4&&l+r<this._list.length;){if(s+=i*((t=this._list.readUInt8(l+r++))&o.VARBYTEINT_MASK),i*=128,(t&o.VARBYTEINT_FIN_MASK)==0){n=!0;break}if(this._list.length<=r)break}return!n&&4===r&&this._list.length>=r&&this._emitError(Error("Invalid variable byte integer")),l&&(this._pos+=r),a("_parseVarByteNum: result: %o",n=!!n&&(e?{bytes:r,value:s}:s)),n}_parseByte(){let e;return this._pos<this._list.length&&(e=this._list.readUInt8(this._pos),this._pos++),a("_parseByte: result: %o",e),e}_parseByType(e){switch(a("_parseByType: type: %s",e),e){case"byte":return 0!==this._parseByte();case"int8":return this._parseByte();case"int16":return this._parseNum();case"int32":return this._parse4ByteNum();case"var":return this._parseVarByteNum();case"string":return this._parseString();case"pair":return this._parseStringPair();case"binary":return this._parseBuffer()}}_parseProperties(){a("_parseProperties");let e=this._parseVarByteNum(),t=this._pos,r=t+e,i={};for(;this._pos<r;){let e=this._parseByte();if(!e)return this._emitError(Error("Cannot parse property code type")),!1;let t=o.propertiesCodes[e];if(!t)return this._emitError(Error("Unknown property")),!1;if("userProperties"===t){i[t]||(i[t]=Object.create(null));let e=this._parseByType(o.propertiesTypes[t]);if(i[t][e.name]){if(Array.isArray(i[t][e.name]))i[t][e.name].push(e.value);else{let r=i[t][e.name];i[t][e.name]=[r],i[t][e.name].push(e.value)}}else i[t][e.name]=e.value;continue}i[t]?(Array.isArray(i[t])||(i[t]=[i[t]]),i[t].push(this._parseByType(o.propertiesTypes[t]))):i[t]=this._parseByType(o.propertiesTypes[t])}return i}_newPacket(){return a("_newPacket"),this.packet&&(this._list.consume(this.packet.length),a("_newPacket: parser emit packet: packet.cmd: %s, packet.payload: %s, packet.length: %d",this.packet.cmd,this.packet.payload,this.packet.length),this.emit("packet",this.packet)),a("_newPacket: new packet"),this.packet=new n,this._pos=0,!0}_emitError(e){a("_emitError",e),this.error=e,this.emit("error",e)}};e.exports=Parser},10127:(e,t,r)=>{let i=r(10149),{Buffer:s}=r(14300),n=s.allocUnsafe(0),o=s.from([0]),a=r(97970),l=r(98578).nextTick,h=r(17783)("mqtt-packet:writeToStream"),u=a.cache,c=a.generateNumber,d=a.generateCache,p=a.genBufVariableByteInt,g=a.generate4ByteBuffer,b=writeNumberCached,m=!0;function generate(e,t,r){switch(h("generate called"),t.cork&&(t.cork(),l(uncork,t)),m&&(m=!1,d()),h("generate: packet.cmd: %s",e.cmd),e.cmd){case"connect":return connect(e,t,r);case"connack":return connack(e,t,r);case"publish":return publish(e,t,r);case"puback":case"pubrec":case"pubrel":case"pubcomp":return confirmation(e,t,r);case"subscribe":return subscribe(e,t,r);case"suback":return suback(e,t,r);case"unsubscribe":return unsubscribe(e,t,r);case"unsuback":return unsuback(e,t,r);case"pingreq":case"pingresp":return emptyPacket(e,t,r);case"disconnect":return disconnect(e,t,r);case"auth":return auth(e,t,r);default:return t.destroy(Error("Unknown command")),!1}}function uncork(e){e.uncork()}function connect(e,t,r){let n,o,a;let l=e||{},h=l.protocolId||"MQTT",u=l.protocolVersion||4,c=l.will,d=l.clean,p=l.keepalive||0,g=l.clientId||"",m=l.username,_=l.password,y=l.properties;void 0===d&&(d=!0);let S=0;if(!h||"string"!=typeof h&&!s.isBuffer(h))return t.destroy(Error("Invalid protocolId")),!1;if(S+=h.length+2,3!==u&&4!==u&&5!==u)return t.destroy(Error("Invalid protocol version")),!1;if(S+=1,("string"==typeof g||s.isBuffer(g))&&(g||u>=4)&&(g||d))S+=s.byteLength(g)+2;else{if(u<4)return t.destroy(Error("clientId must be supplied before 3.1.1")),!1;if(1*d==0)return t.destroy(Error("clientId must be given if cleanSession set to 0")),!1}if("number"!=typeof p||p<0||p>65535||p%1!=0)return t.destroy(Error("Invalid keepalive")),!1;if(S+=3,5===u){if(!(n=getProperties(t,y)))return!1;S+=n.length}if(c){if("object"!=typeof c)return t.destroy(Error("Invalid will")),!1;if(!c.topic||"string"!=typeof c.topic)return t.destroy(Error("Invalid will topic")),!1;if(S+=s.byteLength(c.topic)+2+2,c.payload){if(!(c.payload.length>=0))return t.destroy(Error("Invalid will payload")),!1;"string"==typeof c.payload?S+=s.byteLength(c.payload):S+=c.payload.length}if(o={},5===u){if(!(o=getProperties(t,c.properties)))return!1;S+=o.length}}let v=!1;if(null!=m){if(!isStringOrBuffer(m))return t.destroy(Error("Invalid username")),!1;v=!0,S+=s.byteLength(m)+2}if(null!=_){if(!v)return t.destroy(Error("Username is required to use password")),!1;if(!isStringOrBuffer(_))return t.destroy(Error("Invalid password")),!1;S+=byteLength(_)+2}return t.write(i.CONNECT_HEADER),writeVarByteInt(t,S),writeStringOrBuffer(t,h),l.bridgeMode&&(u+=128),t.write(131===u?i.VERSION131:132===u?i.VERSION132:4===u?i.VERSION4:5===u?i.VERSION5:i.VERSION3),a=0|(null!=m?i.USERNAME_MASK:0)|(null!=_?i.PASSWORD_MASK:0)|(c&&c.retain?i.WILL_RETAIN_MASK:0)|(c&&c.qos?c.qos<<i.WILL_QOS_SHIFT:0)|(c?i.WILL_FLAG_MASK:0)|(d?i.CLEAN_SESSION_MASK:0),t.write(s.from([a])),b(t,p),5===u&&n.write(),writeStringOrBuffer(t,g),c&&(5===u&&o.write(),writeString(t,c.topic),writeStringOrBuffer(t,c.payload)),null!=m&&writeStringOrBuffer(t,m),null!=_&&writeStringOrBuffer(t,_),!0}function connack(e,t,r){let n=r?r.protocolVersion:4,a=e||{},l=5===n?a.reasonCode:a.returnCode,h=a.properties,u=2;if("number"!=typeof l)return t.destroy(Error("Invalid return code")),!1;let c=null;if(5===n){if(!(c=getProperties(t,h)))return!1;u+=c.length}return t.write(i.CONNACK_HEADER),writeVarByteInt(t,u),t.write(a.sessionPresent?i.SESSIONPRESENT_HEADER:o),t.write(s.from([l])),null!=c&&c.write(),!0}function publish(e,t,r){h("publish: packet: %o",e);let o=r?r.protocolVersion:4,a=e||{},l=a.qos||0,u=a.retain?i.RETAIN_MASK:0,c=a.topic,d=a.payload||n,p=a.messageId,g=a.properties,m=0;if("string"==typeof c)m+=s.byteLength(c)+2;else{if(!s.isBuffer(c))return t.destroy(Error("Invalid topic")),!1;m+=c.length+2}if(s.isBuffer(d)?m+=d.length:m+=s.byteLength(d),l&&"number"!=typeof p)return t.destroy(Error("Invalid messageId")),!1;l&&(m+=2);let _=null;if(5===o){if(!(_=getProperties(t,g)))return!1;m+=_.length}return t.write(i.PUBLISH_HEADER[l][a.dup?1:0][u?1:0]),writeVarByteInt(t,m),b(t,byteLength(c)),t.write(c),l>0&&b(t,p),null!=_&&_.write(),h("publish: payload: %o",d),t.write(d)}function confirmation(e,t,r){let n=r?r.protocolVersion:4,o=e||{},a=o.cmd||"puback",l=o.messageId,h=o.dup&&"pubrel"===a?i.DUP_MASK:0,u=0,c=o.reasonCode,d=o.properties,p=5===n?3:2;if("pubrel"===a&&(u=1),"number"!=typeof l)return t.destroy(Error("Invalid messageId")),!1;let g=null;if(5===n&&"object"==typeof d){if(!(g=getPropertiesByMaximumPacketSize(t,d,r,p)))return!1;p+=g.length}return t.write(i.ACKS[a][u][h][0]),3===p&&(p+=0!==c?1:-1),writeVarByteInt(t,p),b(t,l),5===n&&2!==p&&t.write(s.from([c])),null!==g?g.write():4===p&&t.write(s.from([0])),!0}function subscribe(e,t,r){h("subscribe: packet: ");let n=r?r.protocolVersion:4,o=e||{},a=o.dup?i.DUP_MASK:0,l=o.messageId,u=o.subscriptions,c=o.properties,d=0;if("number"!=typeof l)return t.destroy(Error("Invalid messageId")),!1;d+=2;let p=null;if(5===n){if(!(p=getProperties(t,c)))return!1;d+=p.length}if("object"!=typeof u||!u.length)return t.destroy(Error("Invalid subscriptions")),!1;for(let e=0;e<u.length;e+=1){let r=u[e].topic,i=u[e].qos;if("string"!=typeof r)return t.destroy(Error("Invalid subscriptions - invalid topic")),!1;if("number"!=typeof i)return t.destroy(Error("Invalid subscriptions - invalid qos")),!1;if(5===n){let r=u[e].nl||!1;if("boolean"!=typeof r)return t.destroy(Error("Invalid subscriptions - invalid No Local")),!1;let i=u[e].rap||!1;if("boolean"!=typeof i)return t.destroy(Error("Invalid subscriptions - invalid Retain as Published")),!1;let s=u[e].rh||0;if("number"!=typeof s||s>2)return t.destroy(Error("Invalid subscriptions - invalid Retain Handling")),!1}d+=s.byteLength(r)+2+1}h("subscribe: writing to stream: %o",i.SUBSCRIBE_HEADER),t.write(i.SUBSCRIBE_HEADER[1][a?1:0][0]),writeVarByteInt(t,d),b(t,l),null!==p&&p.write();let g=!0;for(let e of u){let r;let o=e.topic,a=e.qos,l=+e.nl,h=+e.rap,u=e.rh;writeString(t,o),r=i.SUBSCRIBE_OPTIONS_QOS[a],5===n&&(r|=l?i.SUBSCRIBE_OPTIONS_NL:0,r|=h?i.SUBSCRIBE_OPTIONS_RAP:0,r|=u?i.SUBSCRIBE_OPTIONS_RH[u]:0),g=t.write(s.from([r]))}return g}function suback(e,t,r){let n=r?r.protocolVersion:4,o=e||{},a=o.messageId,l=o.granted,h=o.properties,u=0;if("number"!=typeof a)return t.destroy(Error("Invalid messageId")),!1;if(u+=2,"object"!=typeof l||!l.length)return t.destroy(Error("Invalid qos vector")),!1;for(let e=0;e<l.length;e+=1){if("number"!=typeof l[e])return t.destroy(Error("Invalid qos vector")),!1;u+=1}let c=null;if(5===n){if(!(c=getPropertiesByMaximumPacketSize(t,h,r,u)))return!1;u+=c.length}return t.write(i.SUBACK_HEADER),writeVarByteInt(t,u),b(t,a),null!==c&&c.write(),t.write(s.from(l))}function unsubscribe(e,t,r){let n=r?r.protocolVersion:4,o=e||{},a=o.messageId,l=o.dup?i.DUP_MASK:0,h=o.unsubscriptions,u=o.properties,c=0;if("number"!=typeof a)return t.destroy(Error("Invalid messageId")),!1;if(c+=2,"object"!=typeof h||!h.length)return t.destroy(Error("Invalid unsubscriptions")),!1;for(let e=0;e<h.length;e+=1){if("string"!=typeof h[e])return t.destroy(Error("Invalid unsubscriptions")),!1;c+=s.byteLength(h[e])+2}let d=null;if(5===n){if(!(d=getProperties(t,u)))return!1;c+=d.length}t.write(i.UNSUBSCRIBE_HEADER[1][l?1:0][0]),writeVarByteInt(t,c),b(t,a),null!==d&&d.write();let p=!0;for(let e=0;e<h.length;e++)p=writeString(t,h[e]);return p}function unsuback(e,t,r){let n=r?r.protocolVersion:4,o=e||{},a=o.messageId,l=o.dup?i.DUP_MASK:0,h=o.granted,u=o.properties,c=o.cmd,d=2;if("number"!=typeof a)return t.destroy(Error("Invalid messageId")),!1;if(5===n){if("object"!=typeof h||!h.length)return t.destroy(Error("Invalid qos vector")),!1;for(let e=0;e<h.length;e+=1){if("number"!=typeof h[e])return t.destroy(Error("Invalid qos vector")),!1;d+=1}}let p=null;if(5===n){if(!(p=getPropertiesByMaximumPacketSize(t,u,r,d)))return!1;d+=p.length}return t.write(i.ACKS[c][0][l][0]),writeVarByteInt(t,d),b(t,a),null!==p&&p.write(),5===n&&t.write(s.from(h)),!0}function emptyPacket(e,t,r){return t.write(i.EMPTY[e.cmd])}function disconnect(e,t,r){let n=r?r.protocolVersion:4,o=e||{},a=o.reasonCode,l=o.properties,h=5===n?1:0,u=null;if(5===n){if(!(u=getPropertiesByMaximumPacketSize(t,l,r,h)))return!1;h+=u.length}return t.write(s.from([i.codes.disconnect<<4])),writeVarByteInt(t,h),5===n&&t.write(s.from([a])),null!==u&&u.write(),!0}function auth(e,t,r){let n=r?r.protocolVersion:4,o=e||{},a=o.reasonCode,l=o.properties,h=5===n?1:0;5!==n&&t.destroy(Error("Invalid mqtt version for auth packet"));let u=getPropertiesByMaximumPacketSize(t,l,r,h);return!!u&&(h+=u.length,t.write(s.from([i.codes.auth<<4])),writeVarByteInt(t,h),t.write(s.from([a])),null!==u&&u.write(),!0)}Object.defineProperty(generate,"cacheNumbers",{get:()=>b===writeNumberCached,set(e){e?(u&&0!==Object.keys(u).length||(m=!0),b=writeNumberCached):(m=!1,b=writeNumberGenerated)}});let _={};function writeVarByteInt(e,t){if(t>i.VARBYTEINT_MAX)return e.destroy(Error(`Invalid variable byte integer: ${t}`)),!1;let r=_[t];return!r&&(r=p(t),t<16384&&(_[t]=r)),h("writeVarByteInt: writing to stream: %o",r),e.write(r)}function writeString(e,t){let r=s.byteLength(t);return b(e,r),h("writeString: %s",t),e.write(t,"utf8")}function writeNumberCached(e,t){return h("writeNumberCached: number: %d",t),h("writeNumberCached: %o",u[t]),e.write(u[t])}function writeNumberGenerated(e,t){let r=c(t);return h("writeNumberGenerated: %o",r),e.write(r)}function write4ByteNumber(e,t){let r=g(t);return h("write4ByteNumber: %o",r),e.write(r)}function writeStringOrBuffer(e,t){"string"==typeof t?writeString(e,t):t?(b(e,t.length),e.write(t)):b(e,0)}function getProperties(e,t){if("object"!=typeof t||null!=t.length)return{length:1,write(){writeProperties(e,{},0)}};let r=0;function getLengthProperty(t,r){let n=i.propertiesTypes[t],o=0;switch(n){case"byte":if("boolean"!=typeof r)return e.destroy(Error(`Invalid ${t}: ${r}`)),!1;o+=2;break;case"int8":if("number"!=typeof r||r<0||r>255)return e.destroy(Error(`Invalid ${t}: ${r}`)),!1;o+=2;break;case"binary":if(r&&null===r)return e.destroy(Error(`Invalid ${t}: ${r}`)),!1;o+=1+s.byteLength(r)+2;break;case"int16":if("number"!=typeof r||r<0||r>65535)return e.destroy(Error(`Invalid ${t}: ${r}`)),!1;o+=3;break;case"int32":if("number"!=typeof r||r<0||r>4294967295)return e.destroy(Error(`Invalid ${t}: ${r}`)),!1;o+=5;break;case"var":if("number"!=typeof r||r<0||r>268435455)return e.destroy(Error(`Invalid ${t}: ${r}`)),!1;o+=1+s.byteLength(p(r));break;case"string":if("string"!=typeof r)return e.destroy(Error(`Invalid ${t}: ${r}`)),!1;o+=3+s.byteLength(r.toString());break;case"pair":if("object"!=typeof r)return e.destroy(Error(`Invalid ${t}: ${r}`)),!1;o+=Object.getOwnPropertyNames(r).reduce((e,t)=>{let i=r[t];return Array.isArray(i)?e+=i.reduce((e,r)=>e+=3+s.byteLength(t.toString())+2+s.byteLength(r.toString()),0):e+=3+s.byteLength(t.toString())+2+s.byteLength(r[t].toString()),e},0);break;default:return e.destroy(Error(`Invalid property ${t}: ${r}`)),!1}return o}if(t)for(let e in t){let i=0,s=0,n=t[e];if(void 0!==n){if(Array.isArray(n))for(let t=0;t<n.length;t++){if(!(s=getLengthProperty(e,n[t])))return!1;i+=s}else{if(!(s=getLengthProperty(e,n)))return!1;i=s}if(!i)return!1;r+=i}}let n=s.byteLength(p(r));return{length:n+r,write(){writeProperties(e,t,r)}}}function getPropertiesByMaximumPacketSize(e,t,r,i){let s=["reasonString","userProperties"],n=r&&r.properties&&r.properties.maximumPacketSize?r.properties.maximumPacketSize:0,o=getProperties(e,t);if(n)for(;i+o.length>n;){let r=s.shift();if(!r||!t[r])return!1;delete t[r],o=getProperties(e,t)}return o}function writeProperty(e,t,r){let n=i.propertiesTypes[t];switch(n){case"byte":e.write(s.from([i.properties[t]])),e.write(s.from([+r]));break;case"int8":e.write(s.from([i.properties[t]])),e.write(s.from([r]));break;case"binary":e.write(s.from([i.properties[t]])),writeStringOrBuffer(e,r);break;case"int16":e.write(s.from([i.properties[t]])),b(e,r);break;case"int32":e.write(s.from([i.properties[t]])),write4ByteNumber(e,r);break;case"var":e.write(s.from([i.properties[t]])),writeVarByteInt(e,r);break;case"string":e.write(s.from([i.properties[t]])),writeString(e,r);break;case"pair":Object.getOwnPropertyNames(r).forEach(n=>{let o=r[n];if(Array.isArray(o))o.forEach(r=>{var o,a;e.write(s.from([i.properties[t]])),o=n.toString(),a=r.toString(),writeString(e,o),writeString(e,a)});else{var a,l;e.write(s.from([i.properties[t]])),a=n.toString(),l=o.toString(),writeString(e,a),writeString(e,l)}});break;default:return e.destroy(Error(`Invalid property ${t} value: ${r}`)),!1}}function writeProperties(e,t,r){for(let i in writeVarByteInt(e,r),t)if(Object.prototype.hasOwnProperty.call(t,i)&&null!=t[i]){let r=t[i];if(Array.isArray(r))for(let t=0;t<r.length;t++)writeProperty(e,i,r[t]);else writeProperty(e,i,r)}}function byteLength(e){return e?e instanceof s?e.length:s.byteLength(e):0}function isStringOrBuffer(e){return"string"==typeof e||e instanceof s}e.exports=generate},36482:function(e,t,r){"use strict";var i,s=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var s=Object.getOwnPropertyDescriptor(t,r);(!s||("get"in s?!t.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,s)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||(i=function(e){return(i=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t})(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=i(e),o=0;o<r.length;o++)"default"!==r[o]&&s(t,e,r[o]);return n(t,e),t}),a=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||s(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0});let l=o(r(40042));t.default=l,a(r(40042),t)},11457:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BufferedDuplex=void 0,t.writev=writev;let i=r(57407),s=r(14300);function writev(e,t){let r=Array(e.length);for(let t=0;t<e.length;t++)"string"==typeof e[t].chunk?r[t]=s.Buffer.from(e[t].chunk,"utf8"):r[t]=e[t].chunk;this._write(s.Buffer.concat(r),"binary",t)}let BufferedDuplex=class BufferedDuplex extends i.Duplex{constructor(e,t,r){super({objectMode:!0}),this.proxy=t,this.socket=r,this.writeQueue=[],e.objectMode||(this._writev=writev.bind(this)),this.isSocketOpen=!1,this.proxy.on("data",e=>{!this.destroyed&&this.readable&&this.push(e)})}_read(e){this.proxy.read(e)}_write(e,t,r){this.isSocketOpen?this.writeToProxy(e,t,r):this.writeQueue.push({chunk:e,encoding:t,cb:r})}_final(e){this.writeQueue=[],this.proxy.end(e)}_destroy(e,t){this.writeQueue=[],this.proxy.destroy(),t(e)}socketReady(){this.emit("connect"),this.isSocketOpen=!0,this.processWriteQueue()}writeToProxy(e,t,r){!1===this.proxy.write(e,t)?this.proxy.once("drain",r):r()}processWriteQueue(){for(;this.writeQueue.length>0;){let{chunk:e,encoding:t,cb:r}=this.writeQueue.shift();this.writeToProxy(e,t,r)}}};t.BufferedDuplex=BufferedDuplex},92785:function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});let s=i(r(95052));let KeepaliveManager=class KeepaliveManager{get keepaliveTimeoutTimestamp(){return this._keepaliveTimeoutTimestamp}get intervalEvery(){return this._intervalEvery}get keepalive(){return this._keepalive}constructor(e,t){this.destroyed=!1,this.client=e,this.timer="object"==typeof t&&"set"in t&&"clear"in t?t:(0,s.default)(t),this.setKeepalive(e.options.keepalive)}clear(){this.timerId&&(this.timer.clear(this.timerId),this.timerId=null)}setKeepalive(e){if(isNaN(e*=1e3)||e<=0||e>2147483647)throw Error(`Keepalive value must be an integer between 0 and 2147483647. Provided value is ${e}`);this._keepalive=e,this.reschedule(),this.client.log(`KeepaliveManager: set keepalive to ${e}ms`)}destroy(){this.clear(),this.destroyed=!0}reschedule(){if(this.destroyed)return;this.clear(),this.counter=0;let e=Math.ceil(1.5*this._keepalive);this._keepaliveTimeoutTimestamp=Date.now()+e,this._intervalEvery=Math.ceil(this._keepalive/2),this.timerId=this.timer.set(()=>{!this.destroyed&&(this.counter+=1,2===this.counter?this.client.sendPing():this.counter>2&&this.client.onKeepaliveTimeout())},this._intervalEvery)}};t.default=KeepaliveManager},32518:function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.TypedEventEmitter=void 0;let s=i(r(82361)),n=r(58446);let TypedEventEmitter=class TypedEventEmitter{};t.TypedEventEmitter=TypedEventEmitter,(0,n.applyMixin)(TypedEventEmitter,s.default)},66539:function(e,t,r){"use strict";var i,s=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var s=Object.getOwnPropertyDescriptor(t,r);(!s||("get"in s?!t.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,s)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||(i=function(e){return(i=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t})(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=i(e),o=0;o<r.length;o++)"default"!==r[o]&&s(t,e,r[o]);return n(t,e),t}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});let l=a(r(20280)),h=a(r(35056)),u=a(r(7654)),c=r(57407),d=a(r(6912)),p=o(r(29798)),g=a(r(17783)),b=a(r(49815)),m=a(r(47e3)),_=r(58446),y=r(32518),S=a(r(92785)),v=o(r(96362)),w=globalThis.setImmediate||((...e)=>{let t=e.shift();(0,_.nextTick)(()=>{t(...e)})}),k={keepalive:60,reschedulePings:!0,protocolId:"MQTT",protocolVersion:4,reconnectPeriod:1e3,connectTimeout:3e4,clean:!0,resubscribe:!0,subscribeBatchSize:null,writeCache:!0,timerVariant:"auto"};let MqttClient=class MqttClient extends y.TypedEventEmitter{static defaultId(){return`mqttjs_${Math.random().toString(16).substr(2,8)}`}constructor(e,t){for(let e in super(),this.options=t||{},k)void 0===this.options[e]?this.options[e]=k[e]:this.options[e]=t[e];this.log=this.options.log||(0,g.default)("mqttjs:client"),this.noop=this._noop.bind(this),this.log("MqttClient :: version:",MqttClient.VERSION),v.isWebWorker?this.log("MqttClient :: environment","webworker"):this.log("MqttClient :: environment",v.default?"browser":"node"),this.log("MqttClient :: options.protocol",t.protocol),this.log("MqttClient :: options.protocolVersion",t.protocolVersion),this.log("MqttClient :: options.username",t.username),this.log("MqttClient :: options.keepalive",t.keepalive),this.log("MqttClient :: options.reconnectPeriod",t.reconnectPeriod),this.log("MqttClient :: options.rejectUnauthorized",t.rejectUnauthorized),this.log("MqttClient :: options.properties.topicAliasMaximum",t.properties?t.properties.topicAliasMaximum:void 0),this.options.clientId="string"==typeof t.clientId?t.clientId:MqttClient.defaultId(),this.log("MqttClient :: clientId",this.options.clientId),this.options.customHandleAcks=5===t.protocolVersion&&t.customHandleAcks?t.customHandleAcks:(...e)=>{e[3](null,0)},this.options.writeCache||(h.default.writeToStream.cacheNumbers=!1),this.streamBuilder=e,this.messageIdProvider=void 0===this.options.messageIdProvider?new u.default:this.options.messageIdProvider,this.outgoingStore=t.outgoingStore||new b.default,this.incomingStore=t.incomingStore||new b.default,this.queueQoSZero=void 0===t.queueQoSZero||t.queueQoSZero,this._resubscribeTopics={},this.messageIdToTopic={},this.keepaliveManager=null,this.connected=!1,this.disconnecting=!1,this.reconnecting=!1,this.queue=[],this.connackTimer=null,this.reconnectTimer=null,this._storeProcessing=!1,this._packetIdsDuringStoreProcessing={},this._storeProcessingQueue=[],this.outgoing={},this._firstConnection=!0,t.properties&&t.properties.topicAliasMaximum>0&&(t.properties.topicAliasMaximum>65535?this.log("MqttClient :: options.properties.topicAliasMaximum is out of range"):this.topicAliasRecv=new l.default(t.properties.topicAliasMaximum)),this.on("connect",()=>{let{queue:e}=this,deliver=()=>{let t=e.shift();this.log("deliver :: entry %o",t);let r=null;if(!t){this._resubscribe();return}r=t.packet,this.log("deliver :: call _sendPacket for %o",r);let i=!0;r.messageId&&0!==r.messageId&&!this.messageIdProvider.register(r.messageId)&&(i=!1),i?this._sendPacket(r,e=>{t.cb&&t.cb(e),deliver()}):(this.log("messageId: %d has already used. The message is skipped and removed.",r.messageId),deliver())};this.log("connect :: sending queued packets"),deliver()}),this.on("close",()=>{this.log("close :: connected set to `false`"),this.connected=!1,this.log("close :: clearing connackTimer"),clearTimeout(this.connackTimer),this._destroyKeepaliveManager(),this.topicAliasRecv&&this.topicAliasRecv.clear(),this.log("close :: calling _setupReconnect"),this._setupReconnect()}),this.options.manualConnect||(this.log("MqttClient :: setting up stream"),this.connect())}handleAuth(e,t){t()}handleMessage(e,t){t()}_nextId(){return this.messageIdProvider.allocate()}getLastMessageId(){return this.messageIdProvider.getLastAllocated()}connect(){var e;let t=new c.Writable,r=h.default.parser(this.options),i=null,s=[];this.log("connect :: calling method to clear reconnect"),this._clearReconnect(),this.disconnected&&!this.reconnecting&&(this.incomingStore=this.options.incomingStore||new b.default,this.outgoingStore=this.options.outgoingStore||new b.default,this.disconnecting=!1,this.disconnected=!1),this.log("connect :: using streamBuilder provided to client to create stream"),this.stream=this.streamBuilder(this),r.on("packet",e=>{this.log("parser :: on packet push to packets array."),s.push(e)});let work=()=>{this.log("work :: getting next packet in queue");let e=s.shift();if(e)this.log("work :: packet pulled from queue"),(0,m.default)(this,e,nextTickWork);else{this.log("work :: no packets in queue");let e=i;i=null,this.log("work :: done flag is %s",!!e),e&&e()}},nextTickWork=()=>{if(s.length)(0,_.nextTick)(work);else{let e=i;i=null,e()}};t._write=(e,t,s)=>{i=s,this.log("writable stream :: parsing buffer"),r.parse(e),work()},this.log("connect :: pipe stream to writable stream"),this.stream.pipe(t),this.stream.on("error",e=>{this.log("streamErrorHandler :: error",e.message),e.code?(this.log("streamErrorHandler :: emitting error"),this.emit("error",e)):this.noop(e)}),this.stream.on("close",()=>{this.log("(%s)stream :: on close",this.options.clientId),this._flushVolatile(),this.log("stream: emit close to MqttClient"),this.emit("close")}),this.log("connect: sending packet `connect`");let n={cmd:"connect",protocolId:this.options.protocolId,protocolVersion:this.options.protocolVersion,clean:this.options.clean,clientId:this.options.clientId,keepalive:this.options.keepalive,username:this.options.username,password:this.options.password,properties:this.options.properties};if(this.options.will&&(n.will=Object.assign(Object.assign({},this.options.will),{payload:null===(e=this.options.will)||void 0===e?void 0:e.payload})),this.topicAliasRecv&&(n.properties||(n.properties={}),this.topicAliasRecv&&(n.properties.topicAliasMaximum=this.topicAliasRecv.max)),this._writePacket(n),r.on("error",this.emit.bind(this,"error")),this.options.properties){if(!this.options.properties.authenticationMethod&&this.options.properties.authenticationData)return this.end(()=>this.emit("error",Error("Packet has no Authentication Method"))),this;if(this.options.properties.authenticationMethod&&this.options.authPacket&&"object"==typeof this.options.authPacket){let e=Object.assign({cmd:"auth",reasonCode:0},this.options.authPacket);this._writePacket(e)}}return this.stream.setMaxListeners(1e3),clearTimeout(this.connackTimer),this.connackTimer=setTimeout(()=>{this.log("!!connectTimeout hit!! Calling _cleanUp with force `true`"),this.emit("error",Error("connack timeout")),this._cleanUp(!0)},this.options.connectTimeout),this}publish(e,t,r,i){this.log("publish :: message `%s` to topic `%s`",t,e);let{options:s}=this;"function"==typeof r&&(i=r,r=null),r=r||{},r=Object.assign(Object.assign({},{qos:0,retain:!1,dup:!1}),r);let{qos:n,retain:o,dup:a,properties:l,cbStorePut:h}=r;if(this._checkDisconnecting(i))return this;let publishProc=()=>{let r=0;if((1===n||2===n)&&null===(r=this._nextId()))return this.log("No messageId left"),!1;let u={cmd:"publish",topic:e,payload:t,qos:n,retain:o,messageId:r,dup:a};switch(5===s.protocolVersion&&(u.properties=l),this.log("publish :: qos",n),n){case 1:case 2:this.outgoing[u.messageId]={volatile:!1,cb:i||this.noop},this.log("MqttClient:publish: packet cmd: %s",u.cmd),this._sendPacket(u,void 0,h);break;default:this.log("MqttClient:publish: packet cmd: %s",u.cmd),this._sendPacket(u,i,h)}return!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!publishProc())&&this._storeProcessingQueue.push({invoke:publishProc,cbStorePut:r.cbStorePut,callback:i}),this}publishAsync(e,t,r){return new Promise((i,s)=>{this.publish(e,t,r,(e,t)=>{e?s(e):i(t)})})}subscribe(e,t,r){let i=this.options.protocolVersion;"function"==typeof t&&(r=t),r=r||this.noop;let s=!1,n=[];"string"==typeof e?n=e=[e]:Array.isArray(e)?n=e:"object"==typeof e&&(s=e.resubscribe,delete e.resubscribe,n=Object.keys(e));let o=p.validateTopics(n);if(null!==o)return w(r,Error(`Invalid topic ${o}`)),this;if(this._checkDisconnecting(r))return this.log("subscribe: discconecting true"),this;let a={qos:0};5===i&&(a.nl=!1,a.rap=!1,a.rh=0),t=Object.assign(Object.assign({},a),t);let l=t.properties,h=[],parseSub=(e,r)=>{if(r=r||t,!Object.prototype.hasOwnProperty.call(this._resubscribeTopics,e)||this._resubscribeTopics[e].qos<r.qos||s){let t={topic:e,qos:r.qos};5===i&&(t.nl=r.nl,t.rap=r.rap,t.rh=r.rh,t.properties=l),this.log("subscribe: pushing topic `%s` and qos `%s` to subs list",t.topic,t.qos),h.push(t)}};if(Array.isArray(e)?e.forEach(e=>{this.log("subscribe: array topic %s",e),parseSub(e)}):Object.keys(e).forEach(t=>{this.log("subscribe: object topic %s, %o",t,e[t]),parseSub(t,e[t])}),!h.length)return r(null,[]),this;let subscribeChunkedSubs=(e,t)=>{let r={cmd:"subscribe",subscriptions:e,messageId:t};if(l&&(r.properties=l),this.options.resubscribe){this.log("subscribe :: resubscribe true");let t=[];e.forEach(e=>{if(this.options.reconnectPeriod>0){let r={qos:e.qos};5===i&&(r.nl=e.nl||!1,r.rap=e.rap||!1,r.rh=e.rh||0,r.properties=e.properties),this._resubscribeTopics[e.topic]=r,t.push(e.topic)}}),this.messageIdToTopic[r.messageId]=t}let s=new Promise((t,i)=>{this.outgoing[r.messageId]={volatile:!0,cb(r,s){if(!r){let{granted:t}=s;for(let r=0;r<t.length;r+=1)e[r].qos=t[r]}r?i(new _.ErrorWithSubackPacket(r.message,s)):t(s)}}});return this.log("subscribe :: call _sendPacket"),this._sendPacket(r),s},subscribeProc=()=>{var e;let t=null!==(e=this.options.subscribeBatchSize)&&void 0!==e?e:h.length,i=[];for(let e=0;e<h.length;e+=t){let r=h.slice(e,e+t),s=this._nextId();if(null===s)return this.log("No messageId left"),!1;i.push(subscribeChunkedSubs(r,s))}return Promise.all(i).then(e=>{r(null,h,e.at(-1))}).catch(e=>{r(e,h,e.packet)}),!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!subscribeProc())&&this._storeProcessingQueue.push({invoke:subscribeProc,callback:r}),this}subscribeAsync(e,t){return new Promise((r,i)=>{this.subscribe(e,t,(e,t)=>{e?i(e):r(t)})})}unsubscribe(e,t,r){"string"==typeof e&&(e=[e]),"function"==typeof t&&(r=t),r=r||this.noop;let i=p.validateTopics(e);if(null!==i)return w(r,Error(`Invalid topic ${i}`)),this;if(this._checkDisconnecting(r))return this;let unsubscribeProc=()=>{let i=this._nextId();if(null===i)return this.log("No messageId left"),!1;let s={cmd:"unsubscribe",messageId:i,unsubscriptions:[]};return"string"==typeof e?s.unsubscriptions=[e]:Array.isArray(e)&&(s.unsubscriptions=e),this.options.resubscribe&&s.unsubscriptions.forEach(e=>{delete this._resubscribeTopics[e]}),"object"==typeof t&&t.properties&&(s.properties=t.properties),this.outgoing[s.messageId]={volatile:!0,cb:r},this.log("unsubscribe: call _sendPacket"),this._sendPacket(s),!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!unsubscribeProc())&&this._storeProcessingQueue.push({invoke:unsubscribeProc,callback:r}),this}unsubscribeAsync(e,t){return new Promise((r,i)=>{this.unsubscribe(e,t,(e,t)=>{e?i(e):r(t)})})}end(e,t,r){this.log("end :: (%s)",this.options.clientId),(null==e||"boolean"!=typeof e)&&(r=r||t,t=e,e=!1),"object"!=typeof t&&(r=r||t,t=null),this.log("end :: cb? %s",!!r),r&&"function"==typeof r||(r=this.noop);let closeStores=()=>{this.log("end :: closeStores: closing incoming and outgoing stores"),this.disconnected=!0,this.incomingStore.close(e=>{this.outgoingStore.close(t=>{if(this.log("end :: closeStores: emitting end"),this.emit("end"),r){let i=e||t;this.log("end :: closeStores: invoking callback with args"),r(i)}})}),this._deferredReconnect?this._deferredReconnect():(0===this.options.reconnectPeriod||this.options.manualConnect)&&(this.disconnecting=!1)},finish=()=>{this.log("end :: (%s) :: finish :: calling _cleanUp with force %s",this.options.clientId,e),this._cleanUp(e,()=>{this.log("end :: finish :: calling process.nextTick on closeStores"),(0,_.nextTick)(closeStores)},t)};return this.disconnecting?r():(this._clearReconnect(),this.disconnecting=!0,!e&&Object.keys(this.outgoing).length>0?(this.log("end :: (%s) :: calling finish in 10ms once outgoing is empty",this.options.clientId),this.once("outgoingEmpty",setTimeout.bind(null,finish,10))):(this.log("end :: (%s) :: immediately calling finish",this.options.clientId),finish())),this}endAsync(e,t){return new Promise((r,i)=>{this.end(e,t,e=>{e?i(e):r()})})}removeOutgoingMessage(e){if(this.outgoing[e]){let{cb:t}=this.outgoing[e];this._removeOutgoingAndStoreMessage(e,()=>{t(Error("Message removed"))})}return this}reconnect(e){this.log("client reconnect");let f=()=>{e?(this.options.incomingStore=e.incomingStore,this.options.outgoingStore=e.outgoingStore):(this.options.incomingStore=null,this.options.outgoingStore=null),this.incomingStore=this.options.incomingStore||new b.default,this.outgoingStore=this.options.outgoingStore||new b.default,this.disconnecting=!1,this.disconnected=!1,this._deferredReconnect=null,this._reconnect()};return this.disconnecting&&!this.disconnected?this._deferredReconnect=f:f(),this}_flushVolatile(){this.outgoing&&(this.log("_flushVolatile :: deleting volatile messages from the queue and setting their callbacks as error function"),Object.keys(this.outgoing).forEach(e=>{this.outgoing[e].volatile&&"function"==typeof this.outgoing[e].cb&&(this.outgoing[e].cb(Error("Connection closed")),delete this.outgoing[e])}))}_flush(){this.outgoing&&(this.log("_flush: queue exists? %b",!!this.outgoing),Object.keys(this.outgoing).forEach(e=>{"function"==typeof this.outgoing[e].cb&&(this.outgoing[e].cb(Error("Connection closed")),delete this.outgoing[e])}))}_removeTopicAliasAndRecoverTopicName(e){let t;e.properties&&(t=e.properties.topicAlias);let r=e.topic.toString();if(this.log("_removeTopicAliasAndRecoverTopicName :: alias %d, topic %o",t,r),0===r.length){if(void 0===t||void 0===(r=this.topicAliasSend.getTopicByAlias(t)))return Error("Unregistered Topic Alias");e.topic=r}t&&delete e.properties.topicAlias}_checkDisconnecting(e){return this.disconnecting&&(e&&e!==this.noop?e(Error("client disconnecting")):this.emit("error",Error("client disconnecting"))),this.disconnecting}_reconnect(){this.log("_reconnect: emitting reconnect to client"),this.emit("reconnect"),this.connected?(this.end(()=>{this.connect()}),this.log("client already connected. disconnecting first.")):(this.log("_reconnect: calling connect"),this.connect())}_setupReconnect(){this.disconnecting||this.reconnectTimer||!(this.options.reconnectPeriod>0)?this.log("_setupReconnect :: doing nothing..."):(this.reconnecting||(this.log("_setupReconnect :: emit `offline` state"),this.emit("offline"),this.log("_setupReconnect :: set `reconnecting` to `true`"),this.reconnecting=!0),this.log("_setupReconnect :: setting reconnectTimer for %d ms",this.options.reconnectPeriod),this.reconnectTimer=setInterval(()=>{this.log("reconnectTimer :: reconnect triggered!"),this._reconnect()},this.options.reconnectPeriod))}_clearReconnect(){this.log("_clearReconnect : clearing reconnect timer"),this.reconnectTimer&&(clearInterval(this.reconnectTimer),this.reconnectTimer=null)}_cleanUp(e,t,r={}){if(t&&(this.log("_cleanUp :: done callback provided for on stream close"),this.stream.on("close",t)),this.log("_cleanUp :: forced? %s",e),e)0===this.options.reconnectPeriod&&this.options.clean&&this._flush(),this.log("_cleanUp :: (%s) :: destroying stream",this.options.clientId),this.stream.destroy();else{let e=Object.assign({cmd:"disconnect"},r);this.log("_cleanUp :: (%s) :: call _sendPacket with disconnect packet",this.options.clientId),this._sendPacket(e,()=>{this.log("_cleanUp :: (%s) :: destroying stream",this.options.clientId),w(()=>{this.stream.end(()=>{this.log("_cleanUp :: (%s) :: stream destroyed",this.options.clientId)})})})}this.disconnecting||this.reconnecting||(this.log("_cleanUp :: client not disconnecting/reconnecting. Clearing and resetting reconnect."),this._clearReconnect(),this._setupReconnect()),this._destroyKeepaliveManager(),t&&!this.connected&&(this.log("_cleanUp :: (%s) :: removing stream `done` callback `close` listener",this.options.clientId),this.stream.removeListener("close",t),t())}_storeAndSend(e,t,r){let i;this.log("storeAndSend :: store packet with cmd %s to outgoingStore",e.cmd);let s=e;if("publish"===s.cmd&&(s=(0,d.default)(e),i=this._removeTopicAliasAndRecoverTopicName(s)))return t&&t(i);this.outgoingStore.put(s,i=>{if(i)return t&&t(i);r(),this._writePacket(e,t)})}_applyTopicAlias(e){if(5===this.options.protocolVersion&&"publish"===e.cmd){let t;e.properties&&(t=e.properties.topicAlias);let r=e.topic.toString();if(this.topicAliasSend){if(t){if(0!==r.length&&(this.log("applyTopicAlias :: register topic: %s - alias: %d",r,t),!this.topicAliasSend.put(r,t)))return this.log("applyTopicAlias :: error out of range. topic: %s - alias: %d",r,t),Error("Sending Topic Alias out of range")}else 0!==r.length&&(this.options.autoAssignTopicAlias?(t=this.topicAliasSend.getAliasByTopic(r))?(e.topic="",e.properties=Object.assign(Object.assign({},e.properties),{topicAlias:t}),this.log("applyTopicAlias :: auto assign(use) topic: %s - alias: %d",r,t)):(t=this.topicAliasSend.getLruAlias(),this.topicAliasSend.put(r,t),e.properties=Object.assign(Object.assign({},e.properties),{topicAlias:t}),this.log("applyTopicAlias :: auto assign topic: %s - alias: %d",r,t)):this.options.autoUseTopicAlias&&(t=this.topicAliasSend.getAliasByTopic(r))&&(e.topic="",e.properties=Object.assign(Object.assign({},e.properties),{topicAlias:t}),this.log("applyTopicAlias :: auto use topic: %s - alias: %d",r,t)))}else if(t)return this.log("applyTopicAlias :: error out of range. topic: %s - alias: %d",r,t),Error("Sending Topic Alias out of range")}}_noop(e){this.log("noop ::",e)}_writePacket(e,t){this.log("_writePacket :: packet: %O",e),this.log("_writePacket :: emitting `packetsend`"),this.emit("packetsend",e),this.log("_writePacket :: writing to stream");let r=h.default.writeToStream(e,this.stream,this.options);this.log("_writePacket :: writeToStream result %s",r),!r&&t&&t!==this.noop?(this.log("_writePacket :: handle events on `drain` once through callback."),this.stream.once("drain",t)):t&&(this.log("_writePacket :: invoking cb"),t())}_sendPacket(e,t,r,i){this.log("_sendPacket :: (%s) ::  start",this.options.clientId),r=r||this.noop,t=t||this.noop;let s=this._applyTopicAlias(e);if(s){t(s);return}if(!this.connected){if("auth"===e.cmd){this._writePacket(e,t);return}this.log("_sendPacket :: client not connected. Storing packet offline."),this._storePacket(e,t,r);return}if(i){this._writePacket(e,t);return}switch(e.cmd){case"publish":break;case"pubrel":this._storeAndSend(e,t,r);return;default:this._writePacket(e,t);return}switch(e.qos){case 2:case 1:this._storeAndSend(e,t,r);break;default:this._writePacket(e,t)}this.log("_sendPacket :: (%s) ::  end",this.options.clientId)}_storePacket(e,t,r){this.log("_storePacket :: packet: %o",e),this.log("_storePacket :: cb? %s",!!t),r=r||this.noop;let i=e;if("publish"===i.cmd){i=(0,d.default)(e);let r=this._removeTopicAliasAndRecoverTopicName(i);if(r)return t&&t(r)}let s=i.qos||0;0===s&&this.queueQoSZero||"publish"!==i.cmd?this.queue.push({packet:i,cb:t}):s>0?(t=this.outgoing[i.messageId]?this.outgoing[i.messageId].cb:null,this.outgoingStore.put(i,e=>{if(e)return t&&t(e);r()})):t&&t(Error("No connection to broker"))}_setupKeepaliveManager(){this.log("_setupKeepaliveManager :: keepalive %d (seconds)",this.options.keepalive),!this.keepaliveManager&&this.options.keepalive&&(this.keepaliveManager=new S.default(this,this.options.timerVariant))}_destroyKeepaliveManager(){this.keepaliveManager&&(this.log("_destroyKeepaliveManager :: destroying keepalive manager"),this.keepaliveManager.destroy(),this.keepaliveManager=null)}reschedulePing(e=!1){this.keepaliveManager&&this.options.keepalive&&(e||this.options.reschedulePings)&&this._reschedulePing()}_reschedulePing(){this.log("_reschedulePing :: rescheduling ping"),this.keepaliveManager.reschedule()}sendPing(){this.log("_sendPing :: sending pingreq"),this._sendPacket({cmd:"pingreq"})}onKeepaliveTimeout(){this.emit("error",Error("Keepalive timeout")),this.log("onKeepaliveTimeout :: calling _cleanUp with force true"),this._cleanUp(!0)}_resubscribe(){this.log("_resubscribe");let e=Object.keys(this._resubscribeTopics);if(!this._firstConnection&&(this.options.clean||this.options.protocolVersion>=4&&!this.connackPacket.sessionPresent)&&e.length>0){if(this.options.resubscribe){if(5===this.options.protocolVersion){this.log("_resubscribe: protocolVersion 5");for(let t=0;t<e.length;t++){let r={};r[e[t]]=this._resubscribeTopics[e[t]],r.resubscribe=!0,this.subscribe(r,{properties:r[e[t]].properties})}}else this._resubscribeTopics.resubscribe=!0,this.subscribe(this._resubscribeTopics)}else this._resubscribeTopics={}}this._firstConnection=!1}_onConnect(e){if(this.disconnected){this.emit("connect",e);return}this.connackPacket=e,this.messageIdProvider.clear(),this._setupKeepaliveManager(),this.connected=!0;let startStreamProcess=()=>{let t=this.outgoingStore.createStream(),remove=()=>{t.destroy(),t=null,this._flushStoreProcessingQueue(),clearStoreProcessing()},clearStoreProcessing=()=>{this._storeProcessing=!1,this._packetIdsDuringStoreProcessing={}};this.once("close",remove),t.on("error",e=>{clearStoreProcessing(),this._flushStoreProcessingQueue(),this.removeListener("close",remove),this.emit("error",e)});let storeDeliver=()=>{let e;if(!t)return;let r=t.read(1);if(!r){t.once("readable",storeDeliver);return}if(this._storeProcessing=!0,this._packetIdsDuringStoreProcessing[r.messageId]){storeDeliver();return}this.disconnecting||this.reconnectTimer?t.destroy&&t.destroy():(e=this.outgoing[r.messageId]?this.outgoing[r.messageId].cb:null,this.outgoing[r.messageId]={volatile:!1,cb(t,r){e&&e(t,r),storeDeliver()}},this._packetIdsDuringStoreProcessing[r.messageId]=!0,this.messageIdProvider.register(r.messageId)?this._sendPacket(r,void 0,void 0,!0):this.log("messageId: %d has already used.",r.messageId))};t.on("end",()=>{let t=!0;for(let e in this._packetIdsDuringStoreProcessing)if(!this._packetIdsDuringStoreProcessing[e]){t=!1;break}this.removeListener("close",remove),t?(clearStoreProcessing(),this._invokeAllStoreProcessingQueue(),this.emit("connect",e)):startStreamProcess()}),storeDeliver()};startStreamProcess()}_invokeStoreProcessingQueue(){if(!this._storeProcessing&&this._storeProcessingQueue.length>0){let e=this._storeProcessingQueue[0];if(e&&e.invoke())return this._storeProcessingQueue.shift(),!0}return!1}_invokeAllStoreProcessingQueue(){for(;this._invokeStoreProcessingQueue(););}_flushStoreProcessingQueue(){for(let e of this._storeProcessingQueue)e.cbStorePut&&e.cbStorePut(Error("Connection closed")),e.callback&&e.callback(Error("Connection closed"));this._storeProcessingQueue.splice(0)}_removeOutgoingAndStoreMessage(e,t){delete this.outgoing[e],this.outgoingStore.del({messageId:e},(r,i)=>{t(r,i),this.messageIdProvider.deallocate(e),this._invokeStoreProcessingQueue()})}};MqttClient.VERSION=_.MQTTJS_VERSION,t.default=MqttClient},22451:(e,t,r)=>{"use strict";let i,s,n;let o=r(14300),a=r(57407),l=r(11457),h=!1;function buildProxy(){let e=new a.Transform;return e._write=(e,t,r)=>{i.sendSocketMessage({data:e.buffer,success(){r()},fail(){r(Error())}})},e._flush=e=>{i.closeSocket({success(){e()}})},e}function setDefaultOpts(e){e.hostname||(e.hostname="localhost"),e.path||(e.path="/"),e.wsOptions||(e.wsOptions={})}function buildUrl(e,t){let r="alis"===e.protocol?"wss":"ws",i=`${r}://${e.hostname}${e.path}`;return e.port&&80!==e.port&&443!==e.port&&(i=`${r}://${e.hostname}:${e.port}${e.path}`),"function"==typeof e.transformWsUrl&&(i=e.transformWsUrl(i,e,t)),i}function bindEventHandler(){h||(h=!0,i.onSocketOpen(()=>{n.socketReady()}),i.onSocketMessage(e=>{if("string"==typeof e.data){let t=o.Buffer.from(e.data,"base64");s.push(t)}else{let t=new FileReader;t.addEventListener("load",()=>{let e=t.result;e=e instanceof ArrayBuffer?o.Buffer.from(e):o.Buffer.from(e,"utf8"),s.push(e)}),t.readAsArrayBuffer(e.data)}}),i.onSocketClose(()=>{n.end(),n.destroy()}),i.onSocketError(e=>{n.destroy(e)}))}t.Z=(e,t)=>{if(t.hostname=t.hostname||t.host,!t.hostname)throw Error("Could not determine host. Specify host manually.");let r="MQIsdp"===t.protocolId&&3===t.protocolVersion?"mqttv3.1":"mqtt";setDefaultOpts(t);let o=buildUrl(t,e);return(i=t.my).connectSocket({url:o,protocols:r}),s=buildProxy(),n=new l.BufferedDuplex(t,s,i),bindEventHandler(),n}},75721:function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.connectAsync=connectAsync;let s=i(r(17783)),n=i(r(57310)),o=i(r(66539)),a=i(r(96362));"function"!=typeof(null==process?void 0:process.nextTick)&&(process.nextTick=setImmediate);let l=(0,s.default)("mqttjs"),h=null;function parseAuthOptions(e){let t;e.auth&&((t=e.auth.match(/^(.+):(.+)$/))?(e.username=t[1],e.password=t[2]):e.username=e.auth)}function connect(e,t){var i,s,u;if(l("connecting to an MQTT broker..."),"object"!=typeof e||t||(t=e,e=""),t=t||{},e&&"string"==typeof e){let r=n.default.parse(e,!0),i={};if(null!=r.port&&(i.port=Number(r.port)),i.host=r.hostname,i.query=r.query,i.auth=r.auth,i.protocol=r.protocol,i.path=r.path,!(t=Object.assign(Object.assign({},i),t)).protocol)throw Error("Missing protocol");t.protocol=t.protocol.replace(/:$/,"")}if(t.unixSocket=t.unixSocket||(null===(i=t.protocol)||void 0===i?void 0:i.includes("+unix")),t.unixSocket?t.protocol=t.protocol.replace("+unix",""):(null===(s=t.protocol)||void 0===s?void 0:s.startsWith("ws"))||(null===(u=t.protocol)||void 0===u?void 0:u.startsWith("wx"))||delete t.path,parseAuthOptions(t),t.query&&"string"==typeof t.query.clientId&&(t.clientId=t.query.clientId),a.default||t.unixSocket?t.socksProxy=void 0:void 0===t.socksProxy&&"undefined"!=typeof process&&(t.socksProxy=process.env.MQTTJS_SOCKS_PROXY),t.cert&&t.key){if(t.protocol){if(-1===["mqtts","wss","wxs","alis"].indexOf(t.protocol))switch(t.protocol){case"mqtt":t.protocol="mqtts";break;case"ws":t.protocol="wss";break;case"wx":t.protocol="wxs";break;case"ali":t.protocol="alis";break;default:throw Error(`Unknown protocol for secure connection: "${t.protocol}"!`)}}else throw Error("Missing secure protocol key")}if(h||(h={},a.default||t.forceNativeWebSocket?(h.ws=r(63774).browserStreamBuilder,h.wss=r(63774).browserStreamBuilder,h.wx=r(58209).Z,h.wxs=r(58209).Z,h.ali=r(22451).Z,h.alis=r(22451).Z):(h.ws=r(63774).streamBuilder,h.wss=r(63774).streamBuilder,h.mqtt=r(64561).default,h.tcp=r(64561).default,h.ssl=r(29507).default,h.tls=h.ssl,h.mqtts=r(29507).default)),!h[t.protocol]){let e=-1!==["mqtts","wss"].indexOf(t.protocol);t.protocol=["mqtt","mqtts","ws","wss","wx","wxs","ali","alis"].filter((t,r)=>(!e||r%2!=0)&&"function"==typeof h[t])[0]}if(!1===t.clean&&!t.clientId)throw Error("Missing clientId for unclean clients");function wrapper(e){return t.servers&&(e._reconnectCount&&e._reconnectCount!==t.servers.length||(e._reconnectCount=0),t.host=t.servers[e._reconnectCount].host,t.port=t.servers[e._reconnectCount].port,t.protocol=t.servers[e._reconnectCount].protocol?t.servers[e._reconnectCount].protocol:t.defaultProtocol,t.hostname=t.host,e._reconnectCount++),l("calling streambuilder for",t.protocol),h[t.protocol](e,t)}t.protocol&&(t.defaultProtocol=t.protocol);let c=new o.default(wrapper,t);return c.on("error",()=>{}),c}function connectAsync(e,t,r=!0){return new Promise((i,s)=>{let n=connect(e,t),o={connect:e=>{removePromiseResolutionListeners(),i(n)},end:()=>{removePromiseResolutionListeners(),i(n)},error:e=>{removePromiseResolutionListeners(),n.end(),s(e)}};function removePromiseResolutionListeners(){Object.keys(o).forEach(e=>{n.off(e,o[e])})}!1===r&&(o.close=()=>{o.error(Error("Couldn't connect to server"))}),Object.keys(o).forEach(e=>{n.on(e,o[e])})})}t.default=connect},98348:function(e,t,r){"use strict";var i,s=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var s=Object.getOwnPropertyDescriptor(t,r);(!s||("get"in s?!t.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,s)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||(i=function(e){return(i=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t})(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=i(e),o=0;o<r.length;o++)"default"!==r[o]&&s(t,e,r[o]);return n(t,e),t}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.default=openSocks;let l=a(r(17783)),h=r(12781),u=r(34776),c=o(r(9523)),d=r(73837),p=a(r(39491)),g=(0,l.default)("mqttjs:socks");let ProxyStream=class ProxyStream extends h.Duplex{constructor(){super({autoDestroy:!1}),this._flowing=!1,this._onData=e=>{(0,p.default)(this._socket),this._flowing=this.push(e),this._flowing||this._socket.pause()},this._onEnd=()=>{g("proxy stream received EOF"),this.push(null)},this._onClose=()=>{g("proxy stream closed"),this.destroy()},this._onError=e=>{g("proxy stream died with error %s",e),this.destroy(e)},this.cork()}_start(e){if(g("proxy stream started"),(0,p.default)(!this._socket),this.destroyed){e.destroy(this.errored);return}this._socket=e,this._flowing||e.pause(),e.on("data",this._onData),e.on("end",this._onEnd),e.on("error",this._onError),e.on("close",this._onClose),e.emit("connect"),this.uncork()}_write(e,t,r){(0,p.default)(this._socket),this._socket.write(e,r)}_read(e){var t,r;this._flowing=!0,null===(r=null===(t=this._socket)||void 0===t?void 0:t.resume)||void 0===r||r.call(t)}_destroy(e,t){var r,i;null===(i=null===(r=this._socket)||void 0===r?void 0:r.destroy)||void 0===i||i.call(r,e),t(e)}};function fatal(e){try{return void 0===e.code&&(e.code="SOCKS"),e}catch(t){return e}}function typeFromProtocol(e){switch(e){case"socks5h:":return[5,!0];case"socks4a:":return[4,!0];case"socks5:":return[5,!1];case"socks4:":return[4,!1];default:return[void 0,!1]}}function parseSocksUrl(e){let t=new URL(e);if(t.pathname||t.hash||t.search)throw fatal(Error("bad SOCKS URL"));let[r,i]=typeFromProtocol(t.protocol);if(!r)throw fatal(Error("bad SOCKS URL: invalid protocol"));let s=parseInt(t.port,10);if(Number.isNaN(s))throw fatal(Error("bad SOCKS URL: invalid port"));let n={host:t.hostname,port:s,type:r};return[n,i]}async function connectSocks(e,t,r,i,s={}){var n;let o=null!==(n=s.lookup)&&void 0!==n?n:(0,d.promisify)(c.lookup),[a,l]=parseSocksUrl(r);l||(g("resolving %s locally",e),e=(await o(e,{family:4===a.type?4:0})).address),g("establishing SOCKS%d connection to %s:%d via %s:%d",a.type,e,t,a.host,a.port);let h=new u.SocksClient({command:"connect",destination:{host:e,port:t},proxy:Object.assign({},a),timeout:s.timeout});h.connect(),h.on("established",({socket:e})=>i._start(e)),h.on("error",e=>{g("SOCKS failed: %s",e),i.destroy(fatal(e))})}function openSocks(e,t,r,i){g("SOCKS connection to %s:%d via %s",e,t,r);let s=new ProxyStream;return connectSocks(e,t,r,s,i).catch(e=>{g("SOCKS failed: %s",e),s.destroy(e)}),s}},64561:function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});let s=i(r(41808)),n=i(r(17783)),o=i(r(98348)),a=(0,n.default)("mqttjs:tcp");t.default=(e,t)=>{if(t.port=t.port||1883,t.hostname=t.hostname||t.host||"localhost",t.socksProxy)return(0,o.default)(t.hostname,t.port,t.socksProxy,{timeout:t.socksTimeout});let{port:r,path:i}=t,n=t.hostname;return a("port %d and host %s",r,n),s.default.createConnection({port:r,host:n,path:i})}},29507:function(e,t,r){"use strict";var i=this&&this.__rest||function(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>t.indexOf(i)&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var s=0,i=Object.getOwnPropertySymbols(e);s<i.length;s++)0>t.indexOf(i[s])&&Object.prototype.propertyIsEnumerable.call(e,i[s])&&(r[i[s]]=e[i[s]]);return r},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});let n=s(r(24404)),o=s(r(41808)),a=s(r(17783)),l=s(r(98348)),h=(0,a.default)("mqttjs:tls");function connect(e){let{host:t,port:r,socksProxy:s}=e,o=i(e,["host","port","socksProxy"]);return n.default.connect(s?Object.assign(Object.assign({},o),{socket:(0,l.default)(t,r,s,{timeout:e.socksTimeout})}):e)}t.default=(e,t)=>{t.port=t.port||8883,t.host=t.hostname||t.host||"localhost",0===o.default.isIP(t.host)&&(t.servername=t.host),t.rejectUnauthorized=!1!==t.rejectUnauthorized,delete t.path,h("port %d host %s rejectUnauthorized %b",t.port,t.host,t.rejectUnauthorized);let r=connect(t);function handleTLSerrors(i){t.rejectUnauthorized&&e.emit("error",i),r.end()}return r.on("secureConnect",()=>{t.rejectUnauthorized&&!r.authorized?r.emit("error",Error("TLS not authorized")):r.removeListener("error",handleTLSerrors)}),r.on("error",handleTLSerrors),r}},63774:function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.streamBuilder=t.browserStreamBuilder=void 0;let s=r(14300),n=i(r(26864)),o=i(r(17783)),a=r(57407),l=i(r(96362)),h=r(11457),u=(0,o.default)("mqttjs:ws"),c=["rejectUnauthorized","ca","cert","key","pfx","passphrase"];function buildUrl(e,t){let r=`${e.protocol}://${e.hostname}:${e.port}${e.path}`;return"function"==typeof e.transformWsUrl&&(r=e.transformWsUrl(r,e,t)),r}function setDefaultOpts(e){return e.port||("wss"===e.protocol?e.port=443:e.port=80),e.path||(e.path="/"),e.wsOptions||(e.wsOptions={}),l.default||e.forceNativeWebSocket||"wss"!==e.protocol||c.forEach(t=>{Object.prototype.hasOwnProperty.call(e,t)&&!Object.prototype.hasOwnProperty.call(e.wsOptions,t)&&(e.wsOptions[t]=e[t])}),e}function setDefaultBrowserOpts(e){let t=setDefaultOpts(e);if(t.hostname||(t.hostname=t.host),!t.hostname){if("undefined"==typeof document)throw Error("Could not determine host. Specify host manually.");let e=new URL(document.URL);t.hostname=e.hostname,t.port||(t.port=Number(e.port))}return void 0===t.objectMode&&(t.objectMode=!(!0===t.binary||void 0===t.binary)),t}function createWebSocket(e,t,r){u("createWebSocket"),u(`protocol: ${r.protocolId} ${r.protocolVersion}`);let i="MQIsdp"===r.protocolId&&3===r.protocolVersion?"mqttv3.1":"mqtt";return u(`creating new Websocket for url: ${t} and protocol: ${i}`),r.createWebsocket?r.createWebsocket(t,[i],r):new n.default(t,[i],r.wsOptions)}function createBrowserWebSocket(e,t){let r;let i="MQIsdp"===t.protocolId&&3===t.protocolVersion?"mqttv3.1":"mqtt",s=buildUrl(t,e);return(r=t.createWebsocket?t.createWebsocket(s,[i],t):new WebSocket(s,[i])).binaryType="arraybuffer",r}t.streamBuilder=(e,t)=>{u("streamBuilder");let r=setDefaultOpts(t);r.hostname=r.hostname||r.host||"localhost";let i=buildUrl(r,e),s=createWebSocket(e,i,r),o=n.default.createWebSocketStream(s,r.wsOptions);return o.url=i,s.on("close",()=>{o.destroy()}),o},t.browserStreamBuilder=(e,t)=>{let r;u("browserStreamBuilder");let i=setDefaultBrowserOpts(t),n=i.browserBufferSize||524288,o=t.browserBufferTimeout||1e3,l=!t.objectMode,c=createBrowserWebSocket(e,t),d=buildProxy(t,socketWriteBrowser,socketEndBrowser);t.objectMode||(d._writev=h.writev.bind(d)),d.on("close",()=>{c.close()});let p=void 0!==c.addEventListener;function buildProxy(e,t,r){let i=new a.Transform({objectMode:e.objectMode});return i._write=t,i._flush=r,i}function onOpen(){u("WebSocket onOpen"),r instanceof h.BufferedDuplex&&r.socketReady()}function onClose(e){u("WebSocket onClose",e),r.end(),r.destroy()}function onError(e){u("WebSocket onError",e);let t=Error("WebSocket error");t.event=e,r.destroy(t)}async function onMessage(e){if(!d||d.destroyed||!d.readable)return;let{data:t}=e;t=t instanceof ArrayBuffer?s.Buffer.from(t):t instanceof Blob?s.Buffer.from(await new Response(t).arrayBuffer()):s.Buffer.from(t,"utf8"),d.push(t)}function socketWriteBrowser(e,t,r){if(c.bufferedAmount>n){setTimeout(socketWriteBrowser,o,e,t,r);return}l&&"string"==typeof e&&(e=s.Buffer.from(e,"utf8"));try{c.send(e)}catch(e){return r(e)}r()}function socketEndBrowser(e){c.close(),e()}return c.readyState===c.OPEN?(r=d).socket=c:(r=new h.BufferedDuplex(t,d,c),p?c.addEventListener("open",onOpen):c.onopen=onOpen),p?(c.addEventListener("close",onClose),c.addEventListener("error",onError),c.addEventListener("message",onMessage)):(c.onclose=onClose,c.onerror=onError,c.onmessage=onMessage),r}},58209:(e,t,r)=>{"use strict";let i,s,n;let o=r(14300),a=r(57407),l=r(11457);function buildProxy(){let e=new a.Transform;return e._write=(e,t,r)=>{i.send({data:e.buffer,success(){r()},fail(e){r(Error(e))}})},e._flush=e=>{i.close({success(){e()}})},e}function setDefaultOpts(e){e.hostname||(e.hostname="localhost"),e.path||(e.path="/"),e.wsOptions||(e.wsOptions={})}function buildUrl(e,t){let r="wxs"===e.protocol?"wss":"ws",i=`${r}://${e.hostname}${e.path}`;return e.port&&80!==e.port&&443!==e.port&&(i=`${r}://${e.hostname}:${e.port}${e.path}`),"function"==typeof e.transformWsUrl&&(i=e.transformWsUrl(i,e,t)),i}function bindEventHandler(){i.onOpen(()=>{n.socketReady()}),i.onMessage(e=>{let{data:t}=e;t=t instanceof ArrayBuffer?o.Buffer.from(t):o.Buffer.from(t,"utf8"),s.push(t)}),i.onClose(()=>{n.emit("close"),n.end(),n.destroy()}),i.onError(e=>{let t=Error(e.errMsg);n.destroy(t)})}t.Z=(e,t)=>{if(t.hostname=t.hostname||t.host,!t.hostname)throw Error("Could not determine host. Specify host manually.");let r="MQIsdp"===t.protocolId&&3===t.protocolVersion?"mqttv3.1":"mqtt";setDefaultOpts(t);let o=buildUrl(t,e);i=wx.connectSocket({url:o,protocols:[r]}),s=buildProxy(),(n=new l.BufferedDuplex(t,s,i))._destroy=(e,t)=>{i.close({success(){t&&t(e)}})};let a=n.destroy;return n.destroy=(e,t)=>(n.destroy=a,setTimeout(()=>{i.close({fail(){n._destroy(e,t)}})},0),n),bindEventHandler(),n}},7654:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let DefaultMessageIdProvider=class DefaultMessageIdProvider{constructor(){this.nextId=Math.max(1,Math.floor(65535*Math.random()))}allocate(){let e=this.nextId++;return 65536===this.nextId&&(this.nextId=1),e}getLastAllocated(){return 1===this.nextId?65535:this.nextId-1}register(e){return!0}deallocate(e){}clear(){}};t.default=DefaultMessageIdProvider},95052:function(e,t,r){"use strict";var i,s=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var s=Object.getOwnPropertyDescriptor(t,r);(!s||("get"in s?!t.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,s)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||(i=function(e){return(i=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t})(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=i(e),o=0;o<r.length;o++)"default"!==r[o]&&s(t,e,r[o]);return n(t,e),t});Object.defineProperty(t,"__esModule",{value:!0});let a=o(r(96362)),l=r(24533),h={set:l.setInterval,clear:l.clearInterval},u={set:(e,t)=>setInterval(e,t),clear:e=>clearInterval(e)};t.default=e=>{switch(e){case"native":return u;case"worker":return h;default:return!a.default||a.isWebWorker||a.isReactNativeBrowser?u:h}}},46009:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ReasonCodes=void 0;let i=r(58446);t.ReasonCodes={0:"",1:"Unacceptable protocol version",2:"Identifier rejected",3:"Server unavailable",4:"Bad username or password",5:"Not authorized",16:"No matching subscribers",17:"No subscription existed",128:"Unspecified error",129:"Malformed Packet",130:"Protocol Error",131:"Implementation specific error",132:"Unsupported Protocol Version",133:"Client Identifier not valid",134:"Bad User Name or Password",135:"Not authorized",136:"Server unavailable",137:"Server busy",138:"Banned",139:"Server shutting down",140:"Bad authentication method",141:"Keep Alive timeout",142:"Session taken over",143:"Topic Filter invalid",144:"Topic Name invalid",145:"Packet identifier in use",146:"Packet Identifier not found",147:"Receive Maximum exceeded",148:"Topic Alias invalid",149:"Packet too large",150:"Message rate too high",151:"Quota exceeded",152:"Administrative action",153:"Payload format invalid",154:"Retain not supported",155:"QoS not supported",156:"Use another server",157:"Server moved",158:"Shared Subscriptions not supported",159:"Connection rate exceeded",160:"Maximum connect time",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"},t.default=(e,r)=>{let{messageId:s}=r,n=r.cmd,o=null,a=e.outgoing[s]?e.outgoing[s].cb:null,l=null;if(!a){e.log("_handleAck :: Server sent an ack in error. Ignoring.");return}switch(e.log("_handleAck :: packet type",n),n){case"pubcomp":case"puback":{let n=r.reasonCode;n&&n>0&&16!==n?(l=new i.ErrorWithReasonCode(`Publish error: ${t.ReasonCodes[n]}`,n),e._removeOutgoingAndStoreMessage(s,()=>{a(l,r)})):e._removeOutgoingAndStoreMessage(s,a);break}case"pubrec":{o={cmd:"pubrel",qos:2,messageId:s};let n=r.reasonCode;n&&n>0&&16!==n?(l=new i.ErrorWithReasonCode(`Publish error: ${t.ReasonCodes[n]}`,n),e._removeOutgoingAndStoreMessage(s,()=>{a(l,r)})):e._sendPacket(o);break}case"suback":{delete e.outgoing[s],e.messageIdProvider.deallocate(s);let i=r.granted;for(let r=0;r<i.length;r++){let n=i[r];if((128&n)!=0){(l=Error(`Subscribe error: ${t.ReasonCodes[n]}`)).code=n;let r=e.messageIdToTopic[s];r&&r.forEach(t=>{delete e._resubscribeTopics[t]})}}delete e.messageIdToTopic[s],e._invokeStoreProcessingQueue(),a(l,r);break}case"unsuback":delete e.outgoing[s],e.messageIdProvider.deallocate(s),e._invokeStoreProcessingQueue(),a(null,r);break;default:e.emit("error",Error("unrecognized packet type"))}e.disconnecting&&0===Object.keys(e.outgoing).length&&e.emit("outgoingEmpty")}},38660:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=r(58446),s=r(46009);t.default=(e,t)=>{let{options:r}=e,n=r.protocolVersion,o=5===n?t.reasonCode:t.returnCode;if(5!==n){let t=new i.ErrorWithReasonCode(`Protocol error: Auth packets are only supported in MQTT 5. Your version:${n}`,o);e.emit("error",t);return}e.handleAuth(t,(t,r)=>{if(t){e.emit("error",t);return}if(24===o)e.reconnecting=!1,e._sendPacket(r);else{let t=new i.ErrorWithReasonCode(`Connection refused: ${s.ReasonCodes[o]}`,o);e.emit("error",t)}})}},10419:function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});let s=r(46009),n=i(r(37105)),o=r(58446);t.default=(e,t)=>{e.log("_handleConnack");let{options:r}=e,i=r.protocolVersion,a=5===i?t.reasonCode:t.returnCode;if(clearTimeout(e.connackTimer),delete e.topicAliasSend,t.properties){if(t.properties.topicAliasMaximum){if(t.properties.topicAliasMaximum>65535){e.emit("error",Error("topicAliasMaximum from broker is out of range"));return}t.properties.topicAliasMaximum>0&&(e.topicAliasSend=new n.default(t.properties.topicAliasMaximum))}t.properties.serverKeepAlive&&r.keepalive&&(r.keepalive=t.properties.serverKeepAlive),t.properties.maximumPacketSize&&(r.properties||(r.properties={}),r.properties.maximumPacketSize=t.properties.maximumPacketSize)}if(0===a)e.reconnecting=!1,e._onConnect(t);else if(a>0){let t=new o.ErrorWithReasonCode(`Connection refused: ${s.ReasonCodes[a]}`,a);e.emit("error",t),e.options.reconnectOnConnackError&&e._cleanUp(!0)}}},47e3:function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});let s=i(r(55147)),n=i(r(38660)),o=i(r(10419)),a=i(r(46009)),l=i(r(12156));t.default=(e,t,r)=>{let{options:i}=e;if(5===i.protocolVersion&&i.properties&&i.properties.maximumPacketSize&&i.properties.maximumPacketSize<t.length)return e.emit("error",Error(`exceeding packets size ${t.cmd}`)),e.end({reasonCode:149,properties:{reasonString:"Maximum packet size was exceeded"}}),e;switch(e.log("_handlePacket :: emitting packetreceive"),e.emit("packetreceive",t),t.cmd){case"publish":(0,s.default)(e,t,r);break;case"puback":case"pubrec":case"pubcomp":case"suback":case"unsuback":e.reschedulePing(),(0,a.default)(e,t),r();break;case"pubrel":e.reschedulePing(),(0,l.default)(e,t,r);break;case"connack":(0,o.default)(e,t),r();break;case"auth":e.reschedulePing(),(0,n.default)(e,t),r();break;case"pingresp":e.log("_handlePacket :: received pingresp"),e.reschedulePing(!0),r();break;case"disconnect":e.emit("disconnect",t),r();break;default:e.log("_handlePacket :: unknown command"),r()}}},55147:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let r=[0,16,128,131,135,144,145,151,153];t.default=(e,t,i)=>{e.log("handlePublish: packet %o",t),i=void 0!==i?i:e.noop;let s=t.topic.toString(),n=t.payload,{qos:o}=t,{messageId:a}=t,{options:l}=e;if(5===e.options.protocolVersion){let r;if(t.properties&&(r=t.properties.topicAlias),void 0!==r){if(0===s.length){if(r>0&&r<=65535){let t=e.topicAliasRecv.getTopicByAlias(r);if(t)s=t,e.log("handlePublish :: topic complemented by alias. topic: %s - alias: %d",s,r);else{e.log("handlePublish :: unregistered topic alias. alias: %d",r),e.emit("error",Error("Received unregistered Topic Alias"));return}}else{e.log("handlePublish :: topic alias out of range. alias: %d",r),e.emit("error",Error("Received Topic Alias is out of range"));return}}else if(e.topicAliasRecv.put(s,r))e.log("handlePublish :: registered topic: %s - alias: %d",s,r);else{e.log("handlePublish :: topic alias out of range. alias: %d",r),e.emit("error",Error("Received Topic Alias is out of range"));return}}}switch(e.log("handlePublish: qos %d",o),o){case 2:l.customHandleAcks(s,n,t,(s,n)=>("number"==typeof s&&(n=s,s=null),s)?e.emit("error",s):-1===r.indexOf(n)?e.emit("error",Error("Wrong reason code for pubrec")):void(n?e._sendPacket({cmd:"pubrec",messageId:a,reasonCode:n},i):e.incomingStore.put(t,()=>{e._sendPacket({cmd:"pubrec",messageId:a},i)})));break;case 1:l.customHandleAcks(s,n,t,(o,l)=>("number"==typeof o&&(l=o,o=null),o)?e.emit("error",o):-1===r.indexOf(l)?e.emit("error",Error("Wrong reason code for puback")):void(l||e.emit("message",s,n,t),e.handleMessage(t,t=>{if(t)return i&&i(t);e._sendPacket({cmd:"puback",messageId:a,reasonCode:l},i)})));break;case 0:e.emit("message",s,n,t),e.handleMessage(t,i);break;default:e.log("handlePublish: unknown QoS. Doing nothing.")}}},12156:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=(e,t,r)=>{e.log("handling pubrel packet");let i=void 0!==r?r:e.noop,{messageId:s}=t,n={cmd:"pubcomp",messageId:s};e.incomingStore.get(t,(t,r)=>{t?e._sendPacket(n,i):(e.emit("message",r.topic,r.payload,r),e.handleMessage(r,t=>{if(t)return i(t);e.incomingStore.del(r,e.noop),e._sendPacket(n,i)}))})}},96362:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isReactNativeBrowser=t.isWebWorker=void 0;let isWebWorkerEnv=()=>{var e,t;return!!("object"==typeof self&&(null===(t=null===(e=null==self?void 0:self.constructor)||void 0===e?void 0:e.name)||void 0===t?void 0:t.includes("WorkerGlobalScope")))},r=(()=>{var e;if("undefined"!=typeof window){let t="undefined"!=typeof navigator&&(null===(e=navigator.userAgent)||void 0===e?void 0:e.toLowerCase().indexOf(" electron/"))>-1;if(t&&(null==process?void 0:process.versions)){let e=Object.prototype.hasOwnProperty.call(process.versions,"electron");return!e}return void 0!==window.document}return!1})()||isWebWorkerEnv()||"undefined"!=typeof navigator&&"ReactNative"===navigator.product;t.isWebWorker=isWebWorkerEnv(),t.isReactNativeBrowser="undefined"!=typeof navigator&&"ReactNative"===navigator.product,t.default=r},58446:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MQTTJS_VERSION=t.nextTick=t.ErrorWithSubackPacket=t.ErrorWithReasonCode=void 0,t.applyMixin=applyMixin;let ErrorWithReasonCode=class ErrorWithReasonCode extends Error{constructor(e,t){super(e),this.code=t,Object.setPrototypeOf(this,ErrorWithReasonCode.prototype),Object.getPrototypeOf(this).name="ErrorWithReasonCode"}};t.ErrorWithReasonCode=ErrorWithReasonCode;let ErrorWithSubackPacket=class ErrorWithSubackPacket extends Error{constructor(e,t){super(e),this.packet=t,Object.setPrototypeOf(this,ErrorWithSubackPacket.prototype),Object.getPrototypeOf(this).name="ErrorWithSubackPacket"}};function applyMixin(e,t,r=!1){var i;let s=[t];for(;;){let e=s[0],t=Object.getPrototypeOf(e);if(null==t?void 0:t.prototype)s.unshift(t);else break}for(let t of s)for(let s of Object.getOwnPropertyNames(t.prototype))(r||"constructor"!==s)&&Object.defineProperty(e.prototype,s,null!==(i=Object.getOwnPropertyDescriptor(t.prototype,s))&&void 0!==i?i:Object.create(null))}t.ErrorWithSubackPacket=ErrorWithSubackPacket,t.nextTick="function"==typeof(null==process?void 0:process.nextTick)?process.nextTick:e=>{setTimeout(e,0)},t.MQTTJS_VERSION=r(61624).version},49815:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=r(57407),s={objectMode:!0},n={clean:!0};let Store=class Store{constructor(e){this.options=e||{},this.options=Object.assign(Object.assign({},n),e),this._inflights=new Map}put(e,t){return this._inflights.set(e.messageId,e),t&&t(),this}createStream(){let e=new i.Readable(s),t=[],r=!1,n=0;return this._inflights.forEach((e,r)=>{t.push(e)}),e._read=()=>{!r&&n<t.length?e.push(t[n++]):e.push(null)},e.destroy=t=>{if(!r)return r=!0,setTimeout(()=>{e.emit("close")},0),e},e}del(e,t){let r=this._inflights.get(e.messageId);return r?(this._inflights.delete(e.messageId),t(null,r)):t&&t(Error("missing packet")),this}get(e,t){let r=this._inflights.get(e.messageId);return r?t(null,r):t&&t(Error("missing packet")),this}close(e){this.options.clean&&(this._inflights=null),e&&e()}};t.default=Store},20280:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let TopicAliasRecv=class TopicAliasRecv{constructor(e){this.aliasToTopic={},this.max=e}put(e,t){return 0!==t&&!(t>this.max)&&(this.aliasToTopic[t]=e,this.length=Object.keys(this.aliasToTopic).length,!0)}getTopicByAlias(e){return this.aliasToTopic[e]}clear(){this.aliasToTopic={}}};t.default=TopicAliasRecv},37105:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=r(62514),s=r(45502);let TopicAliasSend=class TopicAliasSend{constructor(e){e>0&&(this.aliasToTopic=new i.LRUCache({max:e}),this.topicToAlias={},this.numberAllocator=new s.NumberAllocator(1,e),this.max=e,this.length=0)}put(e,t){if(0===t||t>this.max)return!1;let r=this.aliasToTopic.get(t);return r&&delete this.topicToAlias[r],this.aliasToTopic.set(t,e),this.topicToAlias[e]=t,this.numberAllocator.use(t),this.length=this.aliasToTopic.size,!0}getTopicByAlias(e){return this.aliasToTopic.get(e)}getAliasByTopic(e){let t=this.topicToAlias[e];return void 0!==t&&this.aliasToTopic.get(t),t}clear(){this.aliasToTopic.clear(),this.topicToAlias={},this.numberAllocator.clear(),this.length=0}getLruAlias(){let e=this.numberAllocator.firstVacant();return e||[...this.aliasToTopic.keys()][this.aliasToTopic.size-1]}};t.default=TopicAliasSend},51449:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=r(45502);let UniqueMessageIdProvider=class UniqueMessageIdProvider{constructor(){this.numberAllocator=new i.NumberAllocator(1,65535)}allocate(){return this.lastId=this.numberAllocator.alloc(),this.lastId}getLastAllocated(){return this.lastId}register(e){return this.numberAllocator.use(e)}deallocate(e){this.numberAllocator.free(e)}clear(){this.numberAllocator.clear()}};t.default=UniqueMessageIdProvider},29798:(e,t)=>{"use strict";function validateTopic(e){let t=e.split("/");for(let e=0;e<t.length;e++)if("+"!==t[e]){if("#"===t[e])return e===t.length-1;if(-1!==t[e].indexOf("+")||-1!==t[e].indexOf("#"))return!1}return!0}function validateTopics(e){if(0===e.length)return"empty_topic_list";for(let t=0;t<e.length;t++)if(!validateTopic(e[t]))return e[t];return null}Object.defineProperty(t,"__esModule",{value:!0}),t.validateTopic=validateTopic,t.validateTopics=validateTopics},40042:function(e,t,r){"use strict";var i,s=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var s=Object.getOwnPropertyDescriptor(t,r);(!s||("get"in s?!t.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,s)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||(i=function(e){return(i=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t})(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=i(e),o=0;o<r.length;o++)"default"!==r[o]&&s(t,e,r[o]);return n(t,e),t}),a=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||s(t,e,r)},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ReasonCodes=t.KeepaliveManager=t.UniqueMessageIdProvider=t.DefaultMessageIdProvider=t.Store=t.MqttClient=t.connectAsync=t.connect=t.Client=void 0;let h=l(r(66539));t.MqttClient=h.default;let u=l(r(7654));t.DefaultMessageIdProvider=u.default;let c=l(r(51449));t.UniqueMessageIdProvider=c.default;let d=l(r(49815));t.Store=d.default;let p=o(r(75721));t.connect=p.default,Object.defineProperty(t,"connectAsync",{enumerable:!0,get:function(){return p.connectAsync}});let g=l(r(92785));t.KeepaliveManager=g.default,t.Client=h.default,a(r(66539),t),a(r(58446),t);var b=r(46009);Object.defineProperty(t,"ReasonCodes",{enumerable:!0,get:function(){return b.ReasonCodes}})},45502:(e,t,r)=>{let i=r(14530);e.exports.NumberAllocator=i},14530:(e,t,r)=>{"use strict";let i=r(82925).hU,s=r(17783)("number-allocator:trace"),n=r(17783)("number-allocator:error");function Interval(e,t){this.low=e,this.high=t}function NumberAllocator(e,t){if(!(this instanceof NumberAllocator))return new NumberAllocator(e,t);this.min=e,this.max=t,this.ss=new i([],(e,t)=>e.compare(t)),s("Create"),this.clear()}Interval.prototype.equals=function(e){return this.low===e.low&&this.high===e.high},Interval.prototype.compare=function(e){return this.low<e.low&&this.high<e.low?-1:e.low<this.low&&e.high<this.low?1:0},NumberAllocator.prototype.firstVacant=function(){return 0===this.ss.size()?null:this.ss.front().low},NumberAllocator.prototype.alloc=function(){if(0===this.ss.size())return s("alloc():empty"),null;let e=this.ss.begin(),t=e.pointer.low,r=e.pointer.high;return t+1<=r?this.ss.updateKeyByIterator(e,new Interval(t+1,r)):this.ss.eraseElementByPos(0),s("alloc():"+t),t},NumberAllocator.prototype.use=function(e){let t=new Interval(e,e),r=this.ss.lowerBound(t);if(!r.equals(this.ss.end())){let i=r.pointer.low,n=r.pointer.high;return r.pointer.equals(t)?(this.ss.eraseElementByIterator(r),s("use():"+e),!0):!(i>e)&&(i===e?this.ss.updateKeyByIterator(r,new Interval(i+1,n)):n===e?this.ss.updateKeyByIterator(r,new Interval(i,n-1)):(this.ss.updateKeyByIterator(r,new Interval(e+1,n)),this.ss.insert(new Interval(i,e-1))),s("use():"+e),!0)}return s("use():failed"),!1},NumberAllocator.prototype.free=function(e){if(e<this.min||e>this.max){n("free():"+e+" is out of range");return}let t=new Interval(e,e),r=this.ss.upperBound(t);if(r.equals(this.ss.end())){if(r.equals(this.ss.begin())){this.ss.insert(t);return}r.pre();let i=r.pointer.high,s=r.pointer.high;s+1===e?this.ss.updateKeyByIterator(r,new Interval(i,e)):this.ss.insert(t)}else if(r.equals(this.ss.begin())){if(e+1===r.pointer.low){let t=r.pointer.high;this.ss.updateKeyByIterator(r,new Interval(e,t))}else this.ss.insert(t)}else{let i=r.pointer.low,s=r.pointer.high;r.pre();let n=r.pointer.low,o=r.pointer.high;o+1===e?e+1===i?(this.ss.eraseElementByIterator(r),this.ss.updateKeyByIterator(r,new Interval(n,s))):this.ss.updateKeyByIterator(r,new Interval(n,e)):e+1===i?(this.ss.eraseElementByIterator(r.next()),this.ss.insert(new Interval(e,s))):this.ss.insert(t)}s("free():"+e)},NumberAllocator.prototype.clear=function(){s("clear()"),this.ss.clear(),this.ss.insert(new Interval(this.min,this.max))},NumberAllocator.prototype.intervalCount=function(){return this.ss.size()},NumberAllocator.prototype.dump=function(){for(let e of(console.log("length:"+this.ss.size()),this.ss))console.log(e)},e.exports=NumberAllocator},98578:e=>{"use strict";function nextTick(e,t,r,i){if("function"!=typeof e)throw TypeError('"callback" argument must be a function');var s,n,o=arguments.length;switch(o){case 0:case 1:return process.nextTick(e);case 2:return process.nextTick(function(){e.call(null,t)});case 3:return process.nextTick(function(){e.call(null,t,r)});case 4:return process.nextTick(function(){e.call(null,t,r,i)});default:for(s=Array(o-1),n=0;n<s.length;)s[n++]=arguments[n];return process.nextTick(function(){e.apply(null,s)})}}"undefined"!=typeof process&&process.version&&0!==process.version.indexOf("v0.")&&(0!==process.version.indexOf("v1.")||0===process.version.indexOf("v1.8."))?e.exports=process:e.exports={nextTick:nextTick}},85838:e=>{e.exports=global.process},94586:(e,t,r)=>{"use strict";let i;let{SymbolDispose:s}=r(1065),{AbortError:n,codes:o}=r(21257),{isNodeStream:a,isWebStream:l,kControllerErrorFunction:h}=r(3010),u=r(45532),{ERR_INVALID_ARG_TYPE:c}=o,validateAbortSignal=(e,t)=>{if("object"!=typeof e||!("aborted"in e))throw new c(t,"AbortSignal",e)};e.exports.addAbortSignal=function(t,r){if(validateAbortSignal(t,"signal"),!a(r)&&!l(r))throw new c("stream",["ReadableStream","WritableStream","Stream"],r);return e.exports.addAbortSignalNoValidate(t,r)},e.exports.addAbortSignalNoValidate=function(e,t){if("object"!=typeof e||!("aborted"in e))return t;let o=a(t)?()=>{t.destroy(new n(void 0,{cause:e.reason}))}:()=>{t[h](new n(void 0,{cause:e.reason}))};if(e.aborted)o();else{i=i||r(75965).addAbortListener;let n=i(e,o);u(t,n[s])}return t}},53964:(e,t,r)=>{"use strict";let{StringPrototypeSlice:i,SymbolIterator:s,TypedArrayPrototypeSet:n,Uint8Array:o}=r(1065),{Buffer:a}=r(14300),{inspect:l}=r(75965);e.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(e){let t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}unshift(e){let t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}shift(){if(0===this.length)return;let e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}clear(){this.head=this.tail=null,this.length=0}join(e){if(0===this.length)return"";let t=this.head,r=""+t.data;for(;null!==(t=t.next);)r+=e+t.data;return r}concat(e){if(0===this.length)return a.alloc(0);let t=a.allocUnsafe(e>>>0),r=this.head,i=0;for(;r;)n(t,r.data,i),i+=r.data.length,r=r.next;return t}consume(e,t){let r=this.head.data;if(e<r.length){let t=r.slice(0,e);return this.head.data=r.slice(e),t}return e===r.length?this.shift():t?this._getString(e):this._getBuffer(e)}first(){return this.head.data}*[s](){for(let e=this.head;e;e=e.next)yield e.data}_getString(e){let t="",r=this.head,s=0;do{let n=r.data;if(e>n.length)t+=n,e-=n.length;else{e===n.length?(t+=n,++s,r.next?this.head=r.next:this.head=this.tail=null):(t+=i(n,0,e),this.head=r,r.data=i(n,e));break}++s}while(null!==(r=r.next));return this.length-=s,t}_getBuffer(e){let t=a.allocUnsafe(e),r=e,i=this.head,s=0;do{let a=i.data;if(e>a.length)n(t,a,r-e),e-=a.length;else{e===a.length?(n(t,a,r-e),++s,i.next?this.head=i.next:this.head=this.tail=null):(n(t,new o(a.buffer,a.byteOffset,e),r-e),this.head=i,i.data=a.slice(e));break}++s}while(null!==(i=i.next));return this.length-=s,t}[Symbol.for("nodejs.util.inspect.custom")](e,t){return l(this,{...t,depth:0,customInspect:!1})}}},93195:(e,t,r)=>{"use strict";let{pipeline:i}=r(23417),s=r(81580),{destroyer:n}=r(71991),{isNodeStream:o,isReadable:a,isWritable:l,isWebStream:h,isTransformStream:u,isWritableStream:c,isReadableStream:d}=r(3010),{AbortError:p,codes:{ERR_INVALID_ARG_VALUE:g,ERR_MISSING_ARGS:b}}=r(21257),m=r(45532);e.exports=function(...e){let t,r,_,y,S;if(0===e.length)throw new b("streams");if(1===e.length)return s.from(e[0]);let v=[...e];if("function"==typeof e[0]&&(e[0]=s.from(e[0])),"function"==typeof e[e.length-1]){let t=e.length-1;e[t]=s.from(e[t])}for(let t=0;t<e.length;++t)if(o(e[t])||h(e[t])){if(t<e.length-1&&!(a(e[t])||d(e[t])||u(e[t])))throw new g(`streams[${t}]`,v[t],"must be readable");if(t>0&&!(l(e[t])||c(e[t])||u(e[t])))throw new g(`streams[${t}]`,v[t],"must be writable")}function onfinished(e){let t=y;y=null,t?t(e):e?S.destroy(e):B||I||S.destroy()}let w=e[0],k=i(e,onfinished),I=!!(l(w)||c(w)||u(w)),B=!!(a(k)||d(k)||u(k));if(S=new s({writableObjectMode:!!(null!=w&&w.writableObjectMode),readableObjectMode:!!(null!=k&&k.readableObjectMode),writable:I,readable:B}),I){if(o(w))S._write=function(e,r,i){w.write(e,r)?i():t=i},S._final=function(e){w.end(),r=e},w.on("drain",function(){if(t){let e=t;t=null,e()}});else if(h(w)){let e=u(w)?w.writable:w,t=e.getWriter();S._write=async function(e,r,i){try{await t.ready,t.write(e).catch(()=>{}),i()}catch(e){i(e)}},S._final=async function(e){try{await t.ready,t.close().catch(()=>{}),r=e}catch(t){e(t)}}}let e=u(k)?k.readable:k;m(e,()=>{if(r){let e=r;r=null,e()}})}if(B){if(o(k))k.on("readable",function(){if(_){let e=_;_=null,e()}}),k.on("end",function(){S.push(null)}),S._read=function(){for(;;){let e=k.read();if(null===e){_=S._read;return}if(!S.push(e))return}};else if(h(k)){let e=u(k)?k.readable:k,t=e.getReader();S._read=async function(){for(;;)try{let{value:e,done:r}=await t.read();if(!S.push(e))return;if(r){S.push(null);return}}catch{return}}}}return S._destroy=function(e,i){e||null===y||(e=new p),_=null,t=null,r=null,null===y?i(e):(y=i,o(k)&&n(k,e))},S}},71991:(e,t,r)=>{"use strict";let i=r(85838),{aggregateTwoErrors:s,codes:{ERR_MULTIPLE_CALLBACK:n},AbortError:o}=r(21257),{Symbol:a}=r(1065),{kIsDestroyed:l,isDestroyed:h,isFinished:u,isServerRequest:c}=r(3010),d=a("kDestroy"),p=a("kConstruct");function checkError(e,t,r){e&&(e.stack,t&&!t.errored&&(t.errored=e),r&&!r.errored&&(r.errored=e))}function destroy(e,t){let r=this._readableState,i=this._writableState,n=i||r;return null!=i&&i.destroyed||null!=r&&r.destroyed?"function"==typeof t&&t():(checkError(e,i,r),i&&(i.destroyed=!0),r&&(r.destroyed=!0),n.constructed?_destroy(this,e,t):this.once(d,function(r){_destroy(this,s(r,e),t)})),this}function _destroy(e,t,r){let s=!1;function onDestroy(t){if(s)return;s=!0;let n=e._readableState,o=e._writableState;checkError(t,o,n),o&&(o.closed=!0),n&&(n.closed=!0),"function"==typeof r&&r(t),t?i.nextTick(emitErrorCloseNT,e,t):i.nextTick(emitCloseNT,e)}try{e._destroy(t||null,onDestroy)}catch(e){onDestroy(e)}}function emitErrorCloseNT(e,t){emitErrorNT(e,t),emitCloseNT(e)}function emitCloseNT(e){let t=e._readableState,r=e._writableState;r&&(r.closeEmitted=!0),t&&(t.closeEmitted=!0),(null!=r&&r.emitClose||null!=t&&t.emitClose)&&e.emit("close")}function emitErrorNT(e,t){let r=e._readableState,i=e._writableState;null!=i&&i.errorEmitted||null!=r&&r.errorEmitted||(i&&(i.errorEmitted=!0),r&&(r.errorEmitted=!0),e.emit("error",t))}function undestroy(){let e=this._readableState,t=this._writableState;e&&(e.constructed=!0,e.closed=!1,e.closeEmitted=!1,e.destroyed=!1,e.errored=null,e.errorEmitted=!1,e.reading=!1,e.ended=!1===e.readable,e.endEmitted=!1===e.readable),t&&(t.constructed=!0,t.destroyed=!1,t.closed=!1,t.closeEmitted=!1,t.errored=null,t.errorEmitted=!1,t.finalCalled=!1,t.prefinished=!1,t.ended=!1===t.writable,t.ending=!1===t.writable,t.finished=!1===t.writable)}function errorOrDestroy(e,t,r){let s=e._readableState,n=e._writableState;if(null!=n&&n.destroyed||null!=s&&s.destroyed)return this;null!=s&&s.autoDestroy||null!=n&&n.autoDestroy?e.destroy(t):t&&(t.stack,n&&!n.errored&&(n.errored=t),s&&!s.errored&&(s.errored=t),r?i.nextTick(emitErrorNT,e,t):emitErrorNT(e,t))}function construct(e,t){if("function"!=typeof e._construct)return;let r=e._readableState,s=e._writableState;r&&(r.constructed=!1),s&&(s.constructed=!1),e.once(p,t),e.listenerCount(p)>1||i.nextTick(constructNT,e)}function constructNT(e){let t=!1;function onConstruct(r){if(t){errorOrDestroy(e,null!=r?r:new n);return}t=!0;let s=e._readableState,o=e._writableState,a=o||s;s&&(s.constructed=!0),o&&(o.constructed=!0),a.destroyed?e.emit(d,r):r?errorOrDestroy(e,r,!0):i.nextTick(emitConstructNT,e)}try{e._construct(e=>{i.nextTick(onConstruct,e)})}catch(e){i.nextTick(onConstruct,e)}}function emitConstructNT(e){e.emit(p)}function isRequest(e){return(null==e?void 0:e.setHeader)&&"function"==typeof e.abort}function emitCloseLegacy(e){e.emit("close")}function emitErrorCloseLegacy(e,t){e.emit("error",t),i.nextTick(emitCloseLegacy,e)}function destroyer(e,t){!(!e||h(e))&&(t||u(e)||(t=new o),c(e)?(e.socket=null,e.destroy(t)):isRequest(e)?e.abort():isRequest(e.req)?e.req.abort():"function"==typeof e.destroy?e.destroy(t):"function"==typeof e.close?e.close():t?i.nextTick(emitErrorCloseLegacy,e,t):i.nextTick(emitCloseLegacy,e),e.destroyed||(e[l]=!0))}e.exports={construct,destroyer,destroy,undestroy,errorOrDestroy}},81580:(e,t,r)=>{"use strict";let i,s;let{ObjectDefineProperties:n,ObjectGetOwnPropertyDescriptor:o,ObjectKeys:a,ObjectSetPrototypeOf:l}=r(1065);e.exports=Duplex;let h=r(39668),u=r(55111);l(Duplex.prototype,h.prototype),l(Duplex,h);{let e=a(u.prototype);for(let t=0;t<e.length;t++){let r=e[t];Duplex.prototype[r]||(Duplex.prototype[r]=u.prototype[r])}}function Duplex(e){if(!(this instanceof Duplex))return new Duplex(e);h.call(this,e),u.call(this,e),e?(this.allowHalfOpen=!1!==e.allowHalfOpen,!1===e.readable&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),!1===e.writable&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}function lazyWebStreams(){return void 0===i&&(i={}),i}n(Duplex.prototype,{writable:{__proto__:null,...o(u.prototype,"writable")},writableHighWaterMark:{__proto__:null,...o(u.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...o(u.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...o(u.prototype,"writableBuffer")},writableLength:{__proto__:null,...o(u.prototype,"writableLength")},writableFinished:{__proto__:null,...o(u.prototype,"writableFinished")},writableCorked:{__proto__:null,...o(u.prototype,"writableCorked")},writableEnded:{__proto__:null,...o(u.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...o(u.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set(e){this._readableState&&this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}}),Duplex.fromWeb=function(e,t){return lazyWebStreams().newStreamDuplexFromReadableWritablePair(e,t)},Duplex.toWeb=function(e){return lazyWebStreams().newReadableWritablePairFromDuplex(e)},Duplex.from=function(e){return s||(s=r(10014)),s(e,"body")}},10014:(e,t,r)=>{"use strict";let i=r(85838),s=r(14300),{isReadable:n,isWritable:o,isIterable:a,isNodeStream:l,isReadableNodeStream:h,isWritableNodeStream:u,isDuplexNodeStream:c,isReadableStream:d,isWritableStream:p}=r(3010),g=r(45532),{AbortError:b,codes:{ERR_INVALID_ARG_TYPE:m,ERR_INVALID_RETURN_VALUE:_}}=r(21257),{destroyer:y}=r(71991),S=r(81580),v=r(39668),w=r(55111),{createDeferredPromise:k}=r(75965),I=r(62241),B=globalThis.Blob||s.Blob,T=void 0!==B?function(e){return e instanceof B}:function(e){return!1},A=globalThis.AbortController||r(8541).AbortController,{FunctionPrototypeCall:O}=r(1065);let Duplexify=class Duplexify extends S{constructor(e){super(e),(null==e?void 0:e.readable)===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),(null==e?void 0:e.writable)===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}};function fromAsyncGen(e){let{promise:t,resolve:r}=k(),s=new A,n=s.signal,o=e(async function*(){for(;;){let e=t;t=null;let{chunk:s,done:o,cb:a}=await e;if(i.nextTick(a),o)return;if(n.aborted)throw new b(void 0,{cause:n.reason});({promise:t,resolve:r}=k()),yield s}}(),{signal:n});return{value:o,write(e,t,i){let s=r;r=null,s({chunk:e,done:!1,cb:i})},final(e){let t=r;r=null,t({done:!0,cb:e})},destroy(e,t){s.abort(),t(e)}}}function _duplexify(e){let t,r,i,s,a;let l=e.readable&&"function"!=typeof e.readable.read?v.wrap(e.readable):e.readable,h=e.writable,u=!!n(l),c=!!o(h);function onfinished(e){let t=s;s=null,t?t(e):e&&a.destroy(e)}return a=new Duplexify({readableObjectMode:!!(null!=l&&l.readableObjectMode),writableObjectMode:!!(null!=h&&h.writableObjectMode),readable:u,writable:c}),c&&(g(h,e=>{c=!1,e&&y(l,e),onfinished(e)}),a._write=function(e,r,i){h.write(e,r)?i():t=i},a._final=function(e){h.end(),r=e},h.on("drain",function(){if(t){let e=t;t=null,e()}}),h.on("finish",function(){if(r){let e=r;r=null,e()}})),u&&(g(l,e=>{u=!1,e&&y(l,e),onfinished(e)}),l.on("readable",function(){if(i){let e=i;i=null,e()}}),l.on("end",function(){a.push(null)}),a._read=function(){for(;;){let e=l.read();if(null===e){i=a._read;return}if(!a.push(e))return}}),a._destroy=function(e,n){e||null===s||(e=new b),i=null,t=null,r=null,null===s?n(e):(s=n,y(h,e),y(l,e))},a}e.exports=function duplexify(e,t){if(c(e))return e;if(h(e))return _duplexify({readable:e});if(u(e))return _duplexify({writable:e});if(l(e))return _duplexify({writable:!1,readable:!1});if(d(e))return _duplexify({readable:v.fromWeb(e)});if(p(e))return _duplexify({writable:w.fromWeb(e)});if("function"==typeof e){let{value:r,write:s,final:n,destroy:o}=fromAsyncGen(e);if(a(r))return I(Duplexify,r,{objectMode:!0,write:s,final:n,destroy:o});let l=null==r?void 0:r.then;if("function"==typeof l){let e;let t=O(l,r,e=>{if(null!=e)throw new _("nully","body",e)},t=>{y(e,t)});return e=new Duplexify({objectMode:!0,readable:!1,write:s,final(e){n(async()=>{try{await t,i.nextTick(e,null)}catch(t){i.nextTick(e,t)}})},destroy:o})}throw new _("Iterable, AsyncIterable or AsyncFunction",t,r)}if(T(e))return duplexify(e.arrayBuffer());if(a(e))return I(Duplexify,e,{objectMode:!0,writable:!1});if(d(null==e?void 0:e.readable)&&p(null==e?void 0:e.writable))return Duplexify.fromWeb(e);if("object"==typeof(null==e?void 0:e.writable)||"object"==typeof(null==e?void 0:e.readable)){let t=null!=e&&e.readable?h(null==e?void 0:e.readable)?null==e?void 0:e.readable:duplexify(e.readable):void 0,r=null!=e&&e.writable?u(null==e?void 0:e.writable)?null==e?void 0:e.writable:duplexify(e.writable):void 0;return _duplexify({readable:t,writable:r})}let r=null==e?void 0:e.then;if("function"==typeof r){let t;return O(r,e,e=>{null!=e&&t.push(e),t.push(null)},e=>{y(t,e)}),t=new Duplexify({objectMode:!0,writable:!1,read(){}})}throw new m(t,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],e)}},45532:(e,t,r)=>{"use strict";let i;let s=r(85838),{AbortError:n,codes:o}=r(21257),{ERR_INVALID_ARG_TYPE:a,ERR_STREAM_PREMATURE_CLOSE:l}=o,{kEmptyObject:h,once:u}=r(75965),{validateAbortSignal:c,validateFunction:d,validateObject:p,validateBoolean:g}=r(45873),{Promise:b,PromisePrototypeThen:m,SymbolDispose:_}=r(1065),{isClosed:y,isReadable:S,isReadableNodeStream:v,isReadableStream:w,isReadableFinished:k,isReadableErrored:I,isWritable:B,isWritableNodeStream:T,isWritableStream:A,isWritableFinished:O,isWritableErrored:R,isNodeStream:x,willEmitClose:C,kIsClosedPromise:P}=r(3010);function isRequest(e){return e.setHeader&&"function"==typeof e.abort}let nop=()=>{};function eos(e,t,o){var g,b;if(2==arguments.length?(o=t,t=h):null==t?t=h:p(t,"options"),d(o,"callback"),c(t.signal,"options.signal"),o=u(o),w(e)||A(e))return eosWeb(e,t,o);if(!x(e))throw new a("stream",["ReadableStream","WritableStream","Stream"],e);let m=null!==(g=t.readable)&&void 0!==g?g:v(e),P=null!==(b=t.writable)&&void 0!==b?b:T(e),M=e._writableState,N=e._readableState,onlegacyfinish=()=>{e.writable||onfinish()},L=C(e)&&v(e)===m&&T(e)===P,D=O(e,!1),onfinish=()=>{D=!0,e.destroyed&&(L=!1),L&&(!e.readable||m)||m&&!U||o.call(e)},U=k(e,!1),onend=()=>{U=!0,e.destroyed&&(L=!1),L&&(!e.writable||P)||P&&!D||o.call(e)},onerror=t=>{o.call(e,t)},j=y(e),onclose=()=>{j=!0;let t=R(e)||I(e);return t&&"boolean"!=typeof t?o.call(e,t):m&&!U&&v(e,!0)&&!k(e,!1)||P&&!D&&!O(e,!1)?o.call(e,new l):void o.call(e)},onclosed=()=>{j=!0;let t=R(e)||I(e);if(t&&"boolean"!=typeof t)return o.call(e,t);o.call(e)},onrequest=()=>{e.req.on("finish",onfinish)};isRequest(e)?(e.on("complete",onfinish),L||e.on("abort",onclose),e.req?onrequest():e.on("request",onrequest)):P&&!M&&(e.on("end",onlegacyfinish),e.on("close",onlegacyfinish)),L||"boolean"!=typeof e.aborted||e.on("aborted",onclose),e.on("end",onend),e.on("finish",onfinish),!1!==t.error&&e.on("error",onerror),e.on("close",onclose),j?s.nextTick(onclose):null!=M&&M.errorEmitted||null!=N&&N.errorEmitted?L||s.nextTick(onclosed):!m&&(!L||S(e))&&(D||!1===B(e))?s.nextTick(onclosed):!P&&(!L||B(e))&&(U||!1===S(e))?s.nextTick(onclosed):N&&e.req&&e.aborted&&s.nextTick(onclosed);let cleanup=()=>{o=nop,e.removeListener("aborted",onclose),e.removeListener("complete",onfinish),e.removeListener("abort",onclose),e.removeListener("request",onrequest),e.req&&e.req.removeListener("finish",onfinish),e.removeListener("end",onlegacyfinish),e.removeListener("close",onlegacyfinish),e.removeListener("finish",onfinish),e.removeListener("end",onend),e.removeListener("error",onerror),e.removeListener("close",onclose)};if(t.signal&&!j){let abort=()=>{let r=o;cleanup(),r.call(e,new n(void 0,{cause:t.signal.reason}))};if(t.signal.aborted)s.nextTick(abort);else{i=i||r(75965).addAbortListener;let s=i(t.signal,abort),n=o;o=u((...t)=>{s[_](),n.apply(e,t)})}}return cleanup}function eosWeb(e,t,o){let a=!1,l=nop;if(t.signal){if(l=()=>{a=!0,o.call(e,new n(void 0,{cause:t.signal.reason}))},t.signal.aborted)s.nextTick(l);else{i=i||r(75965).addAbortListener;let s=i(t.signal,l),n=o;o=u((...t)=>{s[_](),n.apply(e,t)})}}let resolverFn=(...t)=>{a||s.nextTick(()=>o.apply(e,t))};return m(e[P].promise,resolverFn,resolverFn),nop}function finished(e,t){var r;let i=!1;return null===t&&(t=h),null!==(r=t)&&void 0!==r&&r.cleanup&&(g(t.cleanup,"cleanup"),i=t.cleanup),new b((r,s)=>{let n=eos(e,t,e=>{i&&n(),e?s(e):r()})})}e.exports=eos,e.exports.finished=finished},62241:(e,t,r)=>{"use strict";let i=r(85838),{PromisePrototypeThen:s,SymbolAsyncIterator:n,SymbolIterator:o}=r(1065),{Buffer:a}=r(14300),{ERR_INVALID_ARG_TYPE:l,ERR_STREAM_NULL_VALUES:h}=r(21257).codes;function from(e,t,r){let u,c;if("string"==typeof t||t instanceof a)return new e({objectMode:!0,...r,read(){this.push(t),this.push(null)}});if(t&&t[n])c=!0,u=t[n]();else if(t&&t[o])c=!1,u=t[o]();else throw new l("iterable",["Iterable"],t);let d=new e({objectMode:!0,highWaterMark:1,...r}),p=!1;async function close(e){let t=null!=e,r="function"==typeof u.throw;if(t&&r){let{value:t,done:r}=await u.throw(e);if(await t,r)return}if("function"==typeof u.return){let{value:e}=await u.return();await e}}async function next(){for(;;){try{let{value:e,done:t}=c?await u.next():u.next();if(t)d.push(null);else{let t=e&&"function"==typeof e.then?await e:e;if(null===t)throw p=!1,new h;if(d.push(t))continue;p=!1}}catch(e){d.destroy(e)}break}}return d._read=function(){p||(p=!0,next())},d._destroy=function(e,t){s(close(e),()=>i.nextTick(t,e),r=>i.nextTick(t,r||e))},d}e.exports=from},7100:(e,t,r)=>{"use strict";let{ArrayIsArray:i,ObjectSetPrototypeOf:s}=r(1065),{EventEmitter:n}=r(82361);function Stream(e){n.call(this,e)}function prependListener(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?i(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}s(Stream.prototype,n.prototype),s(Stream,n),Stream.prototype.pipe=function(e,t){let r=this;function ondata(t){e.writable&&!1===e.write(t)&&r.pause&&r.pause()}function ondrain(){r.readable&&r.resume&&r.resume()}r.on("data",ondata),e.on("drain",ondrain),e._isStdio||t&&!1===t.end||(r.on("end",onend),r.on("close",onclose));let i=!1;function onend(){i||(i=!0,e.end())}function onclose(){i||(i=!0,"function"==typeof e.destroy&&e.destroy())}function onerror(e){cleanup(),0===n.listenerCount(this,"error")&&this.emit("error",e)}function cleanup(){r.removeListener("data",ondata),e.removeListener("drain",ondrain),r.removeListener("end",onend),r.removeListener("close",onclose),r.removeListener("error",onerror),e.removeListener("error",onerror),r.removeListener("end",cleanup),r.removeListener("close",cleanup),e.removeListener("close",cleanup)}return prependListener(r,"error",onerror),prependListener(e,"error",onerror),r.on("end",cleanup),r.on("close",cleanup),e.on("close",cleanup),e.emit("pipe",r),e},e.exports={Stream,prependListener}},1332:(e,t,r)=>{"use strict";let i=globalThis.AbortController||r(8541).AbortController,{codes:{ERR_INVALID_ARG_VALUE:s,ERR_INVALID_ARG_TYPE:n,ERR_MISSING_ARGS:o,ERR_OUT_OF_RANGE:a},AbortError:l}=r(21257),{validateAbortSignal:h,validateInteger:u,validateObject:c}=r(45873),d=r(1065).Symbol("kWeak"),p=r(1065).Symbol("kResistStopPropagation"),{finished:g}=r(45532),b=r(93195),{addAbortSignalNoValidate:m}=r(94586),{isWritable:_,isNodeStream:y}=r(3010),{deprecate:S}=r(75965),{ArrayPrototypePush:v,Boolean:w,MathFloor:k,Number:I,NumberIsNaN:B,Promise:T,PromiseReject:A,PromiseResolve:O,PromisePrototypeThen:R,Symbol:x}=r(1065),C=x("kEmpty"),P=x("kEof");function compose(e,t){if(null!=t&&c(t,"options"),(null==t?void 0:t.signal)!=null&&h(t.signal,"options.signal"),y(e)&&!_(e))throw new s("stream",e,"must be writable");let r=b(this,e);return null!=t&&t.signal&&m(t.signal,r),r}function map(e,t){if("function"!=typeof e)throw new n("fn",["Function","AsyncFunction"],e);null!=t&&c(t,"options"),(null==t?void 0:t.signal)!=null&&h(t.signal,"options.signal");let i=1;(null==t?void 0:t.concurrency)!=null&&(i=k(t.concurrency));let s=i-1;return(null==t?void 0:t.highWaterMark)!=null&&(s=k(t.highWaterMark)),u(i,"options.concurrency",1),u(s,"options.highWaterMark",0),s+=i,(async function*(){let n,o;let a=r(75965).AbortSignalAny([null==t?void 0:t.signal].filter(w)),h=this,u=[],c={signal:a},d=!1,p=0;function onCatch(){d=!0,afterItemProcessed()}function afterItemProcessed(){p-=1,maybeResume()}function maybeResume(){o&&!d&&p<i&&u.length<s&&(o(),o=null)}(async function(){try{for await(let t of h){if(d)return;if(a.aborted)throw new l;try{if((t=e(t,c))===C)continue;t=O(t)}catch(e){t=A(e)}p+=1,R(t,afterItemProcessed,onCatch),u.push(t),n&&(n(),n=null),!d&&(u.length>=s||p>=i)&&await new T(e=>{o=e})}u.push(P)}catch(t){let e=A(t);R(e,afterItemProcessed,onCatch),u.push(e)}finally{d=!0,n&&(n(),n=null)}})();try{for(;;){for(;u.length>0;){let e=await u[0];if(e===P)return;if(a.aborted)throw new l;e!==C&&(yield e),u.shift(),maybeResume()}await new T(e=>{n=e})}}finally{d=!0,o&&(o(),o=null)}}).call(this)}function asIndexedPairs(e){return null!=e&&c(e,"options"),(null==e?void 0:e.signal)!=null&&h(e.signal,"options.signal"),(async function*(){let t=0;for await(let i of this){var r;if(null!=e&&null!==(r=e.signal)&&void 0!==r&&r.aborted)throw new l({cause:e.signal.reason});yield[t++,i]}}).call(this)}async function some(e,t){for await(let r of filter.call(this,e,t))return!0;return!1}async function every(e,t){if("function"!=typeof e)throw new n("fn",["Function","AsyncFunction"],e);return!await some.call(this,async(...t)=>!await e(...t),t)}async function find(e,t){for await(let r of filter.call(this,e,t))return r}async function forEach(e,t){if("function"!=typeof e)throw new n("fn",["Function","AsyncFunction"],e);async function forEachFn(t,r){return await e(t,r),C}for await(let e of map.call(this,forEachFn,t));}function filter(e,t){if("function"!=typeof e)throw new n("fn",["Function","AsyncFunction"],e);async function filterFn(t,r){return await e(t,r)?t:C}return map.call(this,filterFn,t)}let ReduceAwareErrMissingArgs=class ReduceAwareErrMissingArgs extends o{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}};async function reduce(e,t,r){var s,o;if("function"!=typeof e)throw new n("reducer",["Function","AsyncFunction"],e);null!=r&&c(r,"options"),(null==r?void 0:r.signal)!=null&&h(r.signal,"options.signal");let a=arguments.length>1;if(null!=r&&null!==(s=r.signal)&&void 0!==s&&s.aborted){let e=new l(void 0,{cause:r.signal.reason});throw this.once("error",()=>{}),await g(this.destroy(e)),e}let u=new i,b=u.signal;null!=r&&r.signal&&r.signal.addEventListener("abort",()=>u.abort(),{once:!0,[d]:this,[p]:!0});let m=!1;try{for await(let i of this){if(m=!0,null!=r&&null!==(o=r.signal)&&void 0!==o&&o.aborted)throw new l;a?t=await e(t,i,{signal:b}):(t=i,a=!0)}if(!m&&!a)throw new ReduceAwareErrMissingArgs}finally{u.abort()}return t}async function toArray(e){null!=e&&c(e,"options"),(null==e?void 0:e.signal)!=null&&h(e.signal,"options.signal");let t=[];for await(let i of this){var r;if(null!=e&&null!==(r=e.signal)&&void 0!==r&&r.aborted)throw new l(void 0,{cause:e.signal.reason});v(t,i)}return t}function flatMap(e,t){let r=map.call(this,e,t);return(async function*(){for await(let e of r)yield*e}).call(this)}function toIntegerOrInfinity(e){if(B(e=I(e)))return 0;if(e<0)throw new a("number",">= 0",e);return e}function drop(e,t){return null!=t&&c(t,"options"),(null==t?void 0:t.signal)!=null&&h(t.signal,"options.signal"),e=toIntegerOrInfinity(e),(async function*(){var r,i;if(null!=t&&null!==(r=t.signal)&&void 0!==r&&r.aborted)throw new l;for await(let r of this){if(null!=t&&null!==(i=t.signal)&&void 0!==i&&i.aborted)throw new l;e--<=0&&(yield r)}}).call(this)}function take(e,t){return null!=t&&c(t,"options"),(null==t?void 0:t.signal)!=null&&h(t.signal,"options.signal"),e=toIntegerOrInfinity(e),(async function*(){var r,i;if(null!=t&&null!==(r=t.signal)&&void 0!==r&&r.aborted)throw new l;for await(let r of this){if(null!=t&&null!==(i=t.signal)&&void 0!==i&&i.aborted)throw new l;if(e-- >0&&(yield r),e<=0)return}}).call(this)}e.exports.streamReturningOperators={asIndexedPairs:S(asIndexedPairs,"readable.asIndexedPairs will be removed in a future version."),drop,filter,flatMap,map,take,compose},e.exports.promiseReturningOperators={every,forEach,reduce,toArray,some,find}},49784:(e,t,r)=>{"use strict";let{ObjectSetPrototypeOf:i}=r(1065);e.exports=PassThrough;let s=r(82875);function PassThrough(e){if(!(this instanceof PassThrough))return new PassThrough(e);s.call(this,e)}i(PassThrough.prototype,s.prototype),i(PassThrough,s),PassThrough.prototype._transform=function(e,t,r){r(null,e)}},23417:(e,t,r)=>{let i,s,n;"use strict";let o=r(85838),{ArrayIsArray:a,Promise:l,SymbolAsyncIterator:h,SymbolDispose:u}=r(1065),c=r(45532),{once:d}=r(75965),p=r(71991),g=r(81580),{aggregateTwoErrors:b,codes:{ERR_INVALID_ARG_TYPE:m,ERR_INVALID_RETURN_VALUE:_,ERR_MISSING_ARGS:y,ERR_STREAM_DESTROYED:S,ERR_STREAM_PREMATURE_CLOSE:v},AbortError:w}=r(21257),{validateFunction:k,validateAbortSignal:I}=r(45873),{isIterable:B,isReadable:T,isReadableNodeStream:A,isNodeStream:O,isTransformStream:R,isWebStream:x,isReadableStream:C,isReadableFinished:P}=r(3010),M=globalThis.AbortController||r(8541).AbortController;function destroyer(e,t,r){let i=!1;e.on("close",()=>{i=!0});let s=c(e,{readable:t,writable:r},e=>{i=!e});return{destroy:t=>{i||(i=!0,p.destroyer(e,t||new S("pipe")))},cleanup:s}}function popCallback(e){return k(e[e.length-1],"streams[stream.length - 1]"),e.pop()}function makeAsyncIterable(e){if(B(e))return e;if(A(e))return fromReadable(e);throw new m("val",["Readable","Iterable","AsyncIterable"],e)}async function*fromReadable(e){s||(s=r(39668)),yield*s.prototype[h].call(e)}async function pumpToNode(e,t,r,{end:i}){let s;let n=null,resume=e=>{if(e&&(s=e),n){let e=n;n=null,e()}},wait=()=>new l((e,t)=>{s?t(s):n=()=>{s?t(s):e()}});t.on("drain",resume);let o=c(t,{readable:!1},resume);try{for await(let r of(t.writableNeedDrain&&await wait(),e))t.write(r)||await wait();i&&(t.end(),await wait()),r()}catch(e){r(s!==e?b(s,e):e)}finally{o(),t.off("drain",resume)}}async function pumpToWeb(e,t,r,{end:i}){R(t)&&(t=t.writable);let s=t.getWriter();try{for await(let t of e)await s.ready,s.write(t).catch(()=>{});await s.ready,i&&await s.close(),r()}catch(e){try{await s.abort(e),r(e)}catch(e){r(e)}}}function pipeline(...e){return pipelineImpl(e,d(popCallback(e)))}function pipelineImpl(e,t,s){let l,h,c,d;if(1===e.length&&a(e[0])&&(e=e[0]),e.length<2)throw new y("streams");let p=new M,b=p.signal,S=null==s?void 0:s.signal,v=[];function abort(){finishImpl(new w)}I(S,"options.signal"),n=n||r(75965).addAbortListener,S&&(l=n(S,abort));let k=[],P=0;function finish(e){finishImpl(e,0==--P)}function finishImpl(e,r){var i;if(e&&(!h||"ERR_STREAM_PREMATURE_CLOSE"===h.code)&&(h=e),h||r){for(;k.length;)k.shift()(h);null===(i=l)||void 0===i||i[u](),p.abort(),r&&(h||v.forEach(e=>e()),o.nextTick(t,h,c))}}for(let t=0;t<e.length;t++){let n=e[t],a=t<e.length-1,l=t>0,h=a||(null==s?void 0:s.end)!==!1,u=t===e.length-1;if(O(n)){if(h){let{destroy:e,cleanup:t}=destroyer(n,a,l);k.push(e),T(n)&&u&&v.push(t)}function onError(e){e&&"AbortError"!==e.name&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code&&finish(e)}n.on("error",onError),T(n)&&u&&v.push(()=>{n.removeListener("error",onError)})}if(0===t){if("function"==typeof n){if(!B(d=n({signal:b})))throw new _("Iterable, AsyncIterable or Stream","source",d)}else d=B(n)||A(n)||R(n)?n:g.from(n)}else if("function"==typeof n){var N,L;if(d=n(d=R(d)?makeAsyncIterable(null===(N=d)||void 0===N?void 0:N.readable):makeAsyncIterable(d),{signal:b}),a){if(!B(d,!0))throw new _("AsyncIterable",`transform[${t-1}]`,d)}else{i||(i=r(49784));let e=new i({objectMode:!0}),t=null===(L=d)||void 0===L?void 0:L.then;if("function"==typeof t)P++,t.call(d,t=>{c=t,null!=t&&e.write(t),h&&e.end(),o.nextTick(finish)},t=>{e.destroy(t),o.nextTick(finish,t)});else if(B(d,!0))P++,pumpToNode(d,e,finish,{end:h});else if(C(d)||R(d)){let t=d.readable||d;P++,pumpToNode(t,e,finish,{end:h})}else throw new _("AsyncIterable or Promise","destination",d);d=e;let{destroy:s,cleanup:n}=destroyer(d,!1,!0);k.push(s),u&&v.push(n)}}else if(O(n)){if(A(d)){P+=2;let e=pipe(d,n,finish,{end:h});T(n)&&u&&v.push(e)}else if(R(d)||C(d)){let e=d.readable||d;P++,pumpToNode(e,n,finish,{end:h})}else if(B(d))P++,pumpToNode(d,n,finish,{end:h});else throw new m("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],d);d=n}else if(x(n)){if(A(d))P++,pumpToWeb(makeAsyncIterable(d),n,finish,{end:h});else if(C(d)||B(d))P++,pumpToWeb(d,n,finish,{end:h});else if(R(d))P++,pumpToWeb(d.readable,n,finish,{end:h});else throw new m("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],d);d=n}else d=g.from(n)}return(null!=b&&b.aborted||null!=S&&S.aborted)&&o.nextTick(abort),d}function pipe(e,t,r,{end:i}){let s=!1;if(t.on("close",()=>{s||r(new v)}),e.pipe(t,{end:!1}),i){function endFn(){s=!0,t.end()}P(e)?o.nextTick(endFn):e.once("end",endFn)}else r();return c(e,{readable:!0,writable:!1},t=>{let i=e._readableState;t&&"ERR_STREAM_PREMATURE_CLOSE"===t.code&&i&&i.ended&&!i.errored&&!i.errorEmitted?e.once("end",r).once("error",r):r(t)}),c(t,{readable:!1,writable:!0},r)}e.exports={pipelineImpl,pipeline}},39668:(e,t,r)=>{"use strict";let i;let s=r(85838),{ArrayPrototypeIndexOf:n,NumberIsInteger:o,NumberIsNaN:a,NumberParseInt:l,ObjectDefineProperties:h,ObjectKeys:u,ObjectSetPrototypeOf:c,Promise:d,SafeSet:p,SymbolAsyncDispose:g,SymbolAsyncIterator:b,Symbol:m}=r(1065);e.exports=Readable,Readable.ReadableState=ReadableState;let{EventEmitter:_}=r(82361),{Stream:y,prependListener:S}=r(7100),{Buffer:v}=r(14300),{addAbortSignal:w}=r(94586),k=r(45532),I=r(75965).debuglog("stream",e=>{I=e}),B=r(53964),T=r(71991),{getHighWaterMark:A,getDefaultHighWaterMark:O}=r(84761),{aggregateTwoErrors:R,codes:{ERR_INVALID_ARG_TYPE:x,ERR_METHOD_NOT_IMPLEMENTED:C,ERR_OUT_OF_RANGE:P,ERR_STREAM_PUSH_AFTER_EOF:M,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:N},AbortError:L}=r(21257),{validateObject:D}=r(45873),U=m("kPaused"),{StringDecoder:j}=r(26987),W=r(62241);c(Readable.prototype,y.prototype),c(Readable,y);let nop=()=>{},{errorOrDestroy:F}=T;function makeBitMapDescriptor(e){return{enumerable:!1,get(){return(this.state&e)!=0},set(t){t?this.state|=e:this.state&=~e}}}function ReadableState(e,t,i){"boolean"!=typeof i&&(i=t instanceof r(81580)),this.state=6192,e&&e.objectMode&&(this.state|=1),i&&e&&e.readableObjectMode&&(this.state|=1),this.highWaterMark=e?A(this,e,"readableHighWaterMark",i):O(!1),this.buffer=new B,this.length=0,this.pipes=[],this.flowing=null,this[U]=null,e&&!1===e.emitClose&&(this.state&=-2049),e&&!1===e.autoDestroy&&(this.state&=-4097),this.errored=null,this.defaultEncoding=e&&e.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,e&&e.encoding&&(this.decoder=new j(e.encoding),this.encoding=e.encoding)}function Readable(e){if(!(this instanceof Readable))return new Readable(e);let t=this instanceof r(81580);this._readableState=new ReadableState(e,this,t),e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.construct&&(this._construct=e.construct),e.signal&&!t&&w(e.signal,this)),y.call(this,e),T.construct(this,()=>{this._readableState.needReadable&&maybeReadMore(this,this._readableState)})}function readableAddChunk(e,t,r,i){let s;I("readableAddChunk",t);let n=e._readableState;if((1&n.state)==0&&("string"==typeof t?(r=r||n.defaultEncoding,n.encoding!==r&&(i&&n.encoding?t=v.from(t,r).toString(n.encoding):(t=v.from(t,r),r=""))):t instanceof v?r="":y._isUint8Array(t)?(t=y._uint8ArrayToBuffer(t),r=""):null!=t&&(s=new x("chunk",["string","Buffer","Uint8Array"],t))),s)F(e,s);else if(null===t)n.state&=-9,onEofChunk(e,n);else if((1&n.state)!=0||t&&t.length>0){if(i){if((4&n.state)!=0)F(e,new N);else{if(n.destroyed||n.errored)return!1;addChunk(e,n,t,!0)}}else if(n.ended)F(e,new M);else{if(n.destroyed||n.errored)return!1;n.state&=-9,n.decoder&&!r?(t=n.decoder.write(t),n.objectMode||0!==t.length?addChunk(e,n,t,!1):maybeReadMore(e,n)):addChunk(e,n,t,!1)}}else i||(n.state&=-9,maybeReadMore(e,n));return!n.ended&&(n.length<n.highWaterMark||0===n.length)}function addChunk(e,t,r,i){t.flowing&&0===t.length&&!t.sync&&e.listenerCount("data")>0?((65536&t.state)!=0?t.awaitDrainWriters.clear():t.awaitDrainWriters=null,t.dataEmitted=!0,e.emit("data",r)):(t.length+=t.objectMode?1:r.length,i?t.buffer.unshift(r):t.buffer.push(r),(64&t.state)!=0&&emitReadable(e)),maybeReadMore(e,t)}function computeNewHighWaterMark(e){if(e>1073741824)throw new P("size","<= 1GiB",e);return e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,++e}function howMuchToRead(e,t){return e<=0||0===t.length&&t.ended?0:(1&t.state)!=0?1:a(e)?t.flowing&&t.length?t.buffer.first().length:t.length:e<=t.length?e:t.ended?t.length:0}function onEofChunk(e,t){if(I("onEofChunk"),!t.ended){if(t.decoder){let e=t.decoder.end();e&&e.length&&(t.buffer.push(e),t.length+=t.objectMode?1:e.length)}t.ended=!0,t.sync?emitReadable(e):(t.needReadable=!1,t.emittedReadable=!0,emitReadable_(e))}}function emitReadable(e){let t=e._readableState;I("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(I("emitReadable",t.flowing),t.emittedReadable=!0,s.nextTick(emitReadable_,e))}function emitReadable_(e){let t=e._readableState;I("emitReadable_",t.destroyed,t.length,t.ended),!t.destroyed&&!t.errored&&(t.length||t.ended)&&(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,flow(e)}function maybeReadMore(e,t){!t.readingMore&&t.constructed&&(t.readingMore=!0,s.nextTick(maybeReadMore_,e,t))}function maybeReadMore_(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){let r=t.length;if(I("maybeReadMore read 0"),e.read(0),r===t.length)break}t.readingMore=!1}function pipeOnDrain(e,t){return function(){let r=e._readableState;r.awaitDrainWriters===t?(I("pipeOnDrain",1),r.awaitDrainWriters=null):r.multiAwaitDrain&&(I("pipeOnDrain",r.awaitDrainWriters.size),r.awaitDrainWriters.delete(t)),(!r.awaitDrainWriters||0===r.awaitDrainWriters.size)&&e.listenerCount("data")&&e.resume()}}function updateReadableListening(e){let t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!1===t[U]?t.flowing=!0:e.listenerCount("data")>0?e.resume():t.readableListening||(t.flowing=null)}function nReadingNextTick(e){I("readable nexttick read 0"),e.read(0)}function resume(e,t){t.resumeScheduled||(t.resumeScheduled=!0,s.nextTick(resume_,e,t))}function resume_(e,t){I("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),flow(e),t.flowing&&!t.reading&&e.read(0)}function flow(e){let t=e._readableState;for(I("flow",t.flowing);t.flowing&&null!==e.read(););}function streamToAsyncIterator(e,t){"function"!=typeof e.read&&(e=Readable.wrap(e,{objectMode:!0}));let r=createAsyncIterator(e,t);return r.stream=e,r}async function*createAsyncIterator(e,t){let r,i=nop;function next(t){this===e?(i(),i=nop):i=t}e.on("readable",next);let s=k(e,{writable:!1},e=>{r=e?R(r,e):null,i(),i=nop});try{for(;;){let t=e.destroyed?null:e.read();if(null!==t)yield t;else if(r)throw r;else{if(null===r)return;await new d(next)}}}catch(e){throw r=R(r,e)}finally{(r||(null==t?void 0:t.destroyOnReturn)!==!1)&&(void 0===r||e._readableState.autoDestroy)?T.destroyer(e,null):(e.off("readable",next),s())}}function fromList(e,t){let r;return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):r=t.buffer.consume(e,t.decoder),r)}function endReadable(e){let t=e._readableState;I("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,s.nextTick(endReadableNT,t,e))}function endReadableNT(e,t){if(I("endReadableNT",e.endEmitted,e.length),!e.errored&&!e.closeEmitted&&!e.endEmitted&&0===e.length){if(e.endEmitted=!0,t.emit("end"),t.writable&&!1===t.allowHalfOpen)s.nextTick(endWritableNT,t);else if(e.autoDestroy){let e=t._writableState,r=!e||e.autoDestroy&&(e.finished||!1===e.writable);r&&t.destroy()}}}function endWritableNT(e){let t=e.writable&&!e.writableEnded&&!e.destroyed;t&&e.end()}function lazyWebStreams(){return void 0===i&&(i={}),i}h(ReadableState.prototype,{objectMode:makeBitMapDescriptor(1),ended:makeBitMapDescriptor(2),endEmitted:makeBitMapDescriptor(4),reading:makeBitMapDescriptor(8),constructed:makeBitMapDescriptor(16),sync:makeBitMapDescriptor(32),needReadable:makeBitMapDescriptor(64),emittedReadable:makeBitMapDescriptor(128),readableListening:makeBitMapDescriptor(256),resumeScheduled:makeBitMapDescriptor(512),errorEmitted:makeBitMapDescriptor(1024),emitClose:makeBitMapDescriptor(2048),autoDestroy:makeBitMapDescriptor(4096),destroyed:makeBitMapDescriptor(8192),closed:makeBitMapDescriptor(16384),closeEmitted:makeBitMapDescriptor(32768),multiAwaitDrain:makeBitMapDescriptor(65536),readingMore:makeBitMapDescriptor(131072),dataEmitted:makeBitMapDescriptor(262144)}),Readable.prototype.destroy=T.destroy,Readable.prototype._undestroy=T.undestroy,Readable.prototype._destroy=function(e,t){t(e)},Readable.prototype[_.captureRejectionSymbol]=function(e){this.destroy(e)},Readable.prototype[g]=function(){let e;return this.destroyed||(e=this.readableEnded?null:new L,this.destroy(e)),new d((t,r)=>k(this,i=>i&&i!==e?r(i):t(null)))},Readable.prototype.push=function(e,t){return readableAddChunk(this,e,t,!1)},Readable.prototype.unshift=function(e,t){return readableAddChunk(this,e,t,!0)},Readable.prototype.isPaused=function(){let e=this._readableState;return!0===e[U]||!1===e.flowing},Readable.prototype.setEncoding=function(e){let t=new j(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;let r=this._readableState.buffer,i="";for(let e of r)i+=t.write(e);return r.clear(),""!==i&&r.push(i),this._readableState.length=i.length,this},Readable.prototype.read=function(e){let t;I("read",e),void 0===e?e=NaN:o(e)||(e=l(e,10));let r=this._readableState,i=e;if(e>r.highWaterMark&&(r.highWaterMark=computeNewHighWaterMark(e)),0!==e&&(r.state&=-129),0===e&&r.needReadable&&((0!==r.highWaterMark?r.length>=r.highWaterMark:r.length>0)||r.ended))return I("read: emitReadable",r.length,r.ended),0===r.length&&r.ended?endReadable(this):emitReadable(this),null;if(0===(e=howMuchToRead(e,r))&&r.ended)return 0===r.length&&endReadable(this),null;let s=(64&r.state)!=0;if(I("need readable",s),(0===r.length||r.length-e<r.highWaterMark)&&I("length less than watermark",s=!0),r.ended||r.reading||r.destroyed||r.errored||!r.constructed)I("reading, ended or constructing",s=!1);else if(s){I("do read"),r.state|=40,0===r.length&&(r.state|=64);try{this._read(r.highWaterMark)}catch(e){F(this,e)}r.state&=-33,r.reading||(e=howMuchToRead(i,r))}return null===(t=e>0?fromList(e,r):null)?(r.needReadable=r.length<=r.highWaterMark,e=0):(r.length-=e,r.multiAwaitDrain?r.awaitDrainWriters.clear():r.awaitDrainWriters=null),0===r.length&&(r.ended||(r.needReadable=!0),i!==e&&r.ended&&endReadable(this)),null===t||r.errorEmitted||r.closeEmitted||(r.dataEmitted=!0,this.emit("data",t)),t},Readable.prototype._read=function(e){throw new C("_read()")},Readable.prototype.pipe=function(e,t){let r;let i=this,n=this._readableState;1!==n.pipes.length||n.multiAwaitDrain||(n.multiAwaitDrain=!0,n.awaitDrainWriters=new p(n.awaitDrainWriters?[n.awaitDrainWriters]:[])),n.pipes.push(e),I("pipe count=%d opts=%j",n.pipes.length,t);let o=(!t||!1!==t.end)&&e!==s.stdout&&e!==s.stderr,a=o?onend:unpipe;function onunpipe(e,t){I("onunpipe"),e===i&&t&&!1===t.hasUnpiped&&(t.hasUnpiped=!0,cleanup())}function onend(){I("onend"),e.end()}n.endEmitted?s.nextTick(a):i.once("end",a),e.on("unpipe",onunpipe);let l=!1;function cleanup(){I("cleanup"),e.removeListener("close",onclose),e.removeListener("finish",onfinish),r&&e.removeListener("drain",r),e.removeListener("error",onerror),e.removeListener("unpipe",onunpipe),i.removeListener("end",onend),i.removeListener("end",unpipe),i.removeListener("data",ondata),l=!0,r&&n.awaitDrainWriters&&(!e._writableState||e._writableState.needDrain)&&r()}function pause(){l||(1===n.pipes.length&&n.pipes[0]===e?(I("false write response, pause",0),n.awaitDrainWriters=e,n.multiAwaitDrain=!1):n.pipes.length>1&&n.pipes.includes(e)&&(I("false write response, pause",n.awaitDrainWriters.size),n.awaitDrainWriters.add(e)),i.pause()),r||(r=pipeOnDrain(i,e),e.on("drain",r))}function ondata(t){I("ondata");let r=e.write(t);I("dest.write",r),!1===r&&pause()}function onerror(t){if(I("onerror",t),unpipe(),e.removeListener("error",onerror),0===e.listenerCount("error")){let r=e._writableState||e._readableState;r&&!r.errorEmitted?F(e,t):e.emit("error",t)}}function onclose(){e.removeListener("finish",onfinish),unpipe()}function onfinish(){I("onfinish"),e.removeListener("close",onclose),unpipe()}function unpipe(){I("unpipe"),i.unpipe(e)}return i.on("data",ondata),S(e,"error",onerror),e.once("close",onclose),e.once("finish",onfinish),e.emit("pipe",i),!0===e.writableNeedDrain?pause():n.flowing||(I("pipe resume"),i.resume()),e},Readable.prototype.unpipe=function(e){let t=this._readableState;if(0===t.pipes.length)return this;if(!e){let e=t.pipes;t.pipes=[],this.pause();for(let t=0;t<e.length;t++)e[t].emit("unpipe",this,{hasUnpiped:!1});return this}let r=n(t.pipes,e);return -1===r||(t.pipes.splice(r,1),0===t.pipes.length&&this.pause(),e.emit("unpipe",this,{hasUnpiped:!1})),this},Readable.prototype.on=function(e,t){let r=y.prototype.on.call(this,e,t),i=this._readableState;return"data"===e?(i.readableListening=this.listenerCount("readable")>0,!1!==i.flowing&&this.resume()):"readable"!==e||i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.flowing=!1,i.emittedReadable=!1,I("on readable",i.length,i.reading),i.length?emitReadable(this):i.reading||s.nextTick(nReadingNextTick,this)),r},Readable.prototype.addListener=Readable.prototype.on,Readable.prototype.removeListener=function(e,t){let r=y.prototype.removeListener.call(this,e,t);return"readable"===e&&s.nextTick(updateReadableListening,this),r},Readable.prototype.off=Readable.prototype.removeListener,Readable.prototype.removeAllListeners=function(e){let t=y.prototype.removeAllListeners.apply(this,arguments);return("readable"===e||void 0===e)&&s.nextTick(updateReadableListening,this),t},Readable.prototype.resume=function(){let e=this._readableState;return e.flowing||(I("resume"),e.flowing=!e.readableListening,resume(this,e)),e[U]=!1,this},Readable.prototype.pause=function(){return I("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(I("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[U]=!0,this},Readable.prototype.wrap=function(e){let t=!1;e.on("data",r=>{!this.push(r)&&e.pause&&(t=!0,e.pause())}),e.on("end",()=>{this.push(null)}),e.on("error",e=>{F(this,e)}),e.on("close",()=>{this.destroy()}),e.on("destroy",()=>{this.destroy()}),this._read=()=>{t&&e.resume&&(t=!1,e.resume())};let r=u(e);for(let t=1;t<r.length;t++){let i=r[t];void 0===this[i]&&"function"==typeof e[i]&&(this[i]=e[i].bind(e))}return this},Readable.prototype[b]=function(){return streamToAsyncIterator(this)},Readable.prototype.iterator=function(e){return void 0!==e&&D(e,"options"),streamToAsyncIterator(this,e)},h(Readable.prototype,{readable:{__proto__:null,get(){let e=this._readableState;return!!e&&!1!==e.readable&&!e.destroyed&&!e.errorEmitted&&!e.endEmitted},set(e){this._readableState&&(this._readableState.readable=!!e)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(!1!==this._readableState.readable&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.objectMode}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return!!this._readableState&&this._readableState.closed}},destroyed:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.destroyed},set(e){this._readableState&&(this._readableState.destroyed=e)}},readableEnded:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.endEmitted}}}),h(ReadableState.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return!1!==this[U]},set(e){this[U]=!!e}}}),Readable._fromList=fromList,Readable.from=function(e,t){return W(Readable,e,t)},Readable.fromWeb=function(e,t){return lazyWebStreams().newStreamReadableFromReadableStream(e,t)},Readable.toWeb=function(e,t){return lazyWebStreams().newReadableStreamFromStreamReadable(e,t)},Readable.wrap=function(e,t){var r,i;return new Readable({objectMode:null===(r=null!==(i=e.readableObjectMode)&&void 0!==i?i:e.objectMode)||void 0===r||r,...t,destroy(t,r){T.destroyer(e,t),r(t)}}).wrap(e)}},84761:(e,t,r)=>{"use strict";let{MathFloor:i,NumberIsInteger:s}=r(1065),{validateInteger:n}=r(45873),{ERR_INVALID_ARG_VALUE:o}=r(21257).codes,a=16384,l=16;function highWaterMarkFrom(e,t,r){return null!=e.highWaterMark?e.highWaterMark:t?e[r]:null}function getDefaultHighWaterMark(e){return e?l:a}function setDefaultHighWaterMark(e,t){n(t,"value",0),e?l=t:a=t}function getHighWaterMark(e,t,r,n){let a=highWaterMarkFrom(t,n,r);if(null!=a){if(!s(a)||a<0){let e=n?`options.${r}`:"options.highWaterMark";throw new o(e,a)}return i(a)}return getDefaultHighWaterMark(e.objectMode)}e.exports={getHighWaterMark,getDefaultHighWaterMark,setDefaultHighWaterMark}},82875:(e,t,r)=>{"use strict";let{ObjectSetPrototypeOf:i,Symbol:s}=r(1065);e.exports=Transform;let{ERR_METHOD_NOT_IMPLEMENTED:n}=r(21257).codes,o=r(81580),{getHighWaterMark:a}=r(84761);i(Transform.prototype,o.prototype),i(Transform,o);let l=s("kCallback");function Transform(e){if(!(this instanceof Transform))return new Transform(e);let t=e?a(this,e,"readableHighWaterMark",!0):null;0===t&&(e={...e,highWaterMark:null,readableHighWaterMark:t,writableHighWaterMark:e.writableHighWaterMark||0}),o.call(this,e),this._readableState.sync=!1,this[l]=null,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",prefinish)}function final(e){"function"!=typeof this._flush||this.destroyed?(this.push(null),e&&e()):this._flush((t,r)=>{if(t){e?e(t):this.destroy(t);return}null!=r&&this.push(r),this.push(null),e&&e()})}function prefinish(){this._final!==final&&final.call(this)}Transform.prototype._final=final,Transform.prototype._transform=function(e,t,r){throw new n("_transform()")},Transform.prototype._write=function(e,t,r){let i=this._readableState,s=this._writableState,n=i.length;this._transform(e,t,(e,t)=>{if(e){r(e);return}null!=t&&this.push(t),s.ended||n===i.length||i.length<i.highWaterMark?r():this[l]=r})},Transform.prototype._read=function(){if(this[l]){let e=this[l];this[l]=null,e()}}},3010:(e,t,r)=>{"use strict";let{SymbolAsyncIterator:i,SymbolIterator:s,SymbolFor:n}=r(1065),o=n("nodejs.stream.destroyed"),a=n("nodejs.stream.errored"),l=n("nodejs.stream.readable"),h=n("nodejs.stream.writable"),u=n("nodejs.stream.disturbed"),c=n("nodejs.webstream.isClosedPromise"),d=n("nodejs.webstream.controllerErrorFunction");function isReadableNodeStream(e,t=!1){var r;return!!(e&&"function"==typeof e.pipe&&"function"==typeof e.on&&(!t||"function"==typeof e.pause&&"function"==typeof e.resume)&&(!e._writableState||(null===(r=e._readableState)||void 0===r?void 0:r.readable)!==!1)&&(!e._writableState||e._readableState))}function isWritableNodeStream(e){var t;return!!(e&&"function"==typeof e.write&&"function"==typeof e.on&&(!e._readableState||(null===(t=e._writableState)||void 0===t?void 0:t.writable)!==!1))}function isDuplexNodeStream(e){return!!(e&&"function"==typeof e.pipe&&e._readableState&&"function"==typeof e.on&&"function"==typeof e.write)}function isNodeStream(e){return e&&(e._readableState||e._writableState||"function"==typeof e.write&&"function"==typeof e.on||"function"==typeof e.pipe&&"function"==typeof e.on)}function isReadableStream(e){return!!(e&&!isNodeStream(e)&&"function"==typeof e.pipeThrough&&"function"==typeof e.getReader&&"function"==typeof e.cancel)}function isWritableStream(e){return!!(e&&!isNodeStream(e)&&"function"==typeof e.getWriter&&"function"==typeof e.abort)}function isTransformStream(e){return!!(e&&!isNodeStream(e)&&"object"==typeof e.readable&&"object"==typeof e.writable)}function isWebStream(e){return isReadableStream(e)||isWritableStream(e)||isTransformStream(e)}function isIterable(e,t){return null!=e&&(!0===t?"function"==typeof e[i]:!1===t?"function"==typeof e[s]:"function"==typeof e[i]||"function"==typeof e[s])}function isDestroyed(e){if(!isNodeStream(e))return null;let t=e._writableState,r=e._readableState,i=t||r;return!!(e.destroyed||e[o]||null!=i&&i.destroyed)}function isWritableEnded(e){if(!isWritableNodeStream(e))return null;if(!0===e.writableEnded)return!0;let t=e._writableState;return(null==t||!t.errored)&&("boolean"!=typeof(null==t?void 0:t.ended)?null:t.ended)}function isWritableFinished(e,t){if(!isWritableNodeStream(e))return null;if(!0===e.writableFinished)return!0;let r=e._writableState;return(null==r||!r.errored)&&("boolean"!=typeof(null==r?void 0:r.finished)?null:!!(r.finished||!1===t&&!0===r.ended&&0===r.length))}function isReadableEnded(e){if(!isReadableNodeStream(e))return null;if(!0===e.readableEnded)return!0;let t=e._readableState;return!!t&&!t.errored&&("boolean"!=typeof(null==t?void 0:t.ended)?null:t.ended)}function isReadableFinished(e,t){if(!isReadableNodeStream(e))return null;let r=e._readableState;return(null==r||!r.errored)&&("boolean"!=typeof(null==r?void 0:r.endEmitted)?null:!!(r.endEmitted||!1===t&&!0===r.ended&&0===r.length))}function isReadable(e){return e&&null!=e[l]?e[l]:"boolean"!=typeof(null==e?void 0:e.readable)?null:!isDestroyed(e)&&isReadableNodeStream(e)&&e.readable&&!isReadableFinished(e)}function isWritable(e){return e&&null!=e[h]?e[h]:"boolean"!=typeof(null==e?void 0:e.writable)?null:!isDestroyed(e)&&isWritableNodeStream(e)&&e.writable&&!isWritableEnded(e)}function isFinished(e,t){return isNodeStream(e)?!!isDestroyed(e)||!((null==t?void 0:t.readable)!==!1&&isReadable(e)||(null==t?void 0:t.writable)!==!1&&isWritable(e)):null}function isWritableErrored(e){var t,r;return isNodeStream(e)?e.writableErrored?e.writableErrored:null!==(t=null===(r=e._writableState)||void 0===r?void 0:r.errored)&&void 0!==t?t:null:null}function isReadableErrored(e){var t,r;return isNodeStream(e)?e.readableErrored?e.readableErrored:null!==(t=null===(r=e._readableState)||void 0===r?void 0:r.errored)&&void 0!==t?t:null:null}function isClosed(e){if(!isNodeStream(e))return null;if("boolean"==typeof e.closed)return e.closed;let t=e._writableState,r=e._readableState;return"boolean"==typeof(null==t?void 0:t.closed)||"boolean"==typeof(null==r?void 0:r.closed)?(null==t?void 0:t.closed)||(null==r?void 0:r.closed):"boolean"==typeof e._closed&&isOutgoingMessage(e)?e._closed:null}function isOutgoingMessage(e){return"boolean"==typeof e._closed&&"boolean"==typeof e._defaultKeepAlive&&"boolean"==typeof e._removedConnection&&"boolean"==typeof e._removedContLen}function isServerResponse(e){return"boolean"==typeof e._sent100&&isOutgoingMessage(e)}function isServerRequest(e){var t;return"boolean"==typeof e._consuming&&"boolean"==typeof e._dumped&&(null===(t=e.req)||void 0===t?void 0:t.upgradeOrConnect)===void 0}function willEmitClose(e){if(!isNodeStream(e))return null;let t=e._writableState,r=e._readableState,i=t||r;return!i&&isServerResponse(e)||!!(i&&i.autoDestroy&&i.emitClose&&!1===i.closed)}function isDisturbed(e){var t;return!!(e&&(null!==(t=e[u])&&void 0!==t?t:e.readableDidRead||e.readableAborted))}function isErrored(e){var t,r,i,s,n,o,l,h,u,c;return!!(e&&(null!==(t=null!==(r=null!==(i=null!==(s=null!==(n=null!==(o=e[a])&&void 0!==o?o:e.readableErrored)&&void 0!==n?n:e.writableErrored)&&void 0!==s?s:null===(l=e._readableState)||void 0===l?void 0:l.errorEmitted)&&void 0!==i?i:null===(h=e._writableState)||void 0===h?void 0:h.errorEmitted)&&void 0!==r?r:null===(u=e._readableState)||void 0===u?void 0:u.errored)&&void 0!==t?t:null===(c=e._writableState)||void 0===c?void 0:c.errored))}e.exports={isDestroyed,kIsDestroyed:o,isDisturbed,kIsDisturbed:u,isErrored,kIsErrored:a,isReadable,kIsReadable:l,kIsClosedPromise:c,kControllerErrorFunction:d,kIsWritable:h,isClosed,isDuplexNodeStream,isFinished,isIterable,isReadableNodeStream,isReadableStream,isReadableEnded,isReadableFinished,isReadableErrored,isNodeStream,isWebStream,isWritable,isWritableNodeStream,isWritableStream,isWritableEnded,isWritableFinished,isWritableErrored,isServerRequest,isServerResponse,willEmitClose,isTransformStream}},55111:(e,t,r)=>{"use strict";let i;let s=r(85838),{ArrayPrototypeSlice:n,Error:o,FunctionPrototypeSymbolHasInstance:a,ObjectDefineProperty:l,ObjectDefineProperties:h,ObjectSetPrototypeOf:u,StringPrototypeToLowerCase:c,Symbol:d,SymbolHasInstance:p}=r(1065);e.exports=Writable,Writable.WritableState=WritableState;let{EventEmitter:g}=r(82361),b=r(7100).Stream,{Buffer:m}=r(14300),_=r(71991),{addAbortSignal:y}=r(94586),{getHighWaterMark:S,getDefaultHighWaterMark:v}=r(84761),{ERR_INVALID_ARG_TYPE:w,ERR_METHOD_NOT_IMPLEMENTED:k,ERR_MULTIPLE_CALLBACK:I,ERR_STREAM_CANNOT_PIPE:B,ERR_STREAM_DESTROYED:T,ERR_STREAM_ALREADY_FINISHED:A,ERR_STREAM_NULL_VALUES:O,ERR_STREAM_WRITE_AFTER_END:R,ERR_UNKNOWN_ENCODING:x}=r(21257).codes,{errorOrDestroy:C}=_;function nop(){}u(Writable.prototype,b.prototype),u(Writable,b);let P=d("kOnFinished");function WritableState(e,t,i){"boolean"!=typeof i&&(i=t instanceof r(81580)),this.objectMode=!!(e&&e.objectMode),i&&(this.objectMode=this.objectMode||!!(e&&e.writableObjectMode)),this.highWaterMark=e?S(this,e,"writableHighWaterMark",i):v(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;let s=!!(e&&!1===e.decodeStrings);this.decodeStrings=!s,this.defaultEncoding=e&&e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=onwrite.bind(void 0,t),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,resetBuffer(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!e||!1!==e.emitClose,this.autoDestroy=!e||!1!==e.autoDestroy,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[P]=[]}function resetBuffer(e){e.buffered=[],e.bufferedIndex=0,e.allBuffers=!0,e.allNoop=!0}function Writable(e){let t=this instanceof r(81580);if(!t&&!a(Writable,this))return new Writable(e);this._writableState=new WritableState(e,this,t),e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final),"function"==typeof e.construct&&(this._construct=e.construct),e.signal&&y(e.signal,this)),b.call(this,e),_.construct(this,()=>{let e=this._writableState;e.writing||clearBuffer(this,e),finishMaybe(this,e)})}function _write(e,t,r,i){let n;let o=e._writableState;if("function"==typeof r)i=r,r=o.defaultEncoding;else{if(r){if("buffer"!==r&&!m.isEncoding(r))throw new x(r)}else r=o.defaultEncoding;"function"!=typeof i&&(i=nop)}if(null===t)throw new O;if(!o.objectMode){if("string"==typeof t)!1!==o.decodeStrings&&(t=m.from(t,r),r="buffer");else if(t instanceof m)r="buffer";else if(b._isUint8Array(t))t=b._uint8ArrayToBuffer(t),r="buffer";else throw new w("chunk",["string","Buffer","Uint8Array"],t)}return(o.ending?n=new R:o.destroyed&&(n=new T("write")),n)?(s.nextTick(i,n),C(e,n,!0),n):(o.pendingcb++,writeOrBuffer(e,o,t,r,i))}function writeOrBuffer(e,t,r,i,s){let n=t.objectMode?1:r.length;t.length+=n;let o=t.length<t.highWaterMark;return o||(t.needDrain=!0),t.writing||t.corked||t.errored||!t.constructed?(t.buffered.push({chunk:r,encoding:i,callback:s}),t.allBuffers&&"buffer"!==i&&(t.allBuffers=!1),t.allNoop&&s!==nop&&(t.allNoop=!1)):(t.writelen=n,t.writecb=s,t.writing=!0,t.sync=!0,e._write(r,i,t.onwrite),t.sync=!1),o&&!t.errored&&!t.destroyed}function doWrite(e,t,r,i,s,n,o){t.writelen=i,t.writecb=o,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new T("write")):r?e._writev(s,t.onwrite):e._write(s,n,t.onwrite),t.sync=!1}function onwriteError(e,t,r,i){--t.pendingcb,i(r),errorBuffer(t),C(e,r)}function onwrite(e,t){let r=e._writableState,i=r.sync,n=r.writecb;if("function"!=typeof n){C(e,new I);return}r.writing=!1,r.writecb=null,r.length-=r.writelen,r.writelen=0,t?(t.stack,r.errored||(r.errored=t),e._readableState&&!e._readableState.errored&&(e._readableState.errored=t),i?s.nextTick(onwriteError,e,r,t,n):onwriteError(e,r,t,n)):(r.buffered.length>r.bufferedIndex&&clearBuffer(e,r),i?null!==r.afterWriteTickInfo&&r.afterWriteTickInfo.cb===n?r.afterWriteTickInfo.count++:(r.afterWriteTickInfo={count:1,cb:n,stream:e,state:r},s.nextTick(afterWriteTick,r.afterWriteTickInfo)):afterWrite(e,r,1,n))}function afterWriteTick({stream:e,state:t,count:r,cb:i}){return t.afterWriteTickInfo=null,afterWrite(e,t,r,i)}function afterWrite(e,t,r,i){let s=!t.ending&&!e.destroyed&&0===t.length&&t.needDrain;for(s&&(t.needDrain=!1,e.emit("drain"));r-- >0;)t.pendingcb--,i();t.destroyed&&errorBuffer(t),finishMaybe(e,t)}function errorBuffer(e){var t,r;if(e.writing)return;for(let r=e.bufferedIndex;r<e.buffered.length;++r){let{chunk:i,callback:s}=e.buffered[r],n=e.objectMode?1:i.length;e.length-=n,s(null!==(t=e.errored)&&void 0!==t?t:new T("write"))}let i=e[P].splice(0);for(let t=0;t<i.length;t++)i[t](null!==(r=e.errored)&&void 0!==r?r:new T("end"));resetBuffer(e)}function clearBuffer(e,t){if(t.corked||t.bufferProcessing||t.destroyed||!t.constructed)return;let{buffered:r,bufferedIndex:i,objectMode:s}=t,o=r.length-i;if(!o)return;let a=i;if(t.bufferProcessing=!0,o>1&&e._writev){t.pendingcb-=o-1;let i=t.allNoop?nop:e=>{for(let t=a;t<r.length;++t)r[t].callback(e)},s=t.allNoop&&0===a?r:n(r,a);s.allBuffers=t.allBuffers,doWrite(e,t,!0,t.length,s,"",i),resetBuffer(t)}else{do{let{chunk:i,encoding:n,callback:o}=r[a];r[a++]=null;let l=s?1:i.length;doWrite(e,t,!1,l,i,n,o)}while(a<r.length&&!t.writing);a===r.length?resetBuffer(t):a>256?(r.splice(0,a),t.bufferedIndex=0):t.bufferedIndex=a}t.bufferProcessing=!1}function needFinish(e){return e.ending&&!e.destroyed&&e.constructed&&0===e.length&&!e.errored&&0===e.buffered.length&&!e.finished&&!e.writing&&!e.errorEmitted&&!e.closeEmitted}function callFinal(e,t){let r=!1;function onFinish(i){if(r){C(e,null!=i?i:I());return}if(r=!0,t.pendingcb--,i){let r=t[P].splice(0);for(let e=0;e<r.length;e++)r[e](i);C(e,i,t.sync)}else needFinish(t)&&(t.prefinished=!0,e.emit("prefinish"),t.pendingcb++,s.nextTick(finish,e,t))}t.sync=!0,t.pendingcb++;try{e._final(onFinish)}catch(e){onFinish(e)}t.sync=!1}function prefinish(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.finalCalled=!0,callFinal(e,t)))}function finishMaybe(e,t,r){needFinish(t)&&(prefinish(e,t),0===t.pendingcb&&(r?(t.pendingcb++,s.nextTick((e,t)=>{needFinish(t)?finish(e,t):t.pendingcb--},e,t)):needFinish(t)&&(t.pendingcb++,finish(e,t))))}function finish(e,t){t.pendingcb--,t.finished=!0;let r=t[P].splice(0);for(let e=0;e<r.length;e++)r[e]();if(e.emit("finish"),t.autoDestroy){let t=e._readableState,r=!t||t.autoDestroy&&(t.endEmitted||!1===t.readable);r&&e.destroy()}}WritableState.prototype.getBuffer=function(){return n(this.buffered,this.bufferedIndex)},l(WritableState.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}}),l(Writable,p,{__proto__:null,value:function(e){return!!a(this,e)||this===Writable&&e&&e._writableState instanceof WritableState}}),Writable.prototype.pipe=function(){C(this,new B)},Writable.prototype.write=function(e,t,r){return!0===_write(this,e,t,r)},Writable.prototype.cork=function(){this._writableState.corked++},Writable.prototype.uncork=function(){let e=this._writableState;e.corked&&(e.corked--,e.writing||clearBuffer(this,e))},Writable.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=c(e)),!m.isEncoding(e))throw new x(e);return this._writableState.defaultEncoding=e,this},Writable.prototype._write=function(e,t,r){if(this._writev)this._writev([{chunk:e,encoding:t}],r);else throw new k("_write()")},Writable.prototype._writev=null,Writable.prototype.end=function(e,t,r){let i;let n=this._writableState;if("function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!=e){let r=_write(this,e,t);r instanceof o&&(i=r)}return n.corked&&(n.corked=1,this.uncork()),i||(n.errored||n.ending?n.finished?i=new A("end"):n.destroyed&&(i=new T("end")):(n.ending=!0,finishMaybe(this,n,!0),n.ended=!0)),"function"==typeof r&&(i||n.finished?s.nextTick(r,i):n[P].push(r)),this},h(Writable.prototype,{closed:{__proto__:null,get(){return!!this._writableState&&this._writableState.closed}},destroyed:{__proto__:null,get(){return!!this._writableState&&this._writableState.destroyed},set(e){this._writableState&&(this._writableState.destroyed=e)}},writable:{__proto__:null,get(){let e=this._writableState;return!!e&&!1!==e.writable&&!e.destroyed&&!e.errored&&!e.ending&&!e.ended},set(e){this._writableState&&(this._writableState.writable=!!e)}},writableFinished:{__proto__:null,get(){return!!this._writableState&&this._writableState.finished}},writableObjectMode:{__proto__:null,get(){return!!this._writableState&&this._writableState.objectMode}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return!!this._writableState&&this._writableState.ending}},writableNeedDrain:{__proto__:null,get(){let e=this._writableState;return!!e&&!e.destroyed&&!e.ending&&e.needDrain}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(!1!==this._writableState.writable&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});let M=_.destroy;function lazyWebStreams(){return void 0===i&&(i={}),i}Writable.prototype.destroy=function(e,t){let r=this._writableState;return!r.destroyed&&(r.bufferedIndex<r.buffered.length||r[P].length)&&s.nextTick(errorBuffer,r),M.call(this,e,t),this},Writable.prototype._undestroy=_.undestroy,Writable.prototype._destroy=function(e,t){t(e)},Writable.prototype[g.captureRejectionSymbol]=function(e){this.destroy(e)},Writable.fromWeb=function(e,t){return lazyWebStreams().newStreamWritableFromWritableStream(e,t)},Writable.toWeb=function(e){return lazyWebStreams().newWritableStreamFromStreamWritable(e)}},45873:(e,t,r)=>{"use strict";let{ArrayIsArray:i,ArrayPrototypeIncludes:s,ArrayPrototypeJoin:n,ArrayPrototypeMap:o,NumberIsInteger:a,NumberIsNaN:l,NumberMAX_SAFE_INTEGER:h,NumberMIN_SAFE_INTEGER:u,NumberParseInt:c,ObjectPrototypeHasOwnProperty:d,RegExpPrototypeExec:p,String:g,StringPrototypeToUpperCase:b,StringPrototypeTrim:m}=r(1065),{hideStackFrames:_,codes:{ERR_SOCKET_BAD_PORT:y,ERR_INVALID_ARG_TYPE:S,ERR_INVALID_ARG_VALUE:v,ERR_OUT_OF_RANGE:w,ERR_UNKNOWN_SIGNAL:k}}=r(21257),{normalizeEncoding:I}=r(75965),{isAsyncFunction:B,isArrayBufferView:T}=r(75965).types,A={};function isInt32(e){return e===(0|e)}function isUint32(e){return e===e>>>0}let O=/^[0-7]+$/;function parseFileMode(e,t,r){if(void 0===e&&(e=r),"string"==typeof e){if(null===p(O,e))throw new v(t,e,"must be a 32-bit unsigned integer or an octal string");e=c(e,8)}return C(e,t),e}let R=_((e,t,r=u,i=h)=>{if("number"!=typeof e)throw new S(t,"number",e);if(!a(e))throw new w(t,"an integer",e);if(e<r||e>i)throw new w(t,`>= ${r} && <= ${i}`,e)}),x=_((e,t,r=-2147483648,i=2147483647)=>{if("number"!=typeof e)throw new S(t,"number",e);if(!a(e))throw new w(t,"an integer",e);if(e<r||e>i)throw new w(t,`>= ${r} && <= ${i}`,e)}),C=_((e,t,r=!1)=>{if("number"!=typeof e)throw new S(t,"number",e);if(!a(e))throw new w(t,"an integer",e);let i=r?1:0;if(e<i||e>4294967295)throw new w(t,`>= ${i} && <= 4294967295`,e)});function validateString(e,t){if("string"!=typeof e)throw new S(t,"string",e)}function validateNumber(e,t,r,i){if("number"!=typeof e)throw new S(t,"number",e);if(null!=r&&e<r||null!=i&&e>i||(null!=r||null!=i)&&l(e))throw new w(t,`${null!=r?`>= ${r}`:""}${null!=r&&null!=i?" && ":""}${null!=i?`<= ${i}`:""}`,e)}let P=_((e,t,r)=>{if(!s(r,e)){let i=n(o(r,e=>"string"==typeof e?`'${e}'`:g(e)),", ");throw new v(t,e,"must be one of: "+i)}});function validateBoolean(e,t){if("boolean"!=typeof e)throw new S(t,"boolean",e)}function getOwnPropertyValueOrDefault(e,t,r){return null!=e&&d(e,t)?e[t]:r}let M=_((e,t,r=null)=>{let s=getOwnPropertyValueOrDefault(r,"allowArray",!1),n=getOwnPropertyValueOrDefault(r,"allowFunction",!1),o=getOwnPropertyValueOrDefault(r,"nullable",!1);if(!o&&null===e||!s&&i(e)||"object"!=typeof e&&(!n||"function"!=typeof e))throw new S(t,"Object",e)}),N=_((e,t)=>{if(null!=e&&"object"!=typeof e&&"function"!=typeof e)throw new S(t,"a dictionary",e)}),L=_((e,t,r=0)=>{if(!i(e))throw new S(t,"Array",e);if(e.length<r){let i=`must be longer than ${r}`;throw new v(t,e,i)}});function validateStringArray(e,t){L(e,t);for(let r=0;r<e.length;r++)validateString(e[r],`${t}[${r}]`)}function validateBooleanArray(e,t){L(e,t);for(let r=0;r<e.length;r++)validateBoolean(e[r],`${t}[${r}]`)}function validateAbortSignalArray(e,t){L(e,t);for(let r=0;r<e.length;r++){let i=e[r],s=`${t}[${r}]`;if(null==i)throw new S(s,"AbortSignal",i);U(i,s)}}function validateSignalName(e,t="signal"){if(validateString(e,t),void 0===A[e]){if(void 0!==A[b(e)])throw new k(e+" (signals must use all capital letters)");throw new k(e)}}let D=_((e,t="buffer")=>{if(!T(e))throw new S(t,["Buffer","TypedArray","DataView"],e)});function validateEncoding(e,t){let r=I(t),i=e.length;if("hex"===r&&i%2!=0)throw new v("encoding",t,`is invalid for data of length ${i}`)}function validatePort(e,t="Port",r=!0){if("number"!=typeof e&&"string"!=typeof e||"string"==typeof e&&0===m(e).length||+e!=+e>>>0||e>65535||0===e&&!r)throw new y(t,e,r);return 0|e}let U=_((e,t)=>{if(void 0!==e&&(null===e||"object"!=typeof e||!("aborted"in e)))throw new S(t,"AbortSignal",e)}),j=_((e,t)=>{if("function"!=typeof e)throw new S(t,"Function",e)}),W=_((e,t)=>{if("function"!=typeof e||B(e))throw new S(t,"Function",e)}),F=_((e,t)=>{if(void 0!==e)throw new S(t,"undefined",e)});function validateUnion(e,t,r){if(!s(r,e))throw new S(t,`('${n(r,"|")}')`,e)}let V=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function validateLinkHeaderFormat(e,t){if(void 0===e||!p(V,e))throw new v(t,e,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function validateLinkHeaderValue(e){if("string"==typeof e)return validateLinkHeaderFormat(e,"hints"),e;if(i(e)){let t=e.length,r="";if(0===t)return r;for(let i=0;i<t;i++){let s=e[i];validateLinkHeaderFormat(s,"hints"),r+=s,i!==t-1&&(r+=", ")}return r}throw new v("hints",e,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}e.exports={isInt32,isUint32,parseFileMode,validateArray:L,validateStringArray,validateBooleanArray,validateAbortSignalArray,validateBoolean,validateBuffer:D,validateDictionary:N,validateEncoding,validateFunction:j,validateInt32:x,validateInteger:R,validateNumber,validateObject:M,validateOneOf:P,validatePlainFunction:W,validatePort,validateSignalName,validateString,validateUint32:C,validateUndefined:F,validateUnion,validateAbortSignal:U,validateLinkHeaderValue}},21257:(e,t,r)=>{"use strict";let{format:i,inspect:s}=r(36769),{AggregateError:n}=r(1065),o=globalThis.AggregateError||n,a=Symbol("kIsNodeError"),l=["string","function","number","object","Function","Object","boolean","bigint","symbol"],h=/^([A-Z][a-z0-9]*)+$/,u={};function assert(e,t){if(!e)throw new u.ERR_INTERNAL_ASSERTION(t)}function addNumericalSeparator(e){let t="",r=e.length,i="-"===e[0]?1:0;for(;r>=i+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}function getMessage(e,t,r){if("function"==typeof t)return assert(t.length<=r.length,`Code: ${e}; The provided arguments length (${r.length}) does not match the required ones (${t.length}).`),t(...r);let s=(t.match(/%[dfijoOs]/g)||[]).length;return(assert(s===r.length,`Code: ${e}; The provided arguments length (${r.length}) does not match the required ones (${s}).`),0===r.length)?t:i(t,...r)}function E(e,t,r){r||(r=Error);let NodeError=class NodeError extends r{constructor(...r){super(getMessage(e,t,r))}toString(){return`${this.name} [${e}]: ${this.message}`}};Object.defineProperties(NodeError.prototype,{name:{value:r.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${e}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),NodeError.prototype.code=e,NodeError.prototype[a]=!0,u[e]=NodeError}function hideStackFrames(e){let t="__node_internal_"+e.name;return Object.defineProperty(e,"name",{value:t}),e}function aggregateTwoErrors(e,t){if(e&&t&&e!==t){if(Array.isArray(t.errors))return t.errors.push(e),t;let r=new o([t,e],t.message);return r.code=t.code,r}return e||t}let AbortError=class AbortError extends Error{constructor(e="The operation was aborted",t){if(void 0!==t&&"object"!=typeof t)throw new u.ERR_INVALID_ARG_TYPE("options","Object",t);super(e,t),this.code="ABORT_ERR",this.name="AbortError"}};E("ERR_ASSERTION","%s",Error),E("ERR_INVALID_ARG_TYPE",(e,t,r)=>{assert("string"==typeof e,"'name' must be a string"),Array.isArray(t)||(t=[t]);let i="The ";e.endsWith(" argument")?i+=`${e} `:i+=`"${e}" ${e.includes(".")?"property":"argument"} `,i+="must be ";let n=[],o=[],a=[];for(let e of t)assert("string"==typeof e,"All expected entries have to be of type string"),l.includes(e)?n.push(e.toLowerCase()):h.test(e)?o.push(e):(assert("object"!==e,'The value "object" should be written as "Object"'),a.push(e));if(o.length>0){let e=n.indexOf("object");-1!==e&&(n.splice(n,e,1),o.push("Object"))}if(n.length>0){switch(n.length){case 1:i+=`of type ${n[0]}`;break;case 2:i+=`one of type ${n[0]} or ${n[1]}`;break;default:{let e=n.pop();i+=`one of type ${n.join(", ")}, or ${e}`}}(o.length>0||a.length>0)&&(i+=" or ")}if(o.length>0){switch(o.length){case 1:i+=`an instance of ${o[0]}`;break;case 2:i+=`an instance of ${o[0]} or ${o[1]}`;break;default:{let e=o.pop();i+=`an instance of ${o.join(", ")}, or ${e}`}}a.length>0&&(i+=" or ")}switch(a.length){case 0:break;case 1:a[0].toLowerCase()!==a[0]&&(i+="an "),i+=`${a[0]}`;break;case 2:i+=`one of ${a[0]} or ${a[1]}`;break;default:{let e=a.pop();i+=`one of ${a.join(", ")}, or ${e}`}}if(null==r)i+=`. Received ${r}`;else if("function"==typeof r&&r.name)i+=`. Received function ${r.name}`;else if("object"==typeof r){var u;if(null!==(u=r.constructor)&&void 0!==u&&u.name)i+=`. Received an instance of ${r.constructor.name}`;else{let e=s(r,{depth:-1});i+=`. Received ${e}`}}else{let e=s(r,{colors:!1});e.length>25&&(e=`${e.slice(0,25)}...`),i+=`. Received type ${typeof r} (${e})`}return i},TypeError),E("ERR_INVALID_ARG_VALUE",(e,t,r="is invalid")=>{let i=s(t);i.length>128&&(i=i.slice(0,128)+"...");let n=e.includes(".")?"property":"argument";return`The ${n} '${e}' ${r}. Received ${i}`},TypeError),E("ERR_INVALID_RETURN_VALUE",(e,t,r)=>{var i;let s=null!=r&&null!==(i=r.constructor)&&void 0!==i&&i.name?`instance of ${r.constructor.name}`:`type ${typeof r}`;return`Expected ${e} to be returned from the "${t}" function but got ${s}.`},TypeError),E("ERR_MISSING_ARGS",(...e)=>{let t;assert(e.length>0,"At least one arg needs to be specified");let r=e.length;switch(e=(Array.isArray(e)?e:[e]).map(e=>`"${e}"`).join(" or "),r){case 1:t+=`The ${e[0]} argument`;break;case 2:t+=`The ${e[0]} and ${e[1]} arguments`;break;default:{let r=e.pop();t+=`The ${e.join(", ")}, and ${r} arguments`}}return`${t} must be specified`},TypeError),E("ERR_OUT_OF_RANGE",(e,t,r)=>{let i;if(assert(t,'Missing "range" argument'),Number.isInteger(r)&&Math.abs(r)>4294967296)i=addNumericalSeparator(String(r));else if("bigint"==typeof r){i=String(r);let e=BigInt(2)**BigInt(32);(r>e||r<-e)&&(i=addNumericalSeparator(i)),i+="n"}else i=s(r);return`The value of "${e}" is out of range. It must be ${t}. Received ${i}`},RangeError),E("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),E("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),E("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),E("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),E("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),E("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),E("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),E("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),E("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),E("ERR_STREAM_WRITE_AFTER_END","write after end",Error),E("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),e.exports={AbortError,aggregateTwoErrors:hideStackFrames(aggregateTwoErrors),hideStackFrames,codes:u}},57407:(e,t,r)=>{"use strict";let i=r(12781);if(i&&"disable"===process.env.READABLE_STREAM){let t=i.promises;e.exports._uint8ArrayToBuffer=i._uint8ArrayToBuffer,e.exports._isUint8Array=i._isUint8Array,e.exports.isDisturbed=i.isDisturbed,e.exports.isErrored=i.isErrored,e.exports.isReadable=i.isReadable,e.exports.Readable=i.Readable,e.exports.Writable=i.Writable,e.exports.Duplex=i.Duplex,e.exports.Transform=i.Transform,e.exports.PassThrough=i.PassThrough,e.exports.addAbortSignal=i.addAbortSignal,e.exports.finished=i.finished,e.exports.destroy=i.destroy,e.exports.pipeline=i.pipeline,e.exports.compose=i.compose,Object.defineProperty(i,"promises",{configurable:!0,enumerable:!0,get:()=>t}),e.exports.Stream=i.Stream}else{let t=r(57895),i=r(75581),s=t.Readable.destroy;e.exports=t.Readable,e.exports._uint8ArrayToBuffer=t._uint8ArrayToBuffer,e.exports._isUint8Array=t._isUint8Array,e.exports.isDisturbed=t.isDisturbed,e.exports.isErrored=t.isErrored,e.exports.isReadable=t.isReadable,e.exports.Readable=t.Readable,e.exports.Writable=t.Writable,e.exports.Duplex=t.Duplex,e.exports.Transform=t.Transform,e.exports.PassThrough=t.PassThrough,e.exports.addAbortSignal=t.addAbortSignal,e.exports.finished=t.finished,e.exports.destroy=t.destroy,e.exports.destroy=s,e.exports.pipeline=t.pipeline,e.exports.compose=t.compose,Object.defineProperty(t,"promises",{configurable:!0,enumerable:!0,get:()=>i}),e.exports.Stream=t.Stream}e.exports.default=e.exports},1065:e=>{"use strict";let AggregateError=class AggregateError extends Error{constructor(e){if(!Array.isArray(e))throw TypeError(`Expected input to be an Array, got ${typeof e}`);let t="";for(let r=0;r<e.length;r++)t+=`    ${e[r].stack}
`;super(t),this.name="AggregateError",this.errors=e}};e.exports={AggregateError,ArrayIsArray:e=>Array.isArray(e),ArrayPrototypeIncludes:(e,t)=>e.includes(t),ArrayPrototypeIndexOf:(e,t)=>e.indexOf(t),ArrayPrototypeJoin:(e,t)=>e.join(t),ArrayPrototypeMap:(e,t)=>e.map(t),ArrayPrototypePop:(e,t)=>e.pop(t),ArrayPrototypePush:(e,t)=>e.push(t),ArrayPrototypeSlice:(e,t,r)=>e.slice(t,r),Error,FunctionPrototypeCall:(e,t,...r)=>e.call(t,...r),FunctionPrototypeSymbolHasInstance:(e,t)=>Function.prototype[Symbol.hasInstance].call(e,t),MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties:(e,t)=>Object.defineProperties(e,t),ObjectDefineProperty:(e,t,r)=>Object.defineProperty(e,t,r),ObjectGetOwnPropertyDescriptor:(e,t)=>Object.getOwnPropertyDescriptor(e,t),ObjectKeys:e=>Object.keys(e),ObjectSetPrototypeOf:(e,t)=>Object.setPrototypeOf(e,t),Promise,PromisePrototypeCatch:(e,t)=>e.catch(t),PromisePrototypeThen:(e,t,r)=>e.then(t,r),PromiseReject:e=>Promise.reject(e),PromiseResolve:e=>Promise.resolve(e),ReflectApply:Reflect.apply,RegExpPrototypeTest:(e,t)=>e.test(t),SafeSet:Set,String,StringPrototypeSlice:(e,t,r)=>e.slice(t,r),StringPrototypeToLowerCase:e=>e.toLowerCase(),StringPrototypeToUpperCase:e=>e.toUpperCase(),StringPrototypeTrim:e=>e.trim(),Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet:(e,t,r)=>e.set(t,r),Boolean,Uint8Array}},75965:(e,t,r)=>{"use strict";let i=r(14300),{format:s,inspect:n}=r(36769),{codes:{ERR_INVALID_ARG_TYPE:o}}=r(21257),{kResistStopPropagation:a,AggregateError:l,SymbolDispose:h}=r(1065),u=globalThis.AbortSignal||r(8541).AbortSignal,c=globalThis.AbortController||r(8541).AbortController,d=Object.getPrototypeOf(async function(){}).constructor,p=globalThis.Blob||i.Blob,validateAbortSignal=(e,t)=>{if(void 0!==e&&(null===e||"object"!=typeof e||!("aborted"in e)))throw new o(t,"AbortSignal",e)},validateFunction=(e,t)=>{if("function"!=typeof e)throw new o(t,"Function",e)};e.exports={AggregateError:l,kEmptyObject:Object.freeze({}),once(e){let t=!1;return function(...r){t||(t=!0,e.apply(this,r))}},createDeferredPromise:function(){let e,t;let r=new Promise((r,i)=>{e=r,t=i});return{promise:r,resolve:e,reject:t}},promisify:e=>new Promise((t,r)=>{e((e,...i)=>e?r(e):t(...i))}),debuglog:()=>function(){},format:s,inspect:n,types:{isAsyncFunction:e=>e instanceof d,isArrayBufferView:e=>ArrayBuffer.isView(e)},isBlob:void 0!==p?function(e){return e instanceof p}:function(e){return!1},deprecate:(e,t)=>e,addAbortListener:r(82361).addAbortListener||function(e,t){let r;if(void 0===e)throw new o("signal","AbortSignal",e);return validateAbortSignal(e,"signal"),validateFunction(t,"listener"),e.aborted?queueMicrotask(()=>t()):(e.addEventListener("abort",t,{__proto__:null,once:!0,[a]:!0}),r=()=>{e.removeEventListener("abort",t)}),{__proto__:null,[h](){var e;null===(e=r)||void 0===e||e()}}},AbortSignalAny:u.any||function(e){if(1===e.length)return e[0];let t=new c,abort=()=>t.abort();return e.forEach(e=>{validateAbortSignal(e,"signals"),e.addEventListener("abort",abort,{once:!0})}),t.signal.addEventListener("abort",()=>{e.forEach(e=>e.removeEventListener("abort",abort))},{once:!0}),t.signal}},e.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")},36769:e=>{"use strict";e.exports={format:(e,...t)=>e.replace(/%([sdifj])/g,function(...[e,r]){let i=t.shift();if("f"===r)return i.toFixed(6);if("j"===r)return JSON.stringify(i);if("s"!==r||"object"!=typeof i)return i.toString();{let e=i.constructor!==Object?i.constructor.name:"";return`${e} {}`.trim()}}),inspect(e){switch(typeof e){case"string":if(e.includes("'")){if(!e.includes('"'))return`"${e}"`;if(!e.includes("`")&&!e.includes("${"))return`\`${e}\``}return`'${e}'`;case"number":if(isNaN(e))return"NaN";if(Object.is(e,-0))return String(e);return e;case"bigint":return`${String(e)}n`;case"boolean":case"undefined":return String(e);case"object":return"{}"}}}},57895:(e,t,r)=>{"use strict";let{Buffer:i}=r(14300),{ObjectDefineProperty:s,ObjectKeys:n,ReflectApply:o}=r(1065),{promisify:{custom:a}}=r(75965),{streamReturningOperators:l,promiseReturningOperators:h}=r(1332),{codes:{ERR_ILLEGAL_CONSTRUCTOR:u}}=r(21257),c=r(93195),{setDefaultHighWaterMark:d,getDefaultHighWaterMark:p}=r(84761),{pipeline:g}=r(23417),{destroyer:b}=r(71991),m=r(45532),_=r(75581),y=r(3010),S=e.exports=r(7100).Stream;for(let e of(S.isDestroyed=y.isDestroyed,S.isDisturbed=y.isDisturbed,S.isErrored=y.isErrored,S.isReadable=y.isReadable,S.isWritable=y.isWritable,S.Readable=r(39668),n(l))){let t=l[e];function fn(...e){if(new.target)throw u();return S.Readable.from(o(t,this,e))}s(fn,"name",{__proto__:null,value:t.name}),s(fn,"length",{__proto__:null,value:t.length}),s(S.Readable.prototype,e,{__proto__:null,value:fn,enumerable:!1,configurable:!0,writable:!0})}for(let e of n(h)){let t=h[e];function fn(...e){if(new.target)throw u();return o(t,this,e)}s(fn,"name",{__proto__:null,value:t.name}),s(fn,"length",{__proto__:null,value:t.length}),s(S.Readable.prototype,e,{__proto__:null,value:fn,enumerable:!1,configurable:!0,writable:!0})}S.Writable=r(55111),S.Duplex=r(81580),S.Transform=r(82875),S.PassThrough=r(49784),S.pipeline=g;let{addAbortSignal:v}=r(94586);S.addAbortSignal=v,S.finished=m,S.destroy=b,S.compose=c,S.setDefaultHighWaterMark=d,S.getDefaultHighWaterMark=p,s(S,"promises",{__proto__:null,configurable:!0,enumerable:!0,get:()=>_}),s(g,a,{__proto__:null,enumerable:!0,get:()=>_.pipeline}),s(m,a,{__proto__:null,enumerable:!0,get:()=>_.finished}),S.Stream=S,S._isUint8Array=function(e){return e instanceof Uint8Array},S._uint8ArrayToBuffer=function(e){return i.from(e.buffer,e.byteOffset,e.byteLength)}},75581:(e,t,r)=>{"use strict";let{ArrayPrototypePop:i,Promise:s}=r(1065),{isIterable:n,isNodeStream:o,isWebStream:a}=r(3010),{pipelineImpl:l}=r(23417),{finished:h}=r(45532);function pipeline(...e){return new s((t,r)=>{let s,h;let u=e[e.length-1];if(u&&"object"==typeof u&&!o(u)&&!n(u)&&!a(u)){let t=i(e);s=t.signal,h=t.end}l(e,(e,i)=>{e?r(e):t(i)},{signal:s,end:h})})}r(57895),e.exports={finished:h,pipeline}},6912:(e,t,r)=>{"use strict";e.exports=r(720)()},720:e=>{"use strict";function copyBuffer(e){return e instanceof Buffer?Buffer.from(e):new e.constructor(e.buffer.slice(),e.byteOffset,e.length)}function rfdc(e){if((e=e||{}).circles)return rfdcCircles(e);let t=new Map;if(t.set(Date,e=>new Date(e)),t.set(Map,(e,t)=>new Map(cloneArray(Array.from(e),t))),t.set(Set,(e,t)=>new Set(cloneArray(Array.from(e),t))),e.constructorHandlers)for(let r of e.constructorHandlers)t.set(r[0],r[1]);let r=null;return e.proto?cloneProto:clone;function cloneArray(e,i){let s=Object.keys(e),n=Array(s.length);for(let o=0;o<s.length;o++){let a=s[o],l=e[a];"object"!=typeof l||null===l?n[a]=l:l.constructor!==Object&&(r=t.get(l.constructor))?n[a]=r(l,i):ArrayBuffer.isView(l)?n[a]=copyBuffer(l):n[a]=i(l)}return n}function clone(e){if("object"!=typeof e||null===e)return e;if(Array.isArray(e))return cloneArray(e,clone);if(e.constructor!==Object&&(r=t.get(e.constructor)))return r(e,clone);let i={};for(let s in e){if(!1===Object.hasOwnProperty.call(e,s))continue;let n=e[s];"object"!=typeof n||null===n?i[s]=n:n.constructor!==Object&&(r=t.get(n.constructor))?i[s]=r(n,clone):ArrayBuffer.isView(n)?i[s]=copyBuffer(n):i[s]=clone(n)}return i}function cloneProto(e){if("object"!=typeof e||null===e)return e;if(Array.isArray(e))return cloneArray(e,cloneProto);if(e.constructor!==Object&&(r=t.get(e.constructor)))return r(e,cloneProto);let i={};for(let s in e){let n=e[s];"object"!=typeof n||null===n?i[s]=n:n.constructor!==Object&&(r=t.get(n.constructor))?i[s]=r(n,cloneProto):ArrayBuffer.isView(n)?i[s]=copyBuffer(n):i[s]=cloneProto(n)}return i}}function rfdcCircles(e){let t=[],r=[],i=new Map;if(i.set(Date,e=>new Date(e)),i.set(Map,(e,t)=>new Map(cloneArray(Array.from(e),t))),i.set(Set,(e,t)=>new Set(cloneArray(Array.from(e),t))),e.constructorHandlers)for(let t of e.constructorHandlers)i.set(t[0],t[1]);let s=null;return e.proto?cloneProto:clone;function cloneArray(e,n){let o=Object.keys(e),a=Array(o.length);for(let l=0;l<o.length;l++){let h=o[l],u=e[h];if("object"!=typeof u||null===u)a[h]=u;else if(u.constructor!==Object&&(s=i.get(u.constructor)))a[h]=s(u,n);else if(ArrayBuffer.isView(u))a[h]=copyBuffer(u);else{let e=t.indexOf(u);-1!==e?a[h]=r[e]:a[h]=n(u)}}return a}function clone(e){if("object"!=typeof e||null===e)return e;if(Array.isArray(e))return cloneArray(e,clone);if(e.constructor!==Object&&(s=i.get(e.constructor)))return s(e,clone);let n={};for(let o in t.push(e),r.push(n),e){if(!1===Object.hasOwnProperty.call(e,o))continue;let a=e[o];if("object"!=typeof a||null===a)n[o]=a;else if(a.constructor!==Object&&(s=i.get(a.constructor)))n[o]=s(a,clone);else if(ArrayBuffer.isView(a))n[o]=copyBuffer(a);else{let e=t.indexOf(a);-1!==e?n[o]=r[e]:n[o]=clone(a)}}return t.pop(),r.pop(),n}function cloneProto(e){if("object"!=typeof e||null===e)return e;if(Array.isArray(e))return cloneArray(e,cloneProto);if(e.constructor!==Object&&(s=i.get(e.constructor)))return s(e,cloneProto);let n={};for(let o in t.push(e),r.push(n),e){let a=e[o];if("object"!=typeof a||null===a)n[o]=a;else if(a.constructor!==Object&&(s=i.get(a.constructor)))n[o]=s(a,cloneProto);else if(ArrayBuffer.isView(a))n[o]=copyBuffer(a);else{let e=t.indexOf(a);-1!==e?n[o]=r[e]:n[o]=cloneProto(a)}}return t.pop(),r.pop(),n}}e.exports=rfdc},88729:(e,t,r)=>{/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var i=r(14300),s=i.Buffer;function copyProps(e,t){for(var r in e)t[r]=e[r]}function SafeBuffer(e,t,r){return s(e,t,r)}s.from&&s.alloc&&s.allocUnsafe&&s.allocUnsafeSlow?e.exports=i:(copyProps(i,t),t.Buffer=SafeBuffer),SafeBuffer.prototype=Object.create(s.prototype),copyProps(s,SafeBuffer),SafeBuffer.from=function(e,t,r){if("number"==typeof e)throw TypeError("Argument must not be a number");return s(e,t,r)},SafeBuffer.alloc=function(e,t,r){if("number"!=typeof e)throw TypeError("Argument must be a number");var i=s(e);return void 0!==t?"string"==typeof r?i.fill(t,r):i.fill(t):i.fill(0),i},SafeBuffer.allocUnsafe=function(e){if("number"!=typeof e)throw TypeError("Argument must be a number");return s(e)},SafeBuffer.allocUnsafeSlow=function(e){if("number"!=typeof e)throw TypeError("Argument must be a number");return i.SlowBuffer(e)}},60396:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=r(31772);let SmartBuffer=class SmartBuffer{constructor(e){if(this.length=0,this._encoding="utf8",this._writeOffset=0,this._readOffset=0,SmartBuffer.isSmartBufferOptions(e)){if(e.encoding&&(i.checkEncoding(e.encoding),this._encoding=e.encoding),e.size){if(i.isFiniteInteger(e.size)&&e.size>0)this._buff=Buffer.allocUnsafe(e.size);else throw Error(i.ERRORS.INVALID_SMARTBUFFER_SIZE)}else if(e.buff){if(Buffer.isBuffer(e.buff))this._buff=e.buff,this.length=e.buff.length;else throw Error(i.ERRORS.INVALID_SMARTBUFFER_BUFFER)}else this._buff=Buffer.allocUnsafe(4096)}else{if(void 0!==e)throw Error(i.ERRORS.INVALID_SMARTBUFFER_OBJECT);this._buff=Buffer.allocUnsafe(4096)}}static fromSize(e,t){return new this({size:e,encoding:t})}static fromBuffer(e,t){return new this({buff:e,encoding:t})}static fromOptions(e){return new this(e)}static isSmartBufferOptions(e){return e&&(void 0!==e.encoding||void 0!==e.size||void 0!==e.buff)}readInt8(e){return this._readNumberValue(Buffer.prototype.readInt8,1,e)}readInt16BE(e){return this._readNumberValue(Buffer.prototype.readInt16BE,2,e)}readInt16LE(e){return this._readNumberValue(Buffer.prototype.readInt16LE,2,e)}readInt32BE(e){return this._readNumberValue(Buffer.prototype.readInt32BE,4,e)}readInt32LE(e){return this._readNumberValue(Buffer.prototype.readInt32LE,4,e)}readBigInt64BE(e){return i.bigIntAndBufferInt64Check("readBigInt64BE"),this._readNumberValue(Buffer.prototype.readBigInt64BE,8,e)}readBigInt64LE(e){return i.bigIntAndBufferInt64Check("readBigInt64LE"),this._readNumberValue(Buffer.prototype.readBigInt64LE,8,e)}writeInt8(e,t){return this._writeNumberValue(Buffer.prototype.writeInt8,1,e,t),this}insertInt8(e,t){return this._insertNumberValue(Buffer.prototype.writeInt8,1,e,t)}writeInt16BE(e,t){return this._writeNumberValue(Buffer.prototype.writeInt16BE,2,e,t)}insertInt16BE(e,t){return this._insertNumberValue(Buffer.prototype.writeInt16BE,2,e,t)}writeInt16LE(e,t){return this._writeNumberValue(Buffer.prototype.writeInt16LE,2,e,t)}insertInt16LE(e,t){return this._insertNumberValue(Buffer.prototype.writeInt16LE,2,e,t)}writeInt32BE(e,t){return this._writeNumberValue(Buffer.prototype.writeInt32BE,4,e,t)}insertInt32BE(e,t){return this._insertNumberValue(Buffer.prototype.writeInt32BE,4,e,t)}writeInt32LE(e,t){return this._writeNumberValue(Buffer.prototype.writeInt32LE,4,e,t)}insertInt32LE(e,t){return this._insertNumberValue(Buffer.prototype.writeInt32LE,4,e,t)}writeBigInt64BE(e,t){return i.bigIntAndBufferInt64Check("writeBigInt64BE"),this._writeNumberValue(Buffer.prototype.writeBigInt64BE,8,e,t)}insertBigInt64BE(e,t){return i.bigIntAndBufferInt64Check("writeBigInt64BE"),this._insertNumberValue(Buffer.prototype.writeBigInt64BE,8,e,t)}writeBigInt64LE(e,t){return i.bigIntAndBufferInt64Check("writeBigInt64LE"),this._writeNumberValue(Buffer.prototype.writeBigInt64LE,8,e,t)}insertBigInt64LE(e,t){return i.bigIntAndBufferInt64Check("writeBigInt64LE"),this._insertNumberValue(Buffer.prototype.writeBigInt64LE,8,e,t)}readUInt8(e){return this._readNumberValue(Buffer.prototype.readUInt8,1,e)}readUInt16BE(e){return this._readNumberValue(Buffer.prototype.readUInt16BE,2,e)}readUInt16LE(e){return this._readNumberValue(Buffer.prototype.readUInt16LE,2,e)}readUInt32BE(e){return this._readNumberValue(Buffer.prototype.readUInt32BE,4,e)}readUInt32LE(e){return this._readNumberValue(Buffer.prototype.readUInt32LE,4,e)}readBigUInt64BE(e){return i.bigIntAndBufferInt64Check("readBigUInt64BE"),this._readNumberValue(Buffer.prototype.readBigUInt64BE,8,e)}readBigUInt64LE(e){return i.bigIntAndBufferInt64Check("readBigUInt64LE"),this._readNumberValue(Buffer.prototype.readBigUInt64LE,8,e)}writeUInt8(e,t){return this._writeNumberValue(Buffer.prototype.writeUInt8,1,e,t)}insertUInt8(e,t){return this._insertNumberValue(Buffer.prototype.writeUInt8,1,e,t)}writeUInt16BE(e,t){return this._writeNumberValue(Buffer.prototype.writeUInt16BE,2,e,t)}insertUInt16BE(e,t){return this._insertNumberValue(Buffer.prototype.writeUInt16BE,2,e,t)}writeUInt16LE(e,t){return this._writeNumberValue(Buffer.prototype.writeUInt16LE,2,e,t)}insertUInt16LE(e,t){return this._insertNumberValue(Buffer.prototype.writeUInt16LE,2,e,t)}writeUInt32BE(e,t){return this._writeNumberValue(Buffer.prototype.writeUInt32BE,4,e,t)}insertUInt32BE(e,t){return this._insertNumberValue(Buffer.prototype.writeUInt32BE,4,e,t)}writeUInt32LE(e,t){return this._writeNumberValue(Buffer.prototype.writeUInt32LE,4,e,t)}insertUInt32LE(e,t){return this._insertNumberValue(Buffer.prototype.writeUInt32LE,4,e,t)}writeBigUInt64BE(e,t){return i.bigIntAndBufferInt64Check("writeBigUInt64BE"),this._writeNumberValue(Buffer.prototype.writeBigUInt64BE,8,e,t)}insertBigUInt64BE(e,t){return i.bigIntAndBufferInt64Check("writeBigUInt64BE"),this._insertNumberValue(Buffer.prototype.writeBigUInt64BE,8,e,t)}writeBigUInt64LE(e,t){return i.bigIntAndBufferInt64Check("writeBigUInt64LE"),this._writeNumberValue(Buffer.prototype.writeBigUInt64LE,8,e,t)}insertBigUInt64LE(e,t){return i.bigIntAndBufferInt64Check("writeBigUInt64LE"),this._insertNumberValue(Buffer.prototype.writeBigUInt64LE,8,e,t)}readFloatBE(e){return this._readNumberValue(Buffer.prototype.readFloatBE,4,e)}readFloatLE(e){return this._readNumberValue(Buffer.prototype.readFloatLE,4,e)}writeFloatBE(e,t){return this._writeNumberValue(Buffer.prototype.writeFloatBE,4,e,t)}insertFloatBE(e,t){return this._insertNumberValue(Buffer.prototype.writeFloatBE,4,e,t)}writeFloatLE(e,t){return this._writeNumberValue(Buffer.prototype.writeFloatLE,4,e,t)}insertFloatLE(e,t){return this._insertNumberValue(Buffer.prototype.writeFloatLE,4,e,t)}readDoubleBE(e){return this._readNumberValue(Buffer.prototype.readDoubleBE,8,e)}readDoubleLE(e){return this._readNumberValue(Buffer.prototype.readDoubleLE,8,e)}writeDoubleBE(e,t){return this._writeNumberValue(Buffer.prototype.writeDoubleBE,8,e,t)}insertDoubleBE(e,t){return this._insertNumberValue(Buffer.prototype.writeDoubleBE,8,e,t)}writeDoubleLE(e,t){return this._writeNumberValue(Buffer.prototype.writeDoubleLE,8,e,t)}insertDoubleLE(e,t){return this._insertNumberValue(Buffer.prototype.writeDoubleLE,8,e,t)}readString(e,t){let r;"number"==typeof e?(i.checkLengthValue(e),r=Math.min(e,this.length-this._readOffset)):(t=e,r=this.length-this._readOffset),void 0!==t&&i.checkEncoding(t);let s=this._buff.slice(this._readOffset,this._readOffset+r).toString(t||this._encoding);return this._readOffset+=r,s}insertString(e,t,r){return i.checkOffsetValue(t),this._handleString(e,!0,t,r)}writeString(e,t,r){return this._handleString(e,!1,t,r)}readStringNT(e){void 0!==e&&i.checkEncoding(e);let t=this.length;for(let e=this._readOffset;e<this.length;e++)if(0===this._buff[e]){t=e;break}let r=this._buff.slice(this._readOffset,t);return this._readOffset=t+1,r.toString(e||this._encoding)}insertStringNT(e,t,r){return i.checkOffsetValue(t),this.insertString(e,t,r),this.insertUInt8(0,t+e.length),this}writeStringNT(e,t,r){return this.writeString(e,t,r),this.writeUInt8(0,"number"==typeof t?t+e.length:this.writeOffset),this}readBuffer(e){void 0!==e&&i.checkLengthValue(e);let t="number"==typeof e?e:this.length,r=Math.min(this.length,this._readOffset+t),s=this._buff.slice(this._readOffset,r);return this._readOffset=r,s}insertBuffer(e,t){return i.checkOffsetValue(t),this._handleBuffer(e,!0,t)}writeBuffer(e,t){return this._handleBuffer(e,!1,t)}readBufferNT(){let e=this.length;for(let t=this._readOffset;t<this.length;t++)if(0===this._buff[t]){e=t;break}let t=this._buff.slice(this._readOffset,e);return this._readOffset=e+1,t}insertBufferNT(e,t){return i.checkOffsetValue(t),this.insertBuffer(e,t),this.insertUInt8(0,t+e.length),this}writeBufferNT(e,t){return void 0!==t&&i.checkOffsetValue(t),this.writeBuffer(e,t),this.writeUInt8(0,"number"==typeof t?t+e.length:this._writeOffset),this}clear(){return this._writeOffset=0,this._readOffset=0,this.length=0,this}remaining(){return this.length-this._readOffset}get readOffset(){return this._readOffset}set readOffset(e){i.checkOffsetValue(e),i.checkTargetOffset(e,this),this._readOffset=e}get writeOffset(){return this._writeOffset}set writeOffset(e){i.checkOffsetValue(e),i.checkTargetOffset(e,this),this._writeOffset=e}get encoding(){return this._encoding}set encoding(e){i.checkEncoding(e),this._encoding=e}get internalBuffer(){return this._buff}toBuffer(){return this._buff.slice(0,this.length)}toString(e){let t="string"==typeof e?e:this._encoding;return i.checkEncoding(t),this._buff.toString(t,0,this.length)}destroy(){return this.clear(),this}_handleString(e,t,r,s){let n=this._writeOffset,o=this._encoding;"number"==typeof r?n=r:"string"==typeof r&&(i.checkEncoding(r),o=r),"string"==typeof s&&(i.checkEncoding(s),o=s);let a=Buffer.byteLength(e,o);return t?this.ensureInsertable(a,n):this._ensureWriteable(a,n),this._buff.write(e,n,a,o),t?this._writeOffset+=a:"number"==typeof r?this._writeOffset=Math.max(this._writeOffset,n+a):this._writeOffset+=a,this}_handleBuffer(e,t,r){let i="number"==typeof r?r:this._writeOffset;return t?this.ensureInsertable(e.length,i):this._ensureWriteable(e.length,i),e.copy(this._buff,i),t?this._writeOffset+=e.length:"number"==typeof r?this._writeOffset=Math.max(this._writeOffset,i+e.length):this._writeOffset+=e.length,this}ensureReadable(e,t){let r=this._readOffset;if(void 0!==t&&(i.checkOffsetValue(t),r=t),r<0||r+e>this.length)throw Error(i.ERRORS.INVALID_READ_BEYOND_BOUNDS)}ensureInsertable(e,t){i.checkOffsetValue(t),this._ensureCapacity(this.length+e),t<this.length&&this._buff.copy(this._buff,t+e,t,this._buff.length),t+e>this.length?this.length=t+e:this.length+=e}_ensureWriteable(e,t){let r="number"==typeof t?t:this._writeOffset;this._ensureCapacity(r+e),r+e>this.length&&(this.length=r+e)}_ensureCapacity(e){let t=this._buff.length;if(e>t){let r=this._buff,i=3*t/2+1;i<e&&(i=e),this._buff=Buffer.allocUnsafe(i),r.copy(this._buff,0,0,t)}}_readNumberValue(e,t,r){this.ensureReadable(t,r);let i=e.call(this._buff,"number"==typeof r?r:this._readOffset);return void 0===r&&(this._readOffset+=t),i}_insertNumberValue(e,t,r,s){return i.checkOffsetValue(s),this.ensureInsertable(t,s),e.call(this._buff,r,s),this._writeOffset+=t,this}_writeNumberValue(e,t,r,s){if("number"==typeof s){if(s<0)throw Error(i.ERRORS.INVALID_WRITE_BEYOND_BOUNDS);i.checkOffsetValue(s)}let n="number"==typeof s?s:this._writeOffset;return this._ensureWriteable(t,n),e.call(this._buff,r,n),"number"==typeof s?this._writeOffset=Math.max(this._writeOffset,n+t):this._writeOffset+=t,this}};t.SmartBuffer=SmartBuffer},31772:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=r(14300),s={INVALID_ENCODING:"Invalid encoding provided. Please specify a valid encoding the internal Node.js Buffer supports.",INVALID_SMARTBUFFER_SIZE:"Invalid size provided. Size must be a valid integer greater than zero.",INVALID_SMARTBUFFER_BUFFER:"Invalid Buffer provided in SmartBufferOptions.",INVALID_SMARTBUFFER_OBJECT:"Invalid SmartBufferOptions object supplied to SmartBuffer constructor or factory methods.",INVALID_OFFSET:"An invalid offset value was provided.",INVALID_OFFSET_NON_NUMBER:"An invalid offset value was provided. A numeric value is required.",INVALID_LENGTH:"An invalid length value was provided.",INVALID_LENGTH_NON_NUMBER:"An invalid length value was provived. A numeric value is required.",INVALID_TARGET_OFFSET:"Target offset is beyond the bounds of the internal SmartBuffer data.",INVALID_TARGET_LENGTH:"Specified length value moves cursor beyong the bounds of the internal SmartBuffer data.",INVALID_READ_BEYOND_BOUNDS:"Attempted to read beyond the bounds of the managed data.",INVALID_WRITE_BEYOND_BOUNDS:"Attempted to write beyond the bounds of the managed data."};function checkEncoding(e){if(!i.Buffer.isEncoding(e))throw Error(s.INVALID_ENCODING)}function isFiniteInteger(e){return"number"==typeof e&&isFinite(e)&&isInteger(e)}function checkOffsetOrLengthValue(e,t){if("number"==typeof e){if(!isFiniteInteger(e)||e<0)throw Error(t?s.INVALID_OFFSET:s.INVALID_LENGTH)}else throw Error(t?s.INVALID_OFFSET_NON_NUMBER:s.INVALID_LENGTH_NON_NUMBER)}function checkLengthValue(e){checkOffsetOrLengthValue(e,!1)}function checkOffsetValue(e){checkOffsetOrLengthValue(e,!0)}function checkTargetOffset(e,t){if(e<0||e>t.length)throw Error(s.INVALID_TARGET_OFFSET)}function isInteger(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}function bigIntAndBufferInt64Check(e){if("undefined"==typeof BigInt)throw Error("Platform does not support JS BigInt type.");if(void 0===i.Buffer.prototype[e])throw Error(`Platform does not support Buffer.prototype.${e}.`)}t.ERRORS=s,t.checkEncoding=checkEncoding,t.isFiniteInteger=isFiniteInteger,t.checkLengthValue=checkLengthValue,t.checkOffsetValue=checkOffsetValue,t.checkTargetOffset=checkTargetOffset,t.bigIntAndBufferInt64Check=bigIntAndBufferInt64Check},60498:function(e,t,r){"use strict";var i=this&&this.__awaiter||function(e,t,r,i){function adopt(e){return e instanceof r?e:new r(function(t){t(e)})}return new(r||(r=Promise))(function(r,s){function fulfilled(e){try{step(i.next(e))}catch(e){s(e)}}function rejected(e){try{step(i.throw(e))}catch(e){s(e)}}function step(e){e.done?r(e.value):adopt(e.value).then(fulfilled,rejected)}step((i=i.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.SocksClientError=t.SocksClient=void 0;let s=r(82361),n=r(41808),o=r(60396),a=r(19570),l=r(35921),h=r(15041),u=r(54782);Object.defineProperty(t,"SocksClientError",{enumerable:!0,get:function(){return u.SocksClientError}});let c=r(39934);let SocksClient=class SocksClient extends s.EventEmitter{constructor(e){super(),this.options=Object.assign({},e),(0,l.validateSocksClientOptions)(e),this.setState(a.SocksClientState.Created)}static createConnection(e,t){return new Promise((r,i)=>{try{(0,l.validateSocksClientOptions)(e,["connect"])}catch(e){if("function"==typeof t)return t(e),r(e);return i(e)}let s=new SocksClient(e);s.connect(e.existing_socket),s.once("established",e=>{s.removeAllListeners(),"function"==typeof t&&t(null,e),r(e)}),s.once("error",e=>{s.removeAllListeners(),"function"==typeof t?(t(e),r(e)):i(e)})})}static createConnectionChain(e,t){return new Promise((r,s)=>i(this,void 0,void 0,function*(){try{(0,l.validateSocksClientChainOptions)(e)}catch(e){if("function"==typeof t)return t(e),r(e);return s(e)}e.randomizeChain&&(0,u.shuffleArray)(e.proxies);try{let i;for(let t=0;t<e.proxies.length;t++){let r=e.proxies[t],s=t===e.proxies.length-1?e.destination:{host:e.proxies[t+1].host||e.proxies[t+1].ipaddress,port:e.proxies[t+1].port},n=yield SocksClient.createConnection({command:"connect",proxy:r,destination:s,existing_socket:i});i=i||n.socket}"function"==typeof t&&t(null,{socket:i}),r({socket:i})}catch(e){"function"==typeof t?(t(e),r(e)):s(e)}}))}static createUDPFrame(e){let t=new o.SmartBuffer;return t.writeUInt16BE(0),t.writeUInt8(e.frameNumber||0),n.isIPv4(e.remoteHost.host)?(t.writeUInt8(a.Socks5HostType.IPv4),t.writeUInt32BE((0,l.ipv4ToInt32)(e.remoteHost.host))):n.isIPv6(e.remoteHost.host)?(t.writeUInt8(a.Socks5HostType.IPv6),t.writeBuffer((0,l.ipToBuffer)(e.remoteHost.host))):(t.writeUInt8(a.Socks5HostType.Hostname),t.writeUInt8(Buffer.byteLength(e.remoteHost.host)),t.writeString(e.remoteHost.host)),t.writeUInt16BE(e.remoteHost.port),t.writeBuffer(e.data),t.toBuffer()}static parseUDPFrame(e){let t;let r=o.SmartBuffer.fromBuffer(e);r.readOffset=2;let i=r.readUInt8(),s=r.readUInt8();t=s===a.Socks5HostType.IPv4?(0,l.int32ToIpv4)(r.readUInt32BE()):s===a.Socks5HostType.IPv6?c.Address6.fromByteArray(Array.from(r.readBuffer(16))).canonicalForm():r.readString(r.readUInt8());let n=r.readUInt16BE();return{frameNumber:i,remoteHost:{host:t,port:n},data:r.readBuffer()}}setState(e){this.state!==a.SocksClientState.Error&&(this.state=e)}connect(e){this.onDataReceived=e=>this.onDataReceivedHandler(e),this.onClose=()=>this.onCloseHandler(),this.onError=e=>this.onErrorHandler(e),this.onConnect=()=>this.onConnectHandler();let t=setTimeout(()=>this.onEstablishedTimeout(),this.options.timeout||a.DEFAULT_TIMEOUT);t.unref&&"function"==typeof t.unref&&t.unref(),e?this.socket=e:this.socket=new n.Socket,this.socket.once("close",this.onClose),this.socket.once("error",this.onError),this.socket.once("connect",this.onConnect),this.socket.on("data",this.onDataReceived),this.setState(a.SocksClientState.Connecting),this.receiveBuffer=new h.ReceiveBuffer,e?this.socket.emit("connect"):(this.socket.connect(this.getSocketOptions()),void 0!==this.options.set_tcp_nodelay&&null!==this.options.set_tcp_nodelay&&this.socket.setNoDelay(!!this.options.set_tcp_nodelay)),this.prependOnceListener("established",e=>{setImmediate(()=>{if(this.receiveBuffer.length>0){let t=this.receiveBuffer.get(this.receiveBuffer.length);e.socket.emit("data",t)}e.socket.resume()})})}getSocketOptions(){return Object.assign(Object.assign({},this.options.socket_options),{host:this.options.proxy.host||this.options.proxy.ipaddress,port:this.options.proxy.port})}onEstablishedTimeout(){this.state!==a.SocksClientState.Established&&this.state!==a.SocksClientState.BoundWaitingForConnection&&this.closeSocket(a.ERRORS.ProxyConnectionTimedOut)}onConnectHandler(){this.setState(a.SocksClientState.Connected),4===this.options.proxy.type?this.sendSocks4InitialHandshake():this.sendSocks5InitialHandshake(),this.setState(a.SocksClientState.SentInitialHandshake)}onDataReceivedHandler(e){this.receiveBuffer.append(e),this.processData()}processData(){for(;this.state!==a.SocksClientState.Established&&this.state!==a.SocksClientState.Error&&this.receiveBuffer.length>=this.nextRequiredPacketBufferSize;)if(this.state===a.SocksClientState.SentInitialHandshake)4===this.options.proxy.type?this.handleSocks4FinalHandshakeResponse():this.handleInitialSocks5HandshakeResponse();else if(this.state===a.SocksClientState.SentAuthentication)this.handleInitialSocks5AuthenticationHandshakeResponse();else if(this.state===a.SocksClientState.SentFinalHandshake)this.handleSocks5FinalHandshakeResponse();else if(this.state===a.SocksClientState.BoundWaitingForConnection)4===this.options.proxy.type?this.handleSocks4IncomingConnectionResponse():this.handleSocks5IncomingConnectionResponse();else{this.closeSocket(a.ERRORS.InternalError);break}}onCloseHandler(){this.closeSocket(a.ERRORS.SocketClosed)}onErrorHandler(e){this.closeSocket(e.message)}removeInternalSocketHandlers(){this.socket.pause(),this.socket.removeListener("data",this.onDataReceived),this.socket.removeListener("close",this.onClose),this.socket.removeListener("error",this.onError),this.socket.removeListener("connect",this.onConnect)}closeSocket(e){this.state!==a.SocksClientState.Error&&(this.setState(a.SocksClientState.Error),this.socket.destroy(),this.removeInternalSocketHandlers(),this.emit("error",new u.SocksClientError(e,this.options)))}sendSocks4InitialHandshake(){let e=this.options.proxy.userId||"",t=new o.SmartBuffer;t.writeUInt8(4),t.writeUInt8(a.SocksCommand[this.options.command]),t.writeUInt16BE(this.options.destination.port),n.isIPv4(this.options.destination.host)?(t.writeBuffer((0,l.ipToBuffer)(this.options.destination.host)),t.writeStringNT(e)):(t.writeUInt8(0),t.writeUInt8(0),t.writeUInt8(0),t.writeUInt8(1),t.writeStringNT(e),t.writeStringNT(this.options.destination.host)),this.nextRequiredPacketBufferSize=a.SOCKS_INCOMING_PACKET_SIZES.Socks4Response,this.socket.write(t.toBuffer())}handleSocks4FinalHandshakeResponse(){let e=this.receiveBuffer.get(8);if(e[1]!==a.Socks4Response.Granted)this.closeSocket(`${a.ERRORS.Socks4ProxyRejectedConnection} - (${a.Socks4Response[e[1]]})`);else if(a.SocksCommand[this.options.command]===a.SocksCommand.bind){let t=o.SmartBuffer.fromBuffer(e);t.readOffset=2;let r={port:t.readUInt16BE(),host:(0,l.int32ToIpv4)(t.readUInt32BE())};"0.0.0.0"===r.host&&(r.host=this.options.proxy.ipaddress),this.setState(a.SocksClientState.BoundWaitingForConnection),this.emit("bound",{remoteHost:r,socket:this.socket})}else this.setState(a.SocksClientState.Established),this.removeInternalSocketHandlers(),this.emit("established",{socket:this.socket})}handleSocks4IncomingConnectionResponse(){let e=this.receiveBuffer.get(8);if(e[1]!==a.Socks4Response.Granted)this.closeSocket(`${a.ERRORS.Socks4ProxyRejectedIncomingBoundConnection} - (${a.Socks4Response[e[1]]})`);else{let t=o.SmartBuffer.fromBuffer(e);t.readOffset=2;let r={port:t.readUInt16BE(),host:(0,l.int32ToIpv4)(t.readUInt32BE())};this.setState(a.SocksClientState.Established),this.removeInternalSocketHandlers(),this.emit("established",{remoteHost:r,socket:this.socket})}}sendSocks5InitialHandshake(){let e=new o.SmartBuffer,t=[a.Socks5Auth.NoAuth];for(let r of((this.options.proxy.userId||this.options.proxy.password)&&t.push(a.Socks5Auth.UserPass),void 0!==this.options.proxy.custom_auth_method&&t.push(this.options.proxy.custom_auth_method),e.writeUInt8(5),e.writeUInt8(t.length),t))e.writeUInt8(r);this.nextRequiredPacketBufferSize=a.SOCKS_INCOMING_PACKET_SIZES.Socks5InitialHandshakeResponse,this.socket.write(e.toBuffer()),this.setState(a.SocksClientState.SentInitialHandshake)}handleInitialSocks5HandshakeResponse(){let e=this.receiveBuffer.get(2);5!==e[0]?this.closeSocket(a.ERRORS.InvalidSocks5IntiailHandshakeSocksVersion):e[1]===a.SOCKS5_NO_ACCEPTABLE_AUTH?this.closeSocket(a.ERRORS.InvalidSocks5InitialHandshakeNoAcceptedAuthType):e[1]===a.Socks5Auth.NoAuth?(this.socks5ChosenAuthType=a.Socks5Auth.NoAuth,this.sendSocks5CommandRequest()):e[1]===a.Socks5Auth.UserPass?(this.socks5ChosenAuthType=a.Socks5Auth.UserPass,this.sendSocks5UserPassAuthentication()):e[1]===this.options.proxy.custom_auth_method?(this.socks5ChosenAuthType=this.options.proxy.custom_auth_method,this.sendSocks5CustomAuthentication()):this.closeSocket(a.ERRORS.InvalidSocks5InitialHandshakeUnknownAuthType)}sendSocks5UserPassAuthentication(){let e=this.options.proxy.userId||"",t=this.options.proxy.password||"",r=new o.SmartBuffer;r.writeUInt8(1),r.writeUInt8(Buffer.byteLength(e)),r.writeString(e),r.writeUInt8(Buffer.byteLength(t)),r.writeString(t),this.nextRequiredPacketBufferSize=a.SOCKS_INCOMING_PACKET_SIZES.Socks5UserPassAuthenticationResponse,this.socket.write(r.toBuffer()),this.setState(a.SocksClientState.SentAuthentication)}sendSocks5CustomAuthentication(){return i(this,void 0,void 0,function*(){this.nextRequiredPacketBufferSize=this.options.proxy.custom_auth_response_size,this.socket.write((yield this.options.proxy.custom_auth_request_handler())),this.setState(a.SocksClientState.SentAuthentication)})}handleSocks5CustomAuthHandshakeResponse(e){return i(this,void 0,void 0,function*(){return yield this.options.proxy.custom_auth_response_handler(e)})}handleSocks5AuthenticationNoAuthHandshakeResponse(e){return i(this,void 0,void 0,function*(){return 0===e[1]})}handleSocks5AuthenticationUserPassHandshakeResponse(e){return i(this,void 0,void 0,function*(){return 0===e[1]})}handleInitialSocks5AuthenticationHandshakeResponse(){return i(this,void 0,void 0,function*(){this.setState(a.SocksClientState.ReceivedAuthenticationResponse);let e=!1;this.socks5ChosenAuthType===a.Socks5Auth.NoAuth?e=yield this.handleSocks5AuthenticationNoAuthHandshakeResponse(this.receiveBuffer.get(2)):this.socks5ChosenAuthType===a.Socks5Auth.UserPass?e=yield this.handleSocks5AuthenticationUserPassHandshakeResponse(this.receiveBuffer.get(2)):this.socks5ChosenAuthType===this.options.proxy.custom_auth_method&&(e=yield this.handleSocks5CustomAuthHandshakeResponse(this.receiveBuffer.get(this.options.proxy.custom_auth_response_size))),e?this.sendSocks5CommandRequest():this.closeSocket(a.ERRORS.Socks5AuthenticationFailed)})}sendSocks5CommandRequest(){let e=new o.SmartBuffer;e.writeUInt8(5),e.writeUInt8(a.SocksCommand[this.options.command]),e.writeUInt8(0),n.isIPv4(this.options.destination.host)?(e.writeUInt8(a.Socks5HostType.IPv4),e.writeBuffer((0,l.ipToBuffer)(this.options.destination.host))):n.isIPv6(this.options.destination.host)?(e.writeUInt8(a.Socks5HostType.IPv6),e.writeBuffer((0,l.ipToBuffer)(this.options.destination.host))):(e.writeUInt8(a.Socks5HostType.Hostname),e.writeUInt8(this.options.destination.host.length),e.writeString(this.options.destination.host)),e.writeUInt16BE(this.options.destination.port),this.nextRequiredPacketBufferSize=a.SOCKS_INCOMING_PACKET_SIZES.Socks5ResponseHeader,this.socket.write(e.toBuffer()),this.setState(a.SocksClientState.SentFinalHandshake)}handleSocks5FinalHandshakeResponse(){let e=this.receiveBuffer.peek(5);if(5!==e[0]||e[1]!==a.Socks5Response.Granted)this.closeSocket(`${a.ERRORS.InvalidSocks5FinalHandshakeRejected} - ${a.Socks5Response[e[1]]}`);else{let t,r;let i=e[3];if(i===a.Socks5HostType.IPv4){let e=a.SOCKS_INCOMING_PACKET_SIZES.Socks5ResponseIPv4;if(this.receiveBuffer.length<e){this.nextRequiredPacketBufferSize=e;return}r=o.SmartBuffer.fromBuffer(this.receiveBuffer.get(e).slice(4)),"0.0.0.0"===(t={host:(0,l.int32ToIpv4)(r.readUInt32BE()),port:r.readUInt16BE()}).host&&(t.host=this.options.proxy.ipaddress)}else if(i===a.Socks5HostType.Hostname){let i=e[4],s=a.SOCKS_INCOMING_PACKET_SIZES.Socks5ResponseHostname(i);if(this.receiveBuffer.length<s){this.nextRequiredPacketBufferSize=s;return}t={host:(r=o.SmartBuffer.fromBuffer(this.receiveBuffer.get(s).slice(5))).readString(i),port:r.readUInt16BE()}}else if(i===a.Socks5HostType.IPv6){let e=a.SOCKS_INCOMING_PACKET_SIZES.Socks5ResponseIPv6;if(this.receiveBuffer.length<e){this.nextRequiredPacketBufferSize=e;return}r=o.SmartBuffer.fromBuffer(this.receiveBuffer.get(e).slice(4)),t={host:c.Address6.fromByteArray(Array.from(r.readBuffer(16))).canonicalForm(),port:r.readUInt16BE()}}this.setState(a.SocksClientState.ReceivedFinalResponse),a.SocksCommand[this.options.command]===a.SocksCommand.connect?(this.setState(a.SocksClientState.Established),this.removeInternalSocketHandlers(),this.emit("established",{remoteHost:t,socket:this.socket})):a.SocksCommand[this.options.command]===a.SocksCommand.bind?(this.setState(a.SocksClientState.BoundWaitingForConnection),this.nextRequiredPacketBufferSize=a.SOCKS_INCOMING_PACKET_SIZES.Socks5ResponseHeader,this.emit("bound",{remoteHost:t,socket:this.socket})):a.SocksCommand[this.options.command]===a.SocksCommand.associate&&(this.setState(a.SocksClientState.Established),this.removeInternalSocketHandlers(),this.emit("established",{remoteHost:t,socket:this.socket}))}}handleSocks5IncomingConnectionResponse(){let e=this.receiveBuffer.peek(5);if(5!==e[0]||e[1]!==a.Socks5Response.Granted)this.closeSocket(`${a.ERRORS.Socks5ProxyRejectedIncomingBoundConnection} - ${a.Socks5Response[e[1]]}`);else{let t,r;let i=e[3];if(i===a.Socks5HostType.IPv4){let e=a.SOCKS_INCOMING_PACKET_SIZES.Socks5ResponseIPv4;if(this.receiveBuffer.length<e){this.nextRequiredPacketBufferSize=e;return}r=o.SmartBuffer.fromBuffer(this.receiveBuffer.get(e).slice(4)),"0.0.0.0"===(t={host:(0,l.int32ToIpv4)(r.readUInt32BE()),port:r.readUInt16BE()}).host&&(t.host=this.options.proxy.ipaddress)}else if(i===a.Socks5HostType.Hostname){let i=e[4],s=a.SOCKS_INCOMING_PACKET_SIZES.Socks5ResponseHostname(i);if(this.receiveBuffer.length<s){this.nextRequiredPacketBufferSize=s;return}t={host:(r=o.SmartBuffer.fromBuffer(this.receiveBuffer.get(s).slice(5))).readString(i),port:r.readUInt16BE()}}else if(i===a.Socks5HostType.IPv6){let e=a.SOCKS_INCOMING_PACKET_SIZES.Socks5ResponseIPv6;if(this.receiveBuffer.length<e){this.nextRequiredPacketBufferSize=e;return}r=o.SmartBuffer.fromBuffer(this.receiveBuffer.get(e).slice(4)),t={host:c.Address6.fromByteArray(Array.from(r.readBuffer(16))).canonicalForm(),port:r.readUInt16BE()}}this.setState(a.SocksClientState.Established),this.removeInternalSocketHandlers(),this.emit("established",{remoteHost:t,socket:this.socket})}}get socksClientOptions(){return Object.assign({},this.options)}};t.SocksClient=SocksClient},19570:(e,t)=>{"use strict";var r,i,s,n,o,a;Object.defineProperty(t,"__esModule",{value:!0}),t.SOCKS5_NO_ACCEPTABLE_AUTH=t.SOCKS5_CUSTOM_AUTH_END=t.SOCKS5_CUSTOM_AUTH_START=t.SOCKS_INCOMING_PACKET_SIZES=t.SocksClientState=t.Socks5Response=t.Socks5HostType=t.Socks5Auth=t.Socks4Response=t.SocksCommand=t.ERRORS=t.DEFAULT_TIMEOUT=void 0,t.DEFAULT_TIMEOUT=3e4,t.ERRORS={InvalidSocksCommand:"An invalid SOCKS command was provided. Valid options are connect, bind, and associate.",InvalidSocksCommandForOperation:"An invalid SOCKS command was provided. Only a subset of commands are supported for this operation.",InvalidSocksCommandChain:"An invalid SOCKS command was provided. Chaining currently only supports the connect command.",InvalidSocksClientOptionsDestination:"An invalid destination host was provided.",InvalidSocksClientOptionsExistingSocket:"An invalid existing socket was provided. This should be an instance of stream.Duplex.",InvalidSocksClientOptionsProxy:"Invalid SOCKS proxy details were provided.",InvalidSocksClientOptionsTimeout:"An invalid timeout value was provided. Please enter a value above 0 (in ms).",InvalidSocksClientOptionsProxiesLength:"At least two socks proxies must be provided for chaining.",InvalidSocksClientOptionsCustomAuthRange:"Custom auth must be a value between 0x80 and 0xFE.",InvalidSocksClientOptionsCustomAuthOptions:"When a custom_auth_method is provided, custom_auth_request_handler, custom_auth_response_size, and custom_auth_response_handler must also be provided and valid.",NegotiationError:"Negotiation error",SocketClosed:"Socket closed",ProxyConnectionTimedOut:"Proxy connection timed out",InternalError:"SocksClient internal error (this should not happen)",InvalidSocks4HandshakeResponse:"Received invalid Socks4 handshake response",Socks4ProxyRejectedConnection:"Socks4 Proxy rejected connection",InvalidSocks4IncomingConnectionResponse:"Socks4 invalid incoming connection response",Socks4ProxyRejectedIncomingBoundConnection:"Socks4 Proxy rejected incoming bound connection",InvalidSocks5InitialHandshakeResponse:"Received invalid Socks5 initial handshake response",InvalidSocks5IntiailHandshakeSocksVersion:"Received invalid Socks5 initial handshake (invalid socks version)",InvalidSocks5InitialHandshakeNoAcceptedAuthType:"Received invalid Socks5 initial handshake (no accepted authentication type)",InvalidSocks5InitialHandshakeUnknownAuthType:"Received invalid Socks5 initial handshake (unknown authentication type)",Socks5AuthenticationFailed:"Socks5 Authentication failed",InvalidSocks5FinalHandshake:"Received invalid Socks5 final handshake response",InvalidSocks5FinalHandshakeRejected:"Socks5 proxy rejected connection",InvalidSocks5IncomingConnectionResponse:"Received invalid Socks5 incoming connection response",Socks5ProxyRejectedIncomingBoundConnection:"Socks5 Proxy rejected incoming bound connection"},t.SOCKS_INCOMING_PACKET_SIZES={Socks5InitialHandshakeResponse:2,Socks5UserPassAuthenticationResponse:2,Socks5ResponseHeader:5,Socks5ResponseIPv4:10,Socks5ResponseIPv6:22,Socks5ResponseHostname:e=>e+7,Socks4Response:8},function(e){e[e.connect=1]="connect",e[e.bind=2]="bind",e[e.associate=3]="associate"}(r||(t.SocksCommand=r={})),function(e){e[e.Granted=90]="Granted",e[e.Failed=91]="Failed",e[e.Rejected=92]="Rejected",e[e.RejectedIdent=93]="RejectedIdent"}(i||(t.Socks4Response=i={})),function(e){e[e.NoAuth=0]="NoAuth",e[e.GSSApi=1]="GSSApi",e[e.UserPass=2]="UserPass"}(s||(t.Socks5Auth=s={})),t.SOCKS5_CUSTOM_AUTH_START=128,t.SOCKS5_CUSTOM_AUTH_END=254,t.SOCKS5_NO_ACCEPTABLE_AUTH=255,function(e){e[e.Granted=0]="Granted",e[e.Failure=1]="Failure",e[e.NotAllowed=2]="NotAllowed",e[e.NetworkUnreachable=3]="NetworkUnreachable",e[e.HostUnreachable=4]="HostUnreachable",e[e.ConnectionRefused=5]="ConnectionRefused",e[e.TTLExpired=6]="TTLExpired",e[e.CommandNotSupported=7]="CommandNotSupported",e[e.AddressNotSupported=8]="AddressNotSupported"}(n||(t.Socks5Response=n={})),function(e){e[e.IPv4=1]="IPv4",e[e.Hostname=3]="Hostname",e[e.IPv6=4]="IPv6"}(o||(t.Socks5HostType=o={})),function(e){e[e.Created=0]="Created",e[e.Connecting=1]="Connecting",e[e.Connected=2]="Connected",e[e.SentInitialHandshake=3]="SentInitialHandshake",e[e.ReceivedInitialHandshakeResponse=4]="ReceivedInitialHandshakeResponse",e[e.SentAuthentication=5]="SentAuthentication",e[e.ReceivedAuthenticationResponse=6]="ReceivedAuthenticationResponse",e[e.SentFinalHandshake=7]="SentFinalHandshake",e[e.ReceivedFinalResponse=8]="ReceivedFinalResponse",e[e.BoundWaitingForConnection=9]="BoundWaitingForConnection",e[e.Established=10]="Established",e[e.Disconnected=11]="Disconnected",e[e.Error=99]="Error"}(a||(t.SocksClientState=a={}))},35921:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ipToBuffer=t.int32ToIpv4=t.ipv4ToInt32=t.validateSocksClientChainOptions=t.validateSocksClientOptions=void 0;let i=r(54782),s=r(19570),n=r(12781),o=r(39934),a=r(41808);function validateSocksClientOptions(e,t=["connect","bind","associate"]){if(!s.SocksCommand[e.command])throw new i.SocksClientError(s.ERRORS.InvalidSocksCommand,e);if(-1===t.indexOf(e.command))throw new i.SocksClientError(s.ERRORS.InvalidSocksCommandForOperation,e);if(!isValidSocksRemoteHost(e.destination))throw new i.SocksClientError(s.ERRORS.InvalidSocksClientOptionsDestination,e);if(!isValidSocksProxy(e.proxy))throw new i.SocksClientError(s.ERRORS.InvalidSocksClientOptionsProxy,e);if(validateCustomProxyAuth(e.proxy,e),e.timeout&&!isValidTimeoutValue(e.timeout))throw new i.SocksClientError(s.ERRORS.InvalidSocksClientOptionsTimeout,e);if(e.existing_socket&&!(e.existing_socket instanceof n.Duplex))throw new i.SocksClientError(s.ERRORS.InvalidSocksClientOptionsExistingSocket,e)}function validateSocksClientChainOptions(e){if("connect"!==e.command)throw new i.SocksClientError(s.ERRORS.InvalidSocksCommandChain,e);if(!isValidSocksRemoteHost(e.destination))throw new i.SocksClientError(s.ERRORS.InvalidSocksClientOptionsDestination,e);if(!(e.proxies&&Array.isArray(e.proxies)&&e.proxies.length>=2))throw new i.SocksClientError(s.ERRORS.InvalidSocksClientOptionsProxiesLength,e);if(e.proxies.forEach(t=>{if(!isValidSocksProxy(t))throw new i.SocksClientError(s.ERRORS.InvalidSocksClientOptionsProxy,e);validateCustomProxyAuth(t,e)}),e.timeout&&!isValidTimeoutValue(e.timeout))throw new i.SocksClientError(s.ERRORS.InvalidSocksClientOptionsTimeout,e)}function validateCustomProxyAuth(e,t){if(void 0!==e.custom_auth_method){if(e.custom_auth_method<s.SOCKS5_CUSTOM_AUTH_START||e.custom_auth_method>s.SOCKS5_CUSTOM_AUTH_END)throw new i.SocksClientError(s.ERRORS.InvalidSocksClientOptionsCustomAuthRange,t);if(void 0===e.custom_auth_request_handler||"function"!=typeof e.custom_auth_request_handler||void 0===e.custom_auth_response_size||void 0===e.custom_auth_response_handler||"function"!=typeof e.custom_auth_response_handler)throw new i.SocksClientError(s.ERRORS.InvalidSocksClientOptionsCustomAuthOptions,t)}}function isValidSocksRemoteHost(e){return e&&"string"==typeof e.host&&"number"==typeof e.port&&e.port>=0&&e.port<=65535}function isValidSocksProxy(e){return e&&("string"==typeof e.host||"string"==typeof e.ipaddress)&&"number"==typeof e.port&&e.port>=0&&e.port<=65535&&(4===e.type||5===e.type)}function isValidTimeoutValue(e){return"number"==typeof e&&e>0}function ipv4ToInt32(e){let t=new o.Address4(e);return t.toArray().reduce((e,t)=>(e<<8)+t,0)>>>0}function int32ToIpv4(e){return[e>>>24&255,e>>>16&255,e>>>8&255,255&e].join(".")}function ipToBuffer(e){if(a.isIPv4(e)){let t=new o.Address4(e);return Buffer.from(t.toArray())}if(a.isIPv6(e)){let t=new o.Address6(e);return Buffer.from(t.canonicalForm().split(":").map(e=>e.padStart(4,"0")).join(""),"hex")}throw Error("Invalid IP address format")}t.validateSocksClientOptions=validateSocksClientOptions,t.validateSocksClientChainOptions=validateSocksClientChainOptions,t.ipv4ToInt32=ipv4ToInt32,t.int32ToIpv4=int32ToIpv4,t.ipToBuffer=ipToBuffer},15041:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ReceiveBuffer=void 0;let ReceiveBuffer=class ReceiveBuffer{constructor(e=4096){this.buffer=Buffer.allocUnsafe(e),this.offset=0,this.originalSize=e}get length(){return this.offset}append(e){if(!Buffer.isBuffer(e))throw Error("Attempted to append a non-buffer instance to ReceiveBuffer.");if(this.offset+e.length>=this.buffer.length){let t=this.buffer;this.buffer=Buffer.allocUnsafe(Math.max(this.buffer.length+this.originalSize,this.buffer.length+e.length)),t.copy(this.buffer)}return e.copy(this.buffer,this.offset),this.offset+=e.length}peek(e){if(e>this.offset)throw Error("Attempted to read beyond the bounds of the managed internal data.");return this.buffer.slice(0,e)}get(e){if(e>this.offset)throw Error("Attempted to read beyond the bounds of the managed internal data.");let t=Buffer.allocUnsafe(e);return this.buffer.slice(0,e).copy(t),this.buffer.copyWithin(0,e,e+this.offset-e),this.offset-=e,t}};t.ReceiveBuffer=ReceiveBuffer},54782:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.shuffleArray=t.SocksClientError=void 0;let SocksClientError=class SocksClientError extends Error{constructor(e,t){super(e),this.options=t}};function shuffleArray(e){for(let t=e.length-1;t>0;t--){let r=Math.floor(Math.random()*(t+1));[e[t],e[r]]=[e[r],e[t]]}}t.SocksClientError=SocksClientError,t.shuffleArray=shuffleArray},34776:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var s=Object.getOwnPropertyDescriptor(t,r);(!s||("get"in s?!t.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,s)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||i(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),s(r(60498),t)},11069:(e,t,r)=>{var i;!function(){"use strict";var s={not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function sprintf(e){return sprintf_format(sprintf_parse(e),arguments)}function vsprintf(e,t){return sprintf.apply(null,[e].concat(t||[]))}function sprintf_format(e,t){var r,i,n,o,a,l,h,u,c,d=1,p=e.length,g="";for(i=0;i<p;i++)if("string"==typeof e[i])g+=e[i];else if("object"==typeof e[i]){if((o=e[i]).keys)for(n=0,r=t[d];n<o.keys.length;n++){if(void 0==r)throw Error(sprintf('[sprintf] Cannot access property "%s" of undefined value "%s"',o.keys[n],o.keys[n-1]));r=r[o.keys[n]]}else r=o.param_no?t[o.param_no]:t[d++];if(s.not_type.test(o.type)&&s.not_primitive.test(o.type)&&r instanceof Function&&(r=r()),s.numeric_arg.test(o.type)&&"number"!=typeof r&&isNaN(r))throw TypeError(sprintf("[sprintf] expecting number but found %T",r));switch(s.number.test(o.type)&&(u=r>=0),o.type){case"b":r=parseInt(r,10).toString(2);break;case"c":r=String.fromCharCode(parseInt(r,10));break;case"d":case"i":r=parseInt(r,10);break;case"j":r=JSON.stringify(r,null,o.width?parseInt(o.width):0);break;case"e":r=o.precision?parseFloat(r).toExponential(o.precision):parseFloat(r).toExponential();break;case"f":r=o.precision?parseFloat(r).toFixed(o.precision):parseFloat(r);break;case"g":r=o.precision?String(Number(r.toPrecision(o.precision))):parseFloat(r);break;case"o":r=(parseInt(r,10)>>>0).toString(8);break;case"s":r=String(r),r=o.precision?r.substring(0,o.precision):r;break;case"t":r=String(!!r),r=o.precision?r.substring(0,o.precision):r;break;case"T":r=Object.prototype.toString.call(r).slice(8,-1).toLowerCase(),r=o.precision?r.substring(0,o.precision):r;break;case"u":r=parseInt(r,10)>>>0;break;case"v":r=r.valueOf(),r=o.precision?r.substring(0,o.precision):r;break;case"x":r=(parseInt(r,10)>>>0).toString(16);break;case"X":r=(parseInt(r,10)>>>0).toString(16).toUpperCase()}s.json.test(o.type)?g+=r:(s.number.test(o.type)&&(!u||o.sign)?(c=u?"+":"-",r=r.toString().replace(s.sign,"")):c="",l=o.pad_char?"0"===o.pad_char?"0":o.pad_char.charAt(1):" ",h=o.width-(c+r).length,a=o.width&&h>0?l.repeat(h):"",g+=o.align?c+r+a:"0"===l?c+a+r:a+c+r)}return g}var n=Object.create(null);function sprintf_parse(e){if(n[e])return n[e];for(var t,r=e,i=[],o=0;r;){if(null!==(t=s.text.exec(r)))i.push(t[0]);else if(null!==(t=s.modulo.exec(r)))i.push("%");else if(null!==(t=s.placeholder.exec(r))){if(t[2]){o|=1;var a=[],l=t[2],h=[];if(null!==(h=s.key.exec(l)))for(a.push(h[1]);""!==(l=l.substring(h[0].length));)if(null!==(h=s.key_access.exec(l)))a.push(h[1]);else if(null!==(h=s.index_access.exec(l)))a.push(h[1]);else throw SyntaxError("[sprintf] failed to parse named argument key");else throw SyntaxError("[sprintf] failed to parse named argument key");t[2]=a}else o|=2;if(3===o)throw Error("[sprintf] mixing positional and named placeholders is not (yet) supported");i.push({placeholder:t[0],param_no:t[1],keys:t[2],sign:t[3],pad_char:t[4],align:t[5],width:t[6],precision:t[7],type:t[8]})}else throw SyntaxError("[sprintf] unexpected placeholder");r=r.substring(t[0].length)}return n[e]=i}t.sprintf=sprintf,t.vsprintf=vsprintf,"undefined"!=typeof window&&(window.sprintf=sprintf,window.vsprintf=vsprintf,void 0!==(i=(function(){return{sprintf:sprintf,vsprintf:vsprintf}}).call(t,r,t,e))&&(e.exports=i))}()},26987:(e,t,r)=>{"use strict";var i=r(88729).Buffer,s=i.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function _normalizeEncoding(e){var t;if(!e)return"utf8";for(;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}function normalizeEncoding(e){var t=_normalizeEncoding(e);if("string"!=typeof t&&(i.isEncoding===s||!s(e)))throw Error("Unknown encoding: "+e);return t||e}function StringDecoder(e){var t;switch(this.encoding=normalizeEncoding(e),this.encoding){case"utf16le":this.text=utf16Text,this.end=utf16End,t=4;break;case"utf8":this.fillLast=utf8FillLast,t=4;break;case"base64":this.text=base64Text,this.end=base64End,t=3;break;default:this.write=simpleWrite,this.end=simpleEnd;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=i.allocUnsafe(t)}function utf8CheckByte(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function utf8CheckIncomplete(e,t,r){var i=t.length-1;if(i<r)return 0;var s=utf8CheckByte(t[i]);return s>=0?(s>0&&(e.lastNeed=s-1),s):--i<r||-2===s?0:(s=utf8CheckByte(t[i]))>=0?(s>0&&(e.lastNeed=s-2),s):--i<r||-2===s?0:(s=utf8CheckByte(t[i]))>=0?(s>0&&(2===s?s=0:e.lastNeed=s-3),s):0}function utf8CheckExtraBytes(e,t,r){if((192&t[0])!=128)return e.lastNeed=0,"";if(e.lastNeed>1&&t.length>1){if((192&t[1])!=128)return e.lastNeed=1,"";if(e.lastNeed>2&&t.length>2&&(192&t[2])!=128)return e.lastNeed=2,""}}function utf8FillLast(e){var t=this.lastTotal-this.lastNeed,r=utf8CheckExtraBytes(this,e,t);return void 0!==r?r:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):void(e.copy(this.lastChar,t,0,e.length),this.lastNeed-=e.length)}function utf8Text(e,t){var r=utf8CheckIncomplete(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var i=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,i),e.toString("utf8",t,i)}function utf8End(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"":t}function utf16Text(e,t){if((e.length-t)%2==0){var r=e.toString("utf16le",t);if(r){var i=r.charCodeAt(r.length-1);if(i>=55296&&i<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function utf16End(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function base64Text(e,t){var r=(e.length-t)%3;return 0===r?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function base64End(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function simpleWrite(e){return e.toString(this.encoding)}function simpleEnd(e){return e&&e.length?this.write(e):""}t.StringDecoder=StringDecoder,StringDecoder.prototype.write=function(e){var t,r;if(0===e.length)return"";if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""},StringDecoder.prototype.end=utf8End,StringDecoder.prototype.text=utf8Text,StringDecoder.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},30310:function(e,t,r){var i;i=r(42435),t.load=function(e){var t=new Map([[0,function(){}]]),r=new Map([[0,function(){}]]),s=new Map,n=new Worker(e);return n.addEventListener("message",function(e){var i=e.data;if(void 0!==i.method&&"call"===i.method){var n=i.params,o=n.timerId,a=n.timerType;if("interval"===a){var l=t.get(o);if("number"==typeof l){var h=s.get(l);if(void 0===h||h.timerId!==o||h.timerType!==a)throw Error("The timer is in an undefined state.")}else if(void 0!==l)l();else throw Error("The timer is in an undefined state.")}else if("timeout"===a){var u=r.get(o);if("number"==typeof u){var c=s.get(u);if(void 0===c||c.timerId!==o||c.timerType!==a)throw Error("The timer is in an undefined state.")}else if(void 0!==u)u(),r.delete(o);else throw Error("The timer is in an undefined state.")}}else if(null===i.error&&"number"==typeof i.id){var d=i.id,p=s.get(d);if(void 0===p)throw Error("The timer is in an undefined state.");var g=p.timerId,b=p.timerType;s.delete(d),"interval"===b?t.delete(g):r.delete(g)}else throw Error(i.error.message)}),{clearInterval:function(e){var r=i.generateUniqueNumber(s);s.set(r,{timerId:e,timerType:"interval"}),t.set(e,r),n.postMessage({id:r,method:"clear",params:{timerId:e,timerType:"interval"}})},clearTimeout:function(e){var t=i.generateUniqueNumber(s);s.set(t,{timerId:e,timerType:"timeout"}),r.set(e,t),n.postMessage({id:t,method:"clear",params:{timerId:e,timerType:"timeout"}})},setInterval:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=i.generateUniqueNumber(t);return t.set(s,function(){e(),"function"==typeof t.get(s)&&n.postMessage({id:null,method:"set",params:{delay:r,now:performance.now(),timerId:s,timerType:"interval"}})}),n.postMessage({id:null,method:"set",params:{delay:r,now:performance.now(),timerId:s,timerType:"interval"}}),s},setTimeout:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=i.generateUniqueNumber(r);return r.set(s,e),n.postMessage({id:null,method:"set",params:{delay:t,now:performance.now(),timerId:s,timerType:"timeout"}}),s}}}},24533:function(e,t,r){var i,s,n,o,a;i=t,s=r(30310),a=(n=s.load,o=null,function(){if(null!==o)return o;var e=new Blob(['(()=>{var e={472:(e,t,r)=>{var o,i;void 0===(i="function"==typeof(o=function(){"use strict";var e=new Map,t=new Map,r=function(t){var r=e.get(t);if(void 0===r)throw new Error(\'There is no interval scheduled with the given id "\'.concat(t,\'".\'));clearTimeout(r),e.delete(t)},o=function(e){var r=t.get(e);if(void 0===r)throw new Error(\'There is no timeout scheduled with the given id "\'.concat(e,\'".\'));clearTimeout(r),t.delete(e)},i=function(e,t){var r,o=performance.now();return{expected:o+(r=e-Math.max(0,o-t)),remainingDelay:r}},n=function e(t,r,o,i){var n=performance.now();n>o?postMessage({id:null,method:"call",params:{timerId:r,timerType:i}}):t.set(r,setTimeout(e,o-n,t,r,o,i))},a=function(t,r,o){var a=i(t,o),s=a.expected,d=a.remainingDelay;e.set(r,setTimeout(n,d,e,r,s,"interval"))},s=function(e,r,o){var a=i(e,o),s=a.expected,d=a.remainingDelay;t.set(r,setTimeout(n,d,t,r,s,"timeout"))};addEventListener("message",(function(e){var t=e.data;try{if("clear"===t.method){var i=t.id,n=t.params,d=n.timerId,c=n.timerType;if("interval"===c)r(d),postMessage({error:null,id:i});else{if("timeout"!==c)throw new Error(\'The given type "\'.concat(c,\'" is not supported\'));o(d),postMessage({error:null,id:i})}}else{if("set"!==t.method)throw new Error(\'The given method "\'.concat(t.method,\'" is not supported\'));var u=t.params,l=u.delay,p=u.now,m=u.timerId,v=u.timerType;if("interval"===v)a(l,m,p);else{if("timeout"!==v)throw new Error(\'The given type "\'.concat(v,\'" is not supported\'));s(l,m,p)}}}catch(e){postMessage({error:{message:e.message},id:t.id,result:null})}}))})?o.call(t,r,t,e):o)||(e.exports=i)}},t={};function r(o){var i=t[o];if(void 0!==i)return i.exports;var n=t[o]={exports:{}};return e[o](n,n.exports,r),n.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";r(472)})()})();'],{type:"application/javascript; charset=utf-8"}),t=URL.createObjectURL(e);return o=n(t),setTimeout(function(){return URL.revokeObjectURL(t)}),o}),i.clearInterval=function(e){return a().clearInterval(e)},i.clearTimeout=function(e){return a().clearTimeout(e)},i.setInterval=function(){var e;return(e=a()).setInterval.apply(e,arguments)},i.setTimeout=function(){var e;return(e=a()).setTimeout.apply(e,arguments)}},26864:(e,t,r)=>{"use strict";let i=r(39106);i.createWebSocketStream=r(81114),i.Server=r(90096),i.Receiver=r(40623),i.Sender=r(76996),i.WebSocket=i,i.WebSocketServer=i.Server,e.exports=i},78049:(e,t,r)=>{"use strict";let{EMPTY_BUFFER:i}=r(85427),s=Buffer[Symbol.species];function concat(e,t){if(0===e.length)return i;if(1===e.length)return e[0];let r=Buffer.allocUnsafe(t),n=0;for(let t=0;t<e.length;t++){let i=e[t];r.set(i,n),n+=i.length}return n<t?new s(r.buffer,r.byteOffset,n):r}function _mask(e,t,r,i,s){for(let n=0;n<s;n++)r[i+n]=e[n]^t[3&n]}function _unmask(e,t){for(let r=0;r<e.length;r++)e[r]^=t[3&r]}function toArrayBuffer(e){return e.length===e.buffer.byteLength?e.buffer:e.buffer.slice(e.byteOffset,e.byteOffset+e.length)}function toBuffer(e){let t;return(toBuffer.readOnly=!0,Buffer.isBuffer(e))?e:(e instanceof ArrayBuffer?t=new s(e):ArrayBuffer.isView(e)?t=new s(e.buffer,e.byteOffset,e.byteLength):(t=Buffer.from(e),toBuffer.readOnly=!1),t)}if(e.exports={concat,mask:_mask,toArrayBuffer,toBuffer,unmask:_unmask},!process.env.WS_NO_BUFFER_UTIL)try{let t=r(58359);e.exports.mask=function(e,r,i,s,n){n<48?_mask(e,r,i,s,n):t.mask(e,r,i,s,n)},e.exports.unmask=function(e,r){e.length<32?_unmask(e,r):t.unmask(e,r)}}catch(e){}},85427:e=>{"use strict";let t=["nodebuffer","arraybuffer","fragments"],r="undefined"!=typeof Blob;r&&t.push("blob"),e.exports={BINARY_TYPES:t,EMPTY_BUFFER:Buffer.alloc(0),GUID:"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",hasBlob:r,kForOnEventAttribute:Symbol("kIsForOnEventAttribute"),kListener:Symbol("kListener"),kStatusCode:Symbol("status-code"),kWebSocket:Symbol("websocket"),NOOP:()=>{}}},45526:(e,t,r)=>{"use strict";let{kForOnEventAttribute:i,kListener:s}=r(85427),n=Symbol("kCode"),o=Symbol("kData"),a=Symbol("kError"),l=Symbol("kMessage"),h=Symbol("kReason"),u=Symbol("kTarget"),c=Symbol("kType"),d=Symbol("kWasClean");let Event=class Event{constructor(e){this[u]=null,this[c]=e}get target(){return this[u]}get type(){return this[c]}};Object.defineProperty(Event.prototype,"target",{enumerable:!0}),Object.defineProperty(Event.prototype,"type",{enumerable:!0});let CloseEvent=class CloseEvent extends Event{constructor(e,t={}){super(e),this[n]=void 0===t.code?0:t.code,this[h]=void 0===t.reason?"":t.reason,this[d]=void 0!==t.wasClean&&t.wasClean}get code(){return this[n]}get reason(){return this[h]}get wasClean(){return this[d]}};Object.defineProperty(CloseEvent.prototype,"code",{enumerable:!0}),Object.defineProperty(CloseEvent.prototype,"reason",{enumerable:!0}),Object.defineProperty(CloseEvent.prototype,"wasClean",{enumerable:!0});let ErrorEvent=class ErrorEvent extends Event{constructor(e,t={}){super(e),this[a]=void 0===t.error?null:t.error,this[l]=void 0===t.message?"":t.message}get error(){return this[a]}get message(){return this[l]}};Object.defineProperty(ErrorEvent.prototype,"error",{enumerable:!0}),Object.defineProperty(ErrorEvent.prototype,"message",{enumerable:!0});let MessageEvent=class MessageEvent extends Event{constructor(e,t={}){super(e),this[o]=void 0===t.data?null:t.data}get data(){return this[o]}};function callListener(e,t,r){"object"==typeof e&&e.handleEvent?e.handleEvent.call(e,r):e.call(t,r)}Object.defineProperty(MessageEvent.prototype,"data",{enumerable:!0}),e.exports={CloseEvent,ErrorEvent,Event,EventTarget:{addEventListener(e,t,r={}){let n;for(let n of this.listeners(e))if(!r[i]&&n[s]===t&&!n[i])return;if("message"===e)n=function(e,r){let i=new MessageEvent("message",{data:r?e:e.toString()});i[u]=this,callListener(t,this,i)};else if("close"===e)n=function(e,r){let i=new CloseEvent("close",{code:e,reason:r.toString(),wasClean:this._closeFrameReceived&&this._closeFrameSent});i[u]=this,callListener(t,this,i)};else if("error"===e)n=function(e){let r=new ErrorEvent("error",{error:e,message:e.message});r[u]=this,callListener(t,this,r)};else{if("open"!==e)return;n=function(){let e=new Event("open");e[u]=this,callListener(t,this,e)}}n[i]=!!r[i],n[s]=t,r.once?this.once(e,n):this.on(e,n)},removeEventListener(e,t){for(let r of this.listeners(e))if(r[s]===t&&!r[i]){this.removeListener(e,r);break}}},MessageEvent}},23841:(e,t,r)=>{"use strict";let{tokenChars:i}=r(85265);function push(e,t,r){void 0===e[t]?e[t]=[r]:e[t].push(r)}function parse(e){let t,r;let s=Object.create(null),n=Object.create(null),o=!1,a=!1,l=!1,h=-1,u=-1,c=-1,d=0;for(;d<e.length;d++)if(u=e.charCodeAt(d),void 0===t){if(-1===c&&1===i[u])-1===h&&(h=d);else if(0!==d&&(32===u||9===u))-1===c&&-1!==h&&(c=d);else if(59===u||44===u){if(-1===h)throw SyntaxError(`Unexpected character at index ${d}`);-1===c&&(c=d);let r=e.slice(h,c);44===u?(push(s,r,n),n=Object.create(null)):t=r,h=c=-1}else throw SyntaxError(`Unexpected character at index ${d}`)}else if(void 0===r){if(-1===c&&1===i[u])-1===h&&(h=d);else if(32===u||9===u)-1===c&&-1!==h&&(c=d);else if(59===u||44===u){if(-1===h)throw SyntaxError(`Unexpected character at index ${d}`);-1===c&&(c=d),push(n,e.slice(h,c),!0),44===u&&(push(s,t,n),n=Object.create(null),t=void 0),h=c=-1}else if(61===u&&-1!==h&&-1===c)r=e.slice(h,d),h=c=-1;else throw SyntaxError(`Unexpected character at index ${d}`)}else if(a){if(1!==i[u])throw SyntaxError(`Unexpected character at index ${d}`);-1===h?h=d:o||(o=!0),a=!1}else if(l){if(1===i[u])-1===h&&(h=d);else if(34===u&&-1!==h)l=!1,c=d;else if(92===u)a=!0;else throw SyntaxError(`Unexpected character at index ${d}`)}else if(34===u&&61===e.charCodeAt(d-1))l=!0;else if(-1===c&&1===i[u])-1===h&&(h=d);else if(-1!==h&&(32===u||9===u))-1===c&&(c=d);else if(59===u||44===u){if(-1===h)throw SyntaxError(`Unexpected character at index ${d}`);-1===c&&(c=d);let i=e.slice(h,c);o&&(i=i.replace(/\\/g,""),o=!1),push(n,r,i),44===u&&(push(s,t,n),n=Object.create(null),t=void 0),r=void 0,h=c=-1}else throw SyntaxError(`Unexpected character at index ${d}`);if(-1===h||l||32===u||9===u)throw SyntaxError("Unexpected end of input");-1===c&&(c=d);let p=e.slice(h,c);return void 0===t?push(s,p,n):(void 0===r?push(n,p,!0):o?push(n,r,p.replace(/\\/g,"")):push(n,r,p),push(s,t,n)),s}function format(e){return Object.keys(e).map(t=>{let r=e[t];return Array.isArray(r)||(r=[r]),r.map(e=>[t].concat(Object.keys(e).map(t=>{let r=e[t];return Array.isArray(r)||(r=[r]),r.map(e=>!0===e?t:`${t}=${e}`).join("; ")})).join("; ")).join(", ")}).join(", ")}e.exports={format,parse}},18530:e=>{"use strict";let t=Symbol("kDone"),r=Symbol("kRun");let Limiter=class Limiter{constructor(e){this[t]=()=>{this.pending--,this[r]()},this.concurrency=e||1/0,this.jobs=[],this.pending=0}add(e){this.jobs.push(e),this[r]()}[r](){if(this.pending!==this.concurrency&&this.jobs.length){let e=this.jobs.shift();this.pending++,e(this[t])}}};e.exports=Limiter},49794:(e,t,r)=>{"use strict";let i;let s=r(59796),n=r(78049),o=r(18530),{kStatusCode:a}=r(85427),l=Buffer[Symbol.species],h=Buffer.from([0,0,255,255]),u=Symbol("permessage-deflate"),c=Symbol("total-length"),d=Symbol("callback"),p=Symbol("buffers"),g=Symbol("error");let PerMessageDeflate=class PerMessageDeflate{constructor(e,t,r){if(this._maxPayload=0|r,this._options=e||{},this._threshold=void 0!==this._options.threshold?this._options.threshold:1024,this._isServer=!!t,this._deflate=null,this._inflate=null,this.params=null,!i){let e=void 0!==this._options.concurrencyLimit?this._options.concurrencyLimit:10;i=new o(e)}}static get extensionName(){return"permessage-deflate"}offer(){let e={};return this._options.serverNoContextTakeover&&(e.server_no_context_takeover=!0),this._options.clientNoContextTakeover&&(e.client_no_context_takeover=!0),this._options.serverMaxWindowBits&&(e.server_max_window_bits=this._options.serverMaxWindowBits),this._options.clientMaxWindowBits?e.client_max_window_bits=this._options.clientMaxWindowBits:null==this._options.clientMaxWindowBits&&(e.client_max_window_bits=!0),e}accept(e){return e=this.normalizeParams(e),this.params=this._isServer?this.acceptAsServer(e):this.acceptAsClient(e),this.params}cleanup(){if(this._inflate&&(this._inflate.close(),this._inflate=null),this._deflate){let e=this._deflate[d];this._deflate.close(),this._deflate=null,e&&e(Error("The deflate stream was closed while data was being processed"))}}acceptAsServer(e){let t=this._options,r=e.find(e=>(!1!==t.serverNoContextTakeover||!e.server_no_context_takeover)&&(!e.server_max_window_bits||!1!==t.serverMaxWindowBits&&("number"!=typeof t.serverMaxWindowBits||!(t.serverMaxWindowBits>e.server_max_window_bits)))&&("number"!=typeof t.clientMaxWindowBits||!!e.client_max_window_bits));if(!r)throw Error("None of the extension offers can be accepted");return t.serverNoContextTakeover&&(r.server_no_context_takeover=!0),t.clientNoContextTakeover&&(r.client_no_context_takeover=!0),"number"==typeof t.serverMaxWindowBits&&(r.server_max_window_bits=t.serverMaxWindowBits),"number"==typeof t.clientMaxWindowBits?r.client_max_window_bits=t.clientMaxWindowBits:(!0===r.client_max_window_bits||!1===t.clientMaxWindowBits)&&delete r.client_max_window_bits,r}acceptAsClient(e){let t=e[0];if(!1===this._options.clientNoContextTakeover&&t.client_no_context_takeover)throw Error('Unexpected parameter "client_no_context_takeover"');if(t.client_max_window_bits){if(!1===this._options.clientMaxWindowBits||"number"==typeof this._options.clientMaxWindowBits&&t.client_max_window_bits>this._options.clientMaxWindowBits)throw Error('Unexpected or invalid parameter "client_max_window_bits"')}else"number"==typeof this._options.clientMaxWindowBits&&(t.client_max_window_bits=this._options.clientMaxWindowBits);return t}normalizeParams(e){return e.forEach(e=>{Object.keys(e).forEach(t=>{let r=e[t];if(r.length>1)throw Error(`Parameter "${t}" must have only a single value`);if(r=r[0],"client_max_window_bits"===t){if(!0!==r){let e=+r;if(!Number.isInteger(e)||e<8||e>15)throw TypeError(`Invalid value for parameter "${t}": ${r}`);r=e}else if(!this._isServer)throw TypeError(`Invalid value for parameter "${t}": ${r}`)}else if("server_max_window_bits"===t){let e=+r;if(!Number.isInteger(e)||e<8||e>15)throw TypeError(`Invalid value for parameter "${t}": ${r}`);r=e}else if("client_no_context_takeover"===t||"server_no_context_takeover"===t){if(!0!==r)throw TypeError(`Invalid value for parameter "${t}": ${r}`)}else throw Error(`Unknown parameter "${t}"`);e[t]=r})}),e}decompress(e,t,r){i.add(i=>{this._decompress(e,t,(e,t)=>{i(),r(e,t)})})}compress(e,t,r){i.add(i=>{this._compress(e,t,(e,t)=>{i(),r(e,t)})})}_decompress(e,t,r){let i=this._isServer?"client":"server";if(!this._inflate){let e=`${i}_max_window_bits`,t="number"!=typeof this.params[e]?s.Z_DEFAULT_WINDOWBITS:this.params[e];this._inflate=s.createInflateRaw({...this._options.zlibInflateOptions,windowBits:t}),this._inflate[u]=this,this._inflate[c]=0,this._inflate[p]=[],this._inflate.on("error",inflateOnError),this._inflate.on("data",inflateOnData)}this._inflate[d]=r,this._inflate.write(e),t&&this._inflate.write(h),this._inflate.flush(()=>{let e=this._inflate[g];if(e){this._inflate.close(),this._inflate=null,r(e);return}let s=n.concat(this._inflate[p],this._inflate[c]);this._inflate._readableState.endEmitted?(this._inflate.close(),this._inflate=null):(this._inflate[c]=0,this._inflate[p]=[],t&&this.params[`${i}_no_context_takeover`]&&this._inflate.reset()),r(null,s)})}_compress(e,t,r){let i=this._isServer?"server":"client";if(!this._deflate){let e=`${i}_max_window_bits`,t="number"!=typeof this.params[e]?s.Z_DEFAULT_WINDOWBITS:this.params[e];this._deflate=s.createDeflateRaw({...this._options.zlibDeflateOptions,windowBits:t}),this._deflate[c]=0,this._deflate[p]=[],this._deflate.on("data",deflateOnData)}this._deflate[d]=r,this._deflate.write(e),this._deflate.flush(s.Z_SYNC_FLUSH,()=>{if(!this._deflate)return;let e=n.concat(this._deflate[p],this._deflate[c]);t&&(e=new l(e.buffer,e.byteOffset,e.length-4)),this._deflate[d]=null,this._deflate[c]=0,this._deflate[p]=[],t&&this.params[`${i}_no_context_takeover`]&&this._deflate.reset(),r(null,e)})}};function deflateOnData(e){this[p].push(e),this[c]+=e.length}function inflateOnData(e){if(this[c]+=e.length,this[u]._maxPayload<1||this[c]<=this[u]._maxPayload){this[p].push(e);return}this[g]=RangeError("Max payload size exceeded"),this[g].code="WS_ERR_UNSUPPORTED_MESSAGE_LENGTH",this[g][a]=1009,this.removeListener("data",inflateOnData),this.reset()}function inflateOnError(e){if(this[u]._inflate=null,this[g]){this[d](this[g]);return}e[a]=1007,this[d](e)}e.exports=PerMessageDeflate},40623:(e,t,r)=>{"use strict";let{Writable:i}=r(12781),s=r(49794),{BINARY_TYPES:n,EMPTY_BUFFER:o,kStatusCode:a,kWebSocket:l}=r(85427),{concat:h,toArrayBuffer:u,unmask:c}=r(78049),{isValidStatusCode:d,isValidUTF8:p}=r(85265),g=Buffer[Symbol.species];let Receiver=class Receiver extends i{constructor(e={}){super(),this._allowSynchronousEvents=void 0===e.allowSynchronousEvents||e.allowSynchronousEvents,this._binaryType=e.binaryType||n[0],this._extensions=e.extensions||{},this._isServer=!!e.isServer,this._maxPayload=0|e.maxPayload,this._skipUTF8Validation=!!e.skipUTF8Validation,this[l]=void 0,this._bufferedBytes=0,this._buffers=[],this._compressed=!1,this._payloadLength=0,this._mask=void 0,this._fragmented=0,this._masked=!1,this._fin=!1,this._opcode=0,this._totalPayloadLength=0,this._messageLength=0,this._fragments=[],this._errored=!1,this._loop=!1,this._state=0}_write(e,t,r){if(8===this._opcode&&0==this._state)return r();this._bufferedBytes+=e.length,this._buffers.push(e),this.startLoop(r)}consume(e){if(this._bufferedBytes-=e,e===this._buffers[0].length)return this._buffers.shift();if(e<this._buffers[0].length){let t=this._buffers[0];return this._buffers[0]=new g(t.buffer,t.byteOffset+e,t.length-e),new g(t.buffer,t.byteOffset,e)}let t=Buffer.allocUnsafe(e);do{let r=this._buffers[0],i=t.length-e;e>=r.length?t.set(this._buffers.shift(),i):(t.set(new Uint8Array(r.buffer,r.byteOffset,e),i),this._buffers[0]=new g(r.buffer,r.byteOffset+e,r.length-e)),e-=r.length}while(e>0);return t}startLoop(e){this._loop=!0;do switch(this._state){case 0:this.getInfo(e);break;case 1:this.getPayloadLength16(e);break;case 2:this.getPayloadLength64(e);break;case 3:this.getMask();break;case 4:this.getData(e);break;case 5:case 6:this._loop=!1;return}while(this._loop);this._errored||e()}getInfo(e){if(this._bufferedBytes<2){this._loop=!1;return}let t=this.consume(2);if((48&t[0])!=0){let t=this.createError(RangeError,"RSV2 and RSV3 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_2_3");e(t);return}let r=(64&t[0])==64;if(r&&!this._extensions[s.extensionName]){let t=this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");e(t);return}if(this._fin=(128&t[0])==128,this._opcode=15&t[0],this._payloadLength=127&t[1],0===this._opcode){if(r){let t=this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");e(t);return}if(!this._fragmented){let t=this.createError(RangeError,"invalid opcode 0",!0,1002,"WS_ERR_INVALID_OPCODE");e(t);return}this._opcode=this._fragmented}else if(1===this._opcode||2===this._opcode){if(this._fragmented){let t=this.createError(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");e(t);return}this._compressed=r}else if(this._opcode>7&&this._opcode<11){if(!this._fin){let t=this.createError(RangeError,"FIN must be set",!0,1002,"WS_ERR_EXPECTED_FIN");e(t);return}if(r){let t=this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");e(t);return}if(this._payloadLength>125||8===this._opcode&&1===this._payloadLength){let t=this.createError(RangeError,`invalid payload length ${this._payloadLength}`,!0,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH");e(t);return}}else{let t=this.createError(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");e(t);return}if(this._fin||this._fragmented||(this._fragmented=this._opcode),this._masked=(128&t[1])==128,this._isServer){if(!this._masked){let t=this.createError(RangeError,"MASK must be set",!0,1002,"WS_ERR_EXPECTED_MASK");e(t);return}}else if(this._masked){let t=this.createError(RangeError,"MASK must be clear",!0,1002,"WS_ERR_UNEXPECTED_MASK");e(t);return}126===this._payloadLength?this._state=1:127===this._payloadLength?this._state=2:this.haveLength(e)}getPayloadLength16(e){if(this._bufferedBytes<2){this._loop=!1;return}this._payloadLength=this.consume(2).readUInt16BE(0),this.haveLength(e)}getPayloadLength64(e){if(this._bufferedBytes<8){this._loop=!1;return}let t=this.consume(8),r=t.readUInt32BE(0);if(r>2097151){let t=this.createError(RangeError,"Unsupported WebSocket frame: payload length > 2^53 - 1",!1,1009,"WS_ERR_UNSUPPORTED_DATA_PAYLOAD_LENGTH");e(t);return}this._payloadLength=4294967296*r+t.readUInt32BE(4),this.haveLength(e)}haveLength(e){if(this._payloadLength&&this._opcode<8&&(this._totalPayloadLength+=this._payloadLength,this._totalPayloadLength>this._maxPayload&&this._maxPayload>0)){let t=this.createError(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH");e(t);return}this._masked?this._state=3:this._state=4}getMask(){if(this._bufferedBytes<4){this._loop=!1;return}this._mask=this.consume(4),this._state=4}getData(e){let t=o;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength){this._loop=!1;return}t=this.consume(this._payloadLength),this._masked&&(this._mask[0]|this._mask[1]|this._mask[2]|this._mask[3])!=0&&c(t,this._mask)}if(this._opcode>7){this.controlMessage(t,e);return}if(this._compressed){this._state=5,this.decompress(t,e);return}t.length&&(this._messageLength=this._totalPayloadLength,this._fragments.push(t)),this.dataMessage(e)}decompress(e,t){let r=this._extensions[s.extensionName];r.decompress(e,this._fin,(e,r)=>{if(e)return t(e);if(r.length){if(this._messageLength+=r.length,this._messageLength>this._maxPayload&&this._maxPayload>0){let e=this.createError(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH");t(e);return}this._fragments.push(r)}this.dataMessage(t),0===this._state&&this.startLoop(t)})}dataMessage(e){if(!this._fin){this._state=0;return}let t=this._messageLength,r=this._fragments;if(this._totalPayloadLength=0,this._messageLength=0,this._fragmented=0,this._fragments=[],2===this._opcode){let i;i="nodebuffer"===this._binaryType?h(r,t):"arraybuffer"===this._binaryType?u(h(r,t)):"blob"===this._binaryType?new Blob(r):r,this._allowSynchronousEvents?(this.emit("message",i,!0),this._state=0):(this._state=6,setImmediate(()=>{this.emit("message",i,!0),this._state=0,this.startLoop(e)}))}else{let i=h(r,t);if(!this._skipUTF8Validation&&!p(i)){let t=this.createError(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");e(t);return}5===this._state||this._allowSynchronousEvents?(this.emit("message",i,!1),this._state=0):(this._state=6,setImmediate(()=>{this.emit("message",i,!1),this._state=0,this.startLoop(e)}))}}controlMessage(e,t){if(8===this._opcode){if(0===e.length)this._loop=!1,this.emit("conclude",1005,o),this.end();else{let r=e.readUInt16BE(0);if(!d(r)){let e=this.createError(RangeError,`invalid status code ${r}`,!0,1002,"WS_ERR_INVALID_CLOSE_CODE");t(e);return}let i=new g(e.buffer,e.byteOffset+2,e.length-2);if(!this._skipUTF8Validation&&!p(i)){let e=this.createError(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");t(e);return}this._loop=!1,this.emit("conclude",r,i),this.end()}this._state=0;return}this._allowSynchronousEvents?(this.emit(9===this._opcode?"ping":"pong",e),this._state=0):(this._state=6,setImmediate(()=>{this.emit(9===this._opcode?"ping":"pong",e),this._state=0,this.startLoop(t)}))}createError(e,t,r,i,s){this._loop=!1,this._errored=!0;let n=new e(r?`Invalid WebSocket frame: ${t}`:t);return Error.captureStackTrace(n,this.createError),n.code=s,n[a]=i,n}};e.exports=Receiver},76996:(e,t,r)=>{"use strict";let i;let{Duplex:s}=r(12781),{randomFillSync:n}=r(6113),o=r(49794),{EMPTY_BUFFER:a,kWebSocket:l,NOOP:h}=r(85427),{isBlob:u,isValidStatusCode:c}=r(85265),{mask:d,toBuffer:p}=r(78049),g=Symbol("kByteLength"),b=Buffer.alloc(4),m=8192;let Sender=class Sender{constructor(e,t,r){this._extensions=t||{},r&&(this._generateMask=r,this._maskBuffer=Buffer.alloc(4)),this._socket=e,this._firstFragment=!0,this._compress=!1,this._bufferedBytes=0,this._queue=[],this._state=0,this.onerror=h,this[l]=void 0}static frame(e,t){let r,s;let o=!1,a=2,l=!1;t.mask&&(r=t.maskBuffer||b,t.generateMask?t.generateMask(r):(8192===m&&(void 0===i&&(i=Buffer.alloc(8192)),n(i,0,8192),m=0),r[0]=i[m++],r[1]=i[m++],r[2]=i[m++],r[3]=i[m++]),l=(r[0]|r[1]|r[2]|r[3])==0,a=6),"string"==typeof e?s=(!t.mask||l)&&void 0!==t[g]?t[g]:(e=Buffer.from(e)).length:(s=e.length,o=t.mask&&t.readOnly&&!l);let h=s;s>=65536?(a+=8,h=127):s>125&&(a+=2,h=126);let u=Buffer.allocUnsafe(o?s+a:a);return(u[0]=t.fin?128|t.opcode:t.opcode,t.rsv1&&(u[0]|=64),u[1]=h,126===h?u.writeUInt16BE(s,2):127===h&&(u[2]=u[3]=0,u.writeUIntBE(s,4,6)),t.mask)?(u[1]|=128,u[a-4]=r[0],u[a-3]=r[1],u[a-2]=r[2],u[a-1]=r[3],l)?[u,e]:o?(d(e,r,u,a,s),[u]):(d(e,r,e,0,s),[u,e]):[u,e]}close(e,t,r,i){let s;if(void 0===e)s=a;else if("number"==typeof e&&c(e)){if(void 0!==t&&t.length){let r=Buffer.byteLength(t);if(r>123)throw RangeError("The message must not be greater than 123 bytes");(s=Buffer.allocUnsafe(2+r)).writeUInt16BE(e,0),"string"==typeof t?s.write(t,2):s.set(t,2)}else(s=Buffer.allocUnsafe(2)).writeUInt16BE(e,0)}else throw TypeError("First argument must be a valid error code number");let n={[g]:s.length,fin:!0,generateMask:this._generateMask,mask:r,maskBuffer:this._maskBuffer,opcode:8,readOnly:!1,rsv1:!1};0!==this._state?this.enqueue([this.dispatch,s,!1,n,i]):this.sendFrame(Sender.frame(s,n),i)}ping(e,t,r){let i,s;if("string"==typeof e?(i=Buffer.byteLength(e),s=!1):u(e)?(i=e.size,s=!1):(i=(e=p(e)).length,s=p.readOnly),i>125)throw RangeError("The data size must not be greater than 125 bytes");let n={[g]:i,fin:!0,generateMask:this._generateMask,mask:t,maskBuffer:this._maskBuffer,opcode:9,readOnly:s,rsv1:!1};u(e)?0!==this._state?this.enqueue([this.getBlobData,e,!1,n,r]):this.getBlobData(e,!1,n,r):0!==this._state?this.enqueue([this.dispatch,e,!1,n,r]):this.sendFrame(Sender.frame(e,n),r)}pong(e,t,r){let i,s;if("string"==typeof e?(i=Buffer.byteLength(e),s=!1):u(e)?(i=e.size,s=!1):(i=(e=p(e)).length,s=p.readOnly),i>125)throw RangeError("The data size must not be greater than 125 bytes");let n={[g]:i,fin:!0,generateMask:this._generateMask,mask:t,maskBuffer:this._maskBuffer,opcode:10,readOnly:s,rsv1:!1};u(e)?0!==this._state?this.enqueue([this.getBlobData,e,!1,n,r]):this.getBlobData(e,!1,n,r):0!==this._state?this.enqueue([this.dispatch,e,!1,n,r]):this.sendFrame(Sender.frame(e,n),r)}send(e,t,r){let i,s;let n=this._extensions[o.extensionName],a=t.binary?2:1,l=t.compress;"string"==typeof e?(i=Buffer.byteLength(e),s=!1):u(e)?(i=e.size,s=!1):(i=(e=p(e)).length,s=p.readOnly),this._firstFragment?(this._firstFragment=!1,l&&n&&n.params[n._isServer?"server_no_context_takeover":"client_no_context_takeover"]&&(l=i>=n._threshold),this._compress=l):(l=!1,a=0),t.fin&&(this._firstFragment=!0);let h={[g]:i,fin:t.fin,generateMask:this._generateMask,mask:t.mask,maskBuffer:this._maskBuffer,opcode:a,readOnly:s,rsv1:l};u(e)?0!==this._state?this.enqueue([this.getBlobData,e,this._compress,h,r]):this.getBlobData(e,this._compress,h,r):0!==this._state?this.enqueue([this.dispatch,e,this._compress,h,r]):this.dispatch(e,this._compress,h,r)}getBlobData(e,t,r,i){this._bufferedBytes+=r[g],this._state=2,e.arrayBuffer().then(e=>{if(this._socket.destroyed){let e=Error("The socket was closed while the blob was being read");process.nextTick(callCallbacks,this,e,i);return}this._bufferedBytes-=r[g];let s=p(e);t?this.dispatch(s,t,r,i):(this._state=0,this.sendFrame(Sender.frame(s,r),i),this.dequeue())}).catch(e=>{process.nextTick(onError,this,e,i)})}dispatch(e,t,r,i){if(!t){this.sendFrame(Sender.frame(e,r),i);return}let s=this._extensions[o.extensionName];this._bufferedBytes+=r[g],this._state=1,s.compress(e,r.fin,(e,t)=>{if(this._socket.destroyed){let e=Error("The socket was closed while data was being compressed");callCallbacks(this,e,i);return}this._bufferedBytes-=r[g],this._state=0,r.readOnly=!1,this.sendFrame(Sender.frame(t,r),i),this.dequeue()})}dequeue(){for(;0===this._state&&this._queue.length;){let e=this._queue.shift();this._bufferedBytes-=e[3][g],Reflect.apply(e[0],this,e.slice(1))}}enqueue(e){this._bufferedBytes+=e[3][g],this._queue.push(e)}sendFrame(e,t){2===e.length?(this._socket.cork(),this._socket.write(e[0]),this._socket.write(e[1],t),this._socket.uncork()):this._socket.write(e[0],t)}};function callCallbacks(e,t,r){"function"==typeof r&&r(t);for(let r=0;r<e._queue.length;r++){let i=e._queue[r],s=i[i.length-1];"function"==typeof s&&s(t)}}function onError(e,t,r){callCallbacks(e,t,r),e.onerror(t)}e.exports=Sender},81114:(e,t,r)=>{"use strict";r(39106);let{Duplex:i}=r(12781);function emitClose(e){e.emit("close")}function duplexOnEnd(){!this.destroyed&&this._writableState.finished&&this.destroy()}function duplexOnError(e){this.removeListener("error",duplexOnError),this.destroy(),0===this.listenerCount("error")&&this.emit("error",e)}function createWebSocketStream(e,t){let r=!0,s=new i({...t,autoDestroy:!1,emitClose:!1,objectMode:!1,writableObjectMode:!1});return e.on("message",function(t,r){let i=!r&&s._readableState.objectMode?t.toString():t;s.push(i)||e.pause()}),e.once("error",function(e){s.destroyed||(r=!1,s.destroy(e))}),e.once("close",function(){s.destroyed||s.push(null)}),s._destroy=function(t,i){if(e.readyState===e.CLOSED){i(t),process.nextTick(emitClose,s);return}let n=!1;e.once("error",function(e){n=!0,i(e)}),e.once("close",function(){n||i(t),process.nextTick(emitClose,s)}),r&&e.terminate()},s._final=function(t){if(e.readyState===e.CONNECTING){e.once("open",function(){s._final(t)});return}null!==e._socket&&(e._socket._writableState.finished?(t(),s._readableState.endEmitted&&s.destroy()):(e._socket.once("finish",function(){t()}),e.close()))},s._read=function(){e.isPaused&&e.resume()},s._write=function(t,r,i){if(e.readyState===e.CONNECTING){e.once("open",function(){s._write(t,r,i)});return}e.send(t,i)},s.on("end",duplexOnEnd),s.on("error",duplexOnError),s}e.exports=createWebSocketStream},14446:(e,t,r)=>{"use strict";let{tokenChars:i}=r(85265);function parse(e){let t=new Set,r=-1,s=-1,n=0;for(;n<e.length;n++){let o=e.charCodeAt(n);if(-1===s&&1===i[o])-1===r&&(r=n);else if(0!==n&&(32===o||9===o))-1===s&&-1!==r&&(s=n);else if(44===o){if(-1===r)throw SyntaxError(`Unexpected character at index ${n}`);-1===s&&(s=n);let i=e.slice(r,s);if(t.has(i))throw SyntaxError(`The "${i}" subprotocol is duplicated`);t.add(i),r=s=-1}else throw SyntaxError(`Unexpected character at index ${n}`)}if(-1===r||-1!==s)throw SyntaxError("Unexpected end of input");let o=e.slice(r,n);if(t.has(o))throw SyntaxError(`The "${o}" subprotocol is duplicated`);return t.add(o),t}e.exports={parse}},85265:(e,t,r)=>{"use strict";let{isUtf8:i}=r(14300),{hasBlob:s}=r(85427);function isValidStatusCode(e){return e>=1e3&&e<=1014&&1004!==e&&1005!==e&&1006!==e||e>=3e3&&e<=4999}function _isValidUTF8(e){let t=e.length,r=0;for(;r<t;)if((128&e[r])==0)r++;else if((224&e[r])==192){if(r+1===t||(192&e[r+1])!=128||(254&e[r])==192)return!1;r+=2}else if((240&e[r])==224){if(r+2>=t||(192&e[r+1])!=128||(192&e[r+2])!=128||224===e[r]&&(224&e[r+1])==128||237===e[r]&&(224&e[r+1])==160)return!1;r+=3}else{if((248&e[r])!=240||r+3>=t||(192&e[r+1])!=128||(192&e[r+2])!=128||(192&e[r+3])!=128||240===e[r]&&(240&e[r+1])==128||244===e[r]&&e[r+1]>143||e[r]>244)return!1;r+=4}return!0}function isBlob(e){return s&&"object"==typeof e&&"function"==typeof e.arrayBuffer&&"string"==typeof e.type&&"function"==typeof e.stream&&("Blob"===e[Symbol.toStringTag]||"File"===e[Symbol.toStringTag])}if(e.exports={isBlob,isValidStatusCode,isValidUTF8:_isValidUTF8,tokenChars:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0]},i)e.exports.isValidUTF8=function(e){return e.length<24?_isValidUTF8(e):i(e)};else if(!process.env.WS_NO_UTF_8_VALIDATE)try{let t=r(93739);e.exports.isValidUTF8=function(e){return e.length<32?_isValidUTF8(e):t(e)}}catch(e){}},90096:(e,t,r)=>{"use strict";let i=r(82361),s=r(13685),{Duplex:n}=r(12781),{createHash:o}=r(6113),a=r(23841),l=r(49794),h=r(14446),u=r(39106),{GUID:c,kWebSocket:d}=r(85427),p=/^[+/0-9A-Za-z]{22}==$/;let WebSocketServer=class WebSocketServer extends i{constructor(e,t){if(super(),null==(e={allowSynchronousEvents:!0,autoPong:!0,maxPayload:104857600,skipUTF8Validation:!1,perMessageDeflate:!1,handleProtocols:null,clientTracking:!0,verifyClient:null,noServer:!1,backlog:null,server:null,host:null,path:null,port:null,WebSocket:u,...e}).port&&!e.server&&!e.noServer||null!=e.port&&(e.server||e.noServer)||e.server&&e.noServer)throw TypeError('One and only one of the "port", "server", or "noServer" options must be specified');if(null!=e.port?(this._server=s.createServer((e,t)=>{let r=s.STATUS_CODES[426];t.writeHead(426,{"Content-Length":r.length,"Content-Type":"text/plain"}),t.end(r)}),this._server.listen(e.port,e.host,e.backlog,t)):e.server&&(this._server=e.server),this._server){let e=this.emit.bind(this,"connection");this._removeListeners=addListeners(this._server,{listening:this.emit.bind(this,"listening"),error:this.emit.bind(this,"error"),upgrade:(t,r,i)=>{this.handleUpgrade(t,r,i,e)}})}!0===e.perMessageDeflate&&(e.perMessageDeflate={}),e.clientTracking&&(this.clients=new Set,this._shouldEmitClose=!1),this.options=e,this._state=0}address(){if(this.options.noServer)throw Error('The server is operating in "noServer" mode');return this._server?this._server.address():null}close(e){if(2===this._state){e&&this.once("close",()=>{e(Error("The server is not running"))}),process.nextTick(emitClose,this);return}if(e&&this.once("close",e),1!==this._state){if(this._state=1,this.options.noServer||this.options.server)this._server&&(this._removeListeners(),this._removeListeners=this._server=null),this.clients&&this.clients.size?this._shouldEmitClose=!0:process.nextTick(emitClose,this);else{let e=this._server;this._removeListeners(),this._removeListeners=this._server=null,e.close(()=>{emitClose(this)})}}}shouldHandle(e){if(this.options.path){let t=e.url.indexOf("?"),r=-1!==t?e.url.slice(0,t):e.url;if(r!==this.options.path)return!1}return!0}handleUpgrade(e,t,r,i){t.on("error",socketOnError);let s=e.headers["sec-websocket-key"],n=e.headers.upgrade,o=+e.headers["sec-websocket-version"];if("GET"!==e.method){abortHandshakeOrEmitwsClientError(this,e,t,405,"Invalid HTTP method");return}if(void 0===n||"websocket"!==n.toLowerCase()){abortHandshakeOrEmitwsClientError(this,e,t,400,"Invalid Upgrade header");return}if(void 0===s||!p.test(s)){abortHandshakeOrEmitwsClientError(this,e,t,400,"Missing or invalid Sec-WebSocket-Key header");return}if(8!==o&&13!==o){abortHandshakeOrEmitwsClientError(this,e,t,400,"Missing or invalid Sec-WebSocket-Version header");return}if(!this.shouldHandle(e)){abortHandshake(t,400);return}let u=e.headers["sec-websocket-protocol"],c=new Set;if(void 0!==u)try{c=h.parse(u)}catch(r){abortHandshakeOrEmitwsClientError(this,e,t,400,"Invalid Sec-WebSocket-Protocol header");return}let d=e.headers["sec-websocket-extensions"],g={};if(this.options.perMessageDeflate&&void 0!==d){let r=new l(this.options.perMessageDeflate,!0,this.options.maxPayload);try{let e=a.parse(d);e[l.extensionName]&&(r.accept(e[l.extensionName]),g[l.extensionName]=r)}catch(r){abortHandshakeOrEmitwsClientError(this,e,t,400,"Invalid or unacceptable Sec-WebSocket-Extensions header");return}}if(this.options.verifyClient){let n={origin:e.headers[`${8===o?"sec-websocket-origin":"origin"}`],secure:!!(e.socket.authorized||e.socket.encrypted),req:e};if(2===this.options.verifyClient.length){this.options.verifyClient(n,(n,o,a,l)=>{if(!n)return abortHandshake(t,o||401,a,l);this.completeUpgrade(g,s,c,e,t,r,i)});return}if(!this.options.verifyClient(n))return abortHandshake(t,401)}this.completeUpgrade(g,s,c,e,t,r,i)}completeUpgrade(e,t,r,i,s,n,h){if(!s.readable||!s.writable)return s.destroy();if(s[d])throw Error("server.handleUpgrade() was called more than once with the same socket, possibly due to a misconfiguration");if(this._state>0)return abortHandshake(s,503);let u=o("sha1").update(t+c).digest("base64"),p=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade",`Sec-WebSocket-Accept: ${u}`],g=new this.options.WebSocket(null,void 0,this.options);if(r.size){let e=this.options.handleProtocols?this.options.handleProtocols(r,i):r.values().next().value;e&&(p.push(`Sec-WebSocket-Protocol: ${e}`),g._protocol=e)}if(e[l.extensionName]){let t=e[l.extensionName].params,r=a.format({[l.extensionName]:[t]});p.push(`Sec-WebSocket-Extensions: ${r}`),g._extensions=e}this.emit("headers",p,i),s.write(p.concat("\r\n").join("\r\n")),s.removeListener("error",socketOnError),g.setSocket(s,n,{allowSynchronousEvents:this.options.allowSynchronousEvents,maxPayload:this.options.maxPayload,skipUTF8Validation:this.options.skipUTF8Validation}),this.clients&&(this.clients.add(g),g.on("close",()=>{this.clients.delete(g),this._shouldEmitClose&&!this.clients.size&&process.nextTick(emitClose,this)})),h(g,i)}};function addListeners(e,t){for(let r of Object.keys(t))e.on(r,t[r]);return function(){for(let r of Object.keys(t))e.removeListener(r,t[r])}}function emitClose(e){e._state=2,e.emit("close")}function socketOnError(){this.destroy()}function abortHandshake(e,t,r,i){r=r||s.STATUS_CODES[t],i={Connection:"close","Content-Type":"text/html","Content-Length":Buffer.byteLength(r),...i},e.once("finish",e.destroy),e.end(`HTTP/1.1 ${t} ${s.STATUS_CODES[t]}\r
`+Object.keys(i).map(e=>`${e}: ${i[e]}`).join("\r\n")+"\r\n\r\n"+r)}function abortHandshakeOrEmitwsClientError(e,t,r,i,s){if(e.listenerCount("wsClientError")){let i=Error(s);Error.captureStackTrace(i,abortHandshakeOrEmitwsClientError),e.emit("wsClientError",i,r,t)}else abortHandshake(r,i,s)}e.exports=WebSocketServer},39106:(e,t,r)=>{"use strict";let i=r(82361),s=r(95687),n=r(13685),o=r(41808),a=r(24404),{randomBytes:l,createHash:h}=r(6113),{Duplex:u,Readable:c}=r(12781),{URL:d}=r(57310),p=r(49794),g=r(40623),b=r(76996),{isBlob:m}=r(85265),{BINARY_TYPES:_,EMPTY_BUFFER:y,GUID:S,kForOnEventAttribute:v,kListener:w,kStatusCode:k,kWebSocket:I,NOOP:B}=r(85427),{EventTarget:{addEventListener:T,removeEventListener:A}}=r(45526),{format:O,parse:R}=r(23841),{toBuffer:x}=r(78049),C=Symbol("kAborted"),P=[8,13],M=["CONNECTING","OPEN","CLOSING","CLOSED"],N=/^[!#$%&'*+\-.0-9A-Z^_`|a-z~]+$/;let WebSocket=class WebSocket extends i{constructor(e,t,r){super(),this._binaryType=_[0],this._closeCode=1006,this._closeFrameReceived=!1,this._closeFrameSent=!1,this._closeMessage=y,this._closeTimer=null,this._errorEmitted=!1,this._extensions={},this._paused=!1,this._protocol="",this._readyState=WebSocket.CONNECTING,this._receiver=null,this._sender=null,this._socket=null,null!==e?(this._bufferedAmount=0,this._isServer=!1,this._redirects=0,void 0===t?t=[]:Array.isArray(t)||("object"==typeof t&&null!==t?(r=t,t=[]):t=[t]),initAsClient(this,e,t,r)):(this._autoPong=r.autoPong,this._isServer=!0)}get binaryType(){return this._binaryType}set binaryType(e){_.includes(e)&&(this._binaryType=e,this._receiver&&(this._receiver._binaryType=e))}get bufferedAmount(){return this._socket?this._socket._writableState.length+this._sender._bufferedBytes:this._bufferedAmount}get extensions(){return Object.keys(this._extensions).join()}get isPaused(){return this._paused}get onclose(){return null}get onerror(){return null}get onopen(){return null}get onmessage(){return null}get protocol(){return this._protocol}get readyState(){return this._readyState}get url(){return this._url}setSocket(e,t,r){let i=new g({allowSynchronousEvents:r.allowSynchronousEvents,binaryType:this.binaryType,extensions:this._extensions,isServer:this._isServer,maxPayload:r.maxPayload,skipUTF8Validation:r.skipUTF8Validation}),s=new b(e,this._extensions,r.generateMask);this._receiver=i,this._sender=s,this._socket=e,i[I]=this,s[I]=this,e[I]=this,i.on("conclude",receiverOnConclude),i.on("drain",receiverOnDrain),i.on("error",receiverOnError),i.on("message",receiverOnMessage),i.on("ping",receiverOnPing),i.on("pong",receiverOnPong),s.onerror=senderOnError,e.setTimeout&&e.setTimeout(0),e.setNoDelay&&e.setNoDelay(),t.length>0&&e.unshift(t),e.on("close",socketOnClose),e.on("data",socketOnData),e.on("end",socketOnEnd),e.on("error",socketOnError),this._readyState=WebSocket.OPEN,this.emit("open")}emitClose(){if(!this._socket){this._readyState=WebSocket.CLOSED,this.emit("close",this._closeCode,this._closeMessage);return}this._extensions[p.extensionName]&&this._extensions[p.extensionName].cleanup(),this._receiver.removeAllListeners(),this._readyState=WebSocket.CLOSED,this.emit("close",this._closeCode,this._closeMessage)}close(e,t){if(this.readyState!==WebSocket.CLOSED){if(this.readyState===WebSocket.CONNECTING){abortHandshake(this,this._req,"WebSocket was closed before the connection was established");return}if(this.readyState===WebSocket.CLOSING){this._closeFrameSent&&(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end();return}this._readyState=WebSocket.CLOSING,this._sender.close(e,t,!this._isServer,e=>{!e&&(this._closeFrameSent=!0,(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end())}),setCloseTimer(this)}}pause(){this.readyState!==WebSocket.CONNECTING&&this.readyState!==WebSocket.CLOSED&&(this._paused=!0,this._socket.pause())}ping(e,t,r){if(this.readyState===WebSocket.CONNECTING)throw Error("WebSocket is not open: readyState 0 (CONNECTING)");if("function"==typeof e?(r=e,e=t=void 0):"function"==typeof t&&(r=t,t=void 0),"number"==typeof e&&(e=e.toString()),this.readyState!==WebSocket.OPEN){sendAfterClose(this,e,r);return}void 0===t&&(t=!this._isServer),this._sender.ping(e||y,t,r)}pong(e,t,r){if(this.readyState===WebSocket.CONNECTING)throw Error("WebSocket is not open: readyState 0 (CONNECTING)");if("function"==typeof e?(r=e,e=t=void 0):"function"==typeof t&&(r=t,t=void 0),"number"==typeof e&&(e=e.toString()),this.readyState!==WebSocket.OPEN){sendAfterClose(this,e,r);return}void 0===t&&(t=!this._isServer),this._sender.pong(e||y,t,r)}resume(){this.readyState!==WebSocket.CONNECTING&&this.readyState!==WebSocket.CLOSED&&(this._paused=!1,this._receiver._writableState.needDrain||this._socket.resume())}send(e,t,r){if(this.readyState===WebSocket.CONNECTING)throw Error("WebSocket is not open: readyState 0 (CONNECTING)");if("function"==typeof t&&(r=t,t={}),"number"==typeof e&&(e=e.toString()),this.readyState!==WebSocket.OPEN){sendAfterClose(this,e,r);return}let i={binary:"string"!=typeof e,mask:!this._isServer,compress:!0,fin:!0,...t};this._extensions[p.extensionName]||(i.compress=!1),this._sender.send(e||y,i,r)}terminate(){if(this.readyState!==WebSocket.CLOSED){if(this.readyState===WebSocket.CONNECTING){abortHandshake(this,this._req,"WebSocket was closed before the connection was established");return}this._socket&&(this._readyState=WebSocket.CLOSING,this._socket.destroy())}}};function initAsClient(e,t,r,i){let o,a,u,c;let g={allowSynchronousEvents:!0,autoPong:!0,protocolVersion:P[1],maxPayload:104857600,skipUTF8Validation:!1,perMessageDeflate:!0,followRedirects:!1,maxRedirects:10,...i,socketPath:void 0,hostname:void 0,protocol:void 0,timeout:void 0,method:"GET",host:void 0,path:void 0,port:void 0};if(e._autoPong=g.autoPong,!P.includes(g.protocolVersion))throw RangeError(`Unsupported protocol version: ${g.protocolVersion} (supported versions: ${P.join(", ")})`);if(t instanceof d)o=t;else try{o=new d(t)}catch(e){throw SyntaxError(`Invalid URL: ${t}`)}"http:"===o.protocol?o.protocol="ws:":"https:"===o.protocol&&(o.protocol="wss:"),e._url=o.href;let b="wss:"===o.protocol,m="ws+unix:"===o.protocol;if("ws:"===o.protocol||b||m?m&&!o.pathname?a="The URL's pathname is empty":o.hash&&(a="The URL contains a fragment identifier"):a='The URL\'s protocol must be one of "ws:", "wss:", "http:", "https:", or "ws+unix:"',a){let t=SyntaxError(a);if(0===e._redirects)throw t;emitErrorAndClose(e,t);return}let _=b?443:80,y=l(16).toString("base64"),v=b?s.request:n.request,w=new Set;if(g.createConnection=g.createConnection||(b?tlsConnect:netConnect),g.defaultPort=g.defaultPort||_,g.port=o.port||_,g.host=o.hostname.startsWith("[")?o.hostname.slice(1,-1):o.hostname,g.headers={...g.headers,"Sec-WebSocket-Version":g.protocolVersion,"Sec-WebSocket-Key":y,Connection:"Upgrade",Upgrade:"websocket"},g.path=o.pathname+o.search,g.timeout=g.handshakeTimeout,g.perMessageDeflate&&(u=new p(!0!==g.perMessageDeflate?g.perMessageDeflate:{},!1,g.maxPayload),g.headers["Sec-WebSocket-Extensions"]=O({[p.extensionName]:u.offer()})),r.length){for(let e of r){if("string"!=typeof e||!N.test(e)||w.has(e))throw SyntaxError("An invalid or duplicated subprotocol was specified");w.add(e)}g.headers["Sec-WebSocket-Protocol"]=r.join(",")}if(g.origin&&(g.protocolVersion<13?g.headers["Sec-WebSocket-Origin"]=g.origin:g.headers.Origin=g.origin),(o.username||o.password)&&(g.auth=`${o.username}:${o.password}`),m){let e=g.path.split(":");g.socketPath=e[0],g.path=e[1]}if(g.followRedirects){if(0===e._redirects){e._originalIpc=m,e._originalSecure=b,e._originalHostOrSocketPath=m?g.socketPath:o.host;let t=i&&i.headers;if(i={...i,headers:{}},t)for(let[e,r]of Object.entries(t))i.headers[e.toLowerCase()]=r}else if(0===e.listenerCount("redirect")){let t=m?!!e._originalIpc&&g.socketPath===e._originalHostOrSocketPath:!e._originalIpc&&o.host===e._originalHostOrSocketPath;t&&(!e._originalSecure||b)||(delete g.headers.authorization,delete g.headers.cookie,t||delete g.headers.host,g.auth=void 0)}g.auth&&!i.headers.authorization&&(i.headers.authorization="Basic "+Buffer.from(g.auth).toString("base64")),c=e._req=v(g),e._redirects&&e.emit("redirect",e.url,c)}else c=e._req=v(g);g.timeout&&c.on("timeout",()=>{abortHandshake(e,c,"Opening handshake has timed out")}),c.on("error",t=>{null===c||c[C]||(c=e._req=null,emitErrorAndClose(e,t))}),c.on("response",s=>{let n=s.headers.location,o=s.statusCode;if(n&&g.followRedirects&&o>=300&&o<400){let s;if(++e._redirects>g.maxRedirects){abortHandshake(e,c,"Maximum redirects exceeded");return}c.abort();try{s=new d(n,t)}catch(r){let t=SyntaxError(`Invalid URL: ${n}`);emitErrorAndClose(e,t);return}initAsClient(e,s,r,i)}else e.emit("unexpected-response",c,s)||abortHandshake(e,c,`Unexpected server response: ${s.statusCode}`)}),c.on("upgrade",(t,r,i)=>{let s;if(e.emit("upgrade",t),e.readyState!==WebSocket.CONNECTING)return;c=e._req=null;let n=t.headers.upgrade;if(void 0===n||"websocket"!==n.toLowerCase()){abortHandshake(e,r,"Invalid Upgrade header");return}let o=h("sha1").update(y+S).digest("base64");if(t.headers["sec-websocket-accept"]!==o){abortHandshake(e,r,"Invalid Sec-WebSocket-Accept header");return}let a=t.headers["sec-websocket-protocol"];if(void 0!==a?w.size?w.has(a)||(s="Server sent an invalid subprotocol"):s="Server sent a subprotocol but none was requested":w.size&&(s="Server sent no subprotocol"),s){abortHandshake(e,r,s);return}a&&(e._protocol=a);let l=t.headers["sec-websocket-extensions"];if(void 0!==l){let t;if(!u){abortHandshake(e,r,"Server sent a Sec-WebSocket-Extensions header but no extension was requested");return}try{t=R(l)}catch(t){abortHandshake(e,r,"Invalid Sec-WebSocket-Extensions header");return}let i=Object.keys(t);if(1!==i.length||i[0]!==p.extensionName){abortHandshake(e,r,"Server indicated an extension that was not requested");return}try{u.accept(t[p.extensionName])}catch(t){abortHandshake(e,r,"Invalid Sec-WebSocket-Extensions header");return}e._extensions[p.extensionName]=u}e.setSocket(r,i,{allowSynchronousEvents:g.allowSynchronousEvents,generateMask:g.generateMask,maxPayload:g.maxPayload,skipUTF8Validation:g.skipUTF8Validation})}),g.finishRequest?g.finishRequest(c,e):c.end()}function emitErrorAndClose(e,t){e._readyState=WebSocket.CLOSING,e._errorEmitted=!0,e.emit("error",t),e.emitClose()}function netConnect(e){return e.path=e.socketPath,o.connect(e)}function tlsConnect(e){return e.path=void 0,e.servername||""===e.servername||(e.servername=o.isIP(e.host)?"":e.host),a.connect(e)}function abortHandshake(e,t,r){e._readyState=WebSocket.CLOSING;let i=Error(r);Error.captureStackTrace(i,abortHandshake),t.setHeader?(t[C]=!0,t.abort(),t.socket&&!t.socket.destroyed&&t.socket.destroy(),process.nextTick(emitErrorAndClose,e,i)):(t.destroy(i),t.once("error",e.emit.bind(e,"error")),t.once("close",e.emitClose.bind(e)))}function sendAfterClose(e,t,r){if(t){let r=m(t)?t.size:x(t).length;e._socket?e._sender._bufferedBytes+=r:e._bufferedAmount+=r}if(r){let t=Error(`WebSocket is not open: readyState ${e.readyState} (${M[e.readyState]})`);process.nextTick(r,t)}}function receiverOnConclude(e,t){let r=this[I];r._closeFrameReceived=!0,r._closeMessage=t,r._closeCode=e,void 0!==r._socket[I]&&(r._socket.removeListener("data",socketOnData),process.nextTick(resume,r._socket),1005===e?r.close():r.close(e,t))}function receiverOnDrain(){let e=this[I];e.isPaused||e._socket.resume()}function receiverOnError(e){let t=this[I];void 0!==t._socket[I]&&(t._socket.removeListener("data",socketOnData),process.nextTick(resume,t._socket),t.close(e[k])),t._errorEmitted||(t._errorEmitted=!0,t.emit("error",e))}function receiverOnFinish(){this[I].emitClose()}function receiverOnMessage(e,t){this[I].emit("message",e,t)}function receiverOnPing(e){let t=this[I];t._autoPong&&t.pong(e,!this._isServer,B),t.emit("ping",e)}function receiverOnPong(e){this[I].emit("pong",e)}function resume(e){e.resume()}function senderOnError(e){let t=this[I];t.readyState===WebSocket.CLOSED||(t.readyState===WebSocket.OPEN&&(t._readyState=WebSocket.CLOSING,setCloseTimer(t)),this._socket.end(),t._errorEmitted||(t._errorEmitted=!0,t.emit("error",e)))}function setCloseTimer(e){e._closeTimer=setTimeout(e._socket.destroy.bind(e._socket),3e4)}function socketOnClose(){let e;let t=this[I];this.removeListener("close",socketOnClose),this.removeListener("data",socketOnData),this.removeListener("end",socketOnEnd),t._readyState=WebSocket.CLOSING,this._readableState.endEmitted||t._closeFrameReceived||t._receiver._writableState.errorEmitted||null===(e=t._socket.read())||t._receiver.write(e),t._receiver.end(),this[I]=void 0,clearTimeout(t._closeTimer),t._receiver._writableState.finished||t._receiver._writableState.errorEmitted?t.emitClose():(t._receiver.on("error",receiverOnFinish),t._receiver.on("finish",receiverOnFinish))}function socketOnData(e){this[I]._receiver.write(e)||this.pause()}function socketOnEnd(){let e=this[I];e._readyState=WebSocket.CLOSING,e._receiver.end(),this.end()}function socketOnError(){let e=this[I];this.removeListener("error",socketOnError),this.on("error",B),e&&(e._readyState=WebSocket.CLOSING,this.destroy())}Object.defineProperty(WebSocket,"CONNECTING",{enumerable:!0,value:M.indexOf("CONNECTING")}),Object.defineProperty(WebSocket.prototype,"CONNECTING",{enumerable:!0,value:M.indexOf("CONNECTING")}),Object.defineProperty(WebSocket,"OPEN",{enumerable:!0,value:M.indexOf("OPEN")}),Object.defineProperty(WebSocket.prototype,"OPEN",{enumerable:!0,value:M.indexOf("OPEN")}),Object.defineProperty(WebSocket,"CLOSING",{enumerable:!0,value:M.indexOf("CLOSING")}),Object.defineProperty(WebSocket.prototype,"CLOSING",{enumerable:!0,value:M.indexOf("CLOSING")}),Object.defineProperty(WebSocket,"CLOSED",{enumerable:!0,value:M.indexOf("CLOSED")}),Object.defineProperty(WebSocket.prototype,"CLOSED",{enumerable:!0,value:M.indexOf("CLOSED")}),["binaryType","bufferedAmount","extensions","isPaused","protocol","readyState","url"].forEach(e=>{Object.defineProperty(WebSocket.prototype,e,{enumerable:!0})}),["open","error","close","message"].forEach(e=>{Object.defineProperty(WebSocket.prototype,`on${e}`,{enumerable:!0,get(){for(let t of this.listeners(e))if(t[v])return t[w];return null},set(t){for(let t of this.listeners(e))if(t[v]){this.removeListener(e,t);break}"function"==typeof t&&this.addEventListener(e,t,{[v]:!0})}})}),WebSocket.prototype.addEventListener=T,WebSocket.prototype.removeEventListener=A,e.exports=WebSocket},62514:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LRUCache=void 0;let r="object"==typeof performance&&performance&&"function"==typeof performance.now?performance:Date,i=new Set,s="object"==typeof process&&process?process:{},emitWarning=(e,t,r,i)=>{"function"==typeof s.emitWarning?s.emitWarning(e,t,r,i):console.error(`[${r}] ${t}: ${e}`)},n=globalThis.AbortController,o=globalThis.AbortSignal;if(void 0===n){o=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(e,t){this._onabort.push(t)}},n=class{constructor(){warnACPolyfill()}signal=new o;abort(e){if(!this.signal.aborted){for(let t of(this.signal.reason=e,this.signal.aborted=!0,this.signal._onabort))t(e);this.signal.onabort?.(e)}}};let e=s.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1",warnACPolyfill=()=>{e&&(e=!1,emitWarning("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",warnACPolyfill))}}let shouldWarn=e=>!i.has(e);Symbol("type");let isPosInt=e=>e&&e===Math.floor(e)&&e>0&&isFinite(e),getUintArray=e=>isPosInt(e)?e<=256?Uint8Array:e<=65536?Uint16Array:e<=4294967296?Uint32Array:e<=Number.MAX_SAFE_INTEGER?ZeroArray:null:null;let ZeroArray=class ZeroArray extends Array{constructor(e){super(e),this.fill(0)}};let Stack=class Stack{heap;length;static #e=!1;static create(e){let t=getUintArray(e);if(!t)return[];Stack.#e=!0;let r=new Stack(e,t);return Stack.#e=!1,r}constructor(e,t){if(!Stack.#e)throw TypeError("instantiate Stack using Stack.create(n)");this.heap=new t(e),this.length=0}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}};let LRUCache=class LRUCache{#t;#r;#i;#s;#n;#o;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#a;#l;#h;#u;#c;#d;#f;#p;#g;#b;#m;#_;#y;#S;#v;#w;#E;static unsafeExposeInternals(e){return{starts:e.#y,ttls:e.#S,sizes:e.#_,keyMap:e.#h,keyList:e.#u,valList:e.#c,next:e.#d,prev:e.#f,get head(){return e.#p},get tail(){return e.#g},free:e.#b,isBackgroundFetch:t=>e.#k(t),backgroundFetch:(t,r,i,s)=>e.#I(t,r,i,s),moveToTail:t=>e.#B(t),indexes:t=>e.#T(t),rindexes:t=>e.#A(t),isStale:t=>e.#O(t)}}get max(){return this.#t}get maxSize(){return this.#r}get calculatedSize(){return this.#l}get size(){return this.#a}get fetchMethod(){return this.#n}get memoMethod(){return this.#o}get dispose(){return this.#i}get disposeAfter(){return this.#s}constructor(e){let{max:t=0,ttl:r,ttlResolution:s=1,ttlAutopurge:n,updateAgeOnGet:o,updateAgeOnHas:a,allowStale:l,dispose:h,disposeAfter:u,noDisposeOnSet:c,noUpdateTTL:d,maxSize:p=0,maxEntrySize:g=0,sizeCalculation:b,fetchMethod:m,memoMethod:_,noDeleteOnFetchRejection:y,noDeleteOnStaleGet:S,allowStaleOnFetchRejection:v,allowStaleOnFetchAbort:w,ignoreFetchAbort:k}=e;if(0!==t&&!isPosInt(t))throw TypeError("max option must be a nonnegative integer");let I=t?getUintArray(t):Array;if(!I)throw Error("invalid max value: "+t);if(this.#t=t,this.#r=p,this.maxEntrySize=g||this.#r,this.sizeCalculation=b,this.sizeCalculation){if(!this.#r&&!this.maxEntrySize)throw TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if("function"!=typeof this.sizeCalculation)throw TypeError("sizeCalculation set to non-function")}if(void 0!==_&&"function"!=typeof _)throw TypeError("memoMethod must be a function if defined");if(this.#o=_,void 0!==m&&"function"!=typeof m)throw TypeError("fetchMethod must be a function if specified");if(this.#n=m,this.#w=!!m,this.#h=new Map,this.#u=Array(t).fill(void 0),this.#c=Array(t).fill(void 0),this.#d=new I(t),this.#f=new I(t),this.#p=0,this.#g=0,this.#b=Stack.create(t),this.#a=0,this.#l=0,"function"==typeof h&&(this.#i=h),"function"==typeof u?(this.#s=u,this.#m=[]):(this.#s=void 0,this.#m=void 0),this.#v=!!this.#i,this.#E=!!this.#s,this.noDisposeOnSet=!!c,this.noUpdateTTL=!!d,this.noDeleteOnFetchRejection=!!y,this.allowStaleOnFetchRejection=!!v,this.allowStaleOnFetchAbort=!!w,this.ignoreFetchAbort=!!k,0!==this.maxEntrySize){if(0!==this.#r&&!isPosInt(this.#r))throw TypeError("maxSize must be a positive integer if specified");if(!isPosInt(this.maxEntrySize))throw TypeError("maxEntrySize must be a positive integer if specified");this.#R()}if(this.allowStale=!!l,this.noDeleteOnStaleGet=!!S,this.updateAgeOnGet=!!o,this.updateAgeOnHas=!!a,this.ttlResolution=isPosInt(s)||0===s?s:1,this.ttlAutopurge=!!n,this.ttl=r||0,this.ttl){if(!isPosInt(this.ttl))throw TypeError("ttl must be a positive integer if specified");this.#x()}if(0===this.#t&&0===this.ttl&&0===this.#r)throw TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#t&&!this.#r){let e="LRU_CACHE_UNBOUNDED";shouldWarn(e)&&(i.add(e),emitWarning("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",e,LRUCache))}}getRemainingTTL(e){return this.#h.has(e)?1/0:0}#x(){let e=new ZeroArray(this.#t),t=new ZeroArray(this.#t);this.#S=e,this.#y=t,this.#C=(i,s,n=r.now())=>{if(t[i]=0!==s?n:0,e[i]=s,0!==s&&this.ttlAutopurge){let e=setTimeout(()=>{this.#O(i)&&this.#P(this.#u[i],"expire")},s+1);e.unref&&e.unref()}},this.#M=i=>{t[i]=0!==e[i]?r.now():0},this.#N=(r,s)=>{if(e[s]){let n=e[s],o=t[s];if(!n||!o)return;r.ttl=n,r.start=o,r.now=i||getNow();let a=r.now-o;r.remainingTTL=n-a}};let i=0,getNow=()=>{let e=r.now();if(this.ttlResolution>0){i=e;let t=setTimeout(()=>i=0,this.ttlResolution);t.unref&&t.unref()}return e};this.getRemainingTTL=r=>{let s=this.#h.get(r);if(void 0===s)return 0;let n=e[s],o=t[s];if(!n||!o)return 1/0;let a=(i||getNow())-o;return n-a},this.#O=r=>{let s=t[r],n=e[r];return!!n&&!!s&&(i||getNow())-s>n}}#M=()=>{};#N=()=>{};#C=()=>{};#O=()=>!1;#R(){let e=new ZeroArray(this.#t);this.#l=0,this.#_=e,this.#L=t=>{this.#l-=e[t],e[t]=0},this.#D=(e,t,r,i)=>{if(this.#k(t))return 0;if(!isPosInt(r)){if(i){if("function"!=typeof i)throw TypeError("sizeCalculation must be a function");if(!isPosInt(r=i(t,e)))throw TypeError("sizeCalculation return invalid (expect positive integer)")}else throw TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.")}return r},this.#U=(t,r,i)=>{if(e[t]=r,this.#r){let r=this.#r-e[t];for(;this.#l>r;)this.#j(!0)}this.#l+=e[t],i&&(i.entrySize=r,i.totalCalculatedSize=this.#l)}}#L=e=>{};#U=(e,t,r)=>{};#D=(e,t,r,i)=>{if(r||i)throw TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#T({allowStale:e=this.allowStale}={}){if(this.#a)for(let t=this.#g;this.#W(t)&&((e||!this.#O(t))&&(yield t),t!==this.#p);)t=this.#f[t]}*#A({allowStale:e=this.allowStale}={}){if(this.#a)for(let t=this.#p;this.#W(t)&&((e||!this.#O(t))&&(yield t),t!==this.#g);)t=this.#d[t]}#W(e){return void 0!==e&&this.#h.get(this.#u[e])===e}*entries(){for(let e of this.#T())void 0===this.#c[e]||void 0===this.#u[e]||this.#k(this.#c[e])||(yield[this.#u[e],this.#c[e]])}*rentries(){for(let e of this.#A())void 0===this.#c[e]||void 0===this.#u[e]||this.#k(this.#c[e])||(yield[this.#u[e],this.#c[e]])}*keys(){for(let e of this.#T()){let t=this.#u[e];void 0===t||this.#k(this.#c[e])||(yield t)}}*rkeys(){for(let e of this.#A()){let t=this.#u[e];void 0===t||this.#k(this.#c[e])||(yield t)}}*values(){for(let e of this.#T()){let t=this.#c[e];void 0===t||this.#k(this.#c[e])||(yield this.#c[e])}}*rvalues(){for(let e of this.#A()){let t=this.#c[e];void 0===t||this.#k(this.#c[e])||(yield this.#c[e])}}[Symbol.iterator](){return this.entries()}[Symbol.toStringTag]="LRUCache";find(e,t={}){for(let r of this.#T()){let i=this.#c[r],s=this.#k(i)?i.__staleWhileFetching:i;if(void 0!==s&&e(s,this.#u[r],this))return this.get(this.#u[r],t)}}forEach(e,t=this){for(let r of this.#T()){let i=this.#c[r],s=this.#k(i)?i.__staleWhileFetching:i;void 0!==s&&e.call(t,s,this.#u[r],this)}}rforEach(e,t=this){for(let r of this.#A()){let i=this.#c[r],s=this.#k(i)?i.__staleWhileFetching:i;void 0!==s&&e.call(t,s,this.#u[r],this)}}purgeStale(){let e=!1;for(let t of this.#A({allowStale:!0}))this.#O(t)&&(this.#P(this.#u[t],"expire"),e=!0);return e}info(e){let t=this.#h.get(e);if(void 0===t)return;let i=this.#c[t],s=this.#k(i)?i.__staleWhileFetching:i;if(void 0===s)return;let n={value:s};if(this.#S&&this.#y){let e=this.#S[t],i=this.#y[t];if(e&&i){let t=e-(r.now()-i);n.ttl=t,n.start=Date.now()}}return this.#_&&(n.size=this.#_[t]),n}dump(){let e=[];for(let t of this.#T({allowStale:!0})){let i=this.#u[t],s=this.#c[t],n=this.#k(s)?s.__staleWhileFetching:s;if(void 0===n||void 0===i)continue;let o={value:n};if(this.#S&&this.#y){o.ttl=this.#S[t];let e=r.now()-this.#y[t];o.start=Math.floor(Date.now()-e)}this.#_&&(o.size=this.#_[t]),e.unshift([i,o])}return e}load(e){for(let[t,i]of(this.clear(),e)){if(i.start){let e=Date.now()-i.start;i.start=r.now()-e}this.set(t,i.value,i)}}set(e,t,r={}){if(void 0===t)return this.delete(e),this;let{ttl:i=this.ttl,start:s,noDisposeOnSet:n=this.noDisposeOnSet,sizeCalculation:o=this.sizeCalculation,status:a}=r,{noUpdateTTL:l=this.noUpdateTTL}=r,h=this.#D(e,t,r.size||0,o);if(this.maxEntrySize&&h>this.maxEntrySize)return a&&(a.set="miss",a.maxEntrySizeExceeded=!0),this.#P(e,"set"),this;let u=0===this.#a?void 0:this.#h.get(e);if(void 0===u)u=0===this.#a?this.#g:0!==this.#b.length?this.#b.pop():this.#a===this.#t?this.#j(!1):this.#a,this.#u[u]=e,this.#c[u]=t,this.#h.set(e,u),this.#d[this.#g]=u,this.#f[u]=this.#g,this.#g=u,this.#a++,this.#U(u,h,a),a&&(a.set="add"),l=!1;else{this.#B(u);let r=this.#c[u];if(t!==r){if(this.#w&&this.#k(r)){r.__abortController.abort(Error("replaced"));let{__staleWhileFetching:t}=r;void 0!==t&&!n&&(this.#v&&this.#i?.(t,e,"set"),this.#E&&this.#m?.push([t,e,"set"]))}else!n&&(this.#v&&this.#i?.(r,e,"set"),this.#E&&this.#m?.push([r,e,"set"]));if(this.#L(u),this.#U(u,h,a),this.#c[u]=t,a){a.set="replace";let e=r&&this.#k(r)?r.__staleWhileFetching:r;void 0!==e&&(a.oldValue=e)}}else a&&(a.set="update")}if(0===i||this.#S||this.#x(),this.#S&&(l||this.#C(u,i,s),a&&this.#N(a,u)),!n&&this.#E&&this.#m){let e;let t=this.#m;for(;e=t?.shift();)this.#s?.(...e)}return this}pop(){try{for(;this.#a;){let e=this.#c[this.#p];if(this.#j(!0),this.#k(e)){if(e.__staleWhileFetching)return e.__staleWhileFetching}else if(void 0!==e)return e}}finally{if(this.#E&&this.#m){let e;let t=this.#m;for(;e=t?.shift();)this.#s?.(...e)}}}#j(e){let t=this.#p,r=this.#u[t],i=this.#c[t];return this.#w&&this.#k(i)?i.__abortController.abort(Error("evicted")):(this.#v||this.#E)&&(this.#v&&this.#i?.(i,r,"evict"),this.#E&&this.#m?.push([i,r,"evict"])),this.#L(t),e&&(this.#u[t]=void 0,this.#c[t]=void 0,this.#b.push(t)),1===this.#a?(this.#p=this.#g=0,this.#b.length=0):this.#p=this.#d[t],this.#h.delete(r),this.#a--,t}has(e,t={}){let{updateAgeOnHas:r=this.updateAgeOnHas,status:i}=t,s=this.#h.get(e);if(void 0!==s){let e=this.#c[s];if(this.#k(e)&&void 0===e.__staleWhileFetching)return!1;if(!this.#O(s))return r&&this.#M(s),i&&(i.has="hit",this.#N(i,s)),!0;i&&(i.has="stale",this.#N(i,s))}else i&&(i.has="miss");return!1}peek(e,t={}){let{allowStale:r=this.allowStale}=t,i=this.#h.get(e);if(void 0===i||!r&&this.#O(i))return;let s=this.#c[i];return this.#k(s)?s.__staleWhileFetching:s}#I(e,t,r,i){let s=void 0===t?void 0:this.#c[t];if(this.#k(s))return s;let o=new n,{signal:a}=r;a?.addEventListener("abort",()=>o.abort(a.reason),{signal:o.signal});let l={signal:o.signal,options:r,context:i},cb=(i,s=!1)=>{let{aborted:n}=o.signal,a=r.ignoreFetchAbort&&void 0!==i;return(r.status&&(n&&!s?(r.status.fetchAborted=!0,r.status.fetchError=o.signal.reason,a&&(r.status.fetchAbortIgnored=!0)):r.status.fetchResolved=!0),!n||a||s)?(this.#c[t]===h&&(void 0===i?h.__staleWhileFetching?this.#c[t]=h.__staleWhileFetching:this.#P(e,"fetch"):(r.status&&(r.status.fetchUpdated=!0),this.set(e,i,l.options))),i):fetchFail(o.signal.reason)},fetchFail=i=>{let{aborted:s}=o.signal,n=s&&r.allowStaleOnFetchAbort,a=n||r.allowStaleOnFetchRejection,l=a||r.noDeleteOnFetchRejection;if(this.#c[t]===h){let r=!l||void 0===h.__staleWhileFetching;r?this.#P(e,"fetch"):n||(this.#c[t]=h.__staleWhileFetching)}if(a)return r.status&&void 0!==h.__staleWhileFetching&&(r.status.returnedStale=!0),h.__staleWhileFetching;if(h.__returned===h)throw i};r.status&&(r.status.fetchDispatched=!0);let h=new Promise((t,i)=>{let n=this.#n?.(e,s,l);n&&n instanceof Promise&&n.then(e=>t(void 0===e?void 0:e),i),o.signal.addEventListener("abort",()=>{(!r.ignoreFetchAbort||r.allowStaleOnFetchAbort)&&(t(void 0),r.allowStaleOnFetchAbort&&(t=e=>cb(e,!0)))})}).then(cb,e=>(r.status&&(r.status.fetchRejected=!0,r.status.fetchError=e),fetchFail(e))),u=Object.assign(h,{__abortController:o,__staleWhileFetching:s,__returned:void 0});return void 0===t?(this.set(e,u,{...l.options,status:void 0}),t=this.#h.get(e)):this.#c[t]=u,u}#k(e){return!!this.#w&&!!e&&e instanceof Promise&&e.hasOwnProperty("__staleWhileFetching")&&e.__abortController instanceof n}async fetch(e,t={}){let{allowStale:r=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:s=this.noDeleteOnStaleGet,ttl:n=this.ttl,noDisposeOnSet:o=this.noDisposeOnSet,size:a=0,sizeCalculation:l=this.sizeCalculation,noUpdateTTL:h=this.noUpdateTTL,noDeleteOnFetchRejection:u=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:c=this.allowStaleOnFetchRejection,ignoreFetchAbort:d=this.ignoreFetchAbort,allowStaleOnFetchAbort:p=this.allowStaleOnFetchAbort,context:g,forceRefresh:b=!1,status:m,signal:_}=t;if(!this.#w)return m&&(m.fetch="get"),this.get(e,{allowStale:r,updateAgeOnGet:i,noDeleteOnStaleGet:s,status:m});let y={allowStale:r,updateAgeOnGet:i,noDeleteOnStaleGet:s,ttl:n,noDisposeOnSet:o,size:a,sizeCalculation:l,noUpdateTTL:h,noDeleteOnFetchRejection:u,allowStaleOnFetchRejection:c,allowStaleOnFetchAbort:p,ignoreFetchAbort:d,status:m,signal:_},S=this.#h.get(e);if(void 0===S){m&&(m.fetch="miss");let t=this.#I(e,S,y,g);return t.__returned=t}{let t=this.#c[S];if(this.#k(t)){let e=r&&void 0!==t.__staleWhileFetching;return m&&(m.fetch="inflight",e&&(m.returnedStale=!0)),e?t.__staleWhileFetching:t.__returned=t}let s=this.#O(S);if(!b&&!s)return m&&(m.fetch="hit"),this.#B(S),i&&this.#M(S),m&&this.#N(m,S),t;let n=this.#I(e,S,y,g),o=void 0!==n.__staleWhileFetching,a=o&&r;return m&&(m.fetch=s?"stale":"refresh",a&&s&&(m.returnedStale=!0)),a?n.__staleWhileFetching:n.__returned=n}}async forceFetch(e,t={}){let r=await this.fetch(e,t);if(void 0===r)throw Error("fetch() returned undefined");return r}memo(e,t={}){let r=this.#o;if(!r)throw Error("no memoMethod provided to constructor");let{context:i,forceRefresh:s,...n}=t,o=this.get(e,n);if(!s&&void 0!==o)return o;let a=r(e,o,{options:n,context:i});return this.set(e,a,n),a}get(e,t={}){let{allowStale:r=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:s=this.noDeleteOnStaleGet,status:n}=t,o=this.#h.get(e);if(void 0!==o){let t=this.#c[o],a=this.#k(t);return(n&&this.#N(n,o),this.#O(o))?(n&&(n.get="stale"),a)?(n&&r&&void 0!==t.__staleWhileFetching&&(n.returnedStale=!0),r?t.__staleWhileFetching:void 0):(s||this.#P(e,"expire"),n&&r&&(n.returnedStale=!0),r?t:void 0):(n&&(n.get="hit"),a)?t.__staleWhileFetching:(this.#B(o),i&&this.#M(o),t)}n&&(n.get="miss")}#F(e,t){this.#f[t]=e,this.#d[e]=t}#B(e){e!==this.#g&&(e===this.#p?this.#p=this.#d[e]:this.#F(this.#f[e],this.#d[e]),this.#F(this.#g,e),this.#g=e)}delete(e){return this.#P(e,"delete")}#P(e,t){let r=!1;if(0!==this.#a){let i=this.#h.get(e);if(void 0!==i){if(r=!0,1===this.#a)this.#V(t);else{this.#L(i);let r=this.#c[i];if(this.#k(r)?r.__abortController.abort(Error("deleted")):(this.#v||this.#E)&&(this.#v&&this.#i?.(r,e,t),this.#E&&this.#m?.push([r,e,t])),this.#h.delete(e),this.#u[i]=void 0,this.#c[i]=void 0,i===this.#g)this.#g=this.#f[i];else if(i===this.#p)this.#p=this.#d[i];else{let e=this.#f[i];this.#d[e]=this.#d[i];let t=this.#d[i];this.#f[t]=this.#f[i]}this.#a--,this.#b.push(i)}}}if(this.#E&&this.#m?.length){let e;let t=this.#m;for(;e=t?.shift();)this.#s?.(...e)}return r}clear(){return this.#V("delete")}#V(e){for(let t of this.#A({allowStale:!0})){let r=this.#c[t];if(this.#k(r))r.__abortController.abort(Error("deleted"));else{let i=this.#u[t];this.#v&&this.#i?.(r,i,e),this.#E&&this.#m?.push([r,i,e])}}if(this.#h.clear(),this.#c.fill(void 0),this.#u.fill(void 0),this.#S&&this.#y&&(this.#S.fill(0),this.#y.fill(0)),this.#_&&this.#_.fill(0),this.#p=0,this.#g=0,this.#b.length=0,this.#l=0,this.#a=0,this.#E&&this.#m){let e;let t=this.#m;for(;e=t?.shift();)this.#s?.(...e)}}};t.LRUCache=LRUCache},61624:e=>{"use strict";e.exports={version:"5.13.1"}}};