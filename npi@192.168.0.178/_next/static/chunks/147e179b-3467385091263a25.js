"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2793],{7406:function(l,c,p){var b=Object.defineProperty,m=Object.getOwnPropertyDescriptor,_=Object.getOwnPropertyNames,v=Object.prototype.hasOwnProperty,Ae=(l,c)=>()=>(l&&(c=l(l=0)),c),O=(l,c)=>()=>(c||l((c={exports:{}}).exports,c),c.exports),Ar=(l,c)=>{for(var p in c)b(l,p,{get:c[p],enumerable:!0})},Kg=(l,c,p,A)=>{if(c&&"object"==typeof c||"function"==typeof c)for(let T of _(c))v.call(l,T)||T===p||b(l,T,{get:()=>c[T],enumerable:!(A=m(c,T))||A.enumerable});return l},G=l=>Kg(b({},"__esModule",{value:!0}),l),A=Ae(()=>{}),T={};function ds(l){throw Error("Node.js process "+l+" is not supported by JSPM core outside of Node.js")}function Qg(){P&&x&&(P=!1,x.length?R=x.concat(R):B=-1,R.length&&Al())}function Al(){if(!P){var l=setTimeout(Qg,0);P=!0;for(var c=R.length;c;){for(x=R,R=[];++B<c;)x&&x[B].run();B=-1,c=R.length}x=null,P=!1,clearTimeout(l)}}function Il(l){var c=Array(arguments.length-1);if(arguments.length>1)for(var p=1;p<arguments.length;p++)c[p-1]=arguments[p];R.push(new Tl(l,c)),1!==R.length||P||setTimeout(Al,0)}function Tl(l,c){this.fun=l,this.array=c}function _e(){}function $l(l){ds("_linkedBinding")}function Kl(l){ds("dlopen")}function Ql(){return[]}function Gl(){return[]}function nu(l,c){if(!l)throw Error(c||"assertion error")}function lu(){return!1}function Iu(){return e$.now()/1e3}function ji(l){var c=Math.floor((Date.now()-e$.now())*.001),p=.001*e$.now(),b=Math.floor(p)+c,m=Math.floor(p%1*1e9);return l&&(b-=l[0],(m-=l[1])<0&&(b--,m+=eV)),[b,m]}function yt(){return e2}function Uu(l){return[]}Ar(T,{_debugEnd:()=>eO,_debugProcess:()=>eT,_events:()=>eG,_eventsCount:()=>ez,_exiting:()=>el,_fatalExceptions:()=>eA,_getActiveHandles:()=>Gl,_getActiveRequests:()=>Ql,_kill:()=>ed,_linkedBinding:()=>$l,_maxListeners:()=>eH,_preload_modules:()=>eF,_rawDebug:()=>en,_startProfilerIdleNotifier:()=>eR,_stopProfilerIdleNotifier:()=>eC,_tickCallback:()=>ek,abort:()=>eM,addListener:()=>eK,allowedNodeEnvironmentFlags:()=>eE,arch:()=>L,argv:()=>W,argv0:()=>eD,assert:()=>nu,binding:()=>X,chdir:()=>er,config:()=>eu,cpuUsage:()=>ep,cwd:()=>et,debugPort:()=>eN,default:()=>e2,dlopen:()=>Kl,domain:()=>ea,emit:()=>eX,emitWarning:()=>J,env:()=>D,execArgv:()=>V,execPath:()=>eL,exit:()=>e_,features:()=>eS,hasUncaughtExceptionCaptureCallback:()=>lu,hrtime:()=>ji,kill:()=>ey,listeners:()=>Uu,memoryUsage:()=>em,moduleLoadList:()=>es,nextTick:()=>Il,off:()=>eQ,on:()=>yt,once:()=>eY,openStdin:()=>ev,pid:()=>eU,platform:()=>N,ppid:()=>ej,prependListener:()=>e0,prependOnceListener:()=>e1,reallyExit:()=>eh,release:()=>ei,removeAllListeners:()=>eJ,removeListener:()=>eZ,resourceUsage:()=>eg,setSourceMapsEnabled:()=>eW,setUncaughtExceptionCaptureCallback:()=>eI,stderr:()=>ex,stdin:()=>eB,stdout:()=>eP,title:()=>U,umask:()=>ee,uptime:()=>Iu,version:()=>H,versions:()=>K});var R,P,x,B,U,L,N,D,W,V,H,K,J,X,ee,et,er,ei,en,es,ea,el,eu,eh,ed,ep,eg,em,ey,e_,ev,eE,eS,eA,eI,ek,eT,eO,eR,eC,eP,ex,eB,eM,eU,ej,eL,eN,eD,eF,eW,e$,eq,eV,eH,eG,ez,eK,eY,eQ,eZ,eJ,eX,e0,e1,e2,e3=Ae(()=>{A(),th(),e6(),R=[],P=!1,B=-1,Tl.prototype.run=function(){this.fun.apply(null,this.array)},U="browser",L="x64",N="browser",D={PATH:"/usr/bin",LANG:navigator.language+".UTF-8",PWD:"/",HOME:"/home",TMP:"/tmp"},W=["/usr/bin/node"],V=[],H="v16.8.0",K={},J=function(l,c){console.warn((c?c+": ":"")+l)},X=function(l){ds("binding")},ee=function(l){return 0},et=function(){return"/"},er=function(l){},ei={name:"node",sourceUrl:"",headersUrl:"",libUrl:""},en=_e,es=[],ea={},el=!1,eu={},eh=_e,ed=_e,eg=ep=function(){return{}},em=ep,ey=_e,e_=_e,ev=_e,eE={},eS={inspector:!1,debug:!1,uv:!1,ipv6:!1,tls_alpn:!1,tls_sni:!1,tls_ocsp:!1,tls:!1,cached_builtins:!0},eA=_e,eI=_e,ek=_e,eT=_e,eO=_e,eR=_e,eC=_e,eP=void 0,ex=void 0,eB=void 0,eM=_e,eU=2,ej=1,eL="/bin/usr/node",eN=9229,eD="node",eF=[],eW=_e,void 0===(e$={now:"u">typeof performance?performance.now.bind(performance):void 0,timing:"u">typeof performance?performance.timing:void 0}).now&&(eq=Date.now(),e$.timing&&e$.timing.navigationStart&&(eq=e$.timing.navigationStart),e$.now=()=>Date.now()-eq),eV=1e9,ji.bigint=function(l){var c=ji(l);return typeof BigInt>"u"?c[0]*eV+c[1]:BigInt(c[0]*eV)+BigInt(c[1])},eH=10,eG={},ez=0,eK=yt,eY=yt,eQ=yt,eZ=yt,eJ=yt,eX=_e,e0=yt,e1=yt,e2={version:H,versions:K,arch:L,platform:N,release:ei,_rawDebug:en,moduleLoadList:es,binding:X,_linkedBinding:$l,_events:eG,_eventsCount:ez,_maxListeners:eH,on:yt,addListener:eK,once:eY,off:eQ,removeListener:eZ,removeAllListeners:eJ,emit:eX,prependListener:e0,prependOnceListener:e1,listeners:Uu,domain:ea,_exiting:el,config:eu,dlopen:Kl,uptime:Iu,_getActiveRequests:Ql,_getActiveHandles:Gl,reallyExit:eh,_kill:ed,cpuUsage:ep,resourceUsage:eg,memoryUsage:em,kill:ey,exit:e_,openStdin:ev,allowedNodeEnvironmentFlags:eE,assert:nu,features:eS,_fatalExceptions:eA,setUncaughtExceptionCaptureCallback:eI,hasUncaughtExceptionCaptureCallback:lu,emitWarning:J,nextTick:Il,_tickCallback:ek,_debugProcess:eT,_debugEnd:eO,_startProfilerIdleNotifier:eR,_stopProfilerIdleNotifier:eC,stdout:eP,stdin:eB,stderr:ex,abort:eM,umask:ee,chdir:er,cwd:et,env:D,title:U,argv:W,execArgv:V,pid:eU,ppid:ej,execPath:eL,debugPort:eN,hrtime:ji,argv0:eD,_preload_modules:eF,setSourceMapsEnabled:eW}}),e6=Ae(()=>{e3()}),e4={};function Gg(){if(e8)return e5;e8=!0,e5.byteLength=a,e5.toByteArray=f,e5.fromByteArray=g;for(var l=[],c=[],p="u">typeof Uint8Array?Uint8Array:Array,b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",m=0,_=b.length;m<_;++m)l[m]=b[m],c[b.charCodeAt(m)]=m;function s(l){var c=l.length;if(c%4>0)throw Error("Invalid string. Length must be a multiple of 4");var p=l.indexOf("=");-1===p&&(p=c);var b=p===c?0:4-p%4;return[p,b]}function a(l){var c=s(l),p=c[0],b=c[1];return(p+b)*3/4-b}function u(l,c,p){return(c+p)*3/4-p}function f(l){var b,m,_=s(l),v=_[0],A=_[1],T=new p(u(l,v,A)),R=0,P=A>0?v-4:v;for(m=0;m<P;m+=4)b=c[l.charCodeAt(m)]<<18|c[l.charCodeAt(m+1)]<<12|c[l.charCodeAt(m+2)]<<6|c[l.charCodeAt(m+3)],T[R++]=b>>16&255,T[R++]=b>>8&255,T[R++]=255&b;return 2===A&&(b=c[l.charCodeAt(m)]<<2|c[l.charCodeAt(m+1)]>>4,T[R++]=255&b),1===A&&(b=c[l.charCodeAt(m)]<<10|c[l.charCodeAt(m+1)]<<4|c[l.charCodeAt(m+2)]>>2,T[R++]=b>>8&255,T[R++]=255&b),T}function d(c){return l[c>>18&63]+l[c>>12&63]+l[c>>6&63]+l[63&c]}function h(l,c,p){for(var b=[],m=c;m<p;m+=3)b.push(d((l[m]<<16&16711680)+(l[m+1]<<8&65280)+(255&l[m+2])));return b.join("")}function g(c){for(var p,b=c.length,m=b%3,_=[],v=0,A=b-m;v<A;v+=16383)_.push(h(c,v,v+16383>A?A:v+16383));return 1===m?_.push(l[(p=c[b-1])>>2]+l[p<<4&63]+"=="):2===m&&_.push(l[(p=(c[b-2]<<8)+c[b-1])>>10]+l[p>>4&63]+l[p<<2&63]+"="),_.join("")}return c[45]=62,c[95]=63,e5}function Yg(){return e9||(e9=!0,e7.read=function(l,c,p,b,m){var _,v,A=8*m-b-1,T=(1<<A)-1,R=T>>1,P=-7,x=p?m-1:0,B=p?-1:1,U=l[c+x];for(x+=B,_=U&(1<<-P)-1,U>>=-P,P+=A;P>0;_=256*_+l[c+x],x+=B,P-=8);for(v=_&(1<<-P)-1,_>>=-P,P+=b;P>0;v=256*v+l[c+x],x+=B,P-=8);if(0===_)_=1-R;else{if(_===T)return v?NaN:(U?-1:1)*(1/0);v+=Math.pow(2,b),_-=R}return(U?-1:1)*v*Math.pow(2,_-b)},e7.write=function(l,c,p,b,m,_){var v,A,T,R=8*_-m-1,P=(1<<R)-1,x=P>>1,B=23===m?5960464477539062e-23:0,U=b?0:_-1,L=b?1:-1,N=c<0||0===c&&1/c<0?1:0;for(isNaN(c=Math.abs(c))||c===1/0?(A=isNaN(c)?1:0,v=P):(v=Math.floor(Math.log(c)/Math.LN2),c*(T=Math.pow(2,-v))<1&&(v--,T*=2),v+x>=1?c+=B/T:c+=B*Math.pow(2,1-x),c*T>=2&&(v++,T/=2),v+x>=P?(A=0,v=P):v+x>=1?(A=(c*T-1)*Math.pow(2,m),v+=x):(A=c*Math.pow(2,x-1)*Math.pow(2,m),v=0));m>=8;l[p+U]=255&A,U+=L,A/=256,m-=8);for(v=v<<m|A,R+=m;R>0;l[p+U]=255&v,U+=L,v/=256,R-=8);l[p+U-L]|=128*N}),e7}function Jg(){if(ti)return tt;ti=!0;let l=Gg(),c=Yg(),p="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;function n(){try{let l=new Uint8Array(1),c={foo:function(){return 42}};return Object.setPrototypeOf(c,Uint8Array.prototype),Object.setPrototypeOf(l,c),42===l.foo()}catch{return!1}}function o(l){if(l>2147483647)throw RangeError('The value "'+l+'" is invalid for option "size"');let c=new Uint8Array(l);return Object.setPrototypeOf(c,s.prototype),c}function s(l,c,p){if("number"==typeof l){if("string"==typeof c)throw TypeError('The "string" argument must be of type string. Received type number');return d(l)}return a(l,c,p)}function a(l,c,p){if("string"==typeof l)return h(l,c);if(ArrayBuffer.isView(l))return y(l);if(null==l)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof l);if(Ge(l,ArrayBuffer)||l&&Ge(l.buffer,ArrayBuffer)||"u">typeof SharedArrayBuffer&&(Ge(l,SharedArrayBuffer)||l&&Ge(l.buffer,SharedArrayBuffer)))return E(l,c,p);if("number"==typeof l)throw TypeError('The "value" argument must not be of type number. Received type number');let b=l.valueOf&&l.valueOf();if(null!=b&&b!==l)return s.from(b,c,p);let m=w(l);if(m)return m;if("u">typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof l[Symbol.toPrimitive])return s.from(l[Symbol.toPrimitive]("string"),c,p);throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof l)}function u(l){if("number"!=typeof l)throw TypeError('"size" argument must be of type number');if(l<0)throw RangeError('The value "'+l+'" is invalid for option "size"')}function f(l,c,p){return u(l),l<=0?o(l):void 0!==c?"string"==typeof p?o(l).fill(c,p):o(l).fill(c):o(l)}function d(l){return u(l),o(l<0?0:0|S(l))}function h(l,c){if(("string"!=typeof c||""===c)&&(c="utf8"),!s.isEncoding(c))throw TypeError("Unknown encoding: "+c);let p=0|C(l,c),b=o(p),m=b.write(l,c);return m!==p&&(b=b.slice(0,m)),b}function g(l){let c=l.length<0?0:0|S(l.length),p=o(c);for(let b=0;b<c;b+=1)p[b]=255&l[b];return p}function y(l){if(Ge(l,Uint8Array)){let c=new Uint8Array(l);return E(c.buffer,c.byteOffset,c.byteLength)}return g(l)}function E(l,c,p){let b;if(c<0||l.byteLength<c)throw RangeError('"offset" is outside of buffer bounds');if(l.byteLength<c+(p||0))throw RangeError('"length" is outside of buffer bounds');return Object.setPrototypeOf(b=void 0===c&&void 0===p?new Uint8Array(l):void 0===p?new Uint8Array(l,c):new Uint8Array(l,c,p),s.prototype),b}function w(l){var c;if(s.isBuffer(l)){let c=0|S(l.length),p=o(c);return 0===p.length||l.copy(p,0,0,c),p}return void 0!==l.length?"number"!=typeof l.length||(c=l.length)!=c?o(0):g(l):"Buffer"===l.type&&Array.isArray(l.data)?g(l.data):void 0}function S(l){if(l>=2147483647)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|l}function I(l){return+l!=l&&(l=0),s.alloc(+l)}function C(l,c){if(s.isBuffer(l))return l.length;if(ArrayBuffer.isView(l)||Ge(l,ArrayBuffer))return l.byteLength;if("string"!=typeof l)throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof l);let p=l.length,b=arguments.length>2&&!0===arguments[2];if(!b&&0===p)return 0;let m=!1;for(;;)switch(c){case"ascii":case"latin1":case"binary":return p;case"utf8":case"utf-8":return ls(l).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*p;case"hex":return p>>>1;case"base64":return Sl(l).length;default:if(m)return b?-1:ls(l).length;c=(""+c).toLowerCase(),m=!0}}function k(l,c,p){let b=!1;if((void 0===c||c<0)&&(c=0),c>this.length||((void 0===p||p>this.length)&&(p=this.length),p<=0)||(p>>>=0)<=(c>>>=0))return"";for(l||(l="utf8");;)switch(l){case"hex":return Lg(this,c,p);case"utf8":case"utf-8":return Se(this,c,p);case"ascii":return os(this,c,p);case"latin1":case"binary":return Mg(this,c,p);case"base64":return Fe(this,c,p);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return qg(this,c,p);default:if(b)throw TypeError("Unknown encoding: "+l);l=(l+"").toLowerCase(),b=!0}}function M(l,c,p){let b=l[c];l[c]=l[p],l[p]=b}function q(l,c,p,b,m){var _;if(0===l.length)return -1;if("string"==typeof p?(b=p,p=0):p>2147483647?p=2147483647:p<-2147483648&&(p=-2147483648),(_=p=+p)!=_&&(p=m?0:l.length-1),p<0&&(p=l.length+p),p>=l.length){if(m)return -1;p=l.length-1}else if(p<0){if(!m)return -1;p=0}if("string"==typeof c&&(c=s.from(c,b)),s.isBuffer(c))return 0===c.length?-1:z(l,c,p,b,m);if("number"==typeof c)return c&=255,"function"==typeof Uint8Array.prototype.indexOf?m?Uint8Array.prototype.indexOf.call(l,c,p):Uint8Array.prototype.lastIndexOf.call(l,c,p):z(l,[c],p,b,m);throw TypeError("val must be string, number or Buffer")}function z(l,c,p,b,m){let _,v=1,A=l.length,T=c.length;if(void 0!==b&&("ucs2"===(b=String(b).toLowerCase())||"ucs-2"===b||"utf16le"===b||"utf-16le"===b)){if(l.length<2||c.length<2)return -1;v=2,A/=2,T/=2,p/=2}function ae(l,c){return 1===v?l[c]:l.readUInt16BE(c*v)}if(m){let b=-1;for(_=p;_<A;_++)if(ae(l,_)===ae(c,-1===b?0:_-b)){if(-1===b&&(b=_),_-b+1===T)return b*v}else -1!==b&&(_-=_-b),b=-1}else for(p+T>A&&(p=A-T),_=p;_>=0;_--){let p=!0;for(let b=0;b<T;b++)if(ae(l,_+b)!==ae(c,b)){p=!1;break}if(p)return _}return -1}function j(l,c,p,b){let m;p=Number(p)||0;let _=l.length-p;b?(b=Number(b))>_&&(b=_):b=_;let v=c.length;for(b>v/2&&(b=v/2),m=0;m<b;++m){let b=parseInt(c.substr(2*m,2),16);if(b!=b)break;l[p+m]=b}return m}function Q(l,c,p,b){return Ni(ls(c,l.length-p),l,p,b)}function $(l,c,p,b){return Ni(jg(c),l,p,b)}function te(l,c,p,b){return Ni(Sl(c),l,p,b)}function pt(l,c,p,b){return Ni(Fg(c,l.length-p),l,p,b)}function Fe(c,p,b){return 0===p&&b===c.length?l.fromByteArray(c):l.fromByteArray(c.slice(p,b))}function Se(l,c,p){p=Math.min(l.length,p);let b=[],m=c;for(;m<p;){let c=l[m],_=null,v=c>239?4:c>223?3:c>191?2:1;if(m+v<=p){let p,b,A,T;switch(v){case 1:c<128&&(_=c);break;case 2:(192&(p=l[m+1]))==128&&(T=(31&c)<<6|63&p)>127&&(_=T);break;case 3:p=l[m+1],b=l[m+2],(192&p)==128&&(192&b)==128&&(T=(15&c)<<12|(63&p)<<6|63&b)>2047&&(T<55296||T>57343)&&(_=T);break;case 4:p=l[m+1],b=l[m+2],A=l[m+3],(192&p)==128&&(192&b)==128&&(192&A)==128&&(T=(15&c)<<18|(63&p)<<12|(63&b)<<6|63&A)>65535&&T<1114112&&(_=T)}}null===_?(_=65533,v=1):_>65535&&(_-=65536,b.push(_>>>10&1023|55296),_=56320|1023&_),b.push(_),m+=v}return vr(b)}function vr(l){let c=l.length;if(c<=4096)return String.fromCharCode.apply(String,l);let p="",b=0;for(;b<c;)p+=String.fromCharCode.apply(String,l.slice(b,b+=4096));return p}function os(l,c,p){let b="";p=Math.min(l.length,p);for(let m=c;m<p;++m)b+=String.fromCharCode(127&l[m]);return b}function Mg(l,c,p){let b="";p=Math.min(l.length,p);for(let m=c;m<p;++m)b+=String.fromCharCode(l[m]);return b}function Lg(l,c,p){let b=l.length;(!c||c<0)&&(c=0),(!p||p<0||p>b)&&(p=b);let m="";for(let b=c;b<p;++b)m+=_[l[b]];return m}function qg(l,c,p){let b=l.slice(c,p),m="";for(let l=0;l<b.length-1;l+=2)m+=String.fromCharCode(b[l]+256*b[l+1]);return m}function ye(l,c,p){if(l%1!=0||l<0)throw RangeError("offset is not uint");if(l+c>p)throw RangeError("Trying to access beyond buffer length")}function Ce(l,c,p,b,m,_){if(!s.isBuffer(l))throw TypeError('"buffer" argument must be a Buffer instance');if(c>m||c<_)throw RangeError('"value" argument is out of bounds');if(p+b>l.length)throw RangeError("Index out of range")}function yl(l,c,p,b,m){El(c,b,m,l,p,7);let _=Number(c&BigInt(4294967295));l[p++]=_,_>>=8,l[p++]=_,_>>=8,l[p++]=_,_>>=8,l[p++]=_;let v=Number(c>>BigInt(32)&BigInt(4294967295));return l[p++]=v,v>>=8,l[p++]=v,v>>=8,l[p++]=v,v>>=8,l[p++]=v,p}function bl(l,c,p,b,m){El(c,b,m,l,p,7);let _=Number(c&BigInt(4294967295));l[p+7]=_,_>>=8,l[p+6]=_,_>>=8,l[p+5]=_,_>>=8,l[p+4]=_;let v=Number(c>>BigInt(32)&BigInt(4294967295));return l[p+3]=v,v>>=8,l[p+2]=v,v>>=8,l[p+1]=v,v>>=8,l[p]=v,p+8}function wl(l,c,p,b,m,_){if(p+b>l.length||p<0)throw RangeError("Index out of range")}function _l(l,p,b,m,_){return p=+p,b>>>=0,_||wl(l,p,b,4),c.write(l,p,b,m,23,4),b+4}function ml(l,p,b,m,_){return p=+p,b>>>=0,_||wl(l,p,b,8),c.write(l,p,b,m,52,8),b+8}tt.Buffer=s,tt.SlowBuffer=I,tt.INSPECT_MAX_BYTES=50,tt.kMaxLength=2147483647,s.TYPED_ARRAY_SUPPORT=n(),!s.TYPED_ARRAY_SUPPORT&&"u">typeof console&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.byteOffset}}),s.poolSize=8192,s.from=function(l,c,p){return a(l,c,p)},Object.setPrototypeOf(s.prototype,Uint8Array.prototype),Object.setPrototypeOf(s,Uint8Array),s.alloc=function(l,c,p){return f(l,c,p)},s.allocUnsafe=function(l){return d(l)},s.allocUnsafeSlow=function(l){return d(l)},s.isBuffer=function(l){return null!=l&&!0===l._isBuffer&&l!==s.prototype},s.compare=function(l,c){if(Ge(l,Uint8Array)&&(l=s.from(l,l.offset,l.byteLength)),Ge(c,Uint8Array)&&(c=s.from(c,c.offset,c.byteLength)),!s.isBuffer(l)||!s.isBuffer(c))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(l===c)return 0;let p=l.length,b=c.length;for(let m=0,_=Math.min(p,b);m<_;++m)if(l[m]!==c[m]){p=l[m],b=c[m];break}return p<b?-1:b<p?1:0},s.isEncoding=function(l){switch(String(l).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(l,c){let p;if(!Array.isArray(l))throw TypeError('"list" argument must be an Array of Buffers');if(0===l.length)return s.alloc(0);if(void 0===c)for(c=0,p=0;p<l.length;++p)c+=l[p].length;let b=s.allocUnsafe(c),m=0;for(p=0;p<l.length;++p){let c=l[p];if(Ge(c,Uint8Array))m+c.length>b.length?(s.isBuffer(c)||(c=s.from(c)),c.copy(b,m)):Uint8Array.prototype.set.call(b,c,m);else if(s.isBuffer(c))c.copy(b,m);else throw TypeError('"list" argument must be an Array of Buffers');m+=c.length}return b},s.byteLength=C,s.prototype._isBuffer=!0,s.prototype.swap16=function(){let l=this.length;if(l%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(let c=0;c<l;c+=2)M(this,c,c+1);return this},s.prototype.swap32=function(){let l=this.length;if(l%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(let c=0;c<l;c+=4)M(this,c,c+3),M(this,c+1,c+2);return this},s.prototype.swap64=function(){let l=this.length;if(l%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(let c=0;c<l;c+=8)M(this,c,c+7),M(this,c+1,c+6),M(this,c+2,c+5),M(this,c+3,c+4);return this},s.prototype.toString=function(){let l=this.length;return 0===l?"":0==arguments.length?Se(this,0,l):k.apply(this,arguments)},s.prototype.toLocaleString=s.prototype.toString,s.prototype.equals=function(l){if(!s.isBuffer(l))throw TypeError("Argument must be a Buffer");return this===l||0===s.compare(this,l)},s.prototype.inspect=function(){let l="",c=tt.INSPECT_MAX_BYTES;return l=this.toString("hex",0,c).replace(/(.{2})/g,"$1 ").trim(),this.length>c&&(l+=" ... "),"<Buffer "+l+">"},p&&(s.prototype[p]=s.prototype.inspect),s.prototype.compare=function(l,c,p,b,m){if(Ge(l,Uint8Array)&&(l=s.from(l,l.offset,l.byteLength)),!s.isBuffer(l))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof l);if(void 0===c&&(c=0),void 0===p&&(p=l?l.length:0),void 0===b&&(b=0),void 0===m&&(m=this.length),c<0||p>l.length||b<0||m>this.length)throw RangeError("out of range index");if(b>=m&&c>=p)return 0;if(b>=m)return -1;if(c>=p)return 1;if(c>>>=0,p>>>=0,b>>>=0,m>>>=0,this===l)return 0;let _=m-b,v=p-c,A=Math.min(_,v),T=this.slice(b,m),R=l.slice(c,p);for(let l=0;l<A;++l)if(T[l]!==R[l]){_=T[l],v=R[l];break}return _<v?-1:v<_?1:0},s.prototype.includes=function(l,c,p){return -1!==this.indexOf(l,c,p)},s.prototype.indexOf=function(l,c,p){return q(this,l,c,p,!0)},s.prototype.lastIndexOf=function(l,c,p){return q(this,l,c,p,!1)},s.prototype.write=function(l,c,p,b){if(void 0===c)b="utf8",p=this.length,c=0;else if(void 0===p&&"string"==typeof c)b=c,p=this.length,c=0;else if(isFinite(c))c>>>=0,isFinite(p)?(p>>>=0,void 0===b&&(b="utf8")):(b=p,p=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let m=this.length-c;if((void 0===p||p>m)&&(p=m),l.length>0&&(p<0||c<0)||c>this.length)throw RangeError("Attempt to write outside buffer bounds");b||(b="utf8");let _=!1;for(;;)switch(b){case"hex":return j(this,l,c,p);case"utf8":case"utf-8":return Q(this,l,c,p);case"ascii":case"latin1":case"binary":return $(this,l,c,p);case"base64":return te(this,l,c,p);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return pt(this,l,c,p);default:if(_)throw TypeError("Unknown encoding: "+b);b=(""+b).toLowerCase(),_=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},s.prototype.slice=function(l,c){let p=this.length;l=~~l,c=void 0===c?p:~~c,l<0?(l+=p)<0&&(l=0):l>p&&(l=p),c<0?(c+=p)<0&&(c=0):c>p&&(c=p),c<l&&(c=l);let b=this.subarray(l,c);return Object.setPrototypeOf(b,s.prototype),b},s.prototype.readUintLE=s.prototype.readUIntLE=function(l,c,p){l>>>=0,c>>>=0,p||ye(l,c,this.length);let b=this[l],m=1,_=0;for(;++_<c&&(m*=256);)b+=this[l+_]*m;return b},s.prototype.readUintBE=s.prototype.readUIntBE=function(l,c,p){l>>>=0,c>>>=0,p||ye(l,c,this.length);let b=this[l+--c],m=1;for(;c>0&&(m*=256);)b+=this[l+--c]*m;return b},s.prototype.readUint8=s.prototype.readUInt8=function(l,c){return l>>>=0,c||ye(l,1,this.length),this[l]},s.prototype.readUint16LE=s.prototype.readUInt16LE=function(l,c){return l>>>=0,c||ye(l,2,this.length),this[l]|this[l+1]<<8},s.prototype.readUint16BE=s.prototype.readUInt16BE=function(l,c){return l>>>=0,c||ye(l,2,this.length),this[l]<<8|this[l+1]},s.prototype.readUint32LE=s.prototype.readUInt32LE=function(l,c){return l>>>=0,c||ye(l,4,this.length),(this[l]|this[l+1]<<8|this[l+2]<<16)+16777216*this[l+3]},s.prototype.readUint32BE=s.prototype.readUInt32BE=function(l,c){return l>>>=0,c||ye(l,4,this.length),16777216*this[l]+(this[l+1]<<16|this[l+2]<<8|this[l+3])},s.prototype.readBigUInt64LE=kt(function(l){Sr(l>>>=0,"offset");let c=this[l],p=this[l+7];(void 0===c||void 0===p)&&ni(l,this.length-8);let b=c+256*this[++l]+65536*this[++l]+16777216*this[++l],m=this[++l]+256*this[++l]+65536*this[++l]+16777216*p;return BigInt(b)+(BigInt(m)<<BigInt(32))}),s.prototype.readBigUInt64BE=kt(function(l){Sr(l>>>=0,"offset");let c=this[l],p=this[l+7];(void 0===c||void 0===p)&&ni(l,this.length-8);let b=16777216*c+65536*this[++l]+256*this[++l]+this[++l],m=16777216*this[++l]+65536*this[++l]+256*this[++l]+p;return(BigInt(b)<<BigInt(32))+BigInt(m)}),s.prototype.readIntLE=function(l,c,p){l>>>=0,c>>>=0,p||ye(l,c,this.length);let b=this[l],m=1,_=0;for(;++_<c&&(m*=256);)b+=this[l+_]*m;return b>=(m*=128)&&(b-=Math.pow(2,8*c)),b},s.prototype.readIntBE=function(l,c,p){l>>>=0,c>>>=0,p||ye(l,c,this.length);let b=c,m=1,_=this[l+--b];for(;b>0&&(m*=256);)_+=this[l+--b]*m;return _>=(m*=128)&&(_-=Math.pow(2,8*c)),_},s.prototype.readInt8=function(l,c){return l>>>=0,c||ye(l,1,this.length),128&this[l]?-((255-this[l]+1)*1):this[l]},s.prototype.readInt16LE=function(l,c){l>>>=0,c||ye(l,2,this.length);let p=this[l]|this[l+1]<<8;return 32768&p?4294901760|p:p},s.prototype.readInt16BE=function(l,c){l>>>=0,c||ye(l,2,this.length);let p=this[l+1]|this[l]<<8;return 32768&p?4294901760|p:p},s.prototype.readInt32LE=function(l,c){return l>>>=0,c||ye(l,4,this.length),this[l]|this[l+1]<<8|this[l+2]<<16|this[l+3]<<24},s.prototype.readInt32BE=function(l,c){return l>>>=0,c||ye(l,4,this.length),this[l]<<24|this[l+1]<<16|this[l+2]<<8|this[l+3]},s.prototype.readBigInt64LE=kt(function(l){Sr(l>>>=0,"offset");let c=this[l],p=this[l+7];return(void 0===c||void 0===p)&&ni(l,this.length-8),(BigInt(this[l+4]+256*this[l+5]+65536*this[l+6]+(p<<24))<<BigInt(32))+BigInt(c+256*this[++l]+65536*this[++l]+16777216*this[++l])}),s.prototype.readBigInt64BE=kt(function(l){Sr(l>>>=0,"offset");let c=this[l],p=this[l+7];return(void 0===c||void 0===p)&&ni(l,this.length-8),(BigInt((c<<24)+65536*this[++l]+256*this[++l]+this[++l])<<BigInt(32))+BigInt(16777216*this[++l]+65536*this[++l]+256*this[++l]+p)}),s.prototype.readFloatLE=function(l,p){return l>>>=0,p||ye(l,4,this.length),c.read(this,l,!0,23,4)},s.prototype.readFloatBE=function(l,p){return l>>>=0,p||ye(l,4,this.length),c.read(this,l,!1,23,4)},s.prototype.readDoubleLE=function(l,p){return l>>>=0,p||ye(l,8,this.length),c.read(this,l,!0,52,8)},s.prototype.readDoubleBE=function(l,p){return l>>>=0,p||ye(l,8,this.length),c.read(this,l,!1,52,8)},s.prototype.writeUintLE=s.prototype.writeUIntLE=function(l,c,p,b){if(l=+l,c>>>=0,p>>>=0,!b){let b=Math.pow(2,8*p)-1;Ce(this,l,c,p,b,0)}let m=1,_=0;for(this[c]=255&l;++_<p&&(m*=256);)this[c+_]=l/m&255;return c+p},s.prototype.writeUintBE=s.prototype.writeUIntBE=function(l,c,p,b){if(l=+l,c>>>=0,p>>>=0,!b){let b=Math.pow(2,8*p)-1;Ce(this,l,c,p,b,0)}let m=p-1,_=1;for(this[c+m]=255&l;--m>=0&&(_*=256);)this[c+m]=l/_&255;return c+p},s.prototype.writeUint8=s.prototype.writeUInt8=function(l,c,p){return l=+l,c>>>=0,p||Ce(this,l,c,1,255,0),this[c]=255&l,c+1},s.prototype.writeUint16LE=s.prototype.writeUInt16LE=function(l,c,p){return l=+l,c>>>=0,p||Ce(this,l,c,2,65535,0),this[c]=255&l,this[c+1]=l>>>8,c+2},s.prototype.writeUint16BE=s.prototype.writeUInt16BE=function(l,c,p){return l=+l,c>>>=0,p||Ce(this,l,c,2,65535,0),this[c]=l>>>8,this[c+1]=255&l,c+2},s.prototype.writeUint32LE=s.prototype.writeUInt32LE=function(l,c,p){return l=+l,c>>>=0,p||Ce(this,l,c,4,4294967295,0),this[c+3]=l>>>24,this[c+2]=l>>>16,this[c+1]=l>>>8,this[c]=255&l,c+4},s.prototype.writeUint32BE=s.prototype.writeUInt32BE=function(l,c,p){return l=+l,c>>>=0,p||Ce(this,l,c,4,4294967295,0),this[c]=l>>>24,this[c+1]=l>>>16,this[c+2]=l>>>8,this[c+3]=255&l,c+4},s.prototype.writeBigUInt64LE=kt(function(l,c=0){return yl(this,l,c,BigInt(0),BigInt("0xffffffffffffffff"))}),s.prototype.writeBigUInt64BE=kt(function(l,c=0){return bl(this,l,c,BigInt(0),BigInt("0xffffffffffffffff"))}),s.prototype.writeIntLE=function(l,c,p,b){if(l=+l,c>>>=0,!b){let b=Math.pow(2,8*p-1);Ce(this,l,c,p,b-1,-b)}let m=0,_=1,v=0;for(this[c]=255&l;++m<p&&(_*=256);)l<0&&0===v&&0!==this[c+m-1]&&(v=1),this[c+m]=(l/_>>0)-v&255;return c+p},s.prototype.writeIntBE=function(l,c,p,b){if(l=+l,c>>>=0,!b){let b=Math.pow(2,8*p-1);Ce(this,l,c,p,b-1,-b)}let m=p-1,_=1,v=0;for(this[c+m]=255&l;--m>=0&&(_*=256);)l<0&&0===v&&0!==this[c+m+1]&&(v=1),this[c+m]=(l/_>>0)-v&255;return c+p},s.prototype.writeInt8=function(l,c,p){return l=+l,c>>>=0,p||Ce(this,l,c,1,127,-128),l<0&&(l=255+l+1),this[c]=255&l,c+1},s.prototype.writeInt16LE=function(l,c,p){return l=+l,c>>>=0,p||Ce(this,l,c,2,32767,-32768),this[c]=255&l,this[c+1]=l>>>8,c+2},s.prototype.writeInt16BE=function(l,c,p){return l=+l,c>>>=0,p||Ce(this,l,c,2,32767,-32768),this[c]=l>>>8,this[c+1]=255&l,c+2},s.prototype.writeInt32LE=function(l,c,p){return l=+l,c>>>=0,p||Ce(this,l,c,4,2147483647,-2147483648),this[c]=255&l,this[c+1]=l>>>8,this[c+2]=l>>>16,this[c+3]=l>>>24,c+4},s.prototype.writeInt32BE=function(l,c,p){return l=+l,c>>>=0,p||Ce(this,l,c,4,2147483647,-2147483648),l<0&&(l=4294967295+l+1),this[c]=l>>>24,this[c+1]=l>>>16,this[c+2]=l>>>8,this[c+3]=255&l,c+4},s.prototype.writeBigInt64LE=kt(function(l,c=0){return yl(this,l,c,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),s.prototype.writeBigInt64BE=kt(function(l,c=0){return bl(this,l,c,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),s.prototype.writeFloatLE=function(l,c,p){return _l(this,l,c,!0,p)},s.prototype.writeFloatBE=function(l,c,p){return _l(this,l,c,!1,p)},s.prototype.writeDoubleLE=function(l,c,p){return ml(this,l,c,!0,p)},s.prototype.writeDoubleBE=function(l,c,p){return ml(this,l,c,!1,p)},s.prototype.copy=function(l,c,p,b){if(!s.isBuffer(l))throw TypeError("argument should be a Buffer");if(p||(p=0),b||0===b||(b=this.length),c>=l.length&&(c=l.length),c||(c=0),b>0&&b<p&&(b=p),b===p||0===l.length||0===this.length)return 0;if(c<0)throw RangeError("targetStart out of bounds");if(p<0||p>=this.length)throw RangeError("Index out of range");if(b<0)throw RangeError("sourceEnd out of bounds");b>this.length&&(b=this.length),l.length-c<b-p&&(b=l.length-c+p);let m=b-p;return this===l&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(c,p,b):Uint8Array.prototype.set.call(l,this.subarray(p,b),c),m},s.prototype.fill=function(l,c,p,b){let m;if("string"==typeof l){if("string"==typeof c?(b=c,c=0,p=this.length):"string"==typeof p&&(b=p,p=this.length),void 0!==b&&"string"!=typeof b)throw TypeError("encoding must be a string");if("string"==typeof b&&!s.isEncoding(b))throw TypeError("Unknown encoding: "+b);if(1===l.length){let c=l.charCodeAt(0);("utf8"===b&&c<128||"latin1"===b)&&(l=c)}}else"number"==typeof l?l&=255:"boolean"==typeof l&&(l=Number(l));if(c<0||this.length<c||this.length<p)throw RangeError("Out of range index");if(p<=c)return this;if(c>>>=0,p=void 0===p?this.length:p>>>0,l||(l=0),"number"==typeof l)for(m=c;m<p;++m)this[m]=l;else{let _=s.isBuffer(l)?l:s.from(l,b),v=_.length;if(0===v)throw TypeError('The value "'+l+'" is invalid for argument "value"');for(m=0;m<p-c;++m)this[m+c]=_[m%v]}return this};let b={};function as(l,c,p){b[l]=class extends p{constructor(){super(),Object.defineProperty(this,"message",{value:c.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${l}]`,this.stack,delete this.name}get code(){return l}set code(l){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:l,writable:!0})}toString(){return`${this.name} [${l}]: ${this.message}`}}}function vl(l){let c="",p=l.length,b="-"===l[0]?1:0;for(;p>=b+4;p-=3)c=`_${l.slice(p-3,p)}${c}`;return`${l.slice(0,p)}${c}`}function Ug(l,c,p){Sr(c,"offset"),(void 0===l[c]||void 0===l[c+p])&&ni(c,l.length-(p+1))}function El(l,c,p,m,_,v){if(l>p||l<c){let m="bigint"==typeof c?"n":"",_;throw _=v>3?0===c||c===BigInt(0)?`>= 0${m} and < 2${m} ** ${(v+1)*8}${m}`:`>= -(2${m} ** ${(v+1)*8-1}${m}) and < 2 ** ${(v+1)*8-1}${m}`:`>= ${c}${m} and <= ${p}${m}`,new b.ERR_OUT_OF_RANGE("value",_,l)}Ug(m,_,v)}function Sr(l,c){if("number"!=typeof l)throw new b.ERR_INVALID_ARG_TYPE(c,"number",l)}function ni(l,c,p){throw Math.floor(l)!==l?(Sr(l,p),new b.ERR_OUT_OF_RANGE(p||"offset","an integer",l)):c<0?new b.ERR_BUFFER_OUT_OF_BOUNDS:new b.ERR_OUT_OF_RANGE(p||"offset",`>= ${p?1:0} and <= ${c}`,l)}as("ERR_BUFFER_OUT_OF_BOUNDS",function(l){return l?`${l} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),as("ERR_INVALID_ARG_TYPE",function(l,c){return`The "${l}" argument must be of type number. Received type ${typeof c}`},TypeError),as("ERR_OUT_OF_RANGE",function(l,c,p){let b=`The value of "${l}" is out of range.`,m=p;return Number.isInteger(p)&&Math.abs(p)>4294967296?m=vl(String(p)):"bigint"==typeof p&&(m=String(p),(p>BigInt(2)**BigInt(32)||p<-(BigInt(2)**BigInt(32)))&&(m=vl(m)),m+="n"),b+=` It must be ${c}. Received ${m}`},RangeError);let m=/[^+/0-9A-Za-z-_]/g;function Dg(l){if((l=(l=l.split("=")[0]).trim().replace(m,"")).length<2)return"";for(;l.length%4!=0;)l+="=";return l}function ls(l,c){c=c||1/0;let p,b=l.length,m=null,_=[];for(let v=0;v<b;++v){if((p=l.charCodeAt(v))>55295&&p<57344){if(!m){if(p>56319||v+1===b){(c-=3)>-1&&_.push(239,191,189);continue}m=p;continue}if(p<56320){(c-=3)>-1&&_.push(239,191,189),m=p;continue}p=(m-55296<<10|p-56320)+65536}else m&&(c-=3)>-1&&_.push(239,191,189);if(m=null,p<128){if((c-=1)<0)break;_.push(p)}else if(p<2048){if((c-=2)<0)break;_.push(p>>6|192,63&p|128)}else if(p<65536){if((c-=3)<0)break;_.push(p>>12|224,p>>6&63|128,63&p|128)}else if(p<1114112){if((c-=4)<0)break;_.push(p>>18|240,p>>12&63|128,p>>6&63|128,63&p|128)}else throw Error("Invalid code point")}return _}function jg(l){let c=[];for(let p=0;p<l.length;++p)c.push(255&l.charCodeAt(p));return c}function Fg(l,c){let p,b,m=[];for(let _=0;_<l.length&&!((c-=2)<0);++_)b=(p=l.charCodeAt(_))>>8,m.push(p%256),m.push(b);return m}function Sl(c){return l.toByteArray(Dg(c))}function Ni(l,c,p,b){let m;for(m=0;m<b&&!(m+p>=c.length||m>=l.length);++m)c[m+p]=l[m];return m}function Ge(l,c){return l instanceof c||null!=l&&null!=l.constructor&&null!=l.constructor.name&&l.constructor.name===c.name}let _=function(){let l="0123456789abcdef",c=Array(256);for(let p=0;p<16;++p){let b=16*p;for(let m=0;m<16;++m)c[b+m]=l[p]+l[m]}return c}();function kt(l){return typeof BigInt>"u"?$g:l}function $g(){throw Error("BigInt not supported")}return tt}Ar(e4,{Buffer:()=>ts,INSPECT_MAX_BYTES:()=>ta,default:()=>tn,kMaxLength:()=>tl});var e5,e8,e7,e9,tt,ti,tn,ts,ta,tl,tu=Ae(()=>{A(),th(),e6(),e5={},e8=!1,e7={},e9=!1,tt={},ti=!1,(tn=Jg()).Buffer,tn.SlowBuffer,tn.INSPECT_MAX_BYTES,tn.kMaxLength,ts=tn.Buffer,ta=tn.INSPECT_MAX_BYTES,tl=tn.kMaxLength}),th=Ae(()=>{tu()}),tf=O((l,c)=>{A(),th(),e6();var p=class extends Error{constructor(l){if(!Array.isArray(l))throw TypeError(`Expected input to be an Array, got ${typeof l}`);let c="";for(let p=0;p<l.length;p++)c+=`    ${l[p].stack}
`;super(c),this.name="AggregateError",this.errors=l}};c.exports={AggregateError:p,ArrayIsArray:l=>Array.isArray(l),ArrayPrototypeIncludes:(l,c)=>l.includes(c),ArrayPrototypeIndexOf:(l,c)=>l.indexOf(c),ArrayPrototypeJoin:(l,c)=>l.join(c),ArrayPrototypeMap:(l,c)=>l.map(c),ArrayPrototypePop:(l,c)=>l.pop(c),ArrayPrototypePush:(l,c)=>l.push(c),ArrayPrototypeSlice:(l,c,p)=>l.slice(c,p),Error,FunctionPrototypeCall:(l,c,...p)=>l.call(c,...p),FunctionPrototypeSymbolHasInstance:(l,c)=>Function.prototype[Symbol.hasInstance].call(l,c),MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties:(l,c)=>Object.defineProperties(l,c),ObjectDefineProperty:(l,c,p)=>Object.defineProperty(l,c,p),ObjectGetOwnPropertyDescriptor:(l,c)=>Object.getOwnPropertyDescriptor(l,c),ObjectKeys:l=>Object.keys(l),ObjectSetPrototypeOf:(l,c)=>Object.setPrototypeOf(l,c),Promise,PromisePrototypeCatch:(l,c)=>l.catch(c),PromisePrototypeThen:(l,c,p)=>l.then(c,p),PromiseReject:l=>Promise.reject(l),PromiseResolve:l=>Promise.resolve(l),ReflectApply:Reflect.apply,RegExpPrototypeTest:(l,c)=>l.test(c),SafeSet:Set,String,StringPrototypeSlice:(l,c,p)=>l.slice(c,p),StringPrototypeToLowerCase:l=>l.toLowerCase(),StringPrototypeToUpperCase:l=>l.toUpperCase(),StringPrototypeTrim:l=>l.trim(),Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet:(l,c,p)=>l.set(c,p),Boolean,Uint8Array}}),td=O((l,c)=>{A(),th(),e6(),c.exports={format:(l,...c)=>l.replace(/%([sdifj])/g,function(...[l,p]){let b=c.shift();return"f"===p?b.toFixed(6):"j"===p?JSON.stringify(b):"s"===p&&"object"==typeof b?`${b.constructor!==Object?b.constructor.name:""} {}`.trim():b.toString()}),inspect(l){switch(typeof l){case"string":if(l.includes("'")){if(!l.includes('"'))return`"${l}"`;if(!l.includes("`")&&!l.includes("${"))return`\`${l}\``}return`'${l}'`;case"number":return isNaN(l)?"NaN":Object.is(l,-0)?String(l):l;case"bigint":return`${String(l)}n`;case"boolean":case"undefined":return String(l);case"object":return"{}"}}}}),tp=O((l,c)=>{A(),th(),e6();var{format:p,inspect:b}=td(),{AggregateError:m}=tf(),_=globalThis.AggregateError||m,v=Symbol("kIsNodeError"),T=["string","function","number","object","Function","Object","boolean","bigint","symbol"],R=/^([A-Z][a-z0-9]*)+$/,P={};function Yt(l,c){if(!l)throw new P.ERR_INTERNAL_ASSERTION(c)}function Vu(l){let c="",p=l.length,b="-"===l[0]?1:0;for(;p>=b+4;p-=3)c=`_${l.slice(p-3,p)}${c}`;return`${l.slice(0,p)}${c}`}function ay(l,c,b){if("function"==typeof c)return Yt(c.length<=b.length,`Code: ${l}; The provided arguments length (${b.length}) does not match the required ones (${c.length}).`),c(...b);let m=(c.match(/%[dfijoOs]/g)||[]).length;return Yt(m===b.length,`Code: ${l}; The provided arguments length (${b.length}) does not match the required ones (${m}).`),0===b.length?c:p(c,...b)}function we(l,c,p){p||(p=Error);let i=class i extends p{constructor(...p){super(ay(l,c,p))}toString(){return`${this.name} [${l}]: ${this.message}`}};Object.defineProperties(i.prototype,{name:{value:p.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${l}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),i.prototype.code=l,i.prototype[v]=!0,P[l]=i}function zu(l){let c="__node_internal_"+l.name;return Object.defineProperty(l,"name",{value:c}),l}function ly(l,c){if(l&&c&&l!==c){if(Array.isArray(c.errors))return c.errors.push(l),c;let p=new _([c,l],c.message);return p.code=c.code,p}return l||c}var x=class extends Error{constructor(l="The operation was aborted",c){if(void 0!==c&&"object"!=typeof c)throw new P.ERR_INVALID_ARG_TYPE("options","Object",c);super(l,c),this.code="ABORT_ERR",this.name="AbortError"}};we("ERR_ASSERTION","%s",Error),we("ERR_INVALID_ARG_TYPE",(l,c,p)=>{Yt("string"==typeof l,"'name' must be a string"),Array.isArray(c)||(c=[c]);let m="The ";l.endsWith(" argument")?m+=`${l} `:m+=`"${l}" ${l.includes(".")?"property":"argument"} `,m+="must be ";let _=[],v=[],A=[];for(let l of c)Yt("string"==typeof l,"All expected entries have to be of type string"),T.includes(l)?_.push(l.toLowerCase()):R.test(l)?v.push(l):(Yt("object"!==l,'The value "object" should be written as "Object"'),A.push(l));if(v.length>0){let l=_.indexOf("object");-1!==l&&(_.splice(_,l,1),v.push("Object"))}if(_.length>0){switch(_.length){case 1:m+=`of type ${_[0]}`;break;case 2:m+=`one of type ${_[0]} or ${_[1]}`;break;default:{let l=_.pop();m+=`one of type ${_.join(", ")}, or ${l}`}}(v.length>0||A.length>0)&&(m+=" or ")}if(v.length>0){switch(v.length){case 1:m+=`an instance of ${v[0]}`;break;case 2:m+=`an instance of ${v[0]} or ${v[1]}`;break;default:{let l=v.pop();m+=`an instance of ${v.join(", ")}, or ${l}`}}A.length>0&&(m+=" or ")}switch(A.length){case 0:break;case 1:A[0].toLowerCase()!==A[0]&&(m+="an "),m+=`${A[0]}`;break;case 2:m+=`one of ${A[0]} or ${A[1]}`;break;default:{let l=A.pop();m+=`one of ${A.join(", ")}, or ${l}`}}if(null==p)m+=`. Received ${p}`;else if("function"==typeof p&&p.name)m+=`. Received function ${p.name}`;else if("object"==typeof p){var P;if(null!==(P=p.constructor)&&void 0!==P&&P.name)m+=`. Received an instance of ${p.constructor.name}`;else{let l=b(p,{depth:-1});m+=`. Received ${l}`}}else{let l=b(p,{colors:!1});l.length>25&&(l=`${l.slice(0,25)}...`),m+=`. Received type ${typeof p} (${l})`}return m},TypeError),we("ERR_INVALID_ARG_VALUE",(l,c,p="is invalid")=>{let m=b(c);return m.length>128&&(m=m.slice(0,128)+"..."),`The ${l.includes(".")?"property":"argument"} '${l}' ${p}. Received ${m}`},TypeError),we("ERR_INVALID_RETURN_VALUE",(l,c,p)=>{var b;let m=null!=p&&null!==(b=p.constructor)&&void 0!==b&&b.name?`instance of ${p.constructor.name}`:`type ${typeof p}`;return`Expected ${l} to be returned from the "${c}" function but got ${m}.`},TypeError),we("ERR_MISSING_ARGS",(...l)=>{Yt(l.length>0,"At least one arg needs to be specified");let c,p=l.length;switch(l=(Array.isArray(l)?l:[l]).map(l=>`"${l}"`).join(" or "),p){case 1:c+=`The ${l[0]} argument`;break;case 2:c+=`The ${l[0]} and ${l[1]} arguments`;break;default:{let p=l.pop();c+=`The ${l.join(", ")}, and ${p} arguments`}}return`${c} must be specified`},TypeError),we("ERR_OUT_OF_RANGE",(l,c,p)=>{let m;if(Yt(c,'Missing "range" argument'),Number.isInteger(p)&&Math.abs(p)>4294967296)m=Vu(String(p));else if("bigint"==typeof p){m=String(p);let l=BigInt(2)**BigInt(32);(p>l||p<-l)&&(m=Vu(m)),m+="n"}else m=b(p);return`The value of "${l}" is out of range. It must be ${c}. Received ${m}`},RangeError),we("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),we("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),we("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),we("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),we("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),we("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),we("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),we("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),we("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),we("ERR_STREAM_WRITE_AFTER_END","write after end",Error),we("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),c.exports={AbortError:x,aggregateTwoErrors:zu(ly),hideStackFrames:zu,codes:P}}),tg=O((l,c)=>{A(),th(),e6();var{AbortController:p,AbortSignal:b}="u">typeof self?self:"u">typeof window?window:void 0;c.exports=p,c.exports.AbortSignal=b,c.exports.default=p});function Y(){Y.init.call(this)}function zi(l){if("function"!=typeof l)throw TypeError('The "listener" argument must be of type Function. Received type '+typeof l)}function nc(l){return void 0===l._maxListeners?Y.defaultMaxListeners:l._maxListeners}function Xu(l,c,p,b){var m,_,v;if(zi(p),void 0===(_=l._events)?(_=l._events=Object.create(null),l._eventsCount=0):(void 0!==_.newListener&&(l.emit("newListener",c,p.listener?p.listener:p),_=l._events),v=_[c]),void 0===v)v=_[c]=p,++l._eventsCount;else if("function"==typeof v?v=_[c]=b?[p,v]:[v,p]:b?v.unshift(p):v.push(p),(m=nc(l))>0&&v.length>m&&!v.warned){v.warned=!0;var A=Error("Possible EventEmitter memory leak detected. "+v.length+" "+String(c)+" listeners added. Use emitter.setMaxListeners() to increase limit");A.name="MaxListenersExceededWarning",A.emitter=l,A.type=c,A.count=v.length,console&&console.warn&&console.warn(A)}return l}function cy(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0==arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Zu(l,c,p){var b={fired:!1,wrapFn:void 0,target:l,type:c,listener:p},m=cy.bind(b);return m.listener=p,b.wrapFn=m,m}function ec(l,c,p){var b=l._events;if(void 0===b)return[];var m=b[c];return void 0===m?[]:"function"==typeof m?p?[m.listener||m]:[m]:p?function(l){for(var c=Array(l.length),p=0;p<c.length;++p)c[p]=l[p].listener||l[p];return c}(m):sc(m,m.length)}function tc(l){var c=this._events;if(void 0!==c){var p=c[l];if("function"==typeof p)return 1;if(void 0!==p)return p.length}return 0}function sc(l,c){for(var p=Array(c),b=0;b<c;++b)p[b]=l[b];return p}var tm,ty,t_,tE,tS,tA,tI,tk=Ae(()=>{A(),th(),e6(),tE=(t_="object"==typeof Reflect?Reflect:null)&&"function"==typeof t_.apply?t_.apply:function(l,c,p){return Function.prototype.apply.call(l,c,p)},ty=t_&&"function"==typeof t_.ownKeys?t_.ownKeys:Object.getOwnPropertySymbols?function(l){return Object.getOwnPropertyNames(l).concat(Object.getOwnPropertySymbols(l))}:function(l){return Object.getOwnPropertyNames(l)},tS=Number.isNaN||function(l){return l!=l},tm=Y,Y.EventEmitter=Y,Y.prototype._events=void 0,Y.prototype._eventsCount=0,Y.prototype._maxListeners=void 0,tA=10,Object.defineProperty(Y,"defaultMaxListeners",{enumerable:!0,get:function(){return tA},set:function(l){if("number"!=typeof l||l<0||tS(l))throw RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+l+".");tA=l}}),Y.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},Y.prototype.setMaxListeners=function(l){if("number"!=typeof l||l<0||tS(l))throw RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+l+".");return this._maxListeners=l,this},Y.prototype.getMaxListeners=function(){return nc(this)},Y.prototype.emit=function(l){for(var c=[],p=1;p<arguments.length;p++)c.push(arguments[p]);var b="error"===l,m=this._events;if(void 0!==m)b=b&&void 0===m.error;else if(!b)return!1;if(b){if(c.length>0&&(_=c[0]),_ instanceof Error)throw _;var _,v=Error("Unhandled error."+(_?" ("+_.message+")":""));throw v.context=_,v}var A=m[l];if(void 0===A)return!1;if("function"==typeof A)tE(A,this,c);else{var T=A.length,R=sc(A,T);for(p=0;p<T;++p)tE(R[p],this,c)}return!0},Y.prototype.addListener=function(l,c){return Xu(this,l,c,!1)},Y.prototype.on=Y.prototype.addListener,Y.prototype.prependListener=function(l,c){return Xu(this,l,c,!0)},Y.prototype.once=function(l,c){return zi(c),this.on(l,Zu(this,l,c)),this},Y.prototype.prependOnceListener=function(l,c){return zi(c),this.prependListener(l,Zu(this,l,c)),this},Y.prototype.removeListener=function(l,c){var p,b,m,_,v;if(zi(c),void 0===(b=this._events)||void 0===(p=b[l]))return this;if(p===c||p.listener===c)0==--this._eventsCount?this._events=Object.create(null):(delete b[l],b.removeListener&&this.emit("removeListener",l,p.listener||c));else if("function"!=typeof p){for(m=-1,_=p.length-1;_>=0;_--)if(p[_]===c||p[_].listener===c){v=p[_].listener,m=_;break}if(m<0)return this;0===m?p.shift():function(l,c){for(;c+1<l.length;c++)l[c]=l[c+1];l.pop()}(p,m),1===p.length&&(b[l]=p[0]),void 0!==b.removeListener&&this.emit("removeListener",l,v||c)}return this},Y.prototype.off=Y.prototype.removeListener,Y.prototype.removeAllListeners=function(l){var c,p,b;if(void 0===(p=this._events))return this;if(void 0===p.removeListener)return 0==arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==p[l]&&(0==--this._eventsCount?this._events=Object.create(null):delete p[l]),this;if(0==arguments.length){var m,_=Object.keys(p);for(b=0;b<_.length;++b)"removeListener"!==(m=_[b])&&this.removeAllListeners(m);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(c=p[l]))this.removeListener(l,c);else if(void 0!==c)for(b=c.length-1;b>=0;b--)this.removeListener(l,c[b]);return this},Y.prototype.listeners=function(l){return ec(this,l,!0)},Y.prototype.rawListeners=function(l){return ec(this,l,!1)},Y.listenerCount=function(l,c){return"function"==typeof l.listenerCount?l.listenerCount(c):tc.call(l,c)},Y.prototype.listenerCount=tc,Y.prototype.eventNames=function(){return this._eventsCount>0?ty(this._events):[]},(tI=tm).EventEmitter,tI.defaultMaxListeners,tI.init,tI.listenerCount,tI.EventEmitter,tI.defaultMaxListeners,tI.init,tI.listenerCount}),tT={};Ar(tT,{EventEmitter:()=>tO,default:()=>tI,defaultMaxListeners:()=>tR,init:()=>tC,listenerCount:()=>tP,on:()=>tx,once:()=>tB});var tO,tR,tC,tP,tx,tB,tM=Ae(()=>{A(),th(),e6(),tk(),tk(),tI.once=function(l,c){return new Promise((p,b)=>{let m;function n(...c){void 0!==m&&l.removeListener("error",m),p(c)}"error"!==c&&(m=c=>{l.removeListener(name,n),b(c)},l.once("error",m)),l.once(c,n)})},tI.on=function(l,c){let p=[],b=[],m=null,_=!1,v={async next(){let l=p.shift();if(l)return createIterResult(l,!1);if(m){let l=Promise.reject(m);return m=null,l}return _?createIterResult(void 0,!0):new Promise((l,c)=>b.push({resolve:l,reject:c}))},async return(){for(let p of(l.removeListener(c,a),l.removeListener("error",u),_=!0,b))p.resolve(createIterResult(void 0,!0));return createIterResult(void 0,!0)},throw(p){m=p,l.removeListener(c,a),l.removeListener("error",u)},[Symbol.asyncIterator](){return this}};return l.on(c,a),l.on("error",u),v;function a(...l){let c=b.shift();c?c.resolve(createIterResult(l,!1)):p.push(l)}function u(l){_=!0;let c=b.shift();c?c.reject(l):m=l,v.return()}},{EventEmitter:tO,defaultMaxListeners:tR,init:tC,listenerCount:tP,on:tx,once:tB}=tI}),tU=O((l,c)=>{A(),th(),e6();var p=(tu(),G(e4)),{format:b,inspect:m}=td(),{codes:{ERR_INVALID_ARG_TYPE:_}}=tp(),{kResistStopPropagation:v,AggregateError:T,SymbolDispose:R}=tf(),P=globalThis.AbortSignal||tg().AbortSignal,x=globalThis.AbortController||tg().AbortController,B=Object.getPrototypeOf(async function(){}).constructor,U=globalThis.Blob||p.Blob,ac=(l,c)=>{if(void 0!==l&&(null===l||"object"!=typeof l||!("aborted"in l)))throw new _(c,"AbortSignal",l)},Ry=(l,c)=>{if("function"!=typeof l)throw new _(c,"Function",l)};c.exports={AggregateError:T,kEmptyObject:Object.freeze({}),once(l){let c=!1;return function(...p){c||(c=!0,l.apply(this,p))}},createDeferredPromise:function(){let l,c;return{promise:new Promise((p,b)=>{l=p,c=b}),resolve:l,reject:c}},promisify:l=>new Promise((c,p)=>{l((l,...b)=>l?p(l):c(...b))}),debuglog:()=>function(){},format:b,inspect:m,types:{isAsyncFunction:l=>l instanceof B,isArrayBufferView:l=>ArrayBuffer.isView(l)},isBlob:"u">typeof U?function(l){return l instanceof U}:function(l){return!1},deprecate:(l,c)=>l,addAbortListener:(tM(),G(tT)).addAbortListener||function(l,c){let p;if(void 0===l)throw new _("signal","AbortSignal",l);return ac(l,"signal"),Ry(c,"listener"),l.aborted?queueMicrotask(()=>c()):(l.addEventListener("abort",c,{__proto__:null,once:!0,[v]:!0}),p=()=>{l.removeEventListener("abort",c)}),{__proto__:null,[R](){var l;null===(l=p)||void 0===l||l()}}},AbortSignalAny:P.any||function(l){if(1===l.length)return l[0];let c=new x,i=()=>c.abort();return l.forEach(l=>{ac(l,"signals"),l.addEventListener("abort",i,{once:!0})}),c.signal.addEventListener("abort",()=>{l.forEach(l=>l.removeEventListener("abort",i))},{once:!0}),c.signal}},c.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")}),tj=O((l,c)=>{A(),th(),e6();var{ArrayIsArray:p,ArrayPrototypeIncludes:b,ArrayPrototypeJoin:m,ArrayPrototypeMap:_,NumberIsInteger:v,NumberIsNaN:T,NumberMAX_SAFE_INTEGER:R,NumberMIN_SAFE_INTEGER:P,NumberParseInt:x,ObjectPrototypeHasOwnProperty:B,RegExpPrototypeExec:U,String:L,StringPrototypeToUpperCase:N,StringPrototypeTrim:D}=tf(),{hideStackFrames:W,codes:{ERR_SOCKET_BAD_PORT:V,ERR_INVALID_ARG_TYPE:H,ERR_INVALID_ARG_VALUE:K,ERR_OUT_OF_RANGE:J,ERR_UNKNOWN_SIGNAL:X}}=tp(),{normalizeEncoding:ee}=tU(),{isAsyncFunction:et,isArrayBufferView:er}=tU().types,ei={};function Fy(l){return l===(0|l)}function Wy(l){return l===l>>>0}var en=/^[0-7]+$/;function Vy(l,c,p){if(typeof l>"u"&&(l=p),"string"==typeof l){if(null===U(en,l))throw new K(c,l,"must be a 32-bit unsigned integer or an octal string");l=x(l,8)}return el(l,c),l}var es=W((l,c,p=P,b=R)=>{if("number"!=typeof l)throw new H(c,"number",l);if(!v(l))throw new J(c,"an integer",l);if(l<p||l>b)throw new J(c,`>= ${p} && <= ${b}`,l)}),ea=W((l,c,p=-2147483648,b=2147483647)=>{if("number"!=typeof l)throw new H(c,"number",l);if(!v(l))throw new J(c,"an integer",l);if(l<p||l>b)throw new J(c,`>= ${p} && <= ${b}`,l)}),el=W((l,c,p=!1)=>{if("number"!=typeof l)throw new H(c,"number",l);if(!v(l))throw new J(c,"an integer",l);let b=p?1:0;if(l<b||l>4294967295)throw new J(c,`>= ${b} && <= 4294967295`,l)});function Ss(l,c){if("string"!=typeof l)throw new H(c,"string",l)}function Qy(l,c,p,b){if("number"!=typeof l)throw new H(c,"number",l);if(null!=p&&l<p||null!=b&&l>b||(null!=p||null!=b)&&T(l))throw new J(c,`${null!=p?`>= ${p}`:""}${null!=p&&null!=b?" && ":""}${null!=b?`<= ${b}`:""}`,l)}var eu=W((l,c,p)=>{if(!b(p,l))throw new K(c,l,"must be one of: "+m(_(p,l=>"string"==typeof l?`'${l}'`:L(l)),", "))});function gc(l,c){if("boolean"!=typeof l)throw new H(c,"boolean",l)}function ms(l,c,p){return null!=l&&B(l,c)?l[c]:p}var eh=W((l,c,b=null)=>{let m=ms(b,"allowArray",!1),_=ms(b,"allowFunction",!1);if(!ms(b,"nullable",!1)&&null===l||!m&&p(l)||"object"!=typeof l&&(!_||"function"!=typeof l))throw new H(c,"Object",l)}),ed=W((l,c)=>{if(null!=l&&"object"!=typeof l&&"function"!=typeof l)throw new H(c,"a dictionary",l)}),ep=W((l,c,b=0)=>{if(!p(l))throw new H(c,"Array",l);if(l.length<b)throw new K(c,l,`must be longer than ${b}`)});function Xy(l,c){ep(l,c);for(let p=0;p<l.length;p++)Ss(l[p],`${c}[${p}]`)}function Zy(l,c){ep(l,c);for(let p=0;p<l.length;p++)gc(l[p],`${c}[${p}]`)}function eb(l,c){ep(l,c);for(let p=0;p<l.length;p++){let b=l[p],m=`${c}[${p}]`;if(null==b)throw new H(m,"AbortSignal",b);em(b,m)}}function tb(l,c="signal"){if(Ss(l,c),void 0===ei[l])throw new X(void 0!==ei[N(l)]?l+" (signals must use all capital letters)":l)}var eg=W((l,c="buffer")=>{if(!er(l))throw new H(c,["Buffer","TypedArray","DataView"],l)});function ib(l,c){let p=ee(c),b=l.length;if("hex"===p&&b%2!=0)throw new K("encoding",c,`is invalid for data of length ${b}`)}function nb(l,c="Port",p=!0){if("number"!=typeof l&&"string"!=typeof l||"string"==typeof l&&0===D(l).length||+l!=+l>>>0||l>65535||0===l&&!p)throw new V(c,l,p);return 0|l}var em=W((l,c)=>{if(void 0!==l&&(null===l||"object"!=typeof l||!("aborted"in l)))throw new H(c,"AbortSignal",l)}),ey=W((l,c)=>{if("function"!=typeof l)throw new H(c,"Function",l)}),e_=W((l,c)=>{if("function"!=typeof l||et(l))throw new H(c,"Function",l)}),ev=W((l,c)=>{if(void 0!==l)throw new H(c,"undefined",l)});function lb(l,c,p){if(!b(p,l))throw new H(c,`('${m(p,"|")}')`,l)}var eE=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function cc(l,c){if(typeof l>"u"||!U(eE,l))throw new K(c,l,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function cb(l){if("string"==typeof l)return cc(l,"hints"),l;if(p(l)){let c=l.length,p="";if(0===c)return p;for(let b=0;b<c;b++){let m=l[b];cc(m,"hints"),p+=m,b!==c-1&&(p+=", ")}return p}throw new K("hints",l,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}c.exports={isInt32:Fy,isUint32:Wy,parseFileMode:Vy,validateArray:ep,validateStringArray:Xy,validateBooleanArray:Zy,validateAbortSignalArray:eb,validateBoolean:gc,validateBuffer:eg,validateDictionary:ed,validateEncoding:ib,validateFunction:ey,validateInt32:ea,validateInteger:es,validateNumber:Qy,validateObject:eh,validateOneOf:eu,validatePlainFunction:e_,validatePort:nb,validateSignalName:tb,validateString:Ss,validateUint32:el,validateUndefined:ev,validateUnion:lb,validateAbortSignal:em,validateLinkHeaderValue:cb}}),tL=O((l,c)=>{A(),th(),e6();var p,b,m=c.exports={};function As(){throw Error("setTimeout has not been defined")}function Is(){throw Error("clearTimeout has not been defined")}function wc(l){if(p===setTimeout)return setTimeout(l,0);if((p===As||!p)&&setTimeout)return p=setTimeout,setTimeout(l,0);try{return p(l,0)}catch{try{return p.call(null,l,0)}catch{return p.call(this,l,0)}}}function fb(l){if(b===clearTimeout)return clearTimeout(l);if((b===Is||!b)&&clearTimeout)return b=clearTimeout,clearTimeout(l);try{return b(l)}catch{try{return b.call(null,l)}catch{return b.call(this,l)}}}!function(){try{p="function"==typeof setTimeout?setTimeout:As}catch{p=As}try{b="function"==typeof clearTimeout?clearTimeout:Is}catch{b=Is}}();var _,v=[],T=!1,R=-1;function hb(){T&&_&&(T=!1,_.length?v=_.concat(v):R=-1,v.length&&_c())}function _c(){if(!T){var l=wc(hb);T=!0;for(var c=v.length;c;){for(_=v,v=[];++R<c;)_&&_[R].run();R=-1,c=v.length}_=null,T=!1,fb(l)}}function mc(l,c){this.fun=l,this.array=c}function wt(){}m.nextTick=function(l){var c=Array(arguments.length-1);if(arguments.length>1)for(var p=1;p<arguments.length;p++)c[p-1]=arguments[p];v.push(new mc(l,c)),1!==v.length||T||wc(_c)},mc.prototype.run=function(){this.fun.apply(null,this.array)},m.title="browser",m.browser=!0,m.env={},m.argv=[],m.version="",m.versions={},m.on=wt,m.addListener=wt,m.once=wt,m.off=wt,m.removeListener=wt,m.removeAllListeners=wt,m.emit=wt,m.prependListener=wt,m.prependOnceListener=wt,m.listeners=function(l){return[]},m.binding=function(l){throw Error("process.binding is not supported")},m.cwd=function(){return"/"},m.chdir=function(l){throw Error("process.chdir is not supported")},m.umask=function(){return 0}}),tN=O((l,c)=>{A(),th(),e6();var{SymbolAsyncIterator:p,SymbolIterator:b,SymbolFor:m}=tf(),_=m("nodejs.stream.destroyed"),v=m("nodejs.stream.errored"),T=m("nodejs.stream.readable"),R=m("nodejs.stream.writable"),P=m("nodejs.stream.disturbed"),x=m("nodejs.webstream.isClosedPromise"),B=m("nodejs.webstream.controllerErrorFunction");function Gi(l,c=!1){var p;return!!(l&&"function"==typeof l.pipe&&"function"==typeof l.on&&(!c||"function"==typeof l.pause&&"function"==typeof l.resume)&&(!l._writableState||(null===(p=l._readableState)||void 0===p?void 0:p.readable)!==!1)&&(!l._writableState||l._readableState))}function Yi(l){var c;return!!(l&&"function"==typeof l.write&&"function"==typeof l.on&&(!l._readableState||(null===(c=l._writableState)||void 0===c?void 0:c.writable)!==!1))}function gb(l){return!!(l&&"function"==typeof l.pipe&&l._readableState&&"function"==typeof l.on&&"function"==typeof l.write)}function Xe(l){return l&&(l._readableState||l._writableState||"function"==typeof l.write&&"function"==typeof l.on||"function"==typeof l.pipe&&"function"==typeof l.on)}function Rc(l){return!!(l&&!Xe(l)&&"function"==typeof l.pipeThrough&&"function"==typeof l.getReader&&"function"==typeof l.cancel)}function Cc(l){return!!(l&&!Xe(l)&&"function"==typeof l.getWriter&&"function"==typeof l.abort)}function kc(l){return!!(l&&!Xe(l)&&"object"==typeof l.readable&&"object"==typeof l.writable)}function yb(l){return Rc(l)||Cc(l)||kc(l)}function bb(l,c){return null!=l&&(!0===c?"function"==typeof l[p]:!1===c?"function"==typeof l[b]:"function"==typeof l[p]||"function"==typeof l[b])}function Ji(l){if(!Xe(l))return null;let c=l._writableState,p=l._readableState,b=c||p;return!!(l.destroyed||l[_]||null!=b&&b.destroyed)}function Pc(l){if(!Yi(l))return null;if(!0===l.writableEnded)return!0;let c=l._writableState;return(null==c||!c.errored)&&("boolean"!=typeof c?.ended?null:c.ended)}function wb(l,c){if(!Yi(l))return null;if(!0===l.writableFinished)return!0;let p=l._writableState;return(null==p||!p.errored)&&("boolean"!=typeof p?.finished?null:!!(p.finished||!1===c&&!0===p.ended&&0===p.length))}function _b(l){if(!Gi(l))return null;if(!0===l.readableEnded)return!0;let c=l._readableState;return!!c&&!c.errored&&("boolean"!=typeof c?.ended?null:c.ended)}function Bc(l,c){if(!Gi(l))return null;let p=l._readableState;return(null==p||!p.errored)&&("boolean"!=typeof p?.endEmitted?null:!!(p.endEmitted||!1===c&&!0===p.ended&&0===p.length))}function xc(l){return l&&null!=l[T]?l[T]:"boolean"!=typeof l?.readable?null:!Ji(l)&&Gi(l)&&l.readable&&!Bc(l)}function Oc(l){return l&&null!=l[R]?l[R]:"boolean"!=typeof l?.writable?null:!Ji(l)&&Yi(l)&&l.writable&&!Pc(l)}function mb(l,c){return Xe(l)?!!Ji(l)||!(c?.readable!==!1&&xc(l)||c?.writable!==!1&&Oc(l)):null}function vb(l){var c,p;return Xe(l)?l.writableErrored?l.writableErrored:null!==(c=null===(p=l._writableState)||void 0===p?void 0:p.errored)&&void 0!==c?c:null:null}function Eb(l){var c,p;return Xe(l)?l.readableErrored?l.readableErrored:null!==(c=null===(p=l._readableState)||void 0===p?void 0:p.errored)&&void 0!==c?c:null:null}function Sb(l){if(!Xe(l))return null;if("boolean"==typeof l.closed)return l.closed;let c=l._writableState,p=l._readableState;return"boolean"==typeof c?.closed||"boolean"==typeof p?.closed?c?.closed||p?.closed:"boolean"==typeof l._closed&&Mc(l)?l._closed:null}function Mc(l){return"boolean"==typeof l._closed&&"boolean"==typeof l._defaultKeepAlive&&"boolean"==typeof l._removedConnection&&"boolean"==typeof l._removedContLen}function Lc(l){return"boolean"==typeof l._sent100&&Mc(l)}function Ab(l){var c;return"boolean"==typeof l._consuming&&"boolean"==typeof l._dumped&&(null===(c=l.req)||void 0===c?void 0:c.upgradeOrConnect)===void 0}function Ib(l){if(!Xe(l))return null;let c=l._writableState,p=l._readableState,b=c||p;return!b&&Lc(l)||!!(b&&b.autoDestroy&&b.emitClose&&!1===b.closed)}function Tb(l){var c;return!!(l&&(null!==(c=l[P])&&void 0!==c?c:l.readableDidRead||l.readableAborted))}function Rb(l){var c,p,b,m,_,A,T,R,P,x;return!!(l&&(null!==(c=null!==(p=null!==(b=null!==(m=null!==(_=null!==(A=l[v])&&void 0!==A?A:l.readableErrored)&&void 0!==_?_:l.writableErrored)&&void 0!==m?m:null===(T=l._readableState)||void 0===T?void 0:T.errorEmitted)&&void 0!==b?b:null===(R=l._writableState)||void 0===R?void 0:R.errorEmitted)&&void 0!==p?p:null===(P=l._readableState)||void 0===P?void 0:P.errored)&&void 0!==c?c:!(null===(x=l._writableState)||void 0===x)&&x.errored))}c.exports={isDestroyed:Ji,kIsDestroyed:_,isDisturbed:Tb,kIsDisturbed:P,isErrored:Rb,kIsErrored:v,isReadable:xc,kIsReadable:T,kIsClosedPromise:x,kControllerErrorFunction:B,kIsWritable:R,isClosed:Sb,isDuplexNodeStream:gb,isFinished:mb,isIterable:bb,isReadableNodeStream:Gi,isReadableStream:Rc,isReadableEnded:_b,isReadableFinished:Bc,isReadableErrored:Eb,isNodeStream:Xe,isWebStream:yb,isWritable:Oc,isWritableNodeStream:Yi,isWritableStream:Cc,isWritableEnded:Pc,isWritableFinished:wb,isWritableErrored:vb,isServerRequest:Ab,isServerResponse:Lc,willEmitClose:Ib,isTransformStream:kc}}),tD=O((l,c)=>{A(),th(),e6();var p,b=tL(),{AbortError:m,codes:_}=tp(),{ERR_INVALID_ARG_TYPE:v,ERR_STREAM_PREMATURE_CLOSE:T}=_,{kEmptyObject:R,once:P}=tU(),{validateAbortSignal:x,validateFunction:B,validateObject:U,validateBoolean:L}=tj(),{Promise:N,PromisePrototypeThen:D,SymbolDispose:W}=tf(),{isClosed:V,isReadable:H,isReadableNodeStream:K,isReadableStream:J,isReadableFinished:X,isReadableErrored:ee,isWritable:et,isWritableNodeStream:er,isWritableStream:ei,isWritableFinished:en,isWritableErrored:es,isNodeStream:ea,willEmitClose:el,kIsClosedPromise:eu}=tN();function Wb(l){return l.setHeader&&"function"==typeof l.abort}var Bs=()=>{};function Kc(l,c,_){var A,L;if(2==arguments.length?(_=c,c=R):null==c?c=R:U(c,"options"),B(_,"callback"),x(c.signal,"options.signal"),_=P(_),J(l)||ei(l))return $b(l,c,_);if(!ea(l))throw new v("stream",["ReadableStream","WritableStream","Stream"],l);let N=null!==(A=c.readable)&&void 0!==A?A:K(l),D=null!==(L=c.writable)&&void 0!==L?L:er(l),eu=l._writableState,eh=l._readableState,f=()=>{l.writable||g()},ed=el(l)&&K(l)===N&&er(l)===D,ep=en(l,!1),g=()=>{ep=!0,l.destroyed&&(ed=!1),ed&&(!l.readable||N)||N&&!eg||_.call(l)},eg=X(l,!1),E=()=>{eg=!0,l.destroyed&&(ed=!1),ed&&(!l.writable||D)||D&&!ep||_.call(l)},w=c=>{_.call(l,c)},em=V(l),I=()=>{em=!0;let c=es(l)||ee(l);return c&&"boolean"!=typeof c?_.call(l,c):N&&!eg&&K(l,!0)&&!X(l,!1)||D&&!ep&&!en(l,!1)?_.call(l,new T):void _.call(l)},C=()=>{em=!0;let c=es(l)||ee(l);if(c&&"boolean"!=typeof c)return _.call(l,c);_.call(l)},k=()=>{l.req.on("finish",g)};Wb(l)?(l.on("complete",g),ed||l.on("abort",I),l.req?k():l.on("request",k)):D&&!eu&&(l.on("end",f),l.on("close",f)),ed||"boolean"!=typeof l.aborted||l.on("aborted",I),l.on("end",E),l.on("finish",g),!1!==c.error&&l.on("error",w),l.on("close",I),em?b.nextTick(I):null!=eu&&eu.errorEmitted||null!=eh&&eh.errorEmitted?ed||b.nextTick(C):(!N&&(!ed||H(l))&&(ep||!1===et(l))||!D&&(!ed||et(l))&&(eg||!1===H(l))||eh&&l.req&&l.aborted)&&b.nextTick(C);let M=()=>{_=Bs,l.removeListener("aborted",I),l.removeListener("complete",g),l.removeListener("abort",I),l.removeListener("request",k),l.req&&l.req.removeListener("finish",g),l.removeListener("end",f),l.removeListener("close",f),l.removeListener("finish",g),l.removeListener("end",E),l.removeListener("error",w),l.removeListener("close",I)};if(c.signal&&!em){let q=()=>{let p=_;M(),p.call(l,new m(void 0,{cause:c.signal.reason}))};if(c.signal.aborted)b.nextTick(q);else{let b=(p=p||tU().addAbortListener)(c.signal,q),m=_;_=P((...c)=>{b[W](),m.apply(l,c)})}}return M}function $b(l,c,_){let v=!1,A=Bs;if(c.signal){if(A=()=>{v=!0,_.call(l,new m(void 0,{cause:c.signal.reason}))},c.signal.aborted)b.nextTick(A);else{let b=(p=p||tU().addAbortListener)(c.signal,A),m=_;_=P((...c)=>{b[W](),m.apply(l,c)})}}let o=(...c)=>{v||b.nextTick(()=>_.apply(l,c))};return D(l[eu].promise,o,o),Bs}function Hb(l,c){var p;let b=!1;return null===c&&(c=R),null!==(p=c)&&void 0!==p&&p.cleanup&&(L(c.cleanup,"cleanup"),b=c.cleanup),new N((p,m)=>{let _=Kc(l,c,l=>{b&&_(),l?m(l):p()})})}c.exports=Kc,c.exports.finished=Hb}),tF=O((l,c)=>{A(),th(),e6();var p=tL(),{aggregateTwoErrors:b,codes:{ERR_MULTIPLE_CALLBACK:m},AbortError:_}=tp(),{Symbol:v}=tf(),{kIsDestroyed:T,isDestroyed:R,isFinished:P,isServerRequest:x}=tN(),B=v("kDestroy"),U=v("kConstruct");function Xc(l,c,p){l&&(l.stack,c&&!c.errored&&(c.errored=l),p&&!p.errored&&(p.errored=l))}function Xb(l,c){let p=this._readableState,m=this._writableState,_=m||p;return null!=m&&m.destroyed||null!=p&&p.destroyed?"function"==typeof c&&c():(Xc(l,m,p),m&&(m.destroyed=!0),p&&(p.destroyed=!0),_.constructed?Qc(this,l,c):this.once(B,function(p){Qc(this,b(p,l),c)})),this}function Qc(l,c,b){let m=!1;function n(c){if(m)return;m=!0;let _=l._readableState,v=l._writableState;Xc(c,v,_),v&&(v.closed=!0),_&&(_.closed=!0),"function"==typeof b&&b(c),c?p.nextTick(Zb,l,c):p.nextTick(Zc,l)}try{l._destroy(c||null,n)}catch(l){n(l)}}function Zb(l,c){Ms(l,c),Zc(l)}function Zc(l){let c=l._readableState,p=l._writableState;p&&(p.closeEmitted=!0),c&&(c.closeEmitted=!0),(null!=p&&p.emitClose||null!=c&&c.emitClose)&&l.emit("close")}function Ms(l,c){let p=l._readableState,b=l._writableState;null!=b&&b.errorEmitted||null!=p&&p.errorEmitted||(b&&(b.errorEmitted=!0),p&&(p.errorEmitted=!0),l.emit("error",c))}function ew(){let l=this._readableState,c=this._writableState;l&&(l.constructed=!0,l.closed=!1,l.closeEmitted=!1,l.destroyed=!1,l.errored=null,l.errorEmitted=!1,l.reading=!1,l.ended=!1===l.readable,l.endEmitted=!1===l.readable),c&&(c.constructed=!0,c.destroyed=!1,c.closed=!1,c.closeEmitted=!1,c.errored=null,c.errorEmitted=!1,c.finalCalled=!1,c.prefinished=!1,c.ended=!1===c.writable,c.ending=!1===c.writable,c.finished=!1===c.writable)}function Ls(l,c,b){let m=l._readableState,_=l._writableState;if(null!=_&&_.destroyed||null!=m&&m.destroyed)return this;null!=m&&m.autoDestroy||null!=_&&_.autoDestroy?l.destroy(c):c&&(c.stack,_&&!_.errored&&(_.errored=c),m&&!m.errored&&(m.errored=c),b?p.nextTick(Ms,l,c):Ms(l,c))}function tw(l,c){if("function"!=typeof l._construct)return;let b=l._readableState,m=l._writableState;b&&(b.constructed=!1),m&&(m.constructed=!1),l.once(U,c),l.listenerCount(U)>1||p.nextTick(rw,l)}function rw(l){let c=!1;function r(b){if(c){Ls(l,b??new m);return}c=!0;let _=l._readableState,v=l._writableState,A=v||_;_&&(_.constructed=!0),v&&(v.constructed=!0),A.destroyed?l.emit(B,b):b?Ls(l,b,!0):p.nextTick(iw,l)}try{l._construct(l=>{p.nextTick(r,l)})}catch(l){p.nextTick(r,l)}}function iw(l){l.emit(U)}function Gc(l){return l?.setHeader&&"function"==typeof l.abort}function ef(l){l.emit("close")}function nw(l,c){l.emit("error",c),p.nextTick(ef,l)}function sw(l,c){!l||R(l)||(c||P(l)||(c=new _),x(l)?(l.socket=null,l.destroy(c)):Gc(l)?l.abort():Gc(l.req)?l.req.abort():"function"==typeof l.destroy?l.destroy(c):"function"==typeof l.close?l.close():c?p.nextTick(nw,l,c):p.nextTick(ef,l),l.destroyed||(l[T]=!0))}c.exports={construct:tw,destroyer:sw,destroy:Xb,undestroy:ew,errorOrDestroy:Ls}}),tW=O((l,c)=>{A(),th(),e6();var{ArrayIsArray:p,ObjectSetPrototypeOf:b}=tf(),{EventEmitter:m}=(tM(),G(tT));function Zi(l){m.call(this,l)}function qs(l,c,b){if("function"==typeof l.prependListener)return l.prependListener(c,b);l._events&&l._events[c]?p(l._events[c])?l._events[c].unshift(b):l._events[c]=[b,l._events[c]]:l.on(c,b)}b(Zi.prototype,m.prototype),b(Zi,m),Zi.prototype.pipe=function(l,c){let p=this;function i(c){l.writable&&!1===l.write(c)&&p.pause&&p.pause()}function n(){p.readable&&p.resume&&p.resume()}p.on("data",i),l.on("drain",n),l._isStdio||c&&!1===c.end||(p.on("end",s),p.on("close",a));let b=!1;function s(){b||(b=!0,l.end())}function a(){b||(b=!0,"function"==typeof l.destroy&&l.destroy())}function u(l){f(),0===m.listenerCount(this,"error")&&this.emit("error",l)}function f(){p.removeListener("data",i),l.removeListener("drain",n),p.removeListener("end",s),p.removeListener("close",a),p.removeListener("error",u),l.removeListener("error",u),p.removeListener("end",f),p.removeListener("close",f),l.removeListener("close",f)}return qs(p,"error",u),qs(l,"error",u),p.on("end",f),p.on("close",f),l.on("close",f),l.emit("pipe",p),l},c.exports={Stream:Zi,prependListener:qs}}),t$=O((l,c)=>{A(),th(),e6();var p,{SymbolDispose:b}=tf(),{AbortError:m,codes:_}=tp(),{isNodeStream:v,isWebStream:T,kControllerErrorFunction:R}=tN(),P=tD(),{ERR_INVALID_ARG_TYPE:x}=_,hw=(l,c)=>{if("object"!=typeof l||!("aborted"in l))throw new x(c,"AbortSignal",l)};c.exports.addAbortSignal=function(l,p){if(hw(l,"signal"),!v(p)&&!T(p))throw new x("stream",["ReadableStream","WritableStream","Stream"],p);return c.exports.addAbortSignalNoValidate(l,p)},c.exports.addAbortSignalNoValidate=function(l,c){if("object"!=typeof l||!("aborted"in l))return c;let _=v(c)?()=>{c.destroy(new m(void 0,{cause:l.reason}))}:()=>{c[R](new m(void 0,{cause:l.reason}))};return l.aborted?_():P(c,(p=p||tU().addAbortListener)(l,_)[b]),c}}),tq=O((l,c)=>{A(),th(),e6();var{StringPrototypeSlice:p,SymbolIterator:b,TypedArrayPrototypeSet:m,Uint8Array:_}=tf(),{Buffer:v}=(tu(),G(e4)),{inspect:T}=tU();c.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(l){let c={data:l,next:null};this.length>0?this.tail.next=c:this.head=c,this.tail=c,++this.length}unshift(l){let c={data:l,next:this.head};0===this.length&&(this.tail=c),this.head=c,++this.length}shift(){if(0===this.length)return;let l=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,l}clear(){this.head=this.tail=null,this.length=0}join(l){if(0===this.length)return"";let c=this.head,p=""+c.data;for(;null!==(c=c.next);)p+=l+c.data;return p}concat(l){if(0===this.length)return v.alloc(0);let c=v.allocUnsafe(l>>>0),p=this.head,b=0;for(;p;)m(c,p.data,b),b+=p.data.length,p=p.next;return c}consume(l,c){let p=this.head.data;if(l<p.length){let c=p.slice(0,l);return this.head.data=p.slice(l),c}return l===p.length?this.shift():c?this._getString(l):this._getBuffer(l)}first(){return this.head.data}*[b](){for(let l=this.head;l;l=l.next)yield l.data}_getString(l){let c="",b=this.head,m=0;do{let _=b.data;if(l>_.length)c+=_,l-=_.length;else{l===_.length?(c+=_,++m,b.next?this.head=b.next:this.head=this.tail=null):(c+=p(_,0,l),this.head=b,b.data=p(_,l));break}++m}while(null!==(b=b.next));return this.length-=m,c}_getBuffer(l){let c=v.allocUnsafe(l),p=l,b=this.head,A=0;do{let v=b.data;if(l>v.length)m(c,v,p-l),l-=v.length;else{l===v.length?(m(c,v,p-l),++A,b.next?this.head=b.next:this.head=this.tail=null):(m(c,new _(v.buffer,v.byteOffset,l),p-l),this.head=b,b.data=v.slice(l));break}++A}while(null!==(b=b.next));return this.length-=A,c}[Symbol.for("nodejs.util.inspect.custom")](l,c){return T(this,{...c,depth:0,customInspect:!1})}}}),tV=O((l,c)=>{A(),th(),e6();var{MathFloor:p,NumberIsInteger:b}=tf(),{validateInteger:m}=tj(),{ERR_INVALID_ARG_VALUE:_}=tp().codes,v=16384,T=16;function mw(l,c,p){return null!=l.highWaterMark?l.highWaterMark:c?l[p]:null}function df(l){return l?T:v}function vw(l,c){m(c,"value",0),l?T=c:v=c}function Ew(l,c,m,v){let A=mw(c,v,m);if(null!=A){if(!b(A)||A<0)throw new _(v?`options.${m}`:"options.highWaterMark",A);return p(A)}return df(l.objectMode)}c.exports={getHighWaterMark:Ew,getDefaultHighWaterMark:df,setDefaultHighWaterMark:vw}}),tH=O((l,c)=>{A(),th(),e6();var p=(tu(),G(e4)),b=p.Buffer;function gf(l,c){for(var p in l)c[p]=l[p]}function tr(l,c,p){return b(l,c,p)}b.from&&b.alloc&&b.allocUnsafe&&b.allocUnsafeSlow?c.exports=p:(gf(p,l),l.Buffer=tr),tr.prototype=Object.create(b.prototype),gf(b,tr),tr.from=function(l,c,p){if("number"==typeof l)throw TypeError("Argument must not be a number");return b(l,c,p)},tr.alloc=function(l,c,p){if("number"!=typeof l)throw TypeError("Argument must be a number");var m=b(l);return void 0!==c?"string"==typeof p?m.fill(c,p):m.fill(c):m.fill(0),m},tr.allocUnsafe=function(l){if("number"!=typeof l)throw TypeError("Argument must be a number");return b(l)},tr.allocUnsafeSlow=function(l){if("number"!=typeof l)throw TypeError("Argument must be a number");return p.SlowBuffer(l)}}),tG=O(l=>{A(),th(),e6();var c=tH().Buffer,p=c.isEncoding||function(l){switch((l=""+l)&&l.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function Sw(l){if(!l)return"utf8";for(var c;;)switch(l){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return l;default:if(c)return;l=(""+l).toLowerCase(),c=!0}}function Aw(l){var b=Sw(l);if("string"!=typeof b&&(c.isEncoding===p||!p(l)))throw Error("Unknown encoding: "+l);return b||l}function li(l){var p;switch(this.encoding=Aw(l),this.encoding){case"utf16le":this.text=Pw,this.end=Bw,p=4;break;case"utf8":this.fillLast=Rw,p=4;break;case"base64":this.text=xw,this.end=Ow,p=3;break;default:this.write=Mw,this.end=Lw;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=c.allocUnsafe(p)}function js(l){return l<=127?0:l>>5==6?2:l>>4==14?3:l>>3==30?4:l>>6==2?-1:-2}function Iw(l,c,p){var b=c.length-1;if(b<p)return 0;var m=js(c[b]);return m>=0?(m>0&&(l.lastNeed=m-1),m):--b<p||-2===m?0:(m=js(c[b]))>=0?(m>0&&(l.lastNeed=m-2),m):--b<p||-2===m?0:(m=js(c[b]))>=0?(m>0&&(2===m?m=0:l.lastNeed=m-3),m):0}function Tw(l,c,p){if((192&c[0])!=128)return l.lastNeed=0,"�";if(l.lastNeed>1&&c.length>1){if((192&c[1])!=128)return l.lastNeed=1,"�";if(l.lastNeed>2&&c.length>2&&(192&c[2])!=128)return l.lastNeed=2,"�"}}function Rw(l){var c=this.lastTotal-this.lastNeed,p=Tw(this,l,c);return void 0!==p?p:this.lastNeed<=l.length?(l.copy(this.lastChar,c,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):void(l.copy(this.lastChar,c,0,l.length),this.lastNeed-=l.length)}function Cw(l,c){var p=Iw(this,l,c);if(!this.lastNeed)return l.toString("utf8",c);this.lastTotal=p;var b=l.length-(p-this.lastNeed);return l.copy(this.lastChar,0,b),l.toString("utf8",c,b)}function kw(l){var c=l&&l.length?this.write(l):"";return this.lastNeed?c+"�":c}function Pw(l,c){if((l.length-c)%2==0){var p=l.toString("utf16le",c);if(p){var b=p.charCodeAt(p.length-1);if(b>=55296&&b<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=l[l.length-2],this.lastChar[1]=l[l.length-1],p.slice(0,-1)}return p}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=l[l.length-1],l.toString("utf16le",c,l.length-1)}function Bw(l){var c=l&&l.length?this.write(l):"";if(this.lastNeed){var p=this.lastTotal-this.lastNeed;return c+this.lastChar.toString("utf16le",0,p)}return c}function xw(l,c){var p=(l.length-c)%3;return 0===p?l.toString("base64",c):(this.lastNeed=3-p,this.lastTotal=3,1===p?this.lastChar[0]=l[l.length-1]:(this.lastChar[0]=l[l.length-2],this.lastChar[1]=l[l.length-1]),l.toString("base64",c,l.length-p))}function Ow(l){var c=l&&l.length?this.write(l):"";return this.lastNeed?c+this.lastChar.toString("base64",0,3-this.lastNeed):c}function Mw(l){return l.toString(this.encoding)}function Lw(l){return l&&l.length?this.write(l):""}l.StringDecoder=li,li.prototype.write=function(l){var c,p;if(0===l.length)return"";if(this.lastNeed){if(void 0===(c=this.fillLast(l)))return"";p=this.lastNeed,this.lastNeed=0}else p=0;return p<l.length?c?c+this.text(l,p):this.text(l,p):c||""},li.prototype.end=kw,li.prototype.text=Cw,li.prototype.fillLast=function(l){if(this.lastNeed<=l.length)return l.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);l.copy(this.lastChar,this.lastTotal-this.lastNeed,0,l.length),this.lastNeed-=l.length}}),tz=O((l,c)=>{A(),th(),e6();var p=tL(),{PromisePrototypeThen:b,SymbolAsyncIterator:m,SymbolIterator:_}=tf(),{Buffer:v}=(tu(),G(e4)),{ERR_INVALID_ARG_TYPE:T,ERR_STREAM_NULL_VALUES:R}=tp().codes;function jw(l,c,A){let P,x;if("string"==typeof c||c instanceof v)return new l({objectMode:!0,...A,read(){this.push(c),this.push(null)}});if(c&&c[m])x=!0,P=c[m]();else if(c&&c[_])x=!1,P=c[_]();else throw new T("iterable",["Iterable"],c);let B=new l({objectMode:!0,highWaterMark:1,...A}),U=!1;async function a(l){let c=null!=l,p="function"==typeof P.throw;if(c&&p){let{value:c,done:p}=await P.throw(l);if(await c,p)return}if("function"==typeof P.return){let{value:l}=await P.return();await l}}async function u(){for(;;){try{let{value:l,done:c}=x?await P.next():P.next();if(c)B.push(null);else{let c=l&&"function"==typeof l.then?await l:l;if(null===c)throw U=!1,new R;if(B.push(c))continue;U=!1}}catch(l){B.destroy(l)}break}}return B._read=function(){U||(U=!0,u())},B._destroy=function(l,c){b(a(l),()=>p.nextTick(c,l),b=>p.nextTick(c,b||l))},B}c.exports=jw}),tK=O((l,c)=>{A(),th(),e6();var p,b=tL(),{ArrayPrototypeIndexOf:m,NumberIsInteger:_,NumberIsNaN:v,NumberParseInt:T,ObjectDefineProperties:R,ObjectKeys:P,ObjectSetPrototypeOf:x,Promise:B,SafeSet:U,SymbolAsyncDispose:L,SymbolAsyncIterator:N,Symbol:D}=tf();c.exports=F,F.ReadableState=ln;var{EventEmitter:W}=(tM(),G(tT)),{Stream:V,prependListener:H}=tW(),{Buffer:K}=(tu(),G(e4)),{addAbortSignal:J}=t$(),X=tD(),ee=tU().debuglog("stream",l=>{ee=l}),et=tq(),er=tF(),{getHighWaterMark:ei,getDefaultHighWaterMark:en}=tV(),{aggregateTwoErrors:es,codes:{ERR_INVALID_ARG_TYPE:ea,ERR_METHOD_NOT_IMPLEMENTED:el,ERR_OUT_OF_RANGE:eu,ERR_STREAM_PUSH_AFTER_EOF:eh,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:ed},AbortError:ep}=tp(),{validateObject:eg}=tj(),em=D("kPaused"),{StringDecoder:ey}=tG(),e_=tz();x(F.prototype,V.prototype),x(F,V);var Hs=()=>{},{errorOrDestroy:ev}=er;function de(l){return{enumerable:!1,get(){return(this.state&l)!=0},set(c){c?this.state|=l:this.state&=~l}}}function ln(l,c,p){"boolean"!=typeof p&&(p=c instanceof tZ()),this.state=6192,l&&l.objectMode&&(this.state|=1),p&&l&&l.readableObjectMode&&(this.state|=1),this.highWaterMark=l?ei(this,l,"readableHighWaterMark",p):en(!1),this.buffer=new et,this.length=0,this.pipes=[],this.flowing=null,this[em]=null,l&&!1===l.emitClose&&(this.state&=-2049),l&&!1===l.autoDestroy&&(this.state&=-4097),this.errored=null,this.defaultEncoding=l&&l.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,l&&l.encoding&&(this.decoder=new ey(l.encoding),this.encoding=l.encoding)}function F(l){if(!(this instanceof F))return new F(l);let c=this instanceof tZ();this._readableState=new ln(l,this,c),l&&("function"==typeof l.read&&(this._read=l.read),"function"==typeof l.destroy&&(this._destroy=l.destroy),"function"==typeof l.construct&&(this._construct=l.construct),l.signal&&!c&&J(l.signal,this)),V.call(this,l),er.construct(this,()=>{this._readableState.needReadable&&an(this,this._readableState)})}function Lf(l,c,p,b){ee("readableAddChunk",c);let m=l._readableState,_;if((1&m.state)==0&&("string"==typeof c?(p=p||m.defaultEncoding,m.encoding!==p&&(b&&m.encoding?c=K.from(c,p).toString(m.encoding):(c=K.from(c,p),p=""))):c instanceof K?p="":V._isUint8Array(c)?(c=V._uint8ArrayToBuffer(c),p=""):null!=c&&(_=new ea("chunk",["string","Buffer","Uint8Array"],c))),_)ev(l,_);else if(null===c)m.state&=-9,v_(l,m);else if((1&m.state)!=0||c&&c.length>0){if(b){if((4&m.state)!=0)ev(l,new ed);else{if(m.destroyed||m.errored)return!1;Vs(l,m,c,!0)}}else if(m.ended)ev(l,new eh);else{if(m.destroyed||m.errored)return!1;m.state&=-9,m.decoder&&!p?(c=m.decoder.write(c),m.objectMode||0!==c.length?Vs(l,m,c,!1):an(l,m)):Vs(l,m,c,!1)}}else b||(m.state&=-9,an(l,m));return!m.ended&&(m.length<m.highWaterMark||0===m.length)}function Vs(l,c,p,b){c.flowing&&0===c.length&&!c.sync&&l.listenerCount("data")>0?((65536&c.state)!=0?c.awaitDrainWriters.clear():c.awaitDrainWriters=null,c.dataEmitted=!0,l.emit("data",p)):(c.length+=c.objectMode?1:p.length,b?c.buffer.unshift(p):c.buffer.push(p),(64&c.state)!=0&&un(l)),an(l,c)}function m_(l){if(l>1073741824)throw new eu("size","<= 1GiB",l);return l--,l|=l>>>1,l|=l>>>2,l|=l>>>4,l|=l>>>8,l|=l>>>16,++l}function Tf(l,c){return l<=0||0===c.length&&c.ended?0:(1&c.state)!=0?1:v(l)?c.flowing&&c.length?c.buffer.first().length:c.length:l<=c.length?l:c.ended?c.length:0}function v_(l,c){if(ee("onEofChunk"),!c.ended){if(c.decoder){let l=c.decoder.end();l&&l.length&&(c.buffer.push(l),c.length+=c.objectMode?1:l.length)}c.ended=!0,c.sync?un(l):(c.needReadable=!1,c.emittedReadable=!0,qf(l))}}function un(l){let c=l._readableState;ee("emitReadable",c.needReadable,c.emittedReadable),c.needReadable=!1,c.emittedReadable||(ee("emitReadable",c.flowing),c.emittedReadable=!0,b.nextTick(qf,l))}function qf(l){let c=l._readableState;ee("emitReadable_",c.destroyed,c.length,c.ended),!c.destroyed&&!c.errored&&(c.length||c.ended)&&(l.emit("readable"),c.emittedReadable=!1),c.needReadable=!c.flowing&&!c.ended&&c.length<=c.highWaterMark,Nf(l)}function an(l,c){!c.readingMore&&c.constructed&&(c.readingMore=!0,b.nextTick(E_,l,c))}function E_(l,c){for(;!c.reading&&!c.ended&&(c.length<c.highWaterMark||c.flowing&&0===c.length);){let p=c.length;if(ee("maybeReadMore read 0"),l.read(0),p===c.length)break}c.readingMore=!1}function S_(l,c){return function(){let p=l._readableState;p.awaitDrainWriters===c?(ee("pipeOnDrain",1),p.awaitDrainWriters=null):p.multiAwaitDrain&&(ee("pipeOnDrain",p.awaitDrainWriters.size),p.awaitDrainWriters.delete(c)),(!p.awaitDrainWriters||0===p.awaitDrainWriters.size)&&l.listenerCount("data")&&l.resume()}}function Uf(l){let c=l._readableState;c.readableListening=l.listenerCount("readable")>0,c.resumeScheduled&&!1===c[em]?c.flowing=!0:l.listenerCount("data")>0?l.resume():c.readableListening||(c.flowing=null)}function A_(l){ee("readable nexttick read 0"),l.read(0)}function I_(l,c){c.resumeScheduled||(c.resumeScheduled=!0,b.nextTick(T_,l,c))}function T_(l,c){ee("resume",c.reading),c.reading||l.read(0),c.resumeScheduled=!1,l.emit("resume"),Nf(l),c.flowing&&!c.reading&&l.read(0)}function Nf(l){let c=l._readableState;for(ee("flow",c.flowing);c.flowing&&null!==l.read(););}function Df(l,c){"function"!=typeof l.read&&(l=F.wrap(l,{objectMode:!0}));let p=R_(l,c);return p.stream=l,p}async function*R_(l,c){let p=Hs;function i(c){this===l?(p(),p=Hs):p=c}l.on("readable",i);let b,m=X(l,{writable:!1},l=>{b=l?es(b,l):null,p(),p=Hs});try{for(;;){let c=l.destroyed?null:l.read();if(null!==c)yield c;else{if(b)throw b;if(null===b)return;await new B(i)}}}catch(l){throw b=es(b,l)}finally{(b||c?.destroyOnReturn!==!1)&&(void 0===b||l._readableState.autoDestroy)?er.destroyer(l,null):(l.off("readable",i),m())}}function jf(l,c){let p;return 0===c.length?null:(c.objectMode?p=c.buffer.shift():!l||l>=c.length?(p=c.decoder?c.buffer.join(""):1===c.buffer.length?c.buffer.first():c.buffer.concat(c.length),c.buffer.clear()):p=c.buffer.consume(l,c.decoder),p)}function zs(l){let c=l._readableState;ee("endReadable",c.endEmitted),c.endEmitted||(c.ended=!0,b.nextTick(C_,c,l))}function C_(l,c){if(ee("endReadableNT",l.endEmitted,l.length),!l.errored&&!l.closeEmitted&&!l.endEmitted&&0===l.length){if(l.endEmitted=!0,c.emit("end"),c.writable&&!1===c.allowHalfOpen)b.nextTick(k_,c);else if(l.autoDestroy){let l=c._writableState;(!l||l.autoDestroy&&(l.finished||!1===l.writable))&&c.destroy()}}}function k_(l){!l.writable||l.writableEnded||l.destroyed||l.end()}function Ff(){return void 0===p&&(p={}),p}R(ln.prototype,{objectMode:de(1),ended:de(2),endEmitted:de(4),reading:de(8),constructed:de(16),sync:de(32),needReadable:de(64),emittedReadable:de(128),readableListening:de(256),resumeScheduled:de(512),errorEmitted:de(1024),emitClose:de(2048),autoDestroy:de(4096),destroyed:de(8192),closed:de(16384),closeEmitted:de(32768),multiAwaitDrain:de(65536),readingMore:de(131072),dataEmitted:de(262144)}),F.prototype.destroy=er.destroy,F.prototype._undestroy=er.undestroy,F.prototype._destroy=function(l,c){c(l)},F.prototype[W.captureRejectionSymbol]=function(l){this.destroy(l)},F.prototype[L]=function(){let l;return this.destroyed||(l=this.readableEnded?null:new ep,this.destroy(l)),new B((c,p)=>X(this,b=>b&&b!==l?p(b):c(null)))},F.prototype.push=function(l,c){return Lf(this,l,c,!1)},F.prototype.unshift=function(l,c){return Lf(this,l,c,!0)},F.prototype.isPaused=function(){let l=this._readableState;return!0===l[em]||!1===l.flowing},F.prototype.setEncoding=function(l){let c=new ey(l);this._readableState.decoder=c,this._readableState.encoding=this._readableState.decoder.encoding;let p=this._readableState.buffer,b="";for(let l of p)b+=c.write(l);return p.clear(),""!==b&&p.push(b),this._readableState.length=b.length,this},F.prototype.read=function(l){let c;ee("read",l),void 0===l?l=NaN:_(l)||(l=T(l,10));let p=this._readableState,b=l;if(l>p.highWaterMark&&(p.highWaterMark=m_(l)),0!==l&&(p.state&=-129),0===l&&p.needReadable&&((0!==p.highWaterMark?p.length>=p.highWaterMark:p.length>0)||p.ended))return ee("read: emitReadable",p.length,p.ended),0===p.length&&p.ended?zs(this):un(this),null;if(0===(l=Tf(l,p))&&p.ended)return 0===p.length&&zs(this),null;let m=(64&p.state)!=0;if(ee("need readable",m),(0===p.length||p.length-l<p.highWaterMark)&&ee("length less than watermark",m=!0),p.ended||p.reading||p.destroyed||p.errored||!p.constructed)ee("reading, ended or constructing",m=!1);else if(m){ee("do read"),p.state|=40,0===p.length&&(p.state|=64);try{this._read(p.highWaterMark)}catch(l){ev(this,l)}p.state&=-33,p.reading||(l=Tf(b,p))}return null===(c=l>0?jf(l,p):null)?(p.needReadable=p.length<=p.highWaterMark,l=0):(p.length-=l,p.multiAwaitDrain?p.awaitDrainWriters.clear():p.awaitDrainWriters=null),0===p.length&&(p.ended||(p.needReadable=!0),b!==l&&p.ended&&zs(this)),null===c||p.errorEmitted||p.closeEmitted||(p.dataEmitted=!0,this.emit("data",c)),c},F.prototype._read=function(l){throw new el("_read()")},F.prototype.pipe=function(l,c){let p=this,m=this._readableState;1===m.pipes.length&&(m.multiAwaitDrain||(m.multiAwaitDrain=!0,m.awaitDrainWriters=new U(m.awaitDrainWriters?[m.awaitDrainWriters]:[]))),m.pipes.push(l),ee("pipe count=%d opts=%j",m.pipes.length,c);let _=c&&!1===c.end||l===b.stdout||l===b.stderr?S:a;function s(l,c){ee("onunpipe"),l===p&&c&&!1===c.hasUnpiped&&(c.hasUnpiped=!0,d())}function a(){ee("onend"),l.end()}m.endEmitted?b.nextTick(_):p.once("end",_),l.on("unpipe",s);let v,A=!1;function d(){ee("cleanup"),l.removeListener("close",E),l.removeListener("finish",w),v&&l.removeListener("drain",v),l.removeListener("error",y),l.removeListener("unpipe",s),p.removeListener("end",a),p.removeListener("end",S),p.removeListener("data",g),A=!0,v&&m.awaitDrainWriters&&(!l._writableState||l._writableState.needDrain)&&v()}function h(){A||(1===m.pipes.length&&m.pipes[0]===l?(ee("false write response, pause",0),m.awaitDrainWriters=l,m.multiAwaitDrain=!1):m.pipes.length>1&&m.pipes.includes(l)&&(ee("false write response, pause",m.awaitDrainWriters.size),m.awaitDrainWriters.add(l)),p.pause()),v||(v=S_(p,l),l.on("drain",v))}function g(c){ee("ondata");let p=l.write(c);ee("dest.write",p),!1===p&&h()}function y(c){if(ee("onerror",c),S(),l.removeListener("error",y),0===l.listenerCount("error")){let p=l._writableState||l._readableState;p&&!p.errorEmitted?ev(l,c):l.emit("error",c)}}function E(){l.removeListener("finish",w),S()}function w(){ee("onfinish"),l.removeListener("close",E),S()}function S(){ee("unpipe"),p.unpipe(l)}return p.on("data",g),H(l,"error",y),l.once("close",E),l.once("finish",w),l.emit("pipe",p),!0===l.writableNeedDrain?h():m.flowing||(ee("pipe resume"),p.resume()),l},F.prototype.unpipe=function(l){let c=this._readableState;if(0===c.pipes.length)return this;if(!l){let l=c.pipes;c.pipes=[],this.pause();for(let c=0;c<l.length;c++)l[c].emit("unpipe",this,{hasUnpiped:!1});return this}let p=m(c.pipes,l);return -1===p||(c.pipes.splice(p,1),0===c.pipes.length&&this.pause(),l.emit("unpipe",this,{hasUnpiped:!1})),this},F.prototype.on=function(l,c){let p=V.prototype.on.call(this,l,c),m=this._readableState;return"data"===l?(m.readableListening=this.listenerCount("readable")>0,!1!==m.flowing&&this.resume()):"readable"!==l||m.endEmitted||m.readableListening||(m.readableListening=m.needReadable=!0,m.flowing=!1,m.emittedReadable=!1,ee("on readable",m.length,m.reading),m.length?un(this):m.reading||b.nextTick(A_,this)),p},F.prototype.addListener=F.prototype.on,F.prototype.removeListener=function(l,c){let p=V.prototype.removeListener.call(this,l,c);return"readable"===l&&b.nextTick(Uf,this),p},F.prototype.off=F.prototype.removeListener,F.prototype.removeAllListeners=function(l){let c=V.prototype.removeAllListeners.apply(this,arguments);return("readable"===l||void 0===l)&&b.nextTick(Uf,this),c},F.prototype.resume=function(){let l=this._readableState;return l.flowing||(ee("resume"),l.flowing=!l.readableListening,I_(this,l)),l[em]=!1,this},F.prototype.pause=function(){return ee("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(ee("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[em]=!0,this},F.prototype.wrap=function(l){let c=!1;l.on("data",p=>{!this.push(p)&&l.pause&&(c=!0,l.pause())}),l.on("end",()=>{this.push(null)}),l.on("error",l=>{ev(this,l)}),l.on("close",()=>{this.destroy()}),l.on("destroy",()=>{this.destroy()}),this._read=()=>{c&&l.resume&&(c=!1,l.resume())};let p=P(l);for(let c=1;c<p.length;c++){let b=p[c];void 0===this[b]&&"function"==typeof l[b]&&(this[b]=l[b].bind(l))}return this},F.prototype[N]=function(){return Df(this)},F.prototype.iterator=function(l){return void 0!==l&&eg(l,"options"),Df(this,l)},R(F.prototype,{readable:{__proto__:null,get(){let l=this._readableState;return!!l&&!1!==l.readable&&!l.destroyed&&!l.errorEmitted&&!l.endEmitted},set(l){this._readableState&&(this._readableState.readable=!!l)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(!1!==this._readableState.readable&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(l){this._readableState&&(this._readableState.flowing=l)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.objectMode}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return!!this._readableState&&this._readableState.closed}},destroyed:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.destroyed},set(l){this._readableState&&(this._readableState.destroyed=l)}},readableEnded:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.endEmitted}}}),R(ln.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return!1!==this[em]},set(l){this[em]=!!l}}}),F._fromList=jf,F.from=function(l,c){return e_(F,l,c)},F.fromWeb=function(l,c){return Ff().newStreamReadableFromReadableStream(l,c)},F.toWeb=function(l,c){return Ff().newReadableStreamFromStreamReadable(l,c)},F.wrap=function(l,c){var p,b;return new F({objectMode:null===(p=null!==(b=l.readableObjectMode)&&void 0!==b?b:l.objectMode)||void 0===p||p,...c,destroy(c,p){er.destroyer(l,c),p(c)}}).wrap(l)}}),tY=O((l,c)=>{A(),th(),e6();var p,b=tL(),{ArrayPrototypeSlice:m,Error:_,FunctionPrototypeSymbolHasInstance:v,ObjectDefineProperty:T,ObjectDefineProperties:R,ObjectSetPrototypeOf:P,StringPrototypeToLowerCase:x,Symbol:B,SymbolHasInstance:U}=tf();c.exports=se,se.WritableState=di;var{EventEmitter:L}=(tM(),G(tT)),N=tW().Stream,{Buffer:D}=(tu(),G(e4)),W=tF(),{addAbortSignal:V}=t$(),{getHighWaterMark:H,getDefaultHighWaterMark:K}=tV(),{ERR_INVALID_ARG_TYPE:J,ERR_METHOD_NOT_IMPLEMENTED:X,ERR_MULTIPLE_CALLBACK:ee,ERR_STREAM_CANNOT_PIPE:et,ERR_STREAM_DESTROYED:er,ERR_STREAM_ALREADY_FINISHED:ei,ERR_STREAM_NULL_VALUES:en,ERR_STREAM_WRITE_AFTER_END:es,ERR_UNKNOWN_ENCODING:ea}=tp().codes,{errorOrDestroy:el}=W;function Zs(){}P(se.prototype,N.prototype),P(se,N);var eu=B("kOnFinished");function di(l,c,p){"boolean"!=typeof p&&(p=c instanceof tZ()),this.objectMode=!!(l&&l.objectMode),p&&(this.objectMode=this.objectMode||!!(l&&l.writableObjectMode)),this.highWaterMark=l?H(this,l,"writableHighWaterMark",p):K(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;let b=!!(l&&!1===l.decodeStrings);this.decodeStrings=!b,this.defaultEncoding=l&&l.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=z_.bind(void 0,c),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,hn(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!l||!1!==l.emitClose,this.autoDestroy=!l||!1!==l.autoDestroy,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[eu]=[]}function hn(l){l.buffered=[],l.bufferedIndex=0,l.allBuffers=!0,l.allNoop=!0}function se(l){let c=this instanceof tZ();if(!c&&!v(se,this))return new se(l);this._writableState=new di(l,this,c),l&&("function"==typeof l.write&&(this._write=l.write),"function"==typeof l.writev&&(this._writev=l.writev),"function"==typeof l.destroy&&(this._destroy=l.destroy),"function"==typeof l.final&&(this._final=l.final),"function"==typeof l.construct&&(this._construct=l.construct),l.signal&&V(l.signal,this)),N.call(this,l),W.construct(this,()=>{let l=this._writableState;l.writing||to(this,l),ro(this,l)})}function Jf(l,c,p,m){let _,v=l._writableState;if("function"==typeof p)m=p,p=v.defaultEncoding;else{if(p){if("buffer"!==p&&!D.isEncoding(p))throw new ea(p)}else p=v.defaultEncoding;"function"!=typeof m&&(m=Zs)}if(null===c)throw new en;if(!v.objectMode){if("string"==typeof c)!1!==v.decodeStrings&&(c=D.from(c,p),p="buffer");else if(c instanceof D)p="buffer";else if(N._isUint8Array(c))c=N._uint8ArrayToBuffer(c),p="buffer";else throw new J("chunk",["string","Buffer","Uint8Array"],c)}return v.ending?_=new es:v.destroyed&&(_=new er("write")),_?(b.nextTick(m,_),el(l,_,!0),_):(v.pendingcb++,V_(l,v,c,p,m))}function V_(l,c,p,b,m){let _=c.objectMode?1:p.length;c.length+=_;let v=c.length<c.highWaterMark;return v||(c.needDrain=!0),c.writing||c.corked||c.errored||!c.constructed?(c.buffered.push({chunk:p,encoding:b,callback:m}),c.allBuffers&&"buffer"!==b&&(c.allBuffers=!1),c.allNoop&&m!==Zs&&(c.allNoop=!1)):(c.writelen=_,c.writecb=m,c.writing=!0,c.sync=!0,l._write(p,b,c.onwrite),c.sync=!1),v&&!c.errored&&!c.destroyed}function $f(l,c,p,b,m,_,v){c.writelen=b,c.writecb=v,c.writing=!0,c.sync=!0,c.destroyed?c.onwrite(new er("write")):p?l._writev(m,c.onwrite):l._write(m,_,c.onwrite),c.sync=!1}function Hf(l,c,p,b){--c.pendingcb,b(p),eo(c),el(l,p)}function z_(l,c){let p=l._writableState,m=p.sync,_=p.writecb;if("function"!=typeof _){el(l,new ee);return}p.writing=!1,p.writecb=null,p.length-=p.writelen,p.writelen=0,c?(c.stack,p.errored||(p.errored=c),l._readableState&&!l._readableState.errored&&(l._readableState.errored=c),m?b.nextTick(Hf,l,p,c,_):Hf(l,p,c,_)):(p.buffered.length>p.bufferedIndex&&to(l,p),m?null!==p.afterWriteTickInfo&&p.afterWriteTickInfo.cb===_?p.afterWriteTickInfo.count++:(p.afterWriteTickInfo={count:1,cb:_,stream:l,state:p},b.nextTick(K_,p.afterWriteTickInfo)):Xf(l,p,1,_))}function K_({stream:l,state:c,count:p,cb:b}){return c.afterWriteTickInfo=null,Xf(l,c,p,b)}function Xf(l,c,p,b){for(c.ending||l.destroyed||0!==c.length||!c.needDrain||(c.needDrain=!1,l.emit("drain"));p-- >0;)c.pendingcb--,b();c.destroyed&&eo(c),ro(l,c)}function eo(l){var c,p;if(l.writing)return;for(let p=l.bufferedIndex;p<l.buffered.length;++p){let{chunk:b,callback:m}=l.buffered[p],_=l.objectMode?1:b.length;l.length-=_,m(null!==(c=l.errored)&&void 0!==c?c:new er("write"))}let b=l[eu].splice(0);for(let c=0;c<b.length;c++)b[c](null!==(p=l.errored)&&void 0!==p?p:new er("end"));hn(l)}function to(l,c){if(c.corked||c.bufferProcessing||c.destroyed||!c.constructed)return;let{buffered:p,bufferedIndex:b,objectMode:_}=c,v=p.length-b;if(!v)return;let A=b;if(c.bufferProcessing=!0,v>1&&l._writev){c.pendingcb-=v-1;let b=c.allNoop?Zs:l=>{for(let c=A;c<p.length;++c)p[c].callback(l)},_=c.allNoop&&0===A?p:m(p,A);_.allBuffers=c.allBuffers,$f(l,c,!0,c.length,_,"",b),hn(c)}else{do{let{chunk:b,encoding:m,callback:v}=p[A];p[A++]=null,$f(l,c,!1,_?1:b.length,b,m,v)}while(A<p.length&&!c.writing);A===p.length?hn(c):A>256?(p.splice(0,A),c.bufferedIndex=0):c.bufferedIndex=A}c.bufferProcessing=!1}function fn(l){return l.ending&&!l.destroyed&&l.constructed&&0===l.length&&!l.errored&&0===l.buffered.length&&!l.finished&&!l.writing&&!l.errorEmitted&&!l.closeEmitted}function Q_(l,c){let p=!1;function i(m){if(p){el(l,m??ee());return}if(p=!0,c.pendingcb--,m){let p=c[eu].splice(0);for(let l=0;l<p.length;l++)p[l](m);el(l,m,c.sync)}else fn(c)&&(c.prefinished=!0,l.emit("prefinish"),c.pendingcb++,b.nextTick(Xs,l,c))}c.sync=!0,c.pendingcb++;try{l._final(i)}catch(l){i(l)}c.sync=!1}function G_(l,c){c.prefinished||c.finalCalled||("function"!=typeof l._final||c.destroyed?(c.prefinished=!0,l.emit("prefinish")):(c.finalCalled=!0,Q_(l,c)))}function ro(l,c,p){fn(c)&&(G_(l,c),0===c.pendingcb&&(p?(c.pendingcb++,b.nextTick((l,c)=>{fn(c)?Xs(l,c):c.pendingcb--},l,c)):fn(c)&&(c.pendingcb++,Xs(l,c))))}function Xs(l,c){c.pendingcb--,c.finished=!0;let p=c[eu].splice(0);for(let l=0;l<p.length;l++)p[l]();if(l.emit("finish"),c.autoDestroy){let c=l._readableState;(!c||c.autoDestroy&&(c.endEmitted||!1===c.readable))&&l.destroy()}}di.prototype.getBuffer=function(){return m(this.buffered,this.bufferedIndex)},T(di.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}}),T(se,U,{__proto__:null,value:function(l){return!!v(this,l)||this===se&&l&&l._writableState instanceof di}}),se.prototype.pipe=function(){el(this,new et)},se.prototype.write=function(l,c,p){return!0===Jf(this,l,c,p)},se.prototype.cork=function(){this._writableState.corked++},se.prototype.uncork=function(){let l=this._writableState;l.corked&&(l.corked--,l.writing||to(this,l))},se.prototype.setDefaultEncoding=function(l){if("string"==typeof l&&(l=x(l)),!D.isEncoding(l))throw new ea(l);return this._writableState.defaultEncoding=l,this},se.prototype._write=function(l,c,p){if(this._writev)this._writev([{chunk:l,encoding:c}],p);else throw new X("_write()")},se.prototype._writev=null,se.prototype.end=function(l,c,p){let m,v=this._writableState;if("function"==typeof l?(p=l,l=null,c=null):"function"==typeof c&&(p=c,c=null),null!=l){let p=Jf(this,l,c);p instanceof _&&(m=p)}return v.corked&&(v.corked=1,this.uncork()),m||(v.errored||v.ending?v.finished?m=new ei("end"):v.destroyed&&(m=new er("end")):(v.ending=!0,ro(this,v,!0),v.ended=!0)),"function"==typeof p&&(m||v.finished?b.nextTick(p,m):v[eu].push(p)),this},R(se.prototype,{closed:{__proto__:null,get(){return!!this._writableState&&this._writableState.closed}},destroyed:{__proto__:null,get(){return!!this._writableState&&this._writableState.destroyed},set(l){this._writableState&&(this._writableState.destroyed=l)}},writable:{__proto__:null,get(){let l=this._writableState;return!!l&&!1!==l.writable&&!l.destroyed&&!l.errored&&!l.ending&&!l.ended},set(l){this._writableState&&(this._writableState.writable=!!l)}},writableFinished:{__proto__:null,get(){return!!this._writableState&&this._writableState.finished}},writableObjectMode:{__proto__:null,get(){return!!this._writableState&&this._writableState.objectMode}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return!!this._writableState&&this._writableState.ending}},writableNeedDrain:{__proto__:null,get(){let l=this._writableState;return!!l&&!l.destroyed&&!l.ending&&l.needDrain}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(!1!==this._writableState.writable&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});var eh=W.destroy;function Zf(){return void 0===p&&(p={}),p}se.prototype.destroy=function(l,c){let p=this._writableState;return!p.destroyed&&(p.bufferedIndex<p.buffered.length||p[eu].length)&&b.nextTick(eo,p),eh.call(this,l,c),this},se.prototype._undestroy=W.undestroy,se.prototype._destroy=function(l,c){c(l)},se.prototype[L.captureRejectionSymbol]=function(l){this.destroy(l)},se.fromWeb=function(l,c){return Zf().newStreamWritableFromWritableStream(l,c)},se.toWeb=function(l){return Zf().newWritableStreamFromStreamWritable(l)}}),tQ=O((l,c)=>{A(),th(),e6();var p=tL(),b=(tu(),G(e4)),{isReadable:m,isWritable:_,isIterable:v,isNodeStream:T,isReadableNodeStream:R,isWritableNodeStream:P,isDuplexNodeStream:x,isReadableStream:B,isWritableStream:U}=tN(),L=tD(),{AbortError:N,codes:{ERR_INVALID_ARG_TYPE:D,ERR_INVALID_RETURN_VALUE:W}}=tp(),{destroyer:V}=tF(),H=tZ(),K=tK(),J=tY(),{createDeferredPromise:X}=tU(),ee=tz(),et=globalThis.Blob||b.Blob,er="u">typeof et?function(l){return l instanceof et}:function(l){return!1},ei=globalThis.AbortController||tg().AbortController,{FunctionPrototypeCall:en}=tf(),es=class extends H{constructor(l){super(l),l?.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),l?.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}};function am(l){let{promise:c,resolve:b}=X(),m=new ei,_=m.signal;return{value:l(async function*(){for(;;){let l=c;c=null;let{chunk:m,done:v,cb:A}=await l;if(p.nextTick(A),v)return;if(_.aborted)throw new N(void 0,{cause:_.reason});({promise:c,resolve:b}=X()),yield m}}(),{signal:_}),write(l,c,p){let m=b;b=null,m({chunk:l,done:!1,cb:p})},final(l){let c=b;b=null,c({done:!0,cb:l})},destroy(l,c){m.abort(),c(l)}}}function Ur(l){let c=l.readable&&"function"!=typeof l.readable.read?K.wrap(l.readable):l.readable,p=l.writable,b=!!m(c),v=!!_(p),A,T,R,P,x;function d(l){let c=P;P=null,c?c(l):l&&x.destroy(l)}return x=new es({readableObjectMode:!!(null!=c&&c.readableObjectMode),writableObjectMode:!!(null!=p&&p.writableObjectMode),readable:b,writable:v}),v&&(L(p,l=>{v=!1,l&&V(c,l),d(l)}),x._write=function(l,c,b){p.write(l,c)?b():A=b},x._final=function(l){p.end(),T=l},p.on("drain",function(){if(A){let l=A;A=null,l()}}),p.on("finish",function(){if(T){let l=T;T=null,l()}})),b&&(L(c,l=>{b=!1,l&&V(c,l),d(l)}),c.on("readable",function(){if(R){let l=R;R=null,l()}}),c.on("end",function(){x.push(null)}),x._read=function(){for(;;){let l=c.read();if(null===l){R=x._read;return}if(!x.push(l))return}}),x._destroy=function(l,b){l||null===P||(l=new N),R=null,A=null,T=null,null===P?b(l):(P=b,V(p,l),V(c,l))},x}c.exports=function t(l,c){if(x(l))return l;if(R(l))return Ur({readable:l});if(P(l))return Ur({writable:l});if(T(l))return Ur({writable:!1,readable:!1});if(B(l))return Ur({readable:K.fromWeb(l)});if(U(l))return Ur({writable:J.fromWeb(l)});if("function"==typeof l){let{value:b,write:m,final:_,destroy:A}=am(l);if(v(b))return ee(es,b,{objectMode:!0,write:m,final:_,destroy:A});let T=b?.then;if("function"==typeof T){let l,c=en(T,b,l=>{if(null!=l)throw new W("nully","body",l)},c=>{V(l,c)});return l=new es({objectMode:!0,readable:!1,write:m,final(l){_(async()=>{try{await c,p.nextTick(l,null)}catch(c){p.nextTick(l,c)}})},destroy:A})}throw new W("Iterable, AsyncIterable or AsyncFunction",c,b)}if(er(l))return t(l.arrayBuffer());if(v(l))return ee(es,l,{objectMode:!0,writable:!1});if(B(l?.readable)&&U(l?.writable))return es.fromWeb(l);if("object"==typeof l?.writable||"object"==typeof l?.readable)return Ur({readable:null!=l&&l.readable?R(l?.readable)?l?.readable:t(l.readable):void 0,writable:null!=l&&l.writable?P(l?.writable)?l?.writable:t(l.writable):void 0});let b=l?.then;if("function"==typeof b){let c;return en(b,l,l=>{null!=l&&c.push(l),c.push(null)},l=>{V(c,l)}),c=new es({objectMode:!0,writable:!1,read(){}})}throw new D(c,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],l)}}),tZ=O((l,c)=>{A(),th(),e6();var p,b,{ObjectDefineProperties:m,ObjectGetOwnPropertyDescriptor:_,ObjectKeys:v,ObjectSetPrototypeOf:T}=tf();c.exports=$e;var R=tK(),P=tY();T($e.prototype,R.prototype),T($e,R);{let l=v(P.prototype);for(let c=0;c<l.length;c++){let p=l[c];$e.prototype[p]||($e.prototype[p]=P.prototype[p])}}function $e(l){if(!(this instanceof $e))return new $e(l);R.call(this,l),P.call(this,l),l?(this.allowHalfOpen=!1!==l.allowHalfOpen,!1===l.readable&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),!1===l.writable&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}function bh(){return void 0===p&&(p={}),p}m($e.prototype,{writable:{__proto__:null,..._(P.prototype,"writable")},writableHighWaterMark:{__proto__:null,..._(P.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,..._(P.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,..._(P.prototype,"writableBuffer")},writableLength:{__proto__:null,..._(P.prototype,"writableLength")},writableFinished:{__proto__:null,..._(P.prototype,"writableFinished")},writableCorked:{__proto__:null,..._(P.prototype,"writableCorked")},writableEnded:{__proto__:null,..._(P.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,..._(P.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set(l){this._readableState&&this._writableState&&(this._readableState.destroyed=l,this._writableState.destroyed=l)}}}),$e.fromWeb=function(l,c){return bh().newStreamDuplexFromReadableWritablePair(l,c)},$e.toWeb=function(l){return bh().newReadableWritablePairFromDuplex(l)},$e.from=function(l){return b||(b=tQ()),b(l,"body")}}),tJ=O((l,c)=>{A(),th(),e6();var{ObjectSetPrototypeOf:p,Symbol:b}=tf();c.exports=vt;var{ERR_METHOD_NOT_IMPLEMENTED:m}=tp().codes,_=tZ(),{getHighWaterMark:v}=tV();p(vt.prototype,_.prototype),p(vt,_);var T=b("kCallback");function vt(l){if(!(this instanceof vt))return new vt(l);let c=l?v(this,l,"readableHighWaterMark",!0):null;0===c&&(l={...l,highWaterMark:null,readableHighWaterMark:c,writableHighWaterMark:l.writableHighWaterMark||0}),_.call(this,l),this._readableState.sync=!1,this[T]=null,l&&("function"==typeof l.transform&&(this._transform=l.transform),"function"==typeof l.flush&&(this._flush=l.flush)),this.on("prefinish",dm)}function ao(l){"function"!=typeof this._flush||this.destroyed?(this.push(null),l&&l()):this._flush((c,p)=>{if(c){l?l(c):this.destroy(c);return}null!=p&&this.push(p),this.push(null),l&&l()})}function dm(){this._final!==ao&&ao.call(this)}vt.prototype._final=ao,vt.prototype._transform=function(l,c,p){throw new m("_transform()")},vt.prototype._write=function(l,c,p){let b=this._readableState,m=this._writableState,_=b.length;this._transform(l,c,(l,c)=>{if(l){p(l);return}null!=c&&this.push(c),m.ended||_===b.length||b.length<b.highWaterMark?p():this[T]=p})},vt.prototype._read=function(){if(this[T]){let l=this[T];this[T]=null,l()}}}),tX=O((l,c)=>{A(),th(),e6();var{ObjectSetPrototypeOf:p}=tf();c.exports=Dr;var b=tJ();function Dr(l){if(!(this instanceof Dr))return new Dr(l);b.call(this,l)}p(Dr.prototype,b.prototype),p(Dr,b),Dr.prototype._transform=function(l,c,p){p(null,l)}}),t0=O((l,c)=>{A(),th(),e6();var p,b,m,_=tL(),{ArrayIsArray:v,Promise:T,SymbolAsyncIterator:R,SymbolDispose:P}=tf(),x=tD(),{once:B}=tU(),U=tF(),L=tZ(),{aggregateTwoErrors:N,codes:{ERR_INVALID_ARG_TYPE:D,ERR_INVALID_RETURN_VALUE:W,ERR_MISSING_ARGS:V,ERR_STREAM_DESTROYED:H,ERR_STREAM_PREMATURE_CLOSE:K},AbortError:J}=tp(),{validateFunction:X,validateAbortSignal:ee}=tj(),{isIterable:et,isReadable:er,isReadableNodeStream:ei,isNodeStream:en,isTransformStream:es,isWebStream:ea,isReadableStream:el,isReadableFinished:eu}=tN(),eh=globalThis.AbortController||tg().AbortController;function Ih(l,c,p){let b=!1;return l.on("close",()=>{b=!0}),{destroy:c=>{b||(b=!0,U.destroyer(l,c||new H("pipe")))},cleanup:x(l,{readable:c,writable:p},l=>{b=!l})}}function Pm(l){return X(l[l.length-1],"streams[stream.length - 1]"),l.pop()}function _o(l){if(et(l))return l;if(ei(l))return Bm(l);throw new D("val",["Readable","Iterable","AsyncIterable"],l)}async function*Bm(l){b||(b=tK()),yield*b.prototype[R].call(l)}async function gn(l,c,p,{end:b}){let m,_=null,s=l=>{if(l&&(m=l),_){let l=_;_=null,l()}},a=()=>new T((l,c)=>{m?c(m):_=()=>{m?c(m):l()}});c.on("drain",s);let v=x(c,{readable:!1},s);try{for await(let p of(c.writableNeedDrain&&await a(),l))c.write(p)||await a();b&&(c.end(),await a()),p()}catch(l){p(m!==l?N(m,l):l)}finally{v(),c.off("drain",s)}}async function mo(l,c,p,{end:b}){es(c)&&(c=c.writable);let m=c.getWriter();try{for await(let c of l)await m.ready,m.write(c).catch(()=>{});await m.ready,b&&await m.close(),p()}catch(l){try{await m.abort(l),p(l)}catch(l){p(l)}}}function xm(...l){return Th(l,B(Pm(l)))}function Th(l,c,b){let A,T;if(1===l.length&&v(l[0])&&(l=l[0]),l.length<2)throw new V("streams");let R=new eh,x=R.signal,B=b?.signal,U=[];function a(){E(new J)}ee(B,"options.signal"),m=m||tU().addAbortListener,B&&(A=m(B,a));let N,H,K=[],X=0;function y(l){E(l,0==--X)}function E(l,p){var b;if(l&&(!N||"ERR_STREAM_PREMATURE_CLOSE"===N.code)&&(N=l),!(!N&&!p)){for(;K.length;)K.shift()(N);null===(b=A)||void 0===b||b[P](),R.abort(),p&&(N||U.forEach(l=>l()),_.nextTick(c,N,H))}}for(let c=0;c<l.length;c++){let m=l[c],v=c<l.length-1,A=c>0,R=v||b?.end!==!1,P=c===l.length-1;if(en(m)){let $=function(l){l&&"AbortError"!==l.name&&"ERR_STREAM_PREMATURE_CLOSE"!==l.code&&y(l)};if(R){let{destroy:l,cleanup:c}=Ih(m,v,A);K.push(l),er(m)&&P&&U.push(c)}m.on("error",$),er(m)&&P&&U.push(()=>{m.removeListener("error",$)})}if(0===c){if("function"==typeof m){if(!et(T=m({signal:x})))throw new W("Iterable, AsyncIterable or Stream","source",T)}else T=et(m)||ei(m)||es(m)?m:L.from(m)}else if("function"==typeof m){var eu,ed;if(T=m(T=es(T)?_o(null===(eu=T)||void 0===eu?void 0:eu.readable):_o(T),{signal:x}),v){if(!et(T,!0))throw new W("AsyncIterable",`transform[${c-1}]`,T)}else{p||(p=tX());let l=new p({objectMode:!0}),c=null===(ed=T)||void 0===ed?void 0:ed.then;if("function"==typeof c)X++,c.call(T,c=>{H=c,null!=c&&l.write(c),R&&l.end(),_.nextTick(y)},c=>{l.destroy(c),_.nextTick(y,c)});else if(et(T,!0))X++,gn(T,l,y,{end:R});else if(el(T)||es(T)){let c=T.readable||T;X++,gn(c,l,y,{end:R})}else throw new W("AsyncIterable or Promise","destination",T);let{destroy:b,cleanup:m}=Ih(T=l,!1,!0);K.push(b),P&&U.push(m)}}else if(en(m)){if(ei(T)){X+=2;let l=Om(T,m,y,{end:R});er(m)&&P&&U.push(l)}else if(es(T)||el(T)){let l=T.readable||T;X++,gn(l,m,y,{end:R})}else if(et(T))X++,gn(T,m,y,{end:R});else throw new D("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],T);T=m}else if(ea(m)){if(ei(T))X++,mo(_o(T),m,y,{end:R});else if(el(T)||et(T))X++,mo(T,m,y,{end:R});else if(es(T))X++,mo(T.readable,m,y,{end:R});else throw new D("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],T);T=m}else T=L.from(m)}return(null!=x&&x.aborted||null!=B&&B.aborted)&&_.nextTick(a),T}function Om(l,c,p,{end:b}){let m=!1;if(c.on("close",()=>{m||p(new K)}),l.pipe(c,{end:!1}),b){let s=function(){m=!0,c.end()};eu(l)?_.nextTick(s):l.once("end",s)}else p();return x(l,{readable:!0,writable:!1},c=>{let b=l._readableState;c&&"ERR_STREAM_PREMATURE_CLOSE"===c.code&&b&&b.ended&&!b.errored&&!b.errorEmitted?l.once("end",p).once("error",p):p(c)}),x(c,{readable:!1,writable:!0},p)}c.exports={pipelineImpl:Th,pipeline:xm}}),t1=O((l,c)=>{A(),th(),e6();var{pipeline:p}=t0(),b=tZ(),{destroyer:m}=tF(),{isNodeStream:_,isReadable:v,isWritable:T,isWebStream:R,isTransformStream:P,isWritableStream:x,isReadableStream:B}=tN(),{AbortError:U,codes:{ERR_INVALID_ARG_VALUE:L,ERR_MISSING_ARGS:N}}=tp(),D=tD();c.exports=function(...l){let c,A,W,V,H;if(0===l.length)throw new N("streams");if(1===l.length)return b.from(l[0]);let K=[...l];if("function"==typeof l[0]&&(l[0]=b.from(l[0])),"function"==typeof l[l.length-1]){let c=l.length-1;l[c]=b.from(l[c])}for(let c=0;c<l.length;++c)if(!(!_(l[c])&&!R(l[c]))){if(c<l.length-1&&!(v(l[c])||B(l[c])||P(l[c])))throw new L(`streams[${c}]`,K[c],"must be readable");if(c>0&&!(T(l[c])||x(l[c])||P(l[c])))throw new L(`streams[${c}]`,K[c],"must be writable")}function u(l){let c=V;V=null,c?c(l):l?H.destroy(l):et||ee||H.destroy()}let J=l[0],X=p(l,u),ee=!!(T(J)||x(J)||P(J)),et=!!(v(X)||B(X)||P(X));if(H=new b({writableObjectMode:!!(null!=J&&J.writableObjectMode),readableObjectMode:!!(null!=X&&X.readableObjectMode),writable:ee,readable:et}),ee){if(_(J))H._write=function(l,p,b){J.write(l,p)?b():c=b},H._final=function(l){J.end(),A=l},J.on("drain",function(){if(c){let l=c;c=null,l()}});else if(R(J)){let l=(P(J)?J.writable:J).getWriter();H._write=async function(c,p,b){try{await l.ready,l.write(c).catch(()=>{}),b()}catch(l){b(l)}},H._final=async function(c){try{await l.ready,l.close().catch(()=>{}),A=c}catch(l){c(l)}}}D(P(X)?X.readable:X,()=>{if(A){let l=A;A=null,l()}})}if(et){if(_(X))X.on("readable",function(){if(W){let l=W;W=null,l()}}),X.on("end",function(){H.push(null)}),H._read=function(){for(;;){let l=X.read();if(null===l){W=H._read;return}if(!H.push(l))return}};else if(R(X)){let l=(P(X)?X.readable:X).getReader();H._read=async function(){for(;;)try{let{value:c,done:p}=await l.read();if(!H.push(c))return;if(p){H.push(null);return}}catch{return}}}}return H._destroy=function(l,p){l||null===V||(l=new U),W=null,c=null,A=null,null===V?p(l):(V=p,_(X)&&m(X,l))},H}}),t2=O((l,c)=>{A(),th(),e6();var p=globalThis.AbortController||tg().AbortController,{codes:{ERR_INVALID_ARG_VALUE:b,ERR_INVALID_ARG_TYPE:m,ERR_MISSING_ARGS:_,ERR_OUT_OF_RANGE:v},AbortError:T}=tp(),{validateAbortSignal:R,validateInteger:P,validateObject:x}=tj(),B=tf().Symbol("kWeak"),U=tf().Symbol("kResistStopPropagation"),{finished:L}=tD(),N=t1(),{addAbortSignalNoValidate:D}=t$(),{isWritable:W,isNodeStream:V}=tN(),{deprecate:H}=tU(),{ArrayPrototypePush:K,Boolean:J,MathFloor:X,Number:ee,NumberIsNaN:et,Promise:er,PromiseReject:ei,PromiseResolve:en,PromisePrototypeThen:es,Symbol:ea}=tf(),el=ea("kEmpty"),eu=ea("kEof");function r0(l,c){if(null!=c&&x(c,"options"),c?.signal!=null&&R(c.signal,"options.signal"),V(l)&&!W(l))throw new b("stream",l,"must be writable");let p=N(this,l);return null!=c&&c.signal&&D(c.signal,p),p}function En(l,c){if("function"!=typeof l)throw new m("fn",["Function","AsyncFunction"],l);null!=c&&x(c,"options"),c?.signal!=null&&R(c.signal,"options.signal");let p=1;c?.concurrency!=null&&(p=X(c.concurrency));let b=p-1;return c?.highWaterMark!=null&&(b=X(c.highWaterMark)),P(p,"options.concurrency",1),P(b,"options.highWaterMark",0),b+=p,(async function*(){let m=tU().AbortSignalAny([c?.signal].filter(J)),_=this,v=[],A={signal:m},R,P,x=!1,B=0;function y(){x=!0,E()}function E(){B-=1,w()}function w(){P&&!x&&B<p&&v.length<b&&(P(),P=null)}(async function(){try{for await(let c of _){if(x)return;if(m.aborted)throw new T;try{if((c=l(c,A))===el)continue;c=en(c)}catch(l){c=ei(l)}B+=1,es(c,E,y),v.push(c),R&&(R(),R=null),!x&&(v.length>=b||B>=p)&&await new er(l=>{P=l})}v.push(eu)}catch(c){let l=ei(c);es(l,E,y),v.push(l)}finally{x=!0,R&&(R(),R=null)}})();try{for(;;){for(;v.length>0;){let l=await v[0];if(l===eu)return;if(m.aborted)throw new T;l!==el&&(yield l),v.shift(),w()}await new er(l=>{R=l})}}finally{x=!0,P&&(P(),P=null)}}).call(this)}function i0(l){return null!=l&&x(l,"options"),l?.signal!=null&&R(l.signal,"options.signal"),(async function*(){let c=0;for await(let b of this){var p;if(null!=l&&null!==(p=l.signal)&&void 0!==p&&p.aborted)throw new T({cause:l.signal.reason});yield[c++,b]}}).call(this)}async function Fh(l,c){for await(let p of Io.call(this,l,c))return!0;return!1}async function n0(l,c){if("function"!=typeof l)throw new m("fn",["Function","AsyncFunction"],l);return!await Fh.call(this,async(...c)=>!await l(...c),c)}async function s0(l,c){for await(let p of Io.call(this,l,c))return p}async function o0(l,c){if("function"!=typeof l)throw new m("fn",["Function","AsyncFunction"],l);async function r(c,p){return await l(c,p),el}for await(let l of En.call(this,r,c));}function Io(l,c){if("function"!=typeof l)throw new m("fn",["Function","AsyncFunction"],l);async function r(c,p){return await l(c,p)?c:el}return En.call(this,r,c)}var eh=class extends _{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}};async function a0(l,c,b){var _,v;if("function"!=typeof l)throw new m("reducer",["Function","AsyncFunction"],l);null!=b&&x(b,"options"),b?.signal!=null&&R(b.signal,"options.signal");let A=arguments.length>1;if(null!=b&&null!==(_=b.signal)&&void 0!==_&&_.aborted){let l=new T(void 0,{cause:b.signal.reason});throw this.once("error",()=>{}),await L(this.destroy(l)),l}let P=new p,N=P.signal;null!=b&&b.signal&&b.signal.addEventListener("abort",()=>P.abort(),{once:!0,[B]:this,[U]:!0});let D=!1;try{for await(let p of this){if(D=!0,null!=b&&null!==(v=b.signal)&&void 0!==v&&v.aborted)throw new T;A?c=await l(c,p,{signal:N}):(c=p,A=!0)}if(!D&&!A)throw new eh}finally{P.abort()}return c}async function l0(l){null!=l&&x(l,"options"),l?.signal!=null&&R(l.signal,"options.signal");let c=[];for await(let b of this){var p;if(null!=l&&null!==(p=l.signal)&&void 0!==p&&p.aborted)throw new T(void 0,{cause:l.signal.reason});K(c,b)}return c}function u0(l,c){let p=En.call(this,l,c);return(async function*(){for await(let l of p)yield*l}).call(this)}function Wh(l){if(et(l=ee(l)))return 0;if(l<0)throw new v("number",">= 0",l);return l}function c0(l,c){return null!=c&&x(c,"options"),c?.signal!=null&&R(c.signal,"options.signal"),l=Wh(l),(async function*(){var p,b;if(null!=c&&null!==(p=c.signal)&&void 0!==p&&p.aborted)throw new T;for await(let p of this){if(null!=c&&null!==(b=c.signal)&&void 0!==b&&b.aborted)throw new T;l--<=0&&(yield p)}}).call(this)}function f0(l,c){return null!=c&&x(c,"options"),c?.signal!=null&&R(c.signal,"options.signal"),l=Wh(l),(async function*(){var p,b;if(null!=c&&null!==(p=c.signal)&&void 0!==p&&p.aborted)throw new T;for await(let p of this){if(null!=c&&null!==(b=c.signal)&&void 0!==b&&b.aborted)throw new T;if(l-- >0&&(yield p),l<=0)return}}).call(this)}c.exports.streamReturningOperators={asIndexedPairs:H(i0,"readable.asIndexedPairs will be removed in a future version."),drop:c0,filter:Io,flatMap:u0,map:En,take:f0,compose:r0},c.exports.promiseReturningOperators={every:n0,forEach:o0,reduce:a0,toArray:l0,some:Fh,find:s0}}),t3=O((l,c)=>{A(),th(),e6();var{ArrayPrototypePop:p,Promise:b}=tf(),{isIterable:m,isNodeStream:_,isWebStream:v}=tN(),{pipelineImpl:T}=t0(),{finished:R}=tD();function _0(...l){return new b((c,b)=>{let A,R,P=l[l.length-1];if(P&&"object"==typeof P&&!_(P)&&!m(P)&&!v(P)){let c=p(l);A=c.signal,R=c.end}T(l,(l,p)=>{l?b(l):c(p)},{signal:A,end:R})})}t6(),c.exports={finished:R,pipeline:_0}}),t6=O((l,c)=>{A(),th(),e6();var{Buffer:p}=(tu(),G(e4)),{ObjectDefineProperty:b,ObjectKeys:m,ReflectApply:_}=tf(),{promisify:{custom:v}}=tU(),{streamReturningOperators:T,promiseReturningOperators:R}=t2(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:P}}=tp(),x=t1(),{setDefaultHighWaterMark:B,getDefaultHighWaterMark:U}=tV(),{pipeline:L}=t0(),{destroyer:N}=tF(),D=tD(),W=t3(),V=tN(),H=c.exports=tW().Stream;for(let l of(H.isDestroyed=V.isDestroyed,H.isDisturbed=V.isDisturbed,H.isErrored=V.isErrored,H.isReadable=V.isReadable,H.isWritable=V.isWritable,H.Readable=tK(),m(T))){let r=function(...l){if(new.target)throw P();return H.Readable.from(_(c,this,l))},c=T[l];b(r,"name",{__proto__:null,value:c.name}),b(r,"length",{__proto__:null,value:c.length}),b(H.Readable.prototype,l,{__proto__:null,value:r,enumerable:!1,configurable:!0,writable:!0})}for(let l of m(R)){let r=function(...l){if(new.target)throw P();return _(c,this,l)},c=R[l];b(r,"name",{__proto__:null,value:c.name}),b(r,"length",{__proto__:null,value:c.length}),b(H.Readable.prototype,l,{__proto__:null,value:r,enumerable:!1,configurable:!0,writable:!0})}H.Writable=tY(),H.Duplex=tZ(),H.Transform=tJ(),H.PassThrough=tX(),H.pipeline=L;var{addAbortSignal:K}=t$();H.addAbortSignal=K,H.finished=D,H.destroy=N,H.compose=x,H.setDefaultHighWaterMark=B,H.getDefaultHighWaterMark=U,b(H,"promises",{__proto__:null,configurable:!0,enumerable:!0,get:()=>W}),b(L,v,{__proto__:null,enumerable:!0,get:()=>W.pipeline}),b(D,v,{__proto__:null,enumerable:!0,get:()=>W.finished}),H.Stream=H,H._isUint8Array=function(l){return l instanceof Uint8Array},H._uint8ArrayToBuffer=function(l){return p.from(l.buffer,l.byteOffset,l.byteLength)}}),t4=O((l,c)=>{A(),th(),e6();var p=t6(),b=t3(),m=p.Readable.destroy;c.exports=p.Readable,c.exports._uint8ArrayToBuffer=p._uint8ArrayToBuffer,c.exports._isUint8Array=p._isUint8Array,c.exports.isDisturbed=p.isDisturbed,c.exports.isErrored=p.isErrored,c.exports.isReadable=p.isReadable,c.exports.Readable=p.Readable,c.exports.Writable=p.Writable,c.exports.Duplex=p.Duplex,c.exports.Transform=p.Transform,c.exports.PassThrough=p.PassThrough,c.exports.addAbortSignal=p.addAbortSignal,c.exports.finished=p.finished,c.exports.destroy=p.destroy,c.exports.destroy=m,c.exports.pipeline=p.pipeline,c.exports.compose=p.compose,Object.defineProperty(p,"promises",{configurable:!0,enumerable:!0,get:()=>b}),c.exports.Stream=p.Stream,c.exports.default=c.exports}),t5=O((l,c)=>{A(),th(),e6(),"function"==typeof Object.create?c.exports=function(l,c){c&&(l.super_=c,l.prototype=Object.create(c.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}))}:c.exports=function(l,c){if(c){l.super_=c;var i=function(){};i.prototype=c.prototype,l.prototype=new i,l.prototype.constructor=l}}}),t8=O((l,c)=>{A(),th(),e6();var{Buffer:p}=(tu(),G(e4)),b=Symbol.for("BufferList");function Z(l){if(!(this instanceof Z))return new Z(l);Z._init.call(this,l)}Z._init=function(l){Object.defineProperty(this,b,{value:!0}),this._bufs=[],this.length=0,l&&this.append(l)},Z.prototype._new=function(l){return new Z(l)},Z.prototype._offset=function(l){if(0===l)return[0,0];let c=0;for(let p=0;p<this._bufs.length;p++){let b=c+this._bufs[p].length;if(l<b||p===this._bufs.length-1)return[p,l-c];c=b}},Z.prototype._reverseOffset=function(l){let c=l[0],p=l[1];for(let l=0;l<c;l++)p+=this._bufs[l].length;return p},Z.prototype.get=function(l){if(l>this.length||l<0)return;let c=this._offset(l);return this._bufs[c[0]][c[1]]},Z.prototype.slice=function(l,c){return"number"==typeof l&&l<0&&(l+=this.length),"number"==typeof c&&c<0&&(c+=this.length),this.copy(null,0,l,c)},Z.prototype.copy=function(l,c,b,m){if(("number"!=typeof b||b<0)&&(b=0),("number"!=typeof m||m>this.length)&&(m=this.length),b>=this.length||m<=0)return l||p.alloc(0);let _=!!l,v=this._offset(b),A=m-b,T=A,R=_&&c||0,P=v[1];if(0===b&&m===this.length){if(!_)return 1===this._bufs.length?this._bufs[0]:p.concat(this._bufs,this.length);for(let c=0;c<this._bufs.length;c++)this._bufs[c].copy(l,R),R+=this._bufs[c].length;return l}if(T<=this._bufs[v[0]].length-P)return _?this._bufs[v[0]].copy(l,c,P,P+T):this._bufs[v[0]].slice(P,P+T);_||(l=p.allocUnsafe(A));for(let c=v[0];c<this._bufs.length;c++){let p=this._bufs[c].length-P;if(T>p)this._bufs[c].copy(l,R,P),R+=p;else{this._bufs[c].copy(l,R,P,P+T),R+=p;break}T-=p,P&&(P=0)}return l.length>R?l.slice(0,R):l},Z.prototype.shallowSlice=function(l,c){if(l=l||0,c="number"!=typeof c?this.length:c,l<0&&(l+=this.length),c<0&&(c+=this.length),l===c)return this._new();let p=this._offset(l),b=this._offset(c),m=this._bufs.slice(p[0],b[0]+1);return 0===b[1]?m.pop():m[m.length-1]=m[m.length-1].slice(0,b[1]),0!==p[1]&&(m[0]=m[0].slice(p[1])),this._new(m)},Z.prototype.toString=function(l,c,p){return this.slice(c,p).toString(l)},Z.prototype.consume=function(l){if(Number.isNaN(l=Math.trunc(l))||l<=0)return this;for(;this._bufs.length;)if(l>=this._bufs[0].length)l-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift();else{this._bufs[0]=this._bufs[0].slice(l),this.length-=l;break}return this},Z.prototype.duplicate=function(){let l=this._new();for(let c=0;c<this._bufs.length;c++)l.append(this._bufs[c]);return l},Z.prototype.append=function(l){if(null==l)return this;if(l.buffer)this._appendBuffer(p.from(l.buffer,l.byteOffset,l.byteLength));else if(Array.isArray(l))for(let c=0;c<l.length;c++)this.append(l[c]);else if(this._isBufferList(l))for(let c=0;c<l._bufs.length;c++)this.append(l._bufs[c]);else"number"==typeof l&&(l=l.toString()),this._appendBuffer(p.from(l));return this},Z.prototype._appendBuffer=function(l){this._bufs.push(l),this.length+=l.length},Z.prototype.indexOf=function(l,c,b){if(void 0===b&&"string"==typeof c&&(b=c,c=void 0),"function"==typeof l||Array.isArray(l))throw TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if("number"==typeof l?l=p.from([l]):"string"==typeof l?l=p.from(l,b):this._isBufferList(l)?l=l.slice():Array.isArray(l.buffer)?l=p.from(l.buffer,l.byteOffset,l.byteLength):p.isBuffer(l)||(l=p.from(l)),isNaN(c=Number(c||0))&&(c=0),c<0&&(c=this.length+c),c<0&&(c=0),0===l.length)return c>this.length?this.length:c;let m=this._offset(c),_=m[0],v=m[1];for(;_<this._bufs.length;_++){let c=this._bufs[_];for(;v<c.length;)if(c.length-v>=l.length){let p=c.indexOf(l,v);if(-1!==p)return this._reverseOffset([_,p]);v=c.length-l.length+1}else{let c=this._reverseOffset([_,v]);if(this._match(c,l))return c;v++}v=0}return -1},Z.prototype._match=function(l,c){if(this.length-l<c.length)return!1;for(let p=0;p<c.length;p++)if(this.get(l+p)!==c[p])return!1;return!0},function(){let l={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readBigInt64BE:8,readBigInt64LE:8,readBigUInt64BE:8,readBigUInt64LE:8,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(let c in l)!function(c){null===l[c]?Z.prototype[c]=function(l,p){return this.slice(l,l+p)[c](0,p)}:Z.prototype[c]=function(p=0){return this.slice(p,p+l[c])[c](0)}}(c)}(),Z.prototype._isBufferList=function(l){return l instanceof Z||Z.isBufferList(l)},Z.isBufferList=function(l){return null!=l&&l[b]},c.exports=Z}),t7=O((l,c)=>{A(),th(),e6();var p=t4().Duplex,b=t5(),m=t8();function Ee(l){if(!(this instanceof Ee))return new Ee(l);if("function"==typeof l){this._callback=l;let c=(function(l){this._callback&&(this._callback(l),this._callback=null)}).bind(this);this.on("pipe",function(l){l.on("error",c)}),this.on("unpipe",function(l){l.removeListener("error",c)}),l=null}m._init.call(this,l),p.call(this)}b(Ee,p),Object.assign(Ee.prototype,m.prototype),Ee.prototype._new=function(l){return new Ee(l)},Ee.prototype._write=function(l,c,p){this._appendBuffer(l),"function"==typeof p&&p()},Ee.prototype._read=function(l){if(!this.length)return this.push(null);l=Math.min(l,this.length),this.push(this.slice(0,l)),this.consume(l)},Ee.prototype.end=function(l){p.prototype.end.call(this,l),this._callback&&(this._callback(null,this.slice()),this._callback=null)},Ee.prototype._destroy=function(l,c){this._bufs.length=0,this.length=0,c(l)},Ee.prototype._isBufferList=function(l){return l instanceof Ee||l instanceof m||Ee.isBufferList(l)},Ee.isBufferList=m.isBufferList,c.exports=Ee,c.exports.BufferListStream=Ee,c.exports.BufferList=m}),t9=O((l,c)=>{A(),th(),e6(),c.exports=class{constructor(){this.cmd=null,this.retain=!1,this.qos=0,this.dup=!1,this.length=-1,this.topic=null,this.payload=null}}}),re=O((l,c)=>{A(),th(),e6();var p=c.exports,{Buffer:b}=(tu(),G(e4));for(let l in p.types={0:"reserved",1:"connect",2:"connack",3:"publish",4:"puback",5:"pubrec",6:"pubrel",7:"pubcomp",8:"subscribe",9:"suback",10:"unsubscribe",11:"unsuback",12:"pingreq",13:"pingresp",14:"disconnect",15:"auth"},p.requiredHeaderFlags={1:0,2:0,4:0,5:0,6:2,7:0,8:2,9:0,10:2,11:0,12:0,13:0,14:0,15:0},p.requiredHeaderFlagsErrors={},p.requiredHeaderFlags){let c=p.requiredHeaderFlags[l];p.requiredHeaderFlagsErrors[l]="Invalid header flag bits, must be 0x"+c.toString(16)+" for "+p.types[l]+" packet"}for(let l in p.codes={},p.types){let c=p.types[l];p.codes[c]=l}for(let l in p.CMD_SHIFT=4,p.CMD_MASK=240,p.DUP_MASK=8,p.QOS_MASK=3,p.QOS_SHIFT=1,p.RETAIN_MASK=1,p.VARBYTEINT_MASK=127,p.VARBYTEINT_FIN_MASK=128,p.VARBYTEINT_MAX=268435455,p.SESSIONPRESENT_MASK=1,p.SESSIONPRESENT_HEADER=b.from([p.SESSIONPRESENT_MASK]),p.CONNACK_HEADER=b.from([p.codes.connack<<p.CMD_SHIFT]),p.USERNAME_MASK=128,p.PASSWORD_MASK=64,p.WILL_RETAIN_MASK=32,p.WILL_QOS_MASK=24,p.WILL_QOS_SHIFT=3,p.WILL_FLAG_MASK=4,p.CLEAN_SESSION_MASK=2,p.CONNECT_HEADER=b.from([p.codes.connect<<p.CMD_SHIFT]),p.properties={sessionExpiryInterval:17,willDelayInterval:24,receiveMaximum:33,maximumPacketSize:39,topicAliasMaximum:34,requestResponseInformation:25,requestProblemInformation:23,userProperties:38,authenticationMethod:21,authenticationData:22,payloadFormatIndicator:1,messageExpiryInterval:2,contentType:3,responseTopic:8,correlationData:9,maximumQoS:36,retainAvailable:37,assignedClientIdentifier:18,reasonString:31,wildcardSubscriptionAvailable:40,subscriptionIdentifiersAvailable:41,sharedSubscriptionAvailable:42,serverKeepAlive:19,responseInformation:26,serverReference:28,topicAlias:35,subscriptionIdentifier:11},p.propertiesCodes={},p.properties){let c=p.properties[l];p.propertiesCodes[c]=l}function Dt(l){return[0,1,2].map(c=>[0,1].map(m=>[0,1].map(_=>{let v=b.alloc(1);return v.writeUInt8(p.codes[l]<<p.CMD_SHIFT|(m?p.DUP_MASK:0)|c<<p.QOS_SHIFT|_,0,!0),v})))}p.propertiesTypes={sessionExpiryInterval:"int32",willDelayInterval:"int32",receiveMaximum:"int16",maximumPacketSize:"int32",topicAliasMaximum:"int16",requestResponseInformation:"byte",requestProblemInformation:"byte",userProperties:"pair",authenticationMethod:"string",authenticationData:"binary",payloadFormatIndicator:"byte",messageExpiryInterval:"int32",contentType:"string",responseTopic:"string",correlationData:"binary",maximumQoS:"int8",retainAvailable:"byte",assignedClientIdentifier:"string",reasonString:"string",wildcardSubscriptionAvailable:"byte",subscriptionIdentifiersAvailable:"byte",sharedSubscriptionAvailable:"byte",serverKeepAlive:"int16",responseInformation:"string",serverReference:"string",topicAlias:"int16",subscriptionIdentifier:"var"},p.PUBLISH_HEADER=Dt("publish"),p.SUBSCRIBE_HEADER=Dt("subscribe"),p.SUBSCRIBE_OPTIONS_QOS_MASK=3,p.SUBSCRIBE_OPTIONS_NL_MASK=1,p.SUBSCRIBE_OPTIONS_NL_SHIFT=2,p.SUBSCRIBE_OPTIONS_RAP_MASK=1,p.SUBSCRIBE_OPTIONS_RAP_SHIFT=3,p.SUBSCRIBE_OPTIONS_RH_MASK=3,p.SUBSCRIBE_OPTIONS_RH_SHIFT=4,p.SUBSCRIBE_OPTIONS_RH=[0,16,32],p.SUBSCRIBE_OPTIONS_NL=4,p.SUBSCRIBE_OPTIONS_RAP=8,p.SUBSCRIBE_OPTIONS_QOS=[0,1,2],p.UNSUBSCRIBE_HEADER=Dt("unsubscribe"),p.ACKS={unsuback:Dt("unsuback"),puback:Dt("puback"),pubcomp:Dt("pubcomp"),pubrel:Dt("pubrel"),pubrec:Dt("pubrec")},p.SUBACK_HEADER=b.from([p.codes.suback<<p.CMD_SHIFT]),p.VERSION3=b.from([3]),p.VERSION4=b.from([4]),p.VERSION5=b.from([5]),p.VERSION131=b.from([131]),p.VERSION132=b.from([132]),p.QOS=[0,1,2].map(l=>b.from([l])),p.EMPTY={pingreq:b.from([p.codes.pingreq<<4,0]),pingresp:b.from([p.codes.pingresp<<4,0]),disconnect:b.from([p.codes.disconnect<<4,0])},p.MQTT5_PUBACK_PUBREC_CODES={0:"Success",16:"No matching subscribers",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",144:"Topic Name invalid",145:"Packet identifier in use",151:"Quota exceeded",153:"Payload format invalid"},p.MQTT5_PUBREL_PUBCOMP_CODES={0:"Success",146:"Packet Identifier not found"},p.MQTT5_SUBACK_CODES={0:"Granted QoS 0",1:"Granted QoS 1",2:"Granted QoS 2",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",143:"Topic Filter invalid",145:"Packet Identifier in use",151:"Quota exceeded",158:"Shared Subscriptions not supported",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"},p.MQTT5_UNSUBACK_CODES={0:"Success",17:"No subscription existed",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",143:"Topic Filter invalid",145:"Packet Identifier in use"},p.MQTT5_DISCONNECT_CODES={0:"Normal disconnection",4:"Disconnect with Will Message",128:"Unspecified error",129:"Malformed Packet",130:"Protocol Error",131:"Implementation specific error",135:"Not authorized",137:"Server busy",139:"Server shutting down",141:"Keep Alive timeout",142:"Session taken over",143:"Topic Filter invalid",144:"Topic Name invalid",147:"Receive Maximum exceeded",148:"Topic Alias invalid",149:"Packet too large",150:"Message rate too high",151:"Quota exceeded",152:"Administrative action",153:"Payload format invalid",154:"Retain not supported",155:"QoS not supported",156:"Use another server",157:"Server moved",158:"Shared Subscriptions not supported",159:"Connection rate exceeded",160:"Maximum connect time",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"},p.MQTT5_AUTH_CODES={0:"Success",24:"Continue authentication",25:"Re-authenticate"}}),rt=O((l,c)=>{function B0(l){if(!((l=String(l)).length>100)){var c=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(l);if(c){var p=parseFloat(c[1]);switch((c[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*p;case"weeks":case"week":case"w":return 6048e5*p;case"days":case"day":case"d":return 864e5*p;case"hours":case"hour":case"hrs":case"hr":case"h":return 36e5*p;case"minutes":case"minute":case"mins":case"min":case"m":return 6e4*p;case"seconds":case"second":case"secs":case"sec":case"s":return 1e3*p;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return p;default:return}}}}function x0(l){var c=Math.abs(l);return c>=864e5?Math.round(l/864e5)+"d":c>=36e5?Math.round(l/36e5)+"h":c>=6e4?Math.round(l/6e4)+"m":c>=1e3?Math.round(l/1e3)+"s":l+"ms"}function O0(l){var c=Math.abs(l);return c>=864e5?An(l,c,864e5,"day"):c>=36e5?An(l,c,36e5,"hour"):c>=6e4?An(l,c,6e4,"minute"):c>=1e3?An(l,c,1e3,"second"):l+" ms"}function An(l,c,p,b){return Math.round(l/p)+" "+b+(c>=1.5*p?"s":"")}A(),th(),e6(),c.exports=function(l,c){c=c||{};var p=typeof l;if("string"===p&&l.length>0)return B0(l);if("number"===p&&isFinite(l))return c.long?O0(l):x0(l);throw Error("val is not a non-empty string or a valid number. val="+JSON.stringify(l))}}),rr=O((l,c)=>{function M0(l){function e(l){let c=0;for(let p=0;p<l.length;p++)c=(c<<5)-c+l.charCodeAt(p)|0;return r.colors[Math.abs(c)%r.colors.length]}function r(l){let c,p=null,b,m;function w(...l){if(!w.enabled)return;let p=w,b=Number(new Date),m=b-(c||b);p.diff=m,p.prev=c,p.curr=b,c=b,l[0]=r.coerce(l[0]),"string"!=typeof l[0]&&l.unshift("%O");let _=0;l[0]=l[0].replace(/%([a-zA-Z%])/g,(c,b)=>{if("%%"===c)return"%";_++;let m=r.formatters[b];if("function"==typeof m){let b=l[_];c=m.call(p,b),l.splice(_,1),_--}return c}),r.formatArgs.call(p,l),(p.log||r.log).apply(p,l)}return w.namespace=l,w.useColors=r.useColors(),w.color=r.selectColor(l),w.extend=i,w.destroy=r.destroy,Object.defineProperty(w,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==p?p:(b!==r.namespaces&&(b=r.namespaces,m=r.enabled(l)),m),set:l=>{p=l}}),"function"==typeof r.init&&r.init(w),w}function i(l,c){let p=r(this.namespace+(typeof c>"u"?":":c)+l);return p.log=this.log,p}function n(l){for(let c of(r.save(l),r.namespaces=l,r.names=[],r.skips=[],("string"==typeof l?l:"").trim().replace(" ",",").split(",").filter(Boolean)))"-"===c[0]?r.skips.push(c.slice(1)):r.names.push(c)}function o(l,c){let p=0,b=0,m=-1,_=0;for(;p<l.length;)if(b<c.length&&(c[b]===l[p]||"*"===c[b]))"*"===c[b]?(m=b,_=p):p++,b++;else{if(-1===m)return!1;b=m+1,p=++_}for(;b<c.length&&"*"===c[b];)b++;return b===c.length}function s(){let l=[...r.names,...r.skips.map(l=>"-"+l)].join(",");return r.enable(""),l}function a(l){for(let c of r.skips)if(o(l,c))return!1;for(let c of r.names)if(o(l,c))return!0;return!1}function u(l){return l instanceof Error?l.stack||l.message:l}function f(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.debug=r,r.default=r,r.coerce=u,r.disable=s,r.enable=n,r.enabled=a,r.humanize=rt(),r.destroy=f,Object.keys(l).forEach(c=>{r[c]=l[c]}),r.names=[],r.skips=[],r.formatters={},r.selectColor=e,r.enable(r.load()),r}A(),th(),e6(),c.exports=M0}),ri=O((l,c)=>{let p;function L0(){let l;return"u">typeof window&&!!window.process&&("renderer"===window.process.type||!!window.process.__nwjs)||!("u">typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("u">typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"u">typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"u">typeof navigator&&navigator.userAgent&&(l=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(l[1],10)>=31||"u">typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))}function q0(l){if(l[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+l[0]+(this.useColors?"%c ":" ")+"+"+c.exports.humanize(this.diff),!this.useColors)return;let p="color: "+this.color;l.splice(1,0,p,"color: inherit");let b=0,m=0;l[0].replace(/%[a-zA-Z%]/g,l=>{"%%"!==l&&(b++,"%c"===l&&(m=b))}),l.splice(m,0,p)}function U0(c){try{c?l.storage.setItem("debug",c):l.storage.removeItem("debug")}catch{}}function N0(){let c;try{c=l.storage.getItem("debug")}catch{}return!c&&"u">typeof T&&"env"in T&&(c=T.env.DEBUG),c}function D0(){try{return localStorage}catch{}}A(),th(),e6(),l.formatArgs=q0,l.save=U0,l.load=N0,l.useColors=L0,l.storage=D0(),l.destroy=(p=!1,()=>{p||(p=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}),l.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],l.log=console.debug||console.log||(()=>{}),c.exports=rr()(l);var{formatters:b}=c.exports;b.j=function(l){try{return JSON.stringify(l)}catch(l){return"[UnexpectedJSONParseError]: "+l.message}}}),rn=O((l,c)=>{A(),th(),e6();var p=t7(),{EventEmitter:b}=(tM(),G(tT)),m=t9(),_=re(),v=ri()("mqtt-packet:parser"),T=class t extends b{constructor(){super(),this.parser=this.constructor.parser}static parser(l){return this instanceof t?(this.settings=l||{},this._states=["_parseHeader","_parseLength","_parsePayload","_newPacket"],this._resetState(),this):new t().parser(l)}_resetState(){v("_resetState: resetting packet, error, _list, and _stateCounter"),this.packet=new m,this.error=null,this._list=p(),this._stateCounter=0}parse(l){for(this.error&&this._resetState(),this._list.append(l),v("parse: current state: %s",this._states[this._stateCounter]);(-1!==this.packet.length||this._list.length>0)&&this[this._states[this._stateCounter]]()&&!this.error;)this._stateCounter++,v("parse: state complete. _stateCounter is now: %d",this._stateCounter),v("parse: packet.length: %d, buffer list length: %d",this.packet.length,this._list.length),this._stateCounter>=this._states.length&&(this._stateCounter=0);return v("parse: exited while loop. packet: %d, buffer list length: %d",this.packet.length,this._list.length),this._list.length}_parseHeader(){let l=this._list.readUInt8(0),c=l>>_.CMD_SHIFT;this.packet.cmd=_.types[c];let p=_.requiredHeaderFlags[c];return null!=p&&(15&l)!==p?this._emitError(Error(_.requiredHeaderFlagsErrors[c])):(this.packet.retain=(l&_.RETAIN_MASK)!=0,this.packet.qos=l>>_.QOS_SHIFT&_.QOS_MASK,this.packet.qos>2?this._emitError(Error("Packet must not have both QoS bits set to 1")):(this.packet.dup=(l&_.DUP_MASK)!=0,v("_parseHeader: packet: %o",this.packet),this._list.consume(1),!0))}_parseLength(){let l=this._parseVarByteNum(!0);return l&&(this.packet.length=l.value,this._list.consume(l.bytes)),v("_parseLength %d",l.value),!!l}_parsePayload(){v("_parsePayload: payload %O",this._list);let l=!1;if(0===this.packet.length||this._list.length>=this.packet.length){switch(this._pos=0,this.packet.cmd){case"connect":this._parseConnect();break;case"connack":this._parseConnack();break;case"publish":this._parsePublish();break;case"puback":case"pubrec":case"pubrel":case"pubcomp":this._parseConfirmation();break;case"subscribe":this._parseSubscribe();break;case"suback":this._parseSuback();break;case"unsubscribe":this._parseUnsubscribe();break;case"unsuback":this._parseUnsuback();break;case"pingreq":case"pingresp":break;case"disconnect":this._parseDisconnect();break;case"auth":this._parseAuth();break;default:this._emitError(Error("Not supported"))}l=!0}return v("_parsePayload complete result: %s",l),l}_parseConnect(){v("_parseConnect");let l,c,p,b,m={},A=this.packet,T=this._parseString();if(null===T)return this._emitError(Error("Cannot parse protocolId"));if("MQTT"!==T&&"MQIsdp"!==T)return this._emitError(Error("Invalid protocolId"));if(A.protocolId=T,this._pos>=this._list.length)return this._emitError(Error("Packet too short"));if(A.protocolVersion=this._list.readUInt8(this._pos),A.protocolVersion>=128&&(A.bridgeMode=!0,A.protocolVersion=A.protocolVersion-128),3!==A.protocolVersion&&4!==A.protocolVersion&&5!==A.protocolVersion)return this._emitError(Error("Invalid protocol version"));if(this._pos++,this._pos>=this._list.length)return this._emitError(Error("Packet too short"));if(1&this._list.readUInt8(this._pos))return this._emitError(Error("Connect flag bit 0 must be 0, but got 1"));m.username=this._list.readUInt8(this._pos)&_.USERNAME_MASK,m.password=this._list.readUInt8(this._pos)&_.PASSWORD_MASK,m.will=this._list.readUInt8(this._pos)&_.WILL_FLAG_MASK;let R=!!(this._list.readUInt8(this._pos)&_.WILL_RETAIN_MASK),P=(this._list.readUInt8(this._pos)&_.WILL_QOS_MASK)>>_.WILL_QOS_SHIFT;if(m.will)A.will={},A.will.retain=R,A.will.qos=P;else{if(R)return this._emitError(Error("Will Retain Flag must be set to zero when Will Flag is set to 0"));if(P)return this._emitError(Error("Will QoS must be set to zero when Will Flag is set to 0"))}if(A.clean=(this._list.readUInt8(this._pos)&_.CLEAN_SESSION_MASK)!=0,this._pos++,A.keepalive=this._parseNum(),-1===A.keepalive)return this._emitError(Error("Packet too short"));if(5===A.protocolVersion){let l=this._parseProperties();Object.getOwnPropertyNames(l).length&&(A.properties=l)}let x=this._parseString();if(null===x)return this._emitError(Error("Packet too short"));if(A.clientId=x,v("_parseConnect: packet.clientId: %s",A.clientId),m.will){if(5===A.protocolVersion){let l=this._parseProperties();Object.getOwnPropertyNames(l).length&&(A.will.properties=l)}if(null===(l=this._parseString()))return this._emitError(Error("Cannot parse will topic"));if(A.will.topic=l,v("_parseConnect: packet.will.topic: %s",A.will.topic),null===(c=this._parseBuffer()))return this._emitError(Error("Cannot parse will payload"));A.will.payload=c,v("_parseConnect: packet.will.paylaod: %s",A.will.payload)}if(m.username){if(null===(b=this._parseString()))return this._emitError(Error("Cannot parse username"));A.username=b,v("_parseConnect: packet.username: %s",A.username)}if(m.password){if(null===(p=this._parseBuffer()))return this._emitError(Error("Cannot parse password"));A.password=p}return this.settings=A,v("_parseConnect: complete"),A}_parseConnack(){v("_parseConnack");let l=this.packet;if(this._list.length<1)return null;let c=this._list.readUInt8(this._pos++);if(c>1)return this._emitError(Error("Invalid connack flags, bits 7-1 must be set to 0"));if(l.sessionPresent=!!(c&_.SESSIONPRESENT_MASK),5===this.settings.protocolVersion)this._list.length>=2?l.reasonCode=this._list.readUInt8(this._pos++):l.reasonCode=0;else{if(this._list.length<2)return null;l.returnCode=this._list.readUInt8(this._pos++)}if(-1===l.returnCode||-1===l.reasonCode)return this._emitError(Error("Cannot parse return code"));if(5===this.settings.protocolVersion){let c=this._parseProperties();Object.getOwnPropertyNames(c).length&&(l.properties=c)}v("_parseConnack: complete")}_parsePublish(){v("_parsePublish");let l=this.packet;if(l.topic=this._parseString(),null===l.topic)return this._emitError(Error("Cannot parse topic"));if(!(l.qos>0&&!this._parseMessageId())){if(5===this.settings.protocolVersion){let c=this._parseProperties();Object.getOwnPropertyNames(c).length&&(l.properties=c)}l.payload=this._list.slice(this._pos,l.length),v("_parsePublish: payload from buffer list: %o",l.payload)}}_parseSubscribe(){v("_parseSubscribe");let l=this.packet,c,p,b,m,A,T,R;if(l.subscriptions=[],this._parseMessageId()){if(5===this.settings.protocolVersion){let c=this._parseProperties();Object.getOwnPropertyNames(c).length&&(l.properties=c)}if(l.length<=0)return this._emitError(Error("Malformed subscribe, no payload specified"));for(;this._pos<l.length;){if(null===(c=this._parseString()))return this._emitError(Error("Cannot parse topic"));if(this._pos>=l.length)return this._emitError(Error("Malformed Subscribe Payload"));if(p=this._parseByte(),5===this.settings.protocolVersion){if(192&p)return this._emitError(Error("Invalid subscribe topic flag bits, bits 7-6 must be 0"))}else if(252&p)return this._emitError(Error("Invalid subscribe topic flag bits, bits 7-2 must be 0"));if((b=p&_.SUBSCRIBE_OPTIONS_QOS_MASK)>2)return this._emitError(Error("Invalid subscribe QoS, must be <= 2"));if(T=(p>>_.SUBSCRIBE_OPTIONS_NL_SHIFT&_.SUBSCRIBE_OPTIONS_NL_MASK)!=0,A=(p>>_.SUBSCRIBE_OPTIONS_RAP_SHIFT&_.SUBSCRIBE_OPTIONS_RAP_MASK)!=0,(m=p>>_.SUBSCRIBE_OPTIONS_RH_SHIFT&_.SUBSCRIBE_OPTIONS_RH_MASK)>2)return this._emitError(Error("Invalid retain handling, must be <= 2"));R={topic:c,qos:b},5===this.settings.protocolVersion?(R.nl=T,R.rap=A,R.rh=m):this.settings.bridgeMode&&(R.rh=0,R.rap=!0,R.nl=!0),v("_parseSubscribe: push subscription `%s` to subscription",R),l.subscriptions.push(R)}}}_parseSuback(){v("_parseSuback");let l=this.packet;if(this.packet.granted=[],this._parseMessageId()){if(5===this.settings.protocolVersion){let c=this._parseProperties();Object.getOwnPropertyNames(c).length&&(l.properties=c)}if(l.length<=0)return this._emitError(Error("Malformed suback, no payload specified"));for(;this._pos<this.packet.length;){let l=this._list.readUInt8(this._pos++);if(5===this.settings.protocolVersion){if(!_.MQTT5_SUBACK_CODES[l])return this._emitError(Error("Invalid suback code"))}else if(l>2&&128!==l)return this._emitError(Error("Invalid suback QoS, must be 0, 1, 2 or 128"));this.packet.granted.push(l)}}}_parseUnsubscribe(){v("_parseUnsubscribe");let l=this.packet;if(l.unsubscriptions=[],this._parseMessageId()){if(5===this.settings.protocolVersion){let c=this._parseProperties();Object.getOwnPropertyNames(c).length&&(l.properties=c)}if(l.length<=0)return this._emitError(Error("Malformed unsubscribe, no payload specified"));for(;this._pos<l.length;){let c=this._parseString();if(null===c)return this._emitError(Error("Cannot parse topic"));v("_parseUnsubscribe: push topic `%s` to unsubscriptions",c),l.unsubscriptions.push(c)}}}_parseUnsuback(){v("_parseUnsuback");let l=this.packet;if(!this._parseMessageId())return this._emitError(Error("Cannot parse messageId"));if((3===this.settings.protocolVersion||4===this.settings.protocolVersion)&&2!==l.length)return this._emitError(Error("Malformed unsuback, payload length must be 2"));if(l.length<=0)return this._emitError(Error("Malformed unsuback, no payload specified"));if(5===this.settings.protocolVersion){let c=this._parseProperties();for(Object.getOwnPropertyNames(c).length&&(l.properties=c),l.granted=[];this._pos<this.packet.length;){let l=this._list.readUInt8(this._pos++);if(!_.MQTT5_UNSUBACK_CODES[l])return this._emitError(Error("Invalid unsuback code"));this.packet.granted.push(l)}}}_parseConfirmation(){v("_parseConfirmation: packet.cmd: `%s`",this.packet.cmd);let l=this.packet;if(this._parseMessageId(),5===this.settings.protocolVersion){if(l.length>2){switch(l.reasonCode=this._parseByte(),this.packet.cmd){case"puback":case"pubrec":if(!_.MQTT5_PUBACK_PUBREC_CODES[l.reasonCode])return this._emitError(Error("Invalid "+this.packet.cmd+" reason code"));break;case"pubrel":case"pubcomp":if(!_.MQTT5_PUBREL_PUBCOMP_CODES[l.reasonCode])return this._emitError(Error("Invalid "+this.packet.cmd+" reason code"))}v("_parseConfirmation: packet.reasonCode `%d`",l.reasonCode)}else l.reasonCode=0;if(l.length>3){let c=this._parseProperties();Object.getOwnPropertyNames(c).length&&(l.properties=c)}}return!0}_parseDisconnect(){let l=this.packet;if(v("_parseDisconnect"),5===this.settings.protocolVersion){this._list.length>0?(l.reasonCode=this._parseByte(),_.MQTT5_DISCONNECT_CODES[l.reasonCode]||this._emitError(Error("Invalid disconnect reason code"))):l.reasonCode=0;let c=this._parseProperties();Object.getOwnPropertyNames(c).length&&(l.properties=c)}return v("_parseDisconnect result: true"),!0}_parseAuth(){v("_parseAuth");let l=this.packet;if(5!==this.settings.protocolVersion)return this._emitError(Error("Not supported auth packet for this version MQTT"));if(l.reasonCode=this._parseByte(),!_.MQTT5_AUTH_CODES[l.reasonCode])return this._emitError(Error("Invalid auth reason code"));let c=this._parseProperties();return Object.getOwnPropertyNames(c).length&&(l.properties=c),v("_parseAuth: result: true"),!0}_parseMessageId(){let l=this.packet;return l.messageId=this._parseNum(),null===l.messageId?(this._emitError(Error("Cannot parse messageId")),!1):(v("_parseMessageId: packet.messageId %d",l.messageId),!0)}_parseString(l){let c=this._parseNum(),p=c+this._pos;if(-1===c||p>this._list.length||p>this.packet.length)return null;let b=this._list.toString("utf8",this._pos,p);return this._pos+=c,v("_parseString: result: %s",b),b}_parseStringPair(){return v("_parseStringPair"),{name:this._parseString(),value:this._parseString()}}_parseBuffer(){let l=this._parseNum(),c=l+this._pos;if(-1===l||c>this._list.length||c>this.packet.length)return null;let p=this._list.slice(this._pos,c);return this._pos+=l,v("_parseBuffer: result: %o",p),p}_parseNum(){if(this._list.length-this._pos<2)return -1;let l=this._list.readUInt16BE(this._pos);return this._pos+=2,v("_parseNum: result: %s",l),l}_parse4ByteNum(){if(this._list.length-this._pos<4)return -1;let l=this._list.readUInt32BE(this._pos);return this._pos+=4,v("_parse4ByteNum: result: %s",l),l}_parseVarByteNum(l){v("_parseVarByteNum");let c=0,p=1,b=0,m=!1,A,T=this._pos?this._pos:0;for(;c<4&&T+c<this._list.length;){if(b+=p*((A=this._list.readUInt8(T+c++))&_.VARBYTEINT_MASK),p*=128,(A&_.VARBYTEINT_FIN_MASK)==0){m=!0;break}if(this._list.length<=c)break}return!m&&4===c&&this._list.length>=c&&this._emitError(Error("Invalid variable byte integer")),T&&(this._pos+=c),v("_parseVarByteNum: result: %o",m=!!m&&(l?{bytes:c,value:b}:b)),m}_parseByte(){let l;return this._pos<this._list.length&&(l=this._list.readUInt8(this._pos),this._pos++),v("_parseByte: result: %o",l),l}_parseByType(l){switch(v("_parseByType: type: %s",l),l){case"byte":return 0!==this._parseByte();case"int8":return this._parseByte();case"int16":return this._parseNum();case"int32":return this._parse4ByteNum();case"var":return this._parseVarByteNum();case"string":return this._parseString();case"pair":return this._parseStringPair();case"binary":return this._parseBuffer()}}_parseProperties(){v("_parseProperties");let l=this._parseVarByteNum(),c=this._pos+l,p={};for(;this._pos<c;){let l=this._parseByte();if(!l)return this._emitError(Error("Cannot parse property code type")),!1;let c=_.propertiesCodes[l];if(!c)return this._emitError(Error("Unknown property")),!1;if("userProperties"===c){p[c]||(p[c]=Object.create(null));let l=this._parseByType(_.propertiesTypes[c]);if(p[c][l.name]){if(Array.isArray(p[c][l.name]))p[c][l.name].push(l.value);else{let b=p[c][l.name];p[c][l.name]=[b],p[c][l.name].push(l.value)}}else p[c][l.name]=l.value;continue}p[c]?(Array.isArray(p[c])||(p[c]=[p[c]]),p[c].push(this._parseByType(_.propertiesTypes[c]))):p[c]=this._parseByType(_.propertiesTypes[c])}return p}_newPacket(){return v("_newPacket"),this.packet&&(this._list.consume(this.packet.length),v("_newPacket: parser emit packet: packet.cmd: %s, packet.payload: %s, packet.length: %d",this.packet.cmd,this.packet.payload,this.packet.length),this.emit("packet",this.packet)),v("_newPacket: new packet"),this.packet=new m,this._pos=0,!0}_emitError(l){v("_emitError",l),this.error=l,this.emit("error",l)}};c.exports=T}),rs=O((l,c)=>{A(),th(),e6();var{Buffer:p}=(tu(),G(e4)),b={},m=p.isBuffer(p.from([1,2]).subarray(0,1));function yd(l){let c=p.allocUnsafe(2);return c.writeUInt8(l>>8,0),c.writeUInt8(255&l,1),c}function V0(){for(let l=0;l<65536;l++)b[l]=yd(l)}function z0(l){let c=0,b=0,_=p.allocUnsafe(4);do c=l%128|0,(l=l/128|0)>0&&(c|=128),_.writeUInt8(c,b++);while(l>0&&b<4);return l>0&&(b=0),m?_.subarray(0,b):_.slice(0,b)}function K0(l){let c=p.allocUnsafe(4);return c.writeUInt32BE(l,0),c}c.exports={cache:b,generateCache:V0,generateNumber:yd,genBufVariableByteInt:z0,generate4ByteBuffer:K0}}),ra=O((l,c)=>{function Q0(l,c,p,b){if("function"!=typeof l)throw TypeError('"callback" argument must be a function');var m,_,v=arguments.length;switch(v){case 0:case 1:return T.nextTick(l);case 2:return T.nextTick(function(){l.call(null,c)});case 3:return T.nextTick(function(){l.call(null,c,p)});case 4:return T.nextTick(function(){l.call(null,c,p,b)});default:for(m=Array(v-1),_=0;_<m.length;)m[_++]=arguments[_];return T.nextTick(function(){l.apply(null,m)})}}A(),th(),e6(),typeof T>"u"||!T.version||0===T.version.indexOf("v0.")||0===T.version.indexOf("v1.")&&0!==T.version.indexOf("v1.8.")?c.exports={nextTick:Q0}:c.exports=T}),rl=O((l,c)=>{A(),th(),e6();var p=re(),{Buffer:b}=(tu(),G(e4)),m=b.allocUnsafe(0),_=b.from([0]),v=rs(),T=ra().nextTick,R=ri()("mqtt-packet:writeToStream"),P=v.cache,x=v.generateNumber,B=v.generateCache,U=v.genBufVariableByteInt,L=v.generate4ByteBuffer,N=Uo,D=!0;function Id(l,c,p){switch(R("generate called"),c.cork&&(c.cork(),T(tv,c)),D&&(D=!1,B()),R("generate: packet.cmd: %s",l.cmd),l.cmd){case"connect":return rv(l,c,p);case"connack":return iv(l,c,p);case"publish":return nv(l,c,p);case"puback":case"pubrec":case"pubrel":case"pubcomp":return sv(l,c,p);case"subscribe":return ov(l,c,p);case"suback":return av(l,c,p);case"unsubscribe":return lv(l,c,p);case"unsuback":return uv(l,c,p);case"pingreq":case"pingresp":return cv(l,c,p);case"disconnect":return fv(l,c,p);case"auth":return hv(l,c,p);default:return c.destroy(Error("Unknown command")),!1}}function tv(l){l.uncork()}function rv(l,c,m){let _,v,A,T=l||{},R=T.protocolId||"MQTT",P=T.protocolVersion||4,x=T.will,B=T.clean,U=T.keepalive||0,L=T.clientId||"",D=T.username,W=T.password,V=T.properties;void 0===B&&(B=!0);let H=0;if(!R||"string"!=typeof R&&!b.isBuffer(R))return c.destroy(Error("Invalid protocolId")),!1;if(H+=R.length+2,3!==P&&4!==P&&5!==P)return c.destroy(Error("Invalid protocol version")),!1;if(H+=1,("string"==typeof L||b.isBuffer(L))&&(L||P>=4)&&(L||B))H+=b.byteLength(L)+2;else{if(P<4)return c.destroy(Error("clientId must be supplied before 3.1.1")),!1;if(1*B==0)return c.destroy(Error("clientId must be given if cleanSession set to 0")),!1}if("number"!=typeof U||U<0||U>65535||U%1!=0)return c.destroy(Error("Invalid keepalive")),!1;if(H+=3,5===P){if(!(v=jt(c,V)))return!1;H+=v.length}if(x){if("object"!=typeof x)return c.destroy(Error("Invalid will")),!1;if(!x.topic||"string"!=typeof x.topic)return c.destroy(Error("Invalid will topic")),!1;if(H+=b.byteLength(x.topic)+2+2,x.payload){if(!(x.payload.length>=0))return c.destroy(Error("Invalid will payload")),!1;"string"==typeof x.payload?H+=b.byteLength(x.payload):H+=x.payload.length}if(A={},5===P){if(!(A=jt(c,x.properties)))return!1;H+=A.length}}let K=!1;if(null!=D){if(!Ad(D))return c.destroy(Error("Invalid username")),!1;K=!0,H+=b.byteLength(D)+2}if(null!=W){if(!K)return c.destroy(Error("Username is required to use password")),!1;if(!Ad(W))return c.destroy(Error("Invalid password")),!1;H+=Td(W)+2}return c.write(p.CONNECT_HEADER),Ue(c,H),Hr(c,R),T.bridgeMode&&(P+=128),c.write(131===P?p.VERSION131:132===P?p.VERSION132:4===P?p.VERSION4:5===P?p.VERSION5:p.VERSION3),_=0|(null!=D?p.USERNAME_MASK:0)|(null!=W?p.PASSWORD_MASK:0)|(x&&x.retain?p.WILL_RETAIN_MASK:0)|(x&&x.qos?x.qos<<p.WILL_QOS_SHIFT:0)|(x?p.WILL_FLAG_MASK:0)|(B?p.CLEAN_SESSION_MASK:0),c.write(b.from([_])),N(c,U),5===P&&v.write(),Hr(c,L),x&&(5===P&&A.write(),ur(c,x.topic),Hr(c,x.payload)),null!=D&&Hr(c,D),null!=W&&Hr(c,W),!0}function iv(l,c,m){let v=m?m.protocolVersion:4,A=l||{},T=5===v?A.reasonCode:A.returnCode,R=A.properties,P=2;if("number"!=typeof T)return c.destroy(Error("Invalid return code")),!1;let x=null;if(5===v){if(!(x=jt(c,R)))return!1;P+=x.length}return c.write(p.CONNACK_HEADER),Ue(c,P),c.write(A.sessionPresent?p.SESSIONPRESENT_HEADER:_),c.write(b.from([T])),x?.write(),!0}function nv(l,c,_){R("publish: packet: %o",l);let v=_?_.protocolVersion:4,A=l||{},T=A.qos||0,P=A.retain?p.RETAIN_MASK:0,x=A.topic,B=A.payload||m,U=A.messageId,L=A.properties,D=0;if("string"==typeof x)D+=b.byteLength(x)+2;else{if(!b.isBuffer(x))return c.destroy(Error("Invalid topic")),!1;D+=x.length+2}if(b.isBuffer(B)?D+=B.length:D+=b.byteLength(B),T&&"number"!=typeof U)return c.destroy(Error("Invalid messageId")),!1;T&&(D+=2);let W=null;if(5===v){if(!(W=jt(c,L)))return!1;D+=W.length}return c.write(p.PUBLISH_HEADER[T][A.dup?1:0][P?1:0]),Ue(c,D),N(c,Td(x)),c.write(x),T>0&&N(c,U),W?.write(),R("publish: payload: %o",B),c.write(B)}function sv(l,c,m){let _=m?m.protocolVersion:4,v=l||{},A=v.cmd||"puback",T=v.messageId,R=v.dup&&"pubrel"===A?p.DUP_MASK:0,P=0,x=v.reasonCode,B=v.properties,U=5===_?3:2;if("pubrel"===A&&(P=1),"number"!=typeof T)return c.destroy(Error("Invalid messageId")),!1;let L=null;if(5===_&&"object"==typeof B){if(!(L=vi(c,B,m,U)))return!1;U+=L.length}return c.write(p.ACKS[A][P][R][0]),3===U&&(U+=0!==x?1:-1),Ue(c,U),N(c,T),5===_&&2!==U&&c.write(b.from([x])),null!==L?L.write():4===U&&c.write(b.from([0])),!0}function ov(l,c,m){R("subscribe: packet: ");let _=m?m.protocolVersion:4,v=l||{},A=v.dup?p.DUP_MASK:0,T=v.messageId,P=v.subscriptions,x=v.properties,B=0;if("number"!=typeof T)return c.destroy(Error("Invalid messageId")),!1;B+=2;let U=null;if(5===_){if(!(U=jt(c,x)))return!1;B+=U.length}if("object"!=typeof P||!P.length)return c.destroy(Error("Invalid subscriptions")),!1;for(let l=0;l<P.length;l+=1){let p=P[l].topic,m=P[l].qos;if("string"!=typeof p)return c.destroy(Error("Invalid subscriptions - invalid topic")),!1;if("number"!=typeof m)return c.destroy(Error("Invalid subscriptions - invalid qos")),!1;if(5===_){if("boolean"!=typeof(P[l].nl||!1))return c.destroy(Error("Invalid subscriptions - invalid No Local")),!1;if("boolean"!=typeof(P[l].rap||!1))return c.destroy(Error("Invalid subscriptions - invalid Retain as Published")),!1;let p=P[l].rh||0;if("number"!=typeof p||p>2)return c.destroy(Error("Invalid subscriptions - invalid Retain Handling")),!1}B+=b.byteLength(p)+2+1}R("subscribe: writing to stream: %o",p.SUBSCRIBE_HEADER),c.write(p.SUBSCRIBE_HEADER[1][A?1:0][0]),Ue(c,B),N(c,T),null!==U&&U.write();let L=!0;for(let l of P){let m=l.topic,v=l.qos,A=+l.nl,T=+l.rap,R=l.rh,P;ur(c,m),P=p.SUBSCRIBE_OPTIONS_QOS[v],5===_&&(P|=A?p.SUBSCRIBE_OPTIONS_NL:0,P|=T?p.SUBSCRIBE_OPTIONS_RAP:0,P|=R?p.SUBSCRIBE_OPTIONS_RH[R]:0),L=c.write(b.from([P]))}return L}function av(l,c,m){let _=m?m.protocolVersion:4,v=l||{},A=v.messageId,T=v.granted,R=v.properties,P=0;if("number"!=typeof A)return c.destroy(Error("Invalid messageId")),!1;if(P+=2,"object"!=typeof T||!T.length)return c.destroy(Error("Invalid qos vector")),!1;for(let l=0;l<T.length;l+=1){if("number"!=typeof T[l])return c.destroy(Error("Invalid qos vector")),!1;P+=1}let x=null;if(5===_){if(!(x=vi(c,R,m,P)))return!1;P+=x.length}return c.write(p.SUBACK_HEADER),Ue(c,P),N(c,A),null!==x&&x.write(),c.write(b.from(T))}function lv(l,c,m){let _=m?m.protocolVersion:4,v=l||{},A=v.messageId,T=v.dup?p.DUP_MASK:0,R=v.unsubscriptions,P=v.properties,x=0;if("number"!=typeof A)return c.destroy(Error("Invalid messageId")),!1;if(x+=2,"object"!=typeof R||!R.length)return c.destroy(Error("Invalid unsubscriptions")),!1;for(let l=0;l<R.length;l+=1){if("string"!=typeof R[l])return c.destroy(Error("Invalid unsubscriptions")),!1;x+=b.byteLength(R[l])+2}let B=null;if(5===_){if(!(B=jt(c,P)))return!1;x+=B.length}c.write(p.UNSUBSCRIBE_HEADER[1][T?1:0][0]),Ue(c,x),N(c,A),null!==B&&B.write();let U=!0;for(let l=0;l<R.length;l++)U=ur(c,R[l]);return U}function uv(l,c,m){let _=m?m.protocolVersion:4,v=l||{},A=v.messageId,T=v.dup?p.DUP_MASK:0,R=v.granted,P=v.properties,x=v.cmd,B=2;if("number"!=typeof A)return c.destroy(Error("Invalid messageId")),!1;if(5===_){if("object"!=typeof R||!R.length)return c.destroy(Error("Invalid qos vector")),!1;for(let l=0;l<R.length;l+=1){if("number"!=typeof R[l])return c.destroy(Error("Invalid qos vector")),!1;B+=1}}let U=null;if(5===_){if(!(U=vi(c,P,m,B)))return!1;B+=U.length}return c.write(p.ACKS[x][0][T][0]),Ue(c,B),N(c,A),null!==U&&U.write(),5===_&&c.write(b.from(R)),!0}function cv(l,c,b){return c.write(p.EMPTY[l.cmd])}function fv(l,c,m){let _=m?m.protocolVersion:4,v=l||{},A=v.reasonCode,T=v.properties,R=5===_?1:0,P=null;if(5===_){if(!(P=vi(c,T,m,R)))return!1;R+=P.length}return c.write(b.from([p.codes.disconnect<<4])),Ue(c,R),5===_&&c.write(b.from([A])),null!==P&&P.write(),!0}function hv(l,c,m){let _=m?m.protocolVersion:4,v=l||{},A=v.reasonCode,T=v.properties,R=5===_?1:0;5!==_&&c.destroy(Error("Invalid mqtt version for auth packet"));let P=vi(c,T,m,R);return!!P&&(R+=P.length,c.write(b.from([p.codes.auth<<4])),Ue(c,R),c.write(b.from([A])),null!==P&&P.write(),!0)}Object.defineProperty(Id,"cacheNumbers",{get:()=>N===Uo,set(l){l?(P&&0!==Object.keys(P).length||(D=!0),N=Uo):(D=!1,N=dv)}});var W={};function Ue(l,c){if(c>p.VARBYTEINT_MAX)return l.destroy(Error(`Invalid variable byte integer: ${c}`)),!1;let b=W[c];return b||(b=U(c),c<16384&&(W[c]=b)),R("writeVarByteInt: writing to stream: %o",b),l.write(b)}function ur(l,c){let p=b.byteLength(c);return N(l,p),R("writeString: %s",c),l.write(c,"utf8")}function Uo(l,c){return R("writeNumberCached: number: %d",c),R("writeNumberCached: %o",P[c]),l.write(P[c])}function dv(l,c){let p=x(c);return R("writeNumberGenerated: %o",p),l.write(p)}function pv(l,c){let p=L(c);return R("write4ByteNumber: %o",p),l.write(p)}function Hr(l,c){"string"==typeof c?ur(l,c):c?(N(l,c.length),l.write(c)):N(l,0)}function jt(l,c){if("object"!=typeof c||null!=c.length)return{length:1,write(){Sd(l,{},0)}};let m=0;function i(c,m){let _=p.propertiesTypes[c],v=0;switch(_){case"byte":if("boolean"!=typeof m)return l.destroy(Error(`Invalid ${c}: ${m}`)),!1;v+=2;break;case"int8":if("number"!=typeof m||m<0||m>255)return l.destroy(Error(`Invalid ${c}: ${m}`)),!1;v+=2;break;case"binary":if(m&&null===m)return l.destroy(Error(`Invalid ${c}: ${m}`)),!1;v+=1+b.byteLength(m)+2;break;case"int16":if("number"!=typeof m||m<0||m>65535)return l.destroy(Error(`Invalid ${c}: ${m}`)),!1;v+=3;break;case"int32":if("number"!=typeof m||m<0||m>4294967295)return l.destroy(Error(`Invalid ${c}: ${m}`)),!1;v+=5;break;case"var":if("number"!=typeof m||m<0||m>268435455)return l.destroy(Error(`Invalid ${c}: ${m}`)),!1;v+=1+b.byteLength(U(m));break;case"string":if("string"!=typeof m)return l.destroy(Error(`Invalid ${c}: ${m}`)),!1;v+=3+b.byteLength(m.toString());break;case"pair":if("object"!=typeof m)return l.destroy(Error(`Invalid ${c}: ${m}`)),!1;v+=Object.getOwnPropertyNames(m).reduce((l,c)=>{let p=m[c];return Array.isArray(p)?l+=p.reduce((l,p)=>l+=3+b.byteLength(c.toString())+2+b.byteLength(p.toString()),0):l+=3+b.byteLength(c.toString())+2+b.byteLength(m[c].toString()),l},0);break;default:return l.destroy(Error(`Invalid property ${c}: ${m}`)),!1}return v}if(c)for(let l in c){let p=0,b=0,_=c[l];if(void 0!==_){if(Array.isArray(_))for(let c=0;c<_.length;c++){if(!(b=i(l,_[c])))return!1;p+=b}else{if(!(b=i(l,_)))return!1;p=b}if(!p)return!1;m+=p}}return{length:b.byteLength(U(m))+m,write(){Sd(l,c,m)}}}function vi(l,c,p,b){let m=["reasonString","userProperties"],_=p&&p.properties&&p.properties.maximumPacketSize?p.properties.maximumPacketSize:0,v=jt(l,c);if(_)for(;b+v.length>_;){let p=m.shift();if(!p||!c[p])return!1;delete c[p],v=jt(l,c)}return v}function Ed(l,c,m){switch(p.propertiesTypes[c]){case"byte":l.write(b.from([p.properties[c]])),l.write(b.from([+m]));break;case"int8":l.write(b.from([p.properties[c]])),l.write(b.from([m]));break;case"binary":l.write(b.from([p.properties[c]])),Hr(l,m);break;case"int16":l.write(b.from([p.properties[c]])),N(l,m);break;case"int32":l.write(b.from([p.properties[c]])),pv(l,m);break;case"var":l.write(b.from([p.properties[c]])),Ue(l,m);break;case"string":l.write(b.from([p.properties[c]])),ur(l,m);break;case"pair":Object.getOwnPropertyNames(m).forEach(_=>{var v,A;let T=m[_];Array.isArray(T)?T.forEach(m=>{var v,A;l.write(b.from([p.properties[c]])),v=_.toString(),A=m.toString(),ur(l,v),ur(l,A)}):(l.write(b.from([p.properties[c]])),v=_.toString(),A=T.toString(),ur(l,v),ur(l,A))});break;default:return l.destroy(Error(`Invalid property ${c} value: ${m}`)),!1}}function Sd(l,c,p){for(let b in Ue(l,p),c)if(Object.prototype.hasOwnProperty.call(c,b)&&null!=c[b]){let p=c[b];if(Array.isArray(p))for(let c=0;c<p.length;c++)Ed(l,b,p[c]);else Ed(l,b,p)}}function Td(l){return l?l instanceof b?l.length:b.byteLength(l):0}function Ad(l){return"string"==typeof l||l instanceof b}c.exports=Id}),ru=O((l,c)=>{A(),th(),e6();var p=rl(),{EventEmitter:b}=(tM(),G(tT)),{Buffer:m}=(tu(),G(e4));function bv(l,c){let b=new _;return p(l,b,c),b.concat()}var _=class extends b{constructor(){super(),this._array=Array(20),this._i=0}write(l){return this._array[this._i++]=l,!0}concat(){let l=0,c=Array(this._array.length),p=this._array,b=0,_;for(_=0;_<p.length&&void 0!==p[_];_++)"string"!=typeof p[_]?c[_]=p[_].length:c[_]=m.byteLength(p[_]),l+=c[_];let v=m.allocUnsafe(l);for(_=0;_<p.length&&void 0!==p[_];_++)"string"!=typeof p[_]?p[_].copy(v,b):v.write(p[_],b),b+=c[_];return v}destroy(l){l&&this.emit("error",l)}};c.exports=bv}),rh=O(l=>{A(),th(),e6(),l.parser=rn().parser,l.generate=ru(),l.writeToStream=rl()}),rc=O((l,c)=>{function Vr(l){return l instanceof ts?ts.from(l):new l.constructor(l.buffer.slice(),l.byteOffset,l.length)}function wv(l){if((l=l||{}).circles)return _v(l);let c=new Map;if(c.set(Date,l=>new Date(l)),c.set(Map,(l,c)=>new Map(i(Array.from(l),c))),c.set(Set,(l,c)=>new Set(i(Array.from(l),c))),l.constructorHandlers)for(let p of l.constructorHandlers)c.set(p[0],p[1]);let p=null;return l.proto?o:n;function i(l,b){let m=Object.keys(l),_=Array(m.length);for(let v=0;v<m.length;v++){let A=m[v],T=l[A];"object"!=typeof T||null===T?_[A]=T:T.constructor!==Object&&(p=c.get(T.constructor))?_[A]=p(T,b):ArrayBuffer.isView(T)?_[A]=Vr(T):_[A]=b(T)}return _}function n(l){if("object"!=typeof l||null===l)return l;if(Array.isArray(l))return i(l,n);if(l.constructor!==Object&&(p=c.get(l.constructor)))return p(l,n);let b={};for(let m in l){if(!1===Object.hasOwnProperty.call(l,m))continue;let _=l[m];"object"!=typeof _||null===_?b[m]=_:_.constructor!==Object&&(p=c.get(_.constructor))?b[m]=p(_,n):ArrayBuffer.isView(_)?b[m]=Vr(_):b[m]=n(_)}return b}function o(l){if("object"!=typeof l||null===l)return l;if(Array.isArray(l))return i(l,o);if(l.constructor!==Object&&(p=c.get(l.constructor)))return p(l,o);let b={};for(let m in l){let _=l[m];"object"!=typeof _||null===_?b[m]=_:_.constructor!==Object&&(p=c.get(_.constructor))?b[m]=p(_,o):ArrayBuffer.isView(_)?b[m]=Vr(_):b[m]=o(_)}return b}}function _v(l){let c=[],p=[],b=new Map;if(b.set(Date,l=>new Date(l)),b.set(Map,(l,c)=>new Map(o(Array.from(l),c))),b.set(Set,(l,c)=>new Set(o(Array.from(l),c))),l.constructorHandlers)for(let c of l.constructorHandlers)b.set(c[0],c[1]);let m=null;return l.proto?a:s;function o(l,_){let v=Object.keys(l),A=Array(v.length);for(let T=0;T<v.length;T++){let R=v[T],P=l[R];if("object"!=typeof P||null===P)A[R]=P;else if(P.constructor!==Object&&(m=b.get(P.constructor)))A[R]=m(P,_);else if(ArrayBuffer.isView(P))A[R]=Vr(P);else{let l=c.indexOf(P);-1!==l?A[R]=p[l]:A[R]=_(P)}}return A}function s(l){if("object"!=typeof l||null===l)return l;if(Array.isArray(l))return o(l,s);if(l.constructor!==Object&&(m=b.get(l.constructor)))return m(l,s);let _={};for(let v in c.push(l),p.push(_),l){if(!1===Object.hasOwnProperty.call(l,v))continue;let A=l[v];if("object"!=typeof A||null===A)_[v]=A;else if(A.constructor!==Object&&(m=b.get(A.constructor)))_[v]=m(A,s);else if(ArrayBuffer.isView(A))_[v]=Vr(A);else{let l=c.indexOf(A);-1!==l?_[v]=p[l]:_[v]=s(A)}}return c.pop(),p.pop(),_}function a(l){if("object"!=typeof l||null===l)return l;if(Array.isArray(l))return o(l,a);if(l.constructor!==Object&&(m=b.get(l.constructor)))return m(l,a);let _={};for(let v in c.push(l),p.push(_),l){let A=l[v];if("object"!=typeof A||null===A)_[v]=A;else if(A.constructor!==Object&&(m=b.get(A.constructor)))_[v]=m(A,a);else if(ArrayBuffer.isView(A))_[v]=Vr(A);else{let l=c.indexOf(A);-1!==l?_[v]=p[l]:_[v]=a(A)}}return c.pop(),p.pop(),_}}A(),th(),e6(),c.exports=wv}),rf=O((l,c)=>{A(),th(),e6(),c.exports=rc()()}),rd=O(l=>{function qd(l){let c=l.split("/");for(let l=0;l<c.length;l++)if("+"!==c[l]){if("#"===c[l])return l===c.length-1;if(-1!==c[l].indexOf("+")||-1!==c[l].indexOf("#"))return!1}return!0}function mv(l){if(0===l.length)return"empty_topic_list";for(let c=0;c<l.length;c++)if(!qd(l[c]))return l[c];return null}A(),th(),e6(),Object.defineProperty(l,"__esModule",{value:!0}),l.validateTopic=qd,l.validateTopics=mv}),rp=O(l=>{A(),th(),e6(),Object.defineProperty(l,"__esModule",{value:!0});var c=t4(),p={objectMode:!0},b={clean:!0},m=class{options;_inflights;constructor(l){this.options=l||{},this.options={...b,...l},this._inflights=new Map}put(l,c){return this._inflights.set(l.messageId,l),c&&c(),this}createStream(){let l=new c.Readable(p),b=[],m=!1,_=0;return this._inflights.forEach((l,c)=>{b.push(l)}),l._read=()=>{!m&&_<b.length?l.push(b[_++]):l.push(null)},l.destroy=c=>{if(!m)return m=!0,setTimeout(()=>{l.emit("close")},0),l},l}del(l,c){let p=this._inflights.get(l.messageId);return p?(this._inflights.delete(l.messageId),c(null,p)):c&&c(Error("missing packet")),this}get(l,c){let p=this._inflights.get(l.messageId);return p?c(null,p):c&&c(Error("missing packet")),this}close(l){this.options.clean&&(this._inflights=null),l&&l()}};l.default=m}),rg=O(l=>{A(),th(),e6(),Object.defineProperty(l,"__esModule",{value:!0});var c=[0,16,128,131,135,144,145,151,153];l.default=(l,p,b)=>{l.log("handlePublish: packet %o",p),b="u">typeof b?b:l.noop;let m=p.topic.toString(),_=p.payload,{qos:v}=p,{messageId:A}=p,{options:T}=l;if(5===l.options.protocolVersion){let c;if(p.properties&&(c=p.properties.topicAlias),"u">typeof c){if(0===m.length){if(c>0&&c<=65535){let p=l.topicAliasRecv.getTopicByAlias(c);if(p)m=p,l.log("handlePublish :: topic complemented by alias. topic: %s - alias: %d",m,c);else{l.log("handlePublish :: unregistered topic alias. alias: %d",c),l.emit("error",Error("Received unregistered Topic Alias"));return}}else{l.log("handlePublish :: topic alias out of range. alias: %d",c),l.emit("error",Error("Received Topic Alias is out of range"));return}}else if(l.topicAliasRecv.put(m,c))l.log("handlePublish :: registered topic: %s - alias: %d",m,c);else{l.log("handlePublish :: topic alias out of range. alias: %d",c),l.emit("error",Error("Received Topic Alias is out of range"));return}}}switch(l.log("handlePublish: qos %d",v),v){case 2:T.customHandleAcks(m,_,p,(m,_)=>("number"==typeof m&&(_=m,m=null),m)?l.emit("error",m):-1===c.indexOf(_)?l.emit("error",Error("Wrong reason code for pubrec")):void(_?l._sendPacket({cmd:"pubrec",messageId:A,reasonCode:_},b):l.incomingStore.put(p,()=>{l._sendPacket({cmd:"pubrec",messageId:A},b)})));break;case 1:T.customHandleAcks(m,_,p,(v,T)=>("number"==typeof v&&(T=v,v=null),v)?l.emit("error",v):-1===c.indexOf(T)?l.emit("error",Error("Wrong reason code for puback")):void(T||l.emit("message",m,_,p),l.handleMessage(p,c=>{if(c)return b&&b(c);l._sendPacket({cmd:"puback",messageId:A,reasonCode:T},b)})));break;case 0:l.emit("message",m,_,p),l.handleMessage(p,b);break;default:l.log("handlePublish: unknown QoS. Doing nothing.")}}}),rb=O((l,c)=>{c.exports={version:"5.13.3"}}),rm=O(l=>{A(),th(),e6(),Object.defineProperty(l,"__esModule",{value:!0}),l.MQTTJS_VERSION=l.nextTick=l.ErrorWithSubackPacket=l.ErrorWithReasonCode=void 0,l.applyMixin=Tv;var c=class t extends Error{code;constructor(l,c){super(l),this.code=c,Object.setPrototypeOf(this,t.prototype),Object.getPrototypeOf(this).name="ErrorWithReasonCode"}};l.ErrorWithReasonCode=c;var p=class t extends Error{packet;constructor(l,c){super(l),this.packet=c,Object.setPrototypeOf(this,t.prototype),Object.getPrototypeOf(this).name="ErrorWithSubackPacket"}};function Tv(l,c,p=!1){let b=[c];for(;;){let l=Object.getPrototypeOf(b[0]);if(l?.prototype)b.unshift(l);else break}for(let c of b)for(let b of Object.getOwnPropertyNames(c.prototype))(p||"constructor"!==b)&&Object.defineProperty(l.prototype,b,Object.getOwnPropertyDescriptor(c.prototype,b)??Object.create(null))}l.ErrorWithSubackPacket=p,l.nextTick="function"==typeof T?.nextTick?T.nextTick:l=>{setTimeout(l,0)},l.MQTTJS_VERSION=rb().version}),ry=O(l=>{A(),th(),e6(),Object.defineProperty(l,"__esModule",{value:!0}),l.ReasonCodes=void 0;var c=rm();l.ReasonCodes={0:"",1:"Unacceptable protocol version",2:"Identifier rejected",3:"Server unavailable",4:"Bad username or password",5:"Not authorized",16:"No matching subscribers",17:"No subscription existed",128:"Unspecified error",129:"Malformed Packet",130:"Protocol Error",131:"Implementation specific error",132:"Unsupported Protocol Version",133:"Client Identifier not valid",134:"Bad User Name or Password",135:"Not authorized",136:"Server unavailable",137:"Server busy",138:"Banned",139:"Server shutting down",140:"Bad authentication method",141:"Keep Alive timeout",142:"Session taken over",143:"Topic Filter invalid",144:"Topic Name invalid",145:"Packet identifier in use",146:"Packet Identifier not found",147:"Receive Maximum exceeded",148:"Topic Alias invalid",149:"Packet too large",150:"Message rate too high",151:"Quota exceeded",152:"Administrative action",153:"Payload format invalid",154:"Retain not supported",155:"QoS not supported",156:"Use another server",157:"Server moved",158:"Shared Subscriptions not supported",159:"Connection rate exceeded",160:"Maximum connect time",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"},l.default=(p,b)=>{let{messageId:m}=b,_=b.cmd,v=null,A=p.outgoing[m]?p.outgoing[m].cb:null,T=null;if(!A){p.log("_handleAck :: Server sent an ack in error. Ignoring.");return}switch(p.log("_handleAck :: packet type",_),_){case"pubcomp":case"puback":{let _=b.reasonCode;_&&_>0&&16!==_?(T=new c.ErrorWithReasonCode(`Publish error: ${l.ReasonCodes[_]}`,_),p._removeOutgoingAndStoreMessage(m,()=>{A(T,b)})):p._removeOutgoingAndStoreMessage(m,A);break}case"pubrec":{v={cmd:"pubrel",qos:2,messageId:m};let _=b.reasonCode;_&&_>0&&16!==_?(T=new c.ErrorWithReasonCode(`Publish error: ${l.ReasonCodes[_]}`,_),p._removeOutgoingAndStoreMessage(m,()=>{A(T,b)})):p._sendPacket(v);break}case"suback":{delete p.outgoing[m],p.messageIdProvider.deallocate(m);let c=b.granted;for(let b=0;b<c.length;b++){let _=c[b];if((128&_)!=0){(T=Error(`Subscribe error: ${l.ReasonCodes[_]}`)).code=_;let c=p.messageIdToTopic[m];c&&c.forEach(l=>{delete p._resubscribeTopics[l]})}}delete p.messageIdToTopic[m],p._invokeStoreProcessingQueue(),A(T,b);break}case"unsuback":delete p.outgoing[m],p.messageIdProvider.deallocate(m),p._invokeStoreProcessingQueue(),A(null,b);break;default:p.emit("error",Error("unrecognized packet type"))}p.disconnecting&&0===Object.keys(p.outgoing).length&&p.emit("outgoingEmpty")}}),r_=O(l=>{A(),th(),e6(),Object.defineProperty(l,"__esModule",{value:!0});var c=rm(),p=ry();l.default=(l,b)=>{let{options:m}=l,_=m.protocolVersion,v=5===_?b.reasonCode:b.returnCode;if(5!==_){let p=new c.ErrorWithReasonCode(`Protocol error: Auth packets are only supported in MQTT 5. Your version:${_}`,v);l.emit("error",p);return}l.handleAuth(b,(b,m)=>{if(b){l.emit("error",b);return}if(24===v)l.reconnecting=!1,l._sendPacket(m);else{let b=new c.ErrorWithReasonCode(`Connection refused: ${p.ReasonCodes[v]}`,v);l.emit("error",b)}})}}),rE=O(l=>{A(),th(),e6(),Object.defineProperty(l,"__esModule",{value:!0}),l.LRUCache=void 0;var c="object"==typeof performance&&performance&&"function"==typeof performance.now?performance:Date,p=new Set,b="object"==typeof T&&T?T:{},zd=(l,c,p,m)=>{"function"==typeof b.emitWarning?b.emitWarning(l,c,p,m):console.error(`[${p}] ${c}: ${l}`)},m=globalThis.AbortController,_=globalThis.AbortSignal;if(typeof m>"u"){_=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(l,c){this._onabort.push(c)}},m=class{constructor(){e()}signal=new _;abort(l){if(!this.signal.aborted){for(let c of(this.signal.reason=l,this.signal.aborted=!0,this.signal._onabort))c(l);this.signal.onabort?.(l)}}};let l=b.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1",e=()=>{l&&(l=!1,zd("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",e))}}var Pv=l=>!p.has(l),v=(Symbol("type"),l=>l&&l===Math.floor(l)&&l>0&&isFinite(l)),Kd=l=>v(l)?l<=256?Uint8Array:l<=65536?Uint16Array:l<=4294967296?Uint32Array:l<=Number.MAX_SAFE_INTEGER?R:null:null,R=class extends Array{constructor(l){super(l),this.fill(0)}},P=class t{heap;length;static #e=!1;static create(l){let c=Kd(l);if(!c)return[];t.#e=!0;let p=new t(l,c);return t.#e=!1,p}constructor(l,c){if(!t.#e)throw TypeError("instantiate Stack using Stack.create(n)");this.heap=new c(l),this.length=0}push(l){this.heap[this.length++]=l}pop(){return this.heap[--this.length]}},x=class t{#e;#t;#r;#i;#n;#o;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#s;#a;#l;#u;#h;#c;#f;#d;#p;#g;#b;#m;#y;#_;#w;#v;#E;static unsafeExposeInternals(l){return{starts:l.#y,ttls:l.#_,sizes:l.#m,keyMap:l.#l,keyList:l.#u,valList:l.#h,next:l.#c,prev:l.#f,get head(){return l.#d},get tail(){return l.#p},free:l.#g,isBackgroundFetch:c=>l.#S(c),backgroundFetch:(c,p,b,m)=>l.#A(c,p,b,m),moveToTail:c=>l.#I(c),indexes:c=>l.#k(c),rindexes:c=>l.#T(c),isStale:c=>l.#O(c)}}get max(){return this.#e}get maxSize(){return this.#t}get calculatedSize(){return this.#a}get size(){return this.#s}get fetchMethod(){return this.#n}get memoMethod(){return this.#o}get dispose(){return this.#r}get disposeAfter(){return this.#i}constructor(l){let{max:c=0,ttl:b,ttlResolution:m=1,ttlAutopurge:_,updateAgeOnGet:A,updateAgeOnHas:T,allowStale:R,dispose:x,disposeAfter:B,noDisposeOnSet:U,noUpdateTTL:L,maxSize:N=0,maxEntrySize:D=0,sizeCalculation:W,fetchMethod:V,memoMethod:H,noDeleteOnFetchRejection:K,noDeleteOnStaleGet:J,allowStaleOnFetchRejection:X,allowStaleOnFetchAbort:ee,ignoreFetchAbort:et}=l;if(0!==c&&!v(c))throw TypeError("max option must be a nonnegative integer");let er=c?Kd(c):Array;if(!er)throw Error("invalid max value: "+c);if(this.#e=c,this.#t=N,this.maxEntrySize=D||this.#t,this.sizeCalculation=W,this.sizeCalculation){if(!this.#t&&!this.maxEntrySize)throw TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if("function"!=typeof this.sizeCalculation)throw TypeError("sizeCalculation set to non-function")}if(void 0!==H&&"function"!=typeof H)throw TypeError("memoMethod must be a function if defined");if(this.#o=H,void 0!==V&&"function"!=typeof V)throw TypeError("fetchMethod must be a function if specified");if(this.#n=V,this.#v=!!V,this.#l=new Map,this.#u=Array(c).fill(void 0),this.#h=Array(c).fill(void 0),this.#c=new er(c),this.#f=new er(c),this.#d=0,this.#p=0,this.#g=P.create(c),this.#s=0,this.#a=0,"function"==typeof x&&(this.#r=x),"function"==typeof B?(this.#i=B,this.#b=[]):(this.#i=void 0,this.#b=void 0),this.#w=!!this.#r,this.#E=!!this.#i,this.noDisposeOnSet=!!U,this.noUpdateTTL=!!L,this.noDeleteOnFetchRejection=!!K,this.allowStaleOnFetchRejection=!!X,this.allowStaleOnFetchAbort=!!ee,this.ignoreFetchAbort=!!et,0!==this.maxEntrySize){if(0!==this.#t&&!v(this.#t))throw TypeError("maxSize must be a positive integer if specified");if(!v(this.maxEntrySize))throw TypeError("maxEntrySize must be a positive integer if specified");this.#R()}if(this.allowStale=!!R,this.noDeleteOnStaleGet=!!J,this.updateAgeOnGet=!!A,this.updateAgeOnHas=!!T,this.ttlResolution=v(m)||0===m?m:1,this.ttlAutopurge=!!_,this.ttl=b||0,this.ttl){if(!v(this.ttl))throw TypeError("ttl must be a positive integer if specified");this.#C()}if(0===this.#e&&0===this.ttl&&0===this.#t)throw TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#e&&!this.#t){let l="LRU_CACHE_UNBOUNDED";Pv(l)&&(p.add(l),zd("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",l,t))}}getRemainingTTL(l){return this.#l.has(l)?1/0:0}#C(){let l=new R(this.#e),p=new R(this.#e);this.#_=l,this.#y=p,this.#P=(b,m,_=c.now())=>{if(p[b]=0!==m?_:0,l[b]=m,0!==m&&this.ttlAutopurge){let l=setTimeout(()=>{this.#O(b)&&this.#x(this.#u[b],"expire")},m+1);l.unref&&l.unref()}},this.#B=b=>{p[b]=0!==l[b]?c.now():0},this.#M=(c,m)=>{if(l[m]){let _=l[m],v=p[m];if(!_||!v)return;c.ttl=_,c.start=v,c.now=b||n();let A=c.now-v;c.remainingTTL=_-A}};let b=0,n=()=>{let l=c.now();if(this.ttlResolution>0){b=l;let c=setTimeout(()=>b=0,this.ttlResolution);c.unref&&c.unref()}return l};this.getRemainingTTL=c=>{let m=this.#l.get(c);if(void 0===m)return 0;let _=l[m],v=p[m];return _&&v?_-((b||n())-v):1/0},this.#O=c=>{let m=p[c],_=l[c];return!!_&&!!m&&(b||n())-m>_}}#B=()=>{};#M=()=>{};#P=()=>{};#O=()=>!1;#R(){let l=new R(this.#e);this.#a=0,this.#m=l,this.#U=c=>{this.#a-=l[c],l[c]=0},this.#j=(l,c,p,b)=>{if(this.#S(c))return 0;if(!v(p)){if(b){if("function"!=typeof b)throw TypeError("sizeCalculation must be a function");if(!v(p=b(c,l)))throw TypeError("sizeCalculation return invalid (expect positive integer)")}else throw TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.")}return p},this.#L=(c,p,b)=>{if(l[c]=p,this.#t){let p=this.#t-l[c];for(;this.#a>p;)this.#N(!0)}this.#a+=l[c],b&&(b.entrySize=p,b.totalCalculatedSize=this.#a)}}#U=l=>{};#L=(l,c,p)=>{};#j=(l,c,p,b)=>{if(p||b)throw TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#k({allowStale:l=this.allowStale}={}){if(this.#s)for(let c=this.#p;!(!this.#D(c)||((l||!this.#O(c))&&(yield c),c===this.#d));)c=this.#f[c]}*#T({allowStale:l=this.allowStale}={}){if(this.#s)for(let c=this.#d;!(!this.#D(c)||((l||!this.#O(c))&&(yield c),c===this.#p));)c=this.#c[c]}#D(l){return void 0!==l&&this.#l.get(this.#u[l])===l}*entries(){for(let l of this.#k())void 0===this.#h[l]||void 0===this.#u[l]||this.#S(this.#h[l])||(yield[this.#u[l],this.#h[l]])}*rentries(){for(let l of this.#T())void 0===this.#h[l]||void 0===this.#u[l]||this.#S(this.#h[l])||(yield[this.#u[l],this.#h[l]])}*keys(){for(let l of this.#k()){let c=this.#u[l];void 0===c||this.#S(this.#h[l])||(yield c)}}*rkeys(){for(let l of this.#T()){let c=this.#u[l];void 0===c||this.#S(this.#h[l])||(yield c)}}*values(){for(let l of this.#k())void 0===this.#h[l]||this.#S(this.#h[l])||(yield this.#h[l])}*rvalues(){for(let l of this.#T())void 0===this.#h[l]||this.#S(this.#h[l])||(yield this.#h[l])}[Symbol.iterator](){return this.entries()}[Symbol.toStringTag]="LRUCache";find(l,c={}){for(let p of this.#k()){let b=this.#h[p],m=this.#S(b)?b.__staleWhileFetching:b;if(void 0!==m&&l(m,this.#u[p],this))return this.get(this.#u[p],c)}}forEach(l,c=this){for(let p of this.#k()){let b=this.#h[p],m=this.#S(b)?b.__staleWhileFetching:b;void 0!==m&&l.call(c,m,this.#u[p],this)}}rforEach(l,c=this){for(let p of this.#T()){let b=this.#h[p],m=this.#S(b)?b.__staleWhileFetching:b;void 0!==m&&l.call(c,m,this.#u[p],this)}}purgeStale(){let l=!1;for(let c of this.#T({allowStale:!0}))this.#O(c)&&(this.#x(this.#u[c],"expire"),l=!0);return l}info(l){let p=this.#l.get(l);if(void 0===p)return;let b=this.#h[p],m=this.#S(b)?b.__staleWhileFetching:b;if(void 0===m)return;let _={value:m};if(this.#_&&this.#y){let l=this.#_[p],b=this.#y[p];if(l&&b){let p=l-(c.now()-b);_.ttl=p,_.start=Date.now()}}return this.#m&&(_.size=this.#m[p]),_}dump(){let l=[];for(let p of this.#k({allowStale:!0})){let b=this.#u[p],m=this.#h[p],_=this.#S(m)?m.__staleWhileFetching:m;if(void 0===_||void 0===b)continue;let v={value:_};if(this.#_&&this.#y){v.ttl=this.#_[p];let l=c.now()-this.#y[p];v.start=Math.floor(Date.now()-l)}this.#m&&(v.size=this.#m[p]),l.unshift([b,v])}return l}load(l){for(let[p,b]of(this.clear(),l)){if(b.start){let l=Date.now()-b.start;b.start=c.now()-l}this.set(p,b.value,b)}}set(l,c,p={}){if(void 0===c)return this.delete(l),this;let{ttl:b=this.ttl,start:m,noDisposeOnSet:_=this.noDisposeOnSet,sizeCalculation:v=this.sizeCalculation,status:A}=p,{noUpdateTTL:T=this.noUpdateTTL}=p,R=this.#j(l,c,p.size||0,v);if(this.maxEntrySize&&R>this.maxEntrySize)return A&&(A.set="miss",A.maxEntrySizeExceeded=!0),this.#x(l,"set"),this;let P=0===this.#s?void 0:this.#l.get(l);if(void 0===P)P=0===this.#s?this.#p:0!==this.#g.length?this.#g.pop():this.#s===this.#e?this.#N(!1):this.#s,this.#u[P]=l,this.#h[P]=c,this.#l.set(l,P),this.#c[this.#p]=P,this.#f[P]=this.#p,this.#p=P,this.#s++,this.#L(P,R,A),A&&(A.set="add"),T=!1;else{this.#I(P);let p=this.#h[P];if(c!==p){if(this.#v&&this.#S(p)){p.__abortController.abort(Error("replaced"));let{__staleWhileFetching:c}=p;void 0!==c&&!_&&(this.#w&&this.#r?.(c,l,"set"),this.#E&&this.#b?.push([c,l,"set"]))}else _||(this.#w&&this.#r?.(p,l,"set"),this.#E&&this.#b?.push([p,l,"set"]));if(this.#U(P),this.#L(P,R,A),this.#h[P]=c,A){A.set="replace";let l=p&&this.#S(p)?p.__staleWhileFetching:p;void 0!==l&&(A.oldValue=l)}}else A&&(A.set="update")}if(0===b||this.#_||this.#C(),this.#_&&(T||this.#P(P,b,m),A&&this.#M(A,P)),!_&&this.#E&&this.#b){let l=this.#b,c;for(;c=l?.shift();)this.#i?.(...c)}return this}pop(){try{for(;this.#s;){let l=this.#h[this.#d];if(this.#N(!0),this.#S(l)){if(l.__staleWhileFetching)return l.__staleWhileFetching}else if(void 0!==l)return l}}finally{if(this.#E&&this.#b){let l=this.#b,c;for(;c=l?.shift();)this.#i?.(...c)}}}#N(l){let c=this.#d,p=this.#u[c],b=this.#h[c];return this.#v&&this.#S(b)?b.__abortController.abort(Error("evicted")):(this.#w||this.#E)&&(this.#w&&this.#r?.(b,p,"evict"),this.#E&&this.#b?.push([b,p,"evict"])),this.#U(c),l&&(this.#u[c]=void 0,this.#h[c]=void 0,this.#g.push(c)),1===this.#s?(this.#d=this.#p=0,this.#g.length=0):this.#d=this.#c[c],this.#l.delete(p),this.#s--,c}has(l,c={}){let{updateAgeOnHas:p=this.updateAgeOnHas,status:b}=c,m=this.#l.get(l);if(void 0!==m){let l=this.#h[m];if(this.#S(l)&&void 0===l.__staleWhileFetching)return!1;if(!this.#O(m))return p&&this.#B(m),b&&(b.has="hit",this.#M(b,m)),!0;b&&(b.has="stale",this.#M(b,m))}else b&&(b.has="miss");return!1}peek(l,c={}){let{allowStale:p=this.allowStale}=c,b=this.#l.get(l);if(void 0===b||!p&&this.#O(b))return;let m=this.#h[b];return this.#S(m)?m.__staleWhileFetching:m}#A(l,c,p,b){let _=void 0===c?void 0:this.#h[c];if(this.#S(_))return _;let v=new m,{signal:A}=p;A?.addEventListener("abort",()=>v.abort(A.reason),{signal:v.signal});let T={signal:v.signal,options:p,context:b},f=(b,m=!1)=>{let{aborted:_}=v.signal,A=p.ignoreFetchAbort&&void 0!==b;return(p.status&&(_&&!m?(p.status.fetchAborted=!0,p.status.fetchError=v.signal.reason,A&&(p.status.fetchAbortIgnored=!0)):p.status.fetchResolved=!0),!_||A||m)?(this.#h[c]===R&&(void 0===b?R.__staleWhileFetching?this.#h[c]=R.__staleWhileFetching:this.#x(l,"fetch"):(p.status&&(p.status.fetchUpdated=!0),this.set(l,b,T.options))),b):h(v.signal.reason)},h=b=>{let{aborted:m}=v.signal,_=m&&p.allowStaleOnFetchAbort,A=_||p.allowStaleOnFetchRejection,T=A||p.noDeleteOnFetchRejection;if(this.#h[c]===R&&(T&&void 0!==R.__staleWhileFetching?_||(this.#h[c]=R.__staleWhileFetching):this.#x(l,"fetch")),A)return p.status&&void 0!==R.__staleWhileFetching&&(p.status.returnedStale=!0),R.__staleWhileFetching;if(R.__returned===R)throw b};p.status&&(p.status.fetchDispatched=!0);let R=new Promise((c,b)=>{let m=this.#n?.(l,_,T);m&&m instanceof Promise&&m.then(l=>c(void 0===l?void 0:l),b),v.signal.addEventListener("abort",()=>{(!p.ignoreFetchAbort||p.allowStaleOnFetchAbort)&&(c(void 0),p.allowStaleOnFetchAbort&&(c=l=>f(l,!0)))})}).then(f,l=>(p.status&&(p.status.fetchRejected=!0,p.status.fetchError=l),h(l))),P=Object.assign(R,{__abortController:v,__staleWhileFetching:_,__returned:void 0});return void 0===c?(this.set(l,P,{...T.options,status:void 0}),c=this.#l.get(l)):this.#h[c]=P,P}#S(l){return!!this.#v&&!!l&&l instanceof Promise&&l.hasOwnProperty("__staleWhileFetching")&&l.__abortController instanceof m}async fetch(l,c={}){let{allowStale:p=this.allowStale,updateAgeOnGet:b=this.updateAgeOnGet,noDeleteOnStaleGet:m=this.noDeleteOnStaleGet,ttl:_=this.ttl,noDisposeOnSet:v=this.noDisposeOnSet,size:A=0,sizeCalculation:T=this.sizeCalculation,noUpdateTTL:R=this.noUpdateTTL,noDeleteOnFetchRejection:P=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:x=this.allowStaleOnFetchRejection,ignoreFetchAbort:B=this.ignoreFetchAbort,allowStaleOnFetchAbort:U=this.allowStaleOnFetchAbort,context:L,forceRefresh:N=!1,status:D,signal:W}=c;if(!this.#v)return D&&(D.fetch="get"),this.get(l,{allowStale:p,updateAgeOnGet:b,noDeleteOnStaleGet:m,status:D});let V={allowStale:p,updateAgeOnGet:b,noDeleteOnStaleGet:m,ttl:_,noDisposeOnSet:v,size:A,sizeCalculation:T,noUpdateTTL:R,noDeleteOnFetchRejection:P,allowStaleOnFetchRejection:x,allowStaleOnFetchAbort:U,ignoreFetchAbort:B,status:D,signal:W},H=this.#l.get(l);if(void 0===H){D&&(D.fetch="miss");let c=this.#A(l,H,V,L);return c.__returned=c}{let c=this.#h[H];if(this.#S(c)){let l=p&&void 0!==c.__staleWhileFetching;return D&&(D.fetch="inflight",l&&(D.returnedStale=!0)),l?c.__staleWhileFetching:c.__returned=c}let m=this.#O(H);if(!N&&!m)return D&&(D.fetch="hit"),this.#I(H),b&&this.#B(H),D&&this.#M(D,H),c;let _=this.#A(l,H,V,L),v=void 0!==_.__staleWhileFetching&&p;return D&&(D.fetch=m?"stale":"refresh",v&&m&&(D.returnedStale=!0)),v?_.__staleWhileFetching:_.__returned=_}}async forceFetch(l,c={}){let p=await this.fetch(l,c);if(void 0===p)throw Error("fetch() returned undefined");return p}memo(l,c={}){let p=this.#o;if(!p)throw Error("no memoMethod provided to constructor");let{context:b,forceRefresh:m,..._}=c,v=this.get(l,_);if(!m&&void 0!==v)return v;let A=p(l,v,{options:_,context:b});return this.set(l,A,_),A}get(l,c={}){let{allowStale:p=this.allowStale,updateAgeOnGet:b=this.updateAgeOnGet,noDeleteOnStaleGet:m=this.noDeleteOnStaleGet,status:_}=c,v=this.#l.get(l);if(void 0!==v){let c=this.#h[v],A=this.#S(c);return _&&this.#M(_,v),this.#O(v)?(_&&(_.get="stale"),A?(_&&p&&void 0!==c.__staleWhileFetching&&(_.returnedStale=!0),p?c.__staleWhileFetching:void 0):(m||this.#x(l,"expire"),_&&p&&(_.returnedStale=!0),p?c:void 0)):(_&&(_.get="hit"),A?c.__staleWhileFetching:(this.#I(v),b&&this.#B(v),c))}_&&(_.get="miss")}#F(l,c){this.#f[c]=l,this.#c[l]=c}#I(l){l!==this.#p&&(l===this.#d?this.#d=this.#c[l]:this.#F(this.#f[l],this.#c[l]),this.#F(this.#p,l),this.#p=l)}delete(l){return this.#x(l,"delete")}#x(l,c){let p=!1;if(0!==this.#s){let b=this.#l.get(l);if(void 0!==b){if(p=!0,1===this.#s)this.#W(c);else{this.#U(b);let p=this.#h[b];if(this.#S(p)?p.__abortController.abort(Error("deleted")):(this.#w||this.#E)&&(this.#w&&this.#r?.(p,l,c),this.#E&&this.#b?.push([p,l,c])),this.#l.delete(l),this.#u[b]=void 0,this.#h[b]=void 0,b===this.#p)this.#p=this.#f[b];else if(b===this.#d)this.#d=this.#c[b];else{let l=this.#f[b];this.#c[l]=this.#c[b];let c=this.#c[b];this.#f[c]=this.#f[b]}this.#s--,this.#g.push(b)}}}if(this.#E&&this.#b?.length){let l=this.#b,c;for(;c=l?.shift();)this.#i?.(...c)}return p}clear(){return this.#W("delete")}#W(l){for(let c of this.#T({allowStale:!0})){let p=this.#h[c];if(this.#S(p))p.__abortController.abort(Error("deleted"));else{let b=this.#u[c];this.#w&&this.#r?.(p,b,l),this.#E&&this.#b?.push([p,b,l])}}if(this.#l.clear(),this.#h.fill(void 0),this.#u.fill(void 0),this.#_&&this.#y&&(this.#_.fill(0),this.#y.fill(0)),this.#m&&this.#m.fill(0),this.#d=0,this.#p=0,this.#g.length=0,this.#a=0,this.#s=0,this.#E&&this.#b){let l=this.#b,c;for(;c=l?.shift();)this.#i?.(...c)}}};l.LRUCache=x}),rS=O(l=>{A(),th(),e6(),Object.defineProperty(l,"t",{value:!0}),l.ContainerIterator=l.Container=l.Base=void 0,l.ContainerIterator=class{constructor(l=0){this.iteratorType=l}equals(l){return this.o===l.o}};var c=class{constructor(){this.i=0}get length(){return this.i}size(){return this.i}empty(){return 0===this.i}};l.Base=c;var p=class extends c{};l.Container=p}),rA=O(l=>{A(),th(),e6(),Object.defineProperty(l,"t",{value:!0}),l.default=void 0;var c=rS(),p=class extends c.Base{constructor(l=[]){super(),this.S=[];let c=this;l.forEach(function(l){c.push(l)})}clear(){this.i=0,this.S=[]}push(l){return this.S.push(l),this.i+=1,this.i}pop(){if(0!==this.i)return this.i-=1,this.S.pop()}top(){return this.S[this.i-1]}};l.default=p}),rI=O(l=>{A(),th(),e6(),Object.defineProperty(l,"t",{value:!0}),l.default=void 0;var c=rS(),p=class extends c.Base{constructor(l=[]){super(),this.j=0,this.q=[];let c=this;l.forEach(function(l){c.push(l)})}clear(){this.q=[],this.i=this.j=0}push(l){let c=this.q.length;if(this.j/c>.5&&this.j+this.i>=c&&c>4096){let c=this.i;for(let l=0;l<c;++l)this.q[l]=this.q[this.j+l];this.j=0,this.q[this.i]=l}else this.q[this.j+this.i]=l;return++this.i}pop(){if(0===this.i)return;let l=this.q[this.j++];return this.i-=1,l}front(){if(0!==this.i)return this.q[this.j]}};l.default=p}),rk=O(l=>{A(),th(),e6(),Object.defineProperty(l,"t",{value:!0}),l.default=void 0;var c=rS(),p=class extends c.Base{constructor(l=[],c=function(l,c){return l>c?-1:l<c?1:0},p=!0){if(super(),this.v=c,Array.isArray(l))this.C=p?[...l]:l;else{this.C=[];let c=this;l.forEach(function(l){c.C.push(l)})}this.i=this.C.length;let b=this.i>>1;for(let l=this.i-1>>1;l>=0;--l)this.k(l,b)}m(l){let c=this.C[l];for(;l>0;){let p=l-1>>1,b=this.C[p];if(0>=this.v(b,c))break;this.C[l]=b,l=p}this.C[l]=c}k(l,c){let p=this.C[l];for(;l<c;){let c=l<<1|1,b=c+1,m=this.C[c];if(b<this.i&&this.v(m,this.C[b])>0&&(c=b,m=this.C[b]),this.v(m,p)>=0)break;this.C[l]=m,l=c}this.C[l]=p}clear(){this.i=0,this.C.length=0}push(l){this.C.push(l),this.m(this.i),this.i+=1}pop(){if(0===this.i)return;let l=this.C[0],c=this.C.pop();return this.i-=1,this.i&&(this.C[0]=c,this.k(0,this.i>>1)),l}top(){return this.C[0]}find(l){return this.C.indexOf(l)>=0}remove(l){let c=this.C.indexOf(l);return!(c<0)&&(0===c?this.pop():c===this.i-1?(this.C.pop(),this.i-=1):(this.C.splice(c,1,this.C.pop()),this.i-=1,this.m(c),this.k(c,this.i>>1)),!0)}updateItem(l){let c=this.C.indexOf(l);return!(c<0)&&(this.m(c),this.k(c,this.i>>1),!0)}toArray(){return[...this.C]}};l.default=p}),rT=O(l=>{A(),th(),e6(),Object.defineProperty(l,"t",{value:!0}),l.default=void 0;var c=rS(),p=class extends c.Container{};l.default=p}),rO=O(l=>{function Dv(){throw RangeError("Iterator access denied!")}A(),th(),e6(),Object.defineProperty(l,"t",{value:!0}),l.throwIteratorAccessError=Dv}),rR=O(l=>{A(),th(),e6(),Object.defineProperty(l,"t",{value:!0}),l.RandomIterator=void 0;var c=rS(),p=rO(),b=class extends c.ContainerIterator{constructor(l,c){super(c),this.o=l,0===this.iteratorType?(this.pre=function(){return 0===this.o&&(0,p.throwIteratorAccessError)(),this.o-=1,this},this.next=function(){return this.o===this.container.size()&&(0,p.throwIteratorAccessError)(),this.o+=1,this}):(this.pre=function(){return this.o===this.container.size()-1&&(0,p.throwIteratorAccessError)(),this.o+=1,this},this.next=function(){return -1===this.o&&(0,p.throwIteratorAccessError)(),this.o-=1,this})}get pointer(){return this.container.getElementByPos(this.o)}set pointer(l){this.container.setElementByPos(this.o,l)}};l.RandomIterator=b}),rC=O(l=>{A(),th(),e6(),Object.defineProperty(l,"t",{value:!0}),l.default=void 0;var c=$v(rT()),p=rR();function $v(l){return l&&l.t?l:{default:l}}var b=class t extends p.RandomIterator{constructor(l,c,p){super(l,p),this.container=c}copy(){return new t(this.o,this.container,this.iteratorType)}},m=class extends c.default{constructor(l=[],c=!0){if(super(),Array.isArray(l))this.J=c?[...l]:l,this.i=l.length;else{this.J=[];let c=this;l.forEach(function(l){c.pushBack(l)})}}clear(){this.i=0,this.J.length=0}begin(){return new b(0,this)}end(){return new b(this.i,this)}rBegin(){return new b(this.i-1,this,1)}rEnd(){return new b(-1,this,1)}front(){return this.J[0]}back(){return this.J[this.i-1]}getElementByPos(l){if(l<0||l>this.i-1)throw RangeError();return this.J[l]}eraseElementByPos(l){if(l<0||l>this.i-1)throw RangeError();return this.J.splice(l,1),this.i-=1,this.i}eraseElementByValue(l){let c=0;for(let p=0;p<this.i;++p)this.J[p]!==l&&(this.J[c++]=this.J[p]);return this.i=this.J.length=c,this.i}eraseElementByIterator(l){let c=l.o;return l=l.next(),this.eraseElementByPos(c),l}pushBack(l){return this.J.push(l),this.i+=1,this.i}popBack(){if(0!==this.i)return this.i-=1,this.J.pop()}setElementByPos(l,c){if(l<0||l>this.i-1)throw RangeError();this.J[l]=c}insert(l,c,p=1){if(l<0||l>this.i)throw RangeError();return this.J.splice(l,0,...Array(p).fill(c)),this.i+=p,this.i}find(l){for(let c=0;c<this.i;++c)if(this.J[c]===l)return new b(c,this);return this.end()}reverse(){this.J.reverse()}unique(){let l=1;for(let c=1;c<this.i;++c)this.J[c]!==this.J[c-1]&&(this.J[l++]=this.J[c]);return this.i=this.J.length=l,this.i}sort(l){this.J.sort(l)}forEach(l){for(let c=0;c<this.i;++c)l(this.J[c],c,this)}[Symbol.iterator](){return(function*(){yield*this.J}).bind(this)()}};l.default=m}),rP=O(l=>{A(),th(),e6(),Object.defineProperty(l,"t",{value:!0}),l.default=void 0;var c=Kv(rT()),p=rS(),b=rO();function Kv(l){return l&&l.t?l:{default:l}}var m=class t extends p.ContainerIterator{constructor(l,c,p,m){super(m),this.o=l,this.h=c,this.container=p,0===this.iteratorType?(this.pre=function(){return this.o.L===this.h&&(0,b.throwIteratorAccessError)(),this.o=this.o.L,this},this.next=function(){return this.o===this.h&&(0,b.throwIteratorAccessError)(),this.o=this.o.B,this}):(this.pre=function(){return this.o.B===this.h&&(0,b.throwIteratorAccessError)(),this.o=this.o.B,this},this.next=function(){return this.o===this.h&&(0,b.throwIteratorAccessError)(),this.o=this.o.L,this})}get pointer(){return this.o===this.h&&(0,b.throwIteratorAccessError)(),this.o.l}set pointer(l){this.o===this.h&&(0,b.throwIteratorAccessError)(),this.o.l=l}copy(){return new t(this.o,this.h,this.container,this.iteratorType)}},_=class extends c.default{constructor(l=[]){super(),this.h={},this.p=this._=this.h.L=this.h.B=this.h;let c=this;l.forEach(function(l){c.pushBack(l)})}V(l){let{L:c,B:p}=l;c.B=p,p.L=c,l===this.p&&(this.p=p),l===this._&&(this._=c),this.i-=1}G(l,c){let p=c.B,b={l:l,L:c,B:p};c.B=b,p.L=b,c===this.h&&(this.p=b),p===this.h&&(this._=b),this.i+=1}clear(){this.i=0,this.p=this._=this.h.L=this.h.B=this.h}begin(){return new m(this.p,this.h,this)}end(){return new m(this.h,this.h,this)}rBegin(){return new m(this._,this.h,this,1)}rEnd(){return new m(this.h,this.h,this,1)}front(){return this.p.l}back(){return this._.l}getElementByPos(l){if(l<0||l>this.i-1)throw RangeError();let c=this.p;for(;l--;)c=c.B;return c.l}eraseElementByPos(l){if(l<0||l>this.i-1)throw RangeError();let c=this.p;for(;l--;)c=c.B;return this.V(c),this.i}eraseElementByValue(l){let c=this.p;for(;c!==this.h;)c.l===l&&this.V(c),c=c.B;return this.i}eraseElementByIterator(l){let c=l.o;return c===this.h&&(0,b.throwIteratorAccessError)(),l=l.next(),this.V(c),l}pushBack(l){return this.G(l,this._),this.i}popBack(){if(0===this.i)return;let l=this._.l;return this.V(this._),l}pushFront(l){return this.G(l,this.h),this.i}popFront(){if(0===this.i)return;let l=this.p.l;return this.V(this.p),l}setElementByPos(l,c){if(l<0||l>this.i-1)throw RangeError();let p=this.p;for(;l--;)p=p.B;p.l=c}insert(l,c,p=1){if(l<0||l>this.i)throw RangeError();if(p<=0)return this.i;if(0===l)for(;p--;)this.pushFront(c);else if(l===this.i)for(;p--;)this.pushBack(c);else{let b=this.p;for(let c=1;c<l;++c)b=b.B;let m=b.B;for(this.i+=p;p--;)b.B={l:c,L:b},b.B.L=b,b=b.B;b.B=m,m.L=b}return this.i}find(l){let c=this.p;for(;c!==this.h;){if(c.l===l)return new m(c,this.h,this);c=c.B}return this.end()}reverse(){if(this.i<=1)return;let l=this.p,c=this._,p=0;for(;p<<1<this.i;){let b=l.l;l.l=c.l,c.l=b,l=l.B,c=c.L,p+=1}}unique(){if(this.i<=1)return this.i;let l=this.p;for(;l!==this.h;){let c=l;for(;c.B!==this.h&&c.l===c.B.l;)c=c.B,this.i-=1;l.B=c.B,l.B.L=l,l=l.B}return this.i}sort(l){if(this.i<=1)return;let c=[];this.forEach(function(l){c.push(l)}),c.sort(l);let p=this.p;c.forEach(function(l){p.l=l,p=p.B})}merge(l){let c=this;if(0===this.i)l.forEach(function(l){c.pushBack(l)});else{let p=this.p;l.forEach(function(l){for(;p!==c.h&&p.l<=l;)p=p.B;c.G(l,p.L)})}return this.i}forEach(l){let c=this.p,p=0;for(;c!==this.h;)l(c.l,p++,this),c=c.B}[Symbol.iterator](){return(function*(){if(0===this.i)return;let l=this.p;for(;l!==this.h;)yield l.l,l=l.B}).bind(this)()}};l.default=_}),rx=O(l=>{A(),th(),e6(),Object.defineProperty(l,"t",{value:!0}),l.default=void 0;var c=Jv(rT()),p=rR();function Jv(l){return l&&l.t?l:{default:l}}var b=class t extends p.RandomIterator{constructor(l,c,p){super(l,p),this.container=c}copy(){return new t(this.o,this.container,this.iteratorType)}},m=class extends c.default{constructor(l=[],c=4096){super(),this.j=0,this.D=0,this.R=0,this.N=0,this.P=0,this.A=[];let p=(()=>{if("number"==typeof l.length)return l.length;if("number"==typeof l.size)return l.size;if("function"==typeof l.size)return l.size();throw TypeError("Cannot get the length or size of the container")})();this.F=c,this.P=Math.max(Math.ceil(p/this.F),1);for(let l=0;l<this.P;++l)this.A.push(Array(this.F));let b=Math.ceil(p/this.F);this.j=this.R=(this.P>>1)-(b>>1),this.D=this.N=this.F-p%this.F>>1;let m=this;l.forEach(function(l){m.pushBack(l)})}T(){let l=[],c=Math.max(this.P>>1,1);for(let p=0;p<c;++p)l[p]=Array(this.F);for(let c=this.j;c<this.P;++c)l[l.length]=this.A[c];for(let c=0;c<this.R;++c)l[l.length]=this.A[c];l[l.length]=[...this.A[this.R]],this.j=c,this.R=l.length-1;for(let p=0;p<c;++p)l[l.length]=Array(this.F);this.A=l,this.P=l.length}O(l){let c=this.D+l+1,p=c%this.F,b=p-1,m=this.j+(c-p)/this.F;return 0===p&&(m-=1),m%=this.P,b<0&&(b+=this.F),{curNodeBucketIndex:m,curNodePointerIndex:b}}clear(){this.A=[Array(this.F)],this.P=1,this.j=this.R=this.i=0,this.D=this.N=this.F>>1}begin(){return new b(0,this)}end(){return new b(this.i,this)}rBegin(){return new b(this.i-1,this,1)}rEnd(){return new b(-1,this,1)}front(){if(0!==this.i)return this.A[this.j][this.D]}back(){if(0!==this.i)return this.A[this.R][this.N]}pushBack(l){return this.i&&(this.N<this.F-1?this.N+=1:(this.R<this.P-1?this.R+=1:this.R=0,this.N=0),this.R===this.j&&this.N===this.D&&this.T()),this.i+=1,this.A[this.R][this.N]=l,this.i}popBack(){if(0===this.i)return;let l=this.A[this.R][this.N];return 1!==this.i&&(this.N>0?this.N-=1:(this.R>0?this.R-=1:this.R=this.P-1,this.N=this.F-1)),this.i-=1,l}pushFront(l){return this.i&&(this.D>0?this.D-=1:(this.j>0?this.j-=1:this.j=this.P-1,this.D=this.F-1),this.j===this.R&&this.D===this.N&&this.T()),this.i+=1,this.A[this.j][this.D]=l,this.i}popFront(){if(0===this.i)return;let l=this.A[this.j][this.D];return 1!==this.i&&(this.D<this.F-1?this.D+=1:(this.j<this.P-1?this.j+=1:this.j=0,this.D=0)),this.i-=1,l}getElementByPos(l){if(l<0||l>this.i-1)throw RangeError();let{curNodeBucketIndex:c,curNodePointerIndex:p}=this.O(l);return this.A[c][p]}setElementByPos(l,c){if(l<0||l>this.i-1)throw RangeError();let{curNodeBucketIndex:p,curNodePointerIndex:b}=this.O(l);this.A[p][b]=c}insert(l,c,p=1){if(l<0||l>this.i)throw RangeError();if(0===l)for(;p--;)this.pushFront(c);else if(l===this.i)for(;p--;)this.pushBack(c);else{let b=[];for(let c=l;c<this.i;++c)b.push(this.getElementByPos(c));this.cut(l-1);for(let l=0;l<p;++l)this.pushBack(c);for(let l=0;l<b.length;++l)this.pushBack(b[l])}return this.i}cut(l){if(l<0)return this.clear(),0;let{curNodeBucketIndex:c,curNodePointerIndex:p}=this.O(l);return this.R=c,this.N=p,this.i=l+1,this.i}eraseElementByPos(l){if(l<0||l>this.i-1)throw RangeError();if(0===l)this.popFront();else if(l===this.i-1)this.popBack();else{let c=[];for(let p=l+1;p<this.i;++p)c.push(this.getElementByPos(p));this.cut(l),this.popBack();let p=this;c.forEach(function(l){p.pushBack(l)})}return this.i}eraseElementByValue(l){if(0===this.i)return 0;let c=[];for(let p=0;p<this.i;++p){let b=this.getElementByPos(p);b!==l&&c.push(b)}let p=c.length;for(let l=0;l<p;++l)this.setElementByPos(l,c[l]);return this.cut(p-1)}eraseElementByIterator(l){let c=l.o;return this.eraseElementByPos(c),l=l.next()}find(l){for(let c=0;c<this.i;++c)if(this.getElementByPos(c)===l)return new b(c,this);return this.end()}reverse(){let l=0,c=this.i-1;for(;l<c;){let p=this.getElementByPos(l);this.setElementByPos(l,this.getElementByPos(c)),this.setElementByPos(c,p),l+=1,c-=1}}unique(){if(this.i<=1)return this.i;let l=1,c=this.getElementByPos(0);for(let p=1;p<this.i;++p){let b=this.getElementByPos(p);b!==c&&(c=b,this.setElementByPos(l++,b))}for(;this.i>l;)this.popBack();return this.i}sort(l){let c=[];for(let l=0;l<this.i;++l)c.push(this.getElementByPos(l));c.sort(l);for(let l=0;l<this.i;++l)this.setElementByPos(l,c[l])}shrinkToFit(){if(0===this.i)return;let l=[];this.forEach(function(c){l.push(c)}),this.P=Math.max(Math.ceil(this.i/this.F),1),this.i=this.j=this.R=this.D=this.N=0,this.A=[];for(let l=0;l<this.P;++l)this.A.push(Array(this.F));for(let c=0;c<l.length;++c)this.pushBack(l[c])}forEach(l){for(let c=0;c<this.i;++c)l(this.getElementByPos(c),c,this)}[Symbol.iterator](){return(function*(){for(let l=0;l<this.i;++l)yield this.getElementByPos(l)}).bind(this)()}};l.default=m}),rB=O(l=>{A(),th(),e6(),Object.defineProperty(l,"t",{value:!0}),l.TreeNodeEnableIndex=l.TreeNode=void 0;var c=class{constructor(l,c){this.ee=1,this.u=void 0,this.l=void 0,this.U=void 0,this.W=void 0,this.tt=void 0,this.u=l,this.l=c}L(){let l=this;if(1===l.ee&&l.tt.tt===l)l=l.W;else if(l.U)for(l=l.U;l.W;)l=l.W;else{let c=l.tt;for(;c.U===l;)c=(l=c).tt;l=c}return l}B(){let l=this;if(l.W){for(l=l.W;l.U;)l=l.U;return l}{let c=l.tt;for(;c.W===l;)c=(l=c).tt;return l.W!==c?c:l}}te(){let l=this.tt,c=this.W,p=c.U;return l.tt===this?l.tt=c:l.U===this?l.U=c:l.W=c,c.tt=l,c.U=this,this.tt=c,this.W=p,p&&(p.tt=this),c}se(){let l=this.tt,c=this.U,p=c.W;return l.tt===this?l.tt=c:l.U===this?l.U=c:l.W=c,c.tt=l,c.W=this,this.tt=c,this.U=p,p&&(p.tt=this),c}};l.TreeNode=c;var p=class extends c{constructor(){super(...arguments),this.rt=1}te(){let l=super.te();return this.ie(),l.ie(),l}se(){let l=super.se();return this.ie(),l.ie(),l}ie(){this.rt=1,this.U&&(this.rt+=this.U.rt),this.W&&(this.rt+=this.W.rt)}};l.TreeNodeEnableIndex=p}),rM=O(l=>{A(),th(),e6(),Object.defineProperty(l,"t",{value:!0}),l.default=void 0;var c=rB(),p=rS(),b=rO(),m=class extends p.Container{constructor(l=function(l,c){return l<c?-1:l>c?1:0},p=!1){super(),this.Y=void 0,this.v=l,p?(this.re=c.TreeNodeEnableIndex,this.M=function(l,c,p){let b=this.ne(l,c,p);if(b){let l=b.tt;for(;l!==this.h;)l.rt+=1,l=l.tt;let c=this.he(b);if(c){let{parentNode:l,grandParent:p,curNode:b}=c;l.ie(),p.ie(),b.ie()}}return this.i},this.V=function(l){let c=this.fe(l);for(;c!==this.h;)c.rt-=1,c=c.tt}):(this.re=c.TreeNode,this.M=function(l,c,p){let b=this.ne(l,c,p);return b&&this.he(b),this.i},this.V=this.fe),this.h=new this.re}X(l,c){let p=this.h;for(;l;){let b=this.v(l.u,c);if(b<0)l=l.W;else{if(!(b>0))return l;p=l,l=l.U}}return p}Z(l,c){let p=this.h;for(;l;)0>=this.v(l.u,c)?l=l.W:(p=l,l=l.U);return p}$(l,c){let p=this.h;for(;l;){let b=this.v(l.u,c);if(b<0)p=l,l=l.W;else{if(!(b>0))return l;l=l.U}}return p}rr(l,c){let p=this.h;for(;l;)0>this.v(l.u,c)?(p=l,l=l.W):l=l.U;return p}ue(l){for(;;){let c=l.tt;if(c===this.h)return;if(1===l.ee){l.ee=0;return}if(l===c.U){let p=c.W;if(1===p.ee)p.ee=0,c.ee=1,c===this.Y?this.Y=c.te():c.te();else if(p.W&&1===p.W.ee){p.ee=c.ee,c.ee=0,p.W.ee=0,c===this.Y?this.Y=c.te():c.te();return}else p.U&&1===p.U.ee?(p.ee=1,p.U.ee=0,p.se()):(p.ee=1,l=c)}else{let p=c.U;if(1===p.ee)p.ee=0,c.ee=1,c===this.Y?this.Y=c.se():c.se();else if(p.U&&1===p.U.ee){p.ee=c.ee,c.ee=0,p.U.ee=0,c===this.Y?this.Y=c.se():c.se();return}else p.W&&1===p.W.ee?(p.ee=1,p.W.ee=0,p.te()):(p.ee=1,l=c)}}}fe(l){if(1===this.i)return this.clear(),this.h;let c=l;for(;c.U||c.W;){if(c.W)for(c=c.W;c.U;)c=c.U;else c=c.U;[l.u,c.u]=[c.u,l.u],[l.l,c.l]=[c.l,l.l],l=c}this.h.U===c?this.h.U=c.tt:this.h.W===c&&(this.h.W=c.tt),this.ue(c);let p=c.tt;return c===p.U?p.U=void 0:p.W=void 0,this.i-=1,this.Y.ee=0,p}oe(l,c){return void 0!==l&&(!!(this.oe(l.U,c)||c(l))||this.oe(l.W,c))}he(l){for(;;){let c=l.tt;if(0===c.ee)return;let p=c.tt;if(c===p.U){let b=p.W;if(b&&1===b.ee){if(b.ee=c.ee=0,p===this.Y)return;p.ee=1,l=p;continue}if(l===c.W){if(l.ee=0,l.U&&(l.U.tt=c),l.W&&(l.W.tt=p),c.W=l.U,p.U=l.W,l.U=c,l.W=p,p===this.Y)this.Y=l,this.h.tt=l;else{let c=p.tt;c.U===p?c.U=l:c.W=l}return l.tt=p.tt,c.tt=l,p.tt=l,p.ee=1,{parentNode:c,grandParent:p,curNode:l}}c.ee=0,p===this.Y?this.Y=p.se():p.se(),p.ee=1}else{let b=p.U;if(b&&1===b.ee){if(b.ee=c.ee=0,p===this.Y)return;p.ee=1,l=p;continue}if(l===c.U){if(l.ee=0,l.U&&(l.U.tt=p),l.W&&(l.W.tt=c),p.W=l.U,c.U=l.W,l.U=p,l.W=c,p===this.Y)this.Y=l,this.h.tt=l;else{let c=p.tt;c.U===p?c.U=l:c.W=l}return l.tt=p.tt,c.tt=l,p.tt=l,p.ee=1,{parentNode:c,grandParent:p,curNode:l}}c.ee=0,p===this.Y?this.Y=p.te():p.te(),p.ee=1}return}}ne(l,c,p){if(void 0===this.Y){this.i+=1,this.Y=new this.re(l,c),this.Y.ee=0,this.Y.tt=this.h,this.h.tt=this.Y,this.h.U=this.Y,this.h.W=this.Y;return}let b,m=this.h.U,_=this.v(m.u,l);if(0===_){m.l=c;return}if(_>0)m.U=new this.re(l,c),m.U.tt=m,b=m.U,this.h.U=b;else{let m=this.h.W,_=this.v(m.u,l);if(0===_){m.l=c;return}if(_<0)m.W=new this.re(l,c),m.W.tt=m,b=m.W,this.h.W=b;else{if(void 0!==p){let m=p.o;if(m!==this.h){let p=this.v(m.u,l);if(0===p){m.l=c;return}if(p>0){let p=m.L(),_=this.v(p.u,l);if(0===_){p.l=c;return}_<0&&(b=new this.re(l,c),void 0===p.W?(p.W=b,b.tt=p):(m.U=b,b.tt=m))}}}if(void 0===b)for(b=this.Y;;){let p=this.v(b.u,l);if(p>0){if(void 0===b.U){b.U=new this.re(l,c),b.U.tt=b,b=b.U;break}b=b.U}else if(p<0){if(void 0===b.W){b.W=new this.re(l,c),b.W.tt=b,b=b.W;break}b=b.W}else{b.l=c;return}}}}return this.i+=1,b}I(l,c){for(;l;){let p=this.v(l.u,c);if(p<0)l=l.W;else{if(!(p>0))return l;l=l.U}}return l||this.h}clear(){this.i=0,this.Y=void 0,this.h.tt=void 0,this.h.U=this.h.W=void 0}updateKeyByIterator(l,c){let p=l.o;if(p===this.h&&(0,b.throwIteratorAccessError)(),1===this.i)return p.u=c,!0;if(p===this.h.U)return this.v(p.B().u,c)>0&&(p.u=c,!0);if(p===this.h.W)return 0>this.v(p.L().u,c)&&(p.u=c,!0);let m=p.L().u;if(this.v(m,c)>=0)return!1;let _=p.B().u;return!(0>=this.v(_,c))&&(p.u=c,!0)}eraseElementByPos(l){if(l<0||l>this.i-1)throw RangeError();let c=0,p=this;return this.oe(this.Y,function(b){return l===c?(p.V(b),!0):(c+=1,!1)}),this.i}eraseElementByKey(l){if(0===this.i)return!1;let c=this.I(this.Y,l);return c!==this.h&&(this.V(c),!0)}eraseElementByIterator(l){let c=l.o;c===this.h&&(0,b.throwIteratorAccessError)();let p=void 0===c.W;return 0===l.iteratorType?p&&l.next():p&&void 0!==c.U||l.next(),this.V(c),l}forEach(l){let c=0;for(let p of this)l(p,c++,this)}getElementByPos(l){if(l<0||l>this.i-1)throw RangeError();let c,p=0;for(let b of this){if(p===l){c=b;break}p+=1}return c}getHeight(){if(0===this.i)return 0;let e=function(l){return l?Math.max(e(l.U),e(l.W))+1:0};return e(this.Y)}};l.default=m}),rU=O(l=>{A(),th(),e6(),Object.defineProperty(l,"t",{value:!0}),l.default=void 0;var c=rS(),p=rO(),b=class extends c.ContainerIterator{constructor(l,c,b){super(b),this.o=l,this.h=c,0===this.iteratorType?(this.pre=function(){return this.o===this.h.U&&(0,p.throwIteratorAccessError)(),this.o=this.o.L(),this},this.next=function(){return this.o===this.h&&(0,p.throwIteratorAccessError)(),this.o=this.o.B(),this}):(this.pre=function(){return this.o===this.h.W&&(0,p.throwIteratorAccessError)(),this.o=this.o.B(),this},this.next=function(){return this.o===this.h&&(0,p.throwIteratorAccessError)(),this.o=this.o.L(),this})}get index(){let l=this.o,c=this.h.tt;if(l===this.h)return c?c.rt-1:0;let p=0;for(l.U&&(p+=l.U.rt);l!==c;){let c=l.tt;l===c.W&&(p+=1,c.U&&(p+=c.U.rt)),l=c}return p}};l.default=b}),rj=O(l=>{A(),th(),e6(),Object.defineProperty(l,"t",{value:!0}),l.default=void 0;var c=np(rM()),p=np(rU()),b=rO();function np(l){return l&&l.t?l:{default:l}}var m=class t extends p.default{constructor(l,c,p,b){super(l,c,b),this.container=p}get pointer(){return this.o===this.h&&(0,b.throwIteratorAccessError)(),this.o.u}copy(){return new t(this.o,this.h,this.container,this.iteratorType)}},_=class extends c.default{constructor(l=[],c,p){super(c,p);let b=this;l.forEach(function(l){b.insert(l)})}*K(l){void 0!==l&&(yield*this.K(l.U),yield l.u,yield*this.K(l.W))}begin(){return new m(this.h.U||this.h,this.h,this)}end(){return new m(this.h,this.h,this)}rBegin(){return new m(this.h.W||this.h,this.h,this,1)}rEnd(){return new m(this.h,this.h,this,1)}front(){return this.h.U?this.h.U.u:void 0}back(){return this.h.W?this.h.W.u:void 0}insert(l,c){return this.M(l,void 0,c)}find(l){return new m(this.I(this.Y,l),this.h,this)}lowerBound(l){return new m(this.X(this.Y,l),this.h,this)}upperBound(l){return new m(this.Z(this.Y,l),this.h,this)}reverseLowerBound(l){return new m(this.$(this.Y,l),this.h,this)}reverseUpperBound(l){return new m(this.rr(this.Y,l),this.h,this)}union(l){let c=this;return l.forEach(function(l){c.insert(l)}),this.i}[Symbol.iterator](){return this.K(this.Y)}};l.default=_}),rL=O(l=>{A(),th(),e6(),Object.defineProperty(l,"t",{value:!0}),l.default=void 0;var c=op(rM()),p=op(rU()),b=rO();function op(l){return l&&l.t?l:{default:l}}var m=class t extends p.default{constructor(l,c,p,b){super(l,c,b),this.container=p}get pointer(){this.o===this.h&&(0,b.throwIteratorAccessError)();let l=this;return new Proxy([],{get:(c,p)=>"0"===p?l.o.u:"1"===p?l.o.l:void 0,set(c,p,b){if("1"!==p)throw TypeError("props must be 1");return l.o.l=b,!0}})}copy(){return new t(this.o,this.h,this.container,this.iteratorType)}},_=class extends c.default{constructor(l=[],c,p){super(c,p);let b=this;l.forEach(function(l){b.setElement(l[0],l[1])})}*K(l){void 0!==l&&(yield*this.K(l.U),yield[l.u,l.l],yield*this.K(l.W))}begin(){return new m(this.h.U||this.h,this.h,this)}end(){return new m(this.h,this.h,this)}rBegin(){return new m(this.h.W||this.h,this.h,this,1)}rEnd(){return new m(this.h,this.h,this,1)}front(){if(0===this.i)return;let l=this.h.U;return[l.u,l.l]}back(){if(0===this.i)return;let l=this.h.W;return[l.u,l.l]}lowerBound(l){return new m(this.X(this.Y,l),this.h,this)}upperBound(l){return new m(this.Z(this.Y,l),this.h,this)}reverseLowerBound(l){return new m(this.$(this.Y,l),this.h,this)}reverseUpperBound(l){return new m(this.rr(this.Y,l),this.h,this)}setElement(l,c,p){return this.M(l,c,p)}find(l){return new m(this.I(this.Y,l),this.h,this)}getElementByKey(l){return this.I(this.Y,l).l}union(l){let c=this;return l.forEach(function(l){c.setElement(l[0],l[1])}),this.i}[Symbol.iterator](){return this.K(this.Y)}};l.default=_}),rN=O(l=>{function fE(l){let c=typeof l;return"object"===c&&null!==l||"function"===c}A(),th(),e6(),Object.defineProperty(l,"t",{value:!0}),l.default=fE}),rD=O(l=>{A(),th(),e6(),Object.defineProperty(l,"t",{value:!0}),l.HashContainerIterator=l.HashContainer=void 0;var c=rS(),p=hE(rN()),b=rO();function hE(l){return l&&l.t?l:{default:l}}var m=class extends c.ContainerIterator{constructor(l,c,p){super(p),this.o=l,this.h=c,0===this.iteratorType?(this.pre=function(){return this.o.L===this.h&&(0,b.throwIteratorAccessError)(),this.o=this.o.L,this},this.next=function(){return this.o===this.h&&(0,b.throwIteratorAccessError)(),this.o=this.o.B,this}):(this.pre=function(){return this.o.B===this.h&&(0,b.throwIteratorAccessError)(),this.o=this.o.B,this},this.next=function(){return this.o===this.h&&(0,b.throwIteratorAccessError)(),this.o=this.o.L,this})}};l.HashContainerIterator=m;var _=class extends c.Container{constructor(){super(),this.H=[],this.g={},this.HASH_TAG=Symbol("@@HASH_TAG"),Object.setPrototypeOf(this.g,null),this.h={},this.h.L=this.h.B=this.p=this._=this.h}V(l){let{L:c,B:p}=l;c.B=p,p.L=c,l===this.p&&(this.p=p),l===this._&&(this._=c),this.i-=1}M(l,c,b){let m;if(void 0===b&&(b=(0,p.default)(l)),b){let p=l[this.HASH_TAG];if(void 0!==p)return this.H[p].l=c,this.i;Object.defineProperty(l,this.HASH_TAG,{value:this.H.length,configurable:!0}),m={u:l,l:c,L:this._,B:this.h},this.H.push(m)}else{let p=this.g[l];if(p)return p.l=c,this.i;m={u:l,l:c,L:this._,B:this.h},this.g[l]=m}return 0===this.i?(this.p=m,this.h.B=m):this._.B=m,this._=m,this.h.L=m,++this.i}I(l,c){if(void 0===c&&(c=(0,p.default)(l)),!c)return this.g[l]||this.h;{let c=l[this.HASH_TAG];return void 0===c?this.h:this.H[c]}}clear(){let l=this.HASH_TAG;this.H.forEach(function(c){delete c.u[l]}),this.H=[],this.g={},Object.setPrototypeOf(this.g,null),this.i=0,this.p=this._=this.h.L=this.h.B=this.h}eraseElementByKey(l,c){let b;if(void 0===c&&(c=(0,p.default)(l)),c){let c=l[this.HASH_TAG];if(void 0===c)return!1;delete l[this.HASH_TAG],b=this.H[c],delete this.H[c]}else{if(void 0===(b=this.g[l]))return!1;delete this.g[l]}return this.V(b),!0}eraseElementByIterator(l){let c=l.o;return c===this.h&&(0,b.throwIteratorAccessError)(),this.V(c),l.next()}eraseElementByPos(l){if(l<0||l>this.i-1)throw RangeError();let c=this.p;for(;l--;)c=c.B;return this.V(c),this.i}};l.HashContainer=_}),rF=O(l=>{A(),th(),e6(),Object.defineProperty(l,"t",{value:!0}),l.default=void 0;var c=rD(),p=rO(),b=class t extends c.HashContainerIterator{constructor(l,c,p,b){super(l,c,b),this.container=p}get pointer(){return this.o===this.h&&(0,p.throwIteratorAccessError)(),this.o.u}copy(){return new t(this.o,this.h,this.container,this.iteratorType)}},m=class extends c.HashContainer{constructor(l=[]){super();let c=this;l.forEach(function(l){c.insert(l)})}begin(){return new b(this.p,this.h,this)}end(){return new b(this.h,this.h,this)}rBegin(){return new b(this._,this.h,this,1)}rEnd(){return new b(this.h,this.h,this,1)}front(){return this.p.u}back(){return this._.u}insert(l,c){return this.M(l,void 0,c)}getElementByPos(l){if(l<0||l>this.i-1)throw RangeError();let c=this.p;for(;l--;)c=c.B;return c.u}find(l,c){return new b(this.I(l,c),this.h,this)}forEach(l){let c=0,p=this.p;for(;p!==this.h;)l(p.u,c++,this),p=p.B}[Symbol.iterator](){return(function*(){let l=this.p;for(;l!==this.h;)yield l.u,l=l.B}).bind(this)()}};l.default=m}),rW=O(l=>{A(),th(),e6(),Object.defineProperty(l,"t",{value:!0}),l.default=void 0;var c=rD(),p=bE(rN()),b=rO();function bE(l){return l&&l.t?l:{default:l}}var m=class t extends c.HashContainerIterator{constructor(l,c,p,b){super(l,c,b),this.container=p}get pointer(){this.o===this.h&&(0,b.throwIteratorAccessError)();let l=this;return new Proxy([],{get:(c,p)=>"0"===p?l.o.u:"1"===p?l.o.l:void 0,set(c,p,b){if("1"!==p)throw TypeError("props must be 1");return l.o.l=b,!0}})}copy(){return new t(this.o,this.h,this.container,this.iteratorType)}},_=class extends c.HashContainer{constructor(l=[]){super();let c=this;l.forEach(function(l){c.setElement(l[0],l[1])})}begin(){return new m(this.p,this.h,this)}end(){return new m(this.h,this.h,this)}rBegin(){return new m(this._,this.h,this,1)}rEnd(){return new m(this.h,this.h,this,1)}front(){if(0!==this.i)return[this.p.u,this.p.l]}back(){if(0!==this.i)return[this._.u,this._.l]}setElement(l,c,p){return this.M(l,c,p)}getElementByKey(l,c){if(void 0===c&&(c=(0,p.default)(l)),c){let c=l[this.HASH_TAG];return void 0!==c?this.H[c].l:void 0}let b=this.g[l];return b?b.l:void 0}getElementByPos(l){if(l<0||l>this.i-1)throw RangeError();let c=this.p;for(;l--;)c=c.B;return[c.u,c.l]}find(l,c){return new m(this.I(l,c),this.h,this)}forEach(l){let c=0,p=this.p;for(;p!==this.h;)l([p.u,p.l],c++,this),p=p.B}[Symbol.iterator](){return(function*(){let l=this.p;for(;l!==this.h;)yield[l.u,l.l],l=l.B}).bind(this)()}};l.default=_}),r$=O(l=>{A(),th(),e6(),Object.defineProperty(l,"t",{value:!0}),Object.defineProperty(l,"Deque",{enumerable:!0,get:function(){return v.default}}),Object.defineProperty(l,"HashMap",{enumerable:!0,get:function(){return x.default}}),Object.defineProperty(l,"HashSet",{enumerable:!0,get:function(){return P.default}}),Object.defineProperty(l,"LinkList",{enumerable:!0,get:function(){return _.default}}),Object.defineProperty(l,"OrderedMap",{enumerable:!0,get:function(){return R.default}}),Object.defineProperty(l,"OrderedSet",{enumerable:!0,get:function(){return T.default}}),Object.defineProperty(l,"PriorityQueue",{enumerable:!0,get:function(){return b.default}}),Object.defineProperty(l,"Queue",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(l,"Stack",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(l,"Vector",{enumerable:!0,get:function(){return m.default}});var c=at(rA()),p=at(rI()),b=at(rk()),m=at(rC()),_=at(rP()),v=at(rx()),T=at(rj()),R=at(rL()),P=at(rF()),x=at(rW());function at(l){return l&&l.t?l:{default:l}}}),rq=O((l,c)=>{A(),th(),e6();var p=r$().OrderedSet,b=ri()("number-allocator:trace"),m=ri()("number-allocator:error");function Re(l,c){this.low=l,this.high=c}function ut(l,c){if(!(this instanceof ut))return new ut(l,c);this.min=l,this.max=c,this.ss=new p([],(l,c)=>l.compare(c)),b("Create"),this.clear()}Re.prototype.equals=function(l){return this.low===l.low&&this.high===l.high},Re.prototype.compare=function(l){return this.low<l.low&&this.high<l.low?-1:l.low<this.low&&l.high<this.low?1:0},ut.prototype.firstVacant=function(){return 0===this.ss.size()?null:this.ss.front().low},ut.prototype.alloc=function(){if(0===this.ss.size())return b("alloc():empty"),null;let l=this.ss.begin(),c=l.pointer.low,p=l.pointer.high;return c+1<=p?this.ss.updateKeyByIterator(l,new Re(c+1,p)):this.ss.eraseElementByPos(0),b("alloc():"+c),c},ut.prototype.use=function(l){let c=new Re(l,l),p=this.ss.lowerBound(c);if(!p.equals(this.ss.end())){let m=p.pointer.low,_=p.pointer.high;return p.pointer.equals(c)?(this.ss.eraseElementByIterator(p),b("use():"+l),!0):!(m>l)&&(m===l?this.ss.updateKeyByIterator(p,new Re(m+1,_)):_===l?this.ss.updateKeyByIterator(p,new Re(m,_-1)):(this.ss.updateKeyByIterator(p,new Re(l+1,_)),this.ss.insert(new Re(m,l-1))),b("use():"+l),!0)}return b("use():failed"),!1},ut.prototype.free=function(l){if(l<this.min||l>this.max){m("free():"+l+" is out of range");return}let c=new Re(l,l),p=this.ss.upperBound(c);if(p.equals(this.ss.end())){if(p.equals(this.ss.begin())){this.ss.insert(c);return}p.pre();let b=p.pointer.high;p.pointer.high+1===l?this.ss.updateKeyByIterator(p,new Re(b,l)):this.ss.insert(c)}else if(p.equals(this.ss.begin())){if(l+1===p.pointer.low){let c=p.pointer.high;this.ss.updateKeyByIterator(p,new Re(l,c))}else this.ss.insert(c)}else{let b=p.pointer.low,m=p.pointer.high;p.pre();let _=p.pointer.low;p.pointer.high+1===l?l+1===b?(this.ss.eraseElementByIterator(p),this.ss.updateKeyByIterator(p,new Re(_,m))):this.ss.updateKeyByIterator(p,new Re(_,l)):l+1===b?(this.ss.eraseElementByIterator(p.next()),this.ss.insert(new Re(l,m))):this.ss.insert(c)}b("free():"+l)},ut.prototype.clear=function(){b("clear()"),this.ss.clear(),this.ss.insert(new Re(this.min,this.max))},ut.prototype.intervalCount=function(){return this.ss.size()},ut.prototype.dump=function(){for(let l of(console.log("length:"+this.ss.size()),this.ss))console.log(l)},c.exports=ut}),rV=O((l,c)=>{A(),th(),e6();var p=rq();c.exports.NumberAllocator=p}),rH=O(l=>{A(),th(),e6(),Object.defineProperty(l,"__esModule",{value:!0});var c=rE(),p=rV(),b=class{aliasToTopic;topicToAlias;max;numberAllocator;length;constructor(l){l>0&&(this.aliasToTopic=new c.LRUCache({max:l}),this.topicToAlias={},this.numberAllocator=new p.NumberAllocator(1,l),this.max=l,this.length=0)}put(l,c){if(0===c||c>this.max)return!1;let p=this.aliasToTopic.get(c);return p&&delete this.topicToAlias[p],this.aliasToTopic.set(c,l),this.topicToAlias[l]=c,this.numberAllocator.use(c),this.length=this.aliasToTopic.size,!0}getTopicByAlias(l){return this.aliasToTopic.get(l)}getAliasByTopic(l){let c=this.topicToAlias[l];return"u">typeof c&&this.aliasToTopic.get(c),c}clear(){this.aliasToTopic.clear(),this.topicToAlias={},this.numberAllocator.clear(),this.length=0}getLruAlias(){return this.numberAllocator.firstVacant()||[...this.aliasToTopic.keys()][this.aliasToTopic.size-1]}};l.default=b}),rG=O(l=>{A(),th(),e6();var c=l&&l.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(l,"__esModule",{value:!0});var p=ry(),b=c(rH()),m=rm();l.default=(l,c)=>{l.log("_handleConnack");let{options:_}=l,v=5===_.protocolVersion?c.reasonCode:c.returnCode;if(clearTimeout(l.connackTimer),delete l.topicAliasSend,c.properties){if(c.properties.topicAliasMaximum){if(c.properties.topicAliasMaximum>65535){l.emit("error",Error("topicAliasMaximum from broker is out of range"));return}c.properties.topicAliasMaximum>0&&(l.topicAliasSend=new b.default(c.properties.topicAliasMaximum))}c.properties.serverKeepAlive&&_.keepalive&&(_.keepalive=c.properties.serverKeepAlive),c.properties.maximumPacketSize&&(_.properties||(_.properties={}),_.properties.maximumPacketSize=c.properties.maximumPacketSize)}if(0===v)l.reconnecting=!1,l._onConnect(c);else if(v>0){let c=new m.ErrorWithReasonCode(`Connection refused: ${p.ReasonCodes[v]}`,v);l.emit("error",c),l.options.reconnectOnConnackError&&l._cleanUp(!0)}}}),rz=O(l=>{A(),th(),e6(),Object.defineProperty(l,"__esModule",{value:!0}),l.default=(l,c,p)=>{l.log("handling pubrel packet");let b="u">typeof p?p:l.noop,{messageId:m}=c,_={cmd:"pubcomp",messageId:m};l.incomingStore.get(c,(c,p)=>{c?l._sendPacket(_,b):(l.emit("message",p.topic,p.payload,p),l.handleMessage(p,c=>{if(c)return b(c);l.incomingStore.del(p,l.noop),l._sendPacket(_,b)}))})}}),rK=O(l=>{A(),th(),e6();var c=l&&l.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(l,"__esModule",{value:!0});var p=c(rg()),b=c(r_()),m=c(rG()),_=c(ry()),v=c(rz());l.default=(l,c,A)=>{let{options:T}=l;if(5===T.protocolVersion&&T.properties&&T.properties.maximumPacketSize&&T.properties.maximumPacketSize<c.length)return l.emit("error",Error(`exceeding packets size ${c.cmd}`)),l.end({reasonCode:149,properties:{reasonString:"Maximum packet size was exceeded"}}),l;switch(l.log("_handlePacket :: emitting packetreceive"),l.emit("packetreceive",c),c.cmd){case"publish":(0,p.default)(l,c,A);break;case"puback":case"pubrec":case"pubcomp":case"suback":case"unsuback":l.reschedulePing(),(0,_.default)(l,c),A();break;case"pubrel":l.reschedulePing(),(0,v.default)(l,c,A);break;case"connack":(0,m.default)(l,c),A();break;case"auth":l.reschedulePing(),(0,b.default)(l,c),A();break;case"pingresp":l.log("_handlePacket :: received pingresp"),l.reschedulePing(!0),A();break;case"disconnect":l.emit("disconnect",c),A();break;default:l.log("_handlePacket :: unknown command"),A()}}}),rY=O(l=>{A(),th(),e6(),Object.defineProperty(l,"__esModule",{value:!0}),l.default=class{nextId;constructor(){this.nextId=Math.max(1,Math.floor(65535*Math.random()))}allocate(){let l=this.nextId++;return 65536===this.nextId&&(this.nextId=1),l}getLastAllocated(){return 1===this.nextId?65535:this.nextId-1}register(l){return!0}deallocate(l){}clear(){}}}),rQ=O(l=>{A(),th(),e6(),Object.defineProperty(l,"__esModule",{value:!0});var c=class{aliasToTopic;max;length;constructor(l){this.aliasToTopic={},this.max=l}put(l,c){return 0!==c&&!(c>this.max)&&(this.aliasToTopic[c]=l,this.length=Object.keys(this.aliasToTopic).length,!0)}getTopicByAlias(l){return this.aliasToTopic[l]}clear(){this.aliasToTopic={}}};l.default=c}),rZ=O(l=>{A(),th(),e6();var c=l&&l.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(l,"__esModule",{value:!0}),l.TypedEventEmitter=void 0;var p=c((tM(),G(tT))),b=rm(),m=class{};l.TypedEventEmitter=m,(0,b.applyMixin)(m,p.default)}),rJ=O((l,c)=>{var b,m;A(),th(),e6(),b=l,m=function(l){var c,p=void 0===Number.MAX_SAFE_INTEGER?9007199254740991:Number.MAX_SAFE_INTEGER,b=new WeakMap,m=(c=function(l,c){return b.set(l,c),c},function(l){var m=b.get(l),_=void 0===m?l.size:m<1073741824?m+1:0;if(!l.has(_))return c(l,_);if(l.size<536870912){for(;l.has(_);)_=Math.floor(1073741824*Math.random());return c(l,_)}if(l.size>p)throw Error("Congratulations, you created a collection of unique numbers which uses all available integers!");for(;l.has(_);)_=Math.floor(Math.random()*p);return c(l,_)});l.addUniqueNumber=function(l){var c=m(l);return l.add(c),c},l.generateUniqueNumber=m},"object"==typeof l&&"u">typeof c?m(l):"function"==typeof define&&p.amdO?define(["exports"],m):m((b="u">typeof globalThis?globalThis:b||self).fastUniqueNumbers={})}),rX=O((l,c)=>{var b,m;A(),th(),e6(),b=l,m=function(l,c){l.load=function(l){var p=new Map([[0,function(){}]]),b=new Map([[0,function(){}]]),m=new Map,_=new Worker(l);return _.addEventListener("message",function(l){var c=l.data;if(void 0!==c.method&&"call"===c.method){var _=c.params,v=_.timerId,A=_.timerType;if("interval"===A){var T=p.get(v);if("number"==typeof T){var R=m.get(T);if(void 0===R||R.timerId!==v||R.timerType!==A)throw Error("The timer is in an undefined state.")}else if("u">typeof T)T();else throw Error("The timer is in an undefined state.")}else if("timeout"===A){var P=b.get(v);if("number"==typeof P){var x=m.get(P);if(void 0===x||x.timerId!==v||x.timerType!==A)throw Error("The timer is in an undefined state.")}else if("u">typeof P)P(),b.delete(v);else throw Error("The timer is in an undefined state.")}}else if(null===c.error&&"number"==typeof c.id){var B=c.id,U=m.get(B);if(void 0===U)throw Error("The timer is in an undefined state.");var L=U.timerId,N=U.timerType;m.delete(B),"interval"===N?p.delete(L):b.delete(L)}else throw Error(c.error.message)}),{clearInterval:function(l){var b=c.generateUniqueNumber(m);m.set(b,{timerId:l,timerType:"interval"}),p.set(l,b),_.postMessage({id:b,method:"clear",params:{timerId:l,timerType:"interval"}})},clearTimeout:function(l){var p=c.generateUniqueNumber(m);m.set(p,{timerId:l,timerType:"timeout"}),b.set(l,p),_.postMessage({id:p,method:"clear",params:{timerId:l,timerType:"timeout"}})},setInterval:function(l){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,m=c.generateUniqueNumber(p);return p.set(m,function(){l(),"function"==typeof p.get(m)&&_.postMessage({id:null,method:"set",params:{delay:b,now:performance.now(),timerId:m,timerType:"interval"}})}),_.postMessage({id:null,method:"set",params:{delay:b,now:performance.now(),timerId:m,timerType:"interval"}}),m},setTimeout:function(l){var p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,m=c.generateUniqueNumber(b);return b.set(m,l),_.postMessage({id:null,method:"set",params:{delay:p,now:performance.now(),timerId:m,timerType:"timeout"}}),m}}}},"object"==typeof l&&"u">typeof c?m(l,rJ()):"function"==typeof define&&p.amdO?define(["exports","fast-unique-numbers"],m):m((b="u">typeof globalThis?globalThis:b||self).workerTimersBroker={},b.fastUniqueNumbers)}),r1=O((l,c)=>{var b,m;A(),th(),e6(),b=l,m=function(l,c){var p,b,m=(p=c.load,b=null,function(){if(null!==b)return b;var l=new Blob(['(()=>{var e={472:(e,t,r)=>{var o,i;void 0===(i="function"==typeof(o=function(){"use strict";var e=new Map,t=new Map,r=function(t){var r=e.get(t);if(void 0===r)throw new Error(\'There is no interval scheduled with the given id "\'.concat(t,\'".\'));clearTimeout(r),e.delete(t)},o=function(e){var r=t.get(e);if(void 0===r)throw new Error(\'There is no timeout scheduled with the given id "\'.concat(e,\'".\'));clearTimeout(r),t.delete(e)},i=function(e,t){var r,o=performance.now();return{expected:o+(r=e-Math.max(0,o-t)),remainingDelay:r}},n=function e(t,r,o,i){var n=performance.now();n>o?postMessage({id:null,method:"call",params:{timerId:r,timerType:i}}):t.set(r,setTimeout(e,o-n,t,r,o,i))},a=function(t,r,o){var a=i(t,o),s=a.expected,d=a.remainingDelay;e.set(r,setTimeout(n,d,e,r,s,"interval"))},s=function(e,r,o){var a=i(e,o),s=a.expected,d=a.remainingDelay;t.set(r,setTimeout(n,d,t,r,s,"timeout"))};addEventListener("message",(function(e){var t=e.data;try{if("clear"===t.method){var i=t.id,n=t.params,d=n.timerId,c=n.timerType;if("interval"===c)r(d),postMessage({error:null,id:i});else{if("timeout"!==c)throw new Error(\'The given type "\'.concat(c,\'" is not supported\'));o(d),postMessage({error:null,id:i})}}else{if("set"!==t.method)throw new Error(\'The given method "\'.concat(t.method,\'" is not supported\'));var u=t.params,l=u.delay,p=u.now,m=u.timerId,v=u.timerType;if("interval"===v)a(l,m,p);else{if("timeout"!==v)throw new Error(\'The given type "\'.concat(v,\'" is not supported\'));s(l,m,p)}}}catch(e){postMessage({error:{message:e.message},id:t.id,result:null})}}))})?o.call(t,r,t,e):o)||(e.exports=i)}},t={};function r(o){var i=t[o];if(void 0!==i)return i.exports;var n=t[o]={exports:{}};return e[o](n,n.exports,r),n.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";r(472)})()})();'],{type:"application/javascript; charset=utf-8"}),c=URL.createObjectURL(l);return b=p(c),setTimeout(function(){return URL.revokeObjectURL(c)}),b});l.clearInterval=function(l){return m().clearInterval(l)},l.clearTimeout=function(l){return m().clearTimeout(l)},l.setInterval=function(){var l;return(l=m()).setInterval.apply(l,arguments)},l.setTimeout=function(){var l;return(l=m()).setTimeout.apply(l,arguments)}},"object"==typeof l&&"u">typeof c?m(l,rX()):"function"==typeof define&&p.amdO?define(["exports","worker-timers-broker"],m):m((b="u">typeof globalThis?globalThis:b||self).workerTimers={},b.workerTimersBroker)}),r2=O(l=>{A(),th(),e6(),Object.defineProperty(l,"__esModule",{value:!0}),l.isReactNativeBrowser=l.isWebWorker=void 0;var kp=()=>!!("object"==typeof self&&self?.constructor?.name?.includes("WorkerGlobalScope")),c="u">typeof window&&("u">typeof navigator&&navigator.userAgent?.toLowerCase().indexOf(" electron/")>-1&&T?.versions?!Object.prototype.hasOwnProperty.call(T.versions,"electron"):"u">typeof window.document)||kp()||"u">typeof navigator&&"ReactNative"===navigator.product;l.isWebWorker=kp(),l.isReactNativeBrowser="u">typeof navigator&&"ReactNative"===navigator.product,l.default=c}),r3=O(l=>{A(),th(),e6();var c,p=l&&l.__createBinding||(Object.create?function(l,c,p,b){void 0===b&&(b=p);var m=Object.getOwnPropertyDescriptor(c,p);(!m||("get"in m?!c.__esModule:m.writable||m.configurable))&&(m={enumerable:!0,get:function(){return c[p]}}),Object.defineProperty(l,b,m)}:function(l,c,p,b){void 0===b&&(b=p),l[b]=c[p]}),b=l&&l.__setModuleDefault||(Object.create?function(l,c){Object.defineProperty(l,"default",{enumerable:!0,value:c})}:function(l,c){l.default=c}),m=l&&l.__importStar||(c=function(l){return(c=Object.getOwnPropertyNames||function(l){var c=[];for(var p in l)Object.prototype.hasOwnProperty.call(l,p)&&(c[c.length]=p);return c})(l)},function(l){if(l&&l.__esModule)return l;var m={};if(null!=l)for(var _=c(l),v=0;v<_.length;v++)"default"!==_[v]&&p(m,l,_[v]);return b(m,l),m});Object.defineProperty(l,"__esModule",{value:!0});var _=r1(),v=m(r2()),T={set:_.setInterval,clear:_.clearInterval},R={set:(l,c)=>setInterval(l,c),clear:l=>clearInterval(l)};l.default=l=>{switch(l){case"native":return R;case"worker":return T;default:return!v.default||v.isWebWorker||v.isReactNativeBrowser?R:T}}}),r6=O(l=>{A(),th(),e6();var c=l&&l.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(l,"__esModule",{value:!0});var p=c(r3()),b=class{_keepalive;timerId;timer;destroyed=!1;counter;client;_keepaliveTimeoutTimestamp;_intervalEvery;get keepaliveTimeoutTimestamp(){return this._keepaliveTimeoutTimestamp}get intervalEvery(){return this._intervalEvery}get keepalive(){return this._keepalive}constructor(l,c){this.client=l,this.timer="object"==typeof c&&"set"in c&&"clear"in c?c:(0,p.default)(c),this.setKeepalive(l.options.keepalive)}clear(){this.timerId&&(this.timer.clear(this.timerId),this.timerId=null)}setKeepalive(l){if(isNaN(l*=1e3)||l<=0||l>2147483647)throw Error(`Keepalive value must be an integer between 0 and 2147483647. Provided value is ${l}`);this._keepalive=l,this.reschedule(),this.client.log(`KeepaliveManager: set keepalive to ${l}ms`)}destroy(){this.clear(),this.destroyed=!0}reschedule(){if(this.destroyed)return;this.clear(),this.counter=0;let l=Math.ceil(1.5*this._keepalive);this._keepaliveTimeoutTimestamp=Date.now()+l,this._intervalEvery=Math.ceil(this._keepalive/2),this.timerId=this.timer.set(()=>{this.destroyed||(this.counter+=1,2===this.counter?this.client.sendPing():this.counter>2&&this.client.onKeepaliveTimeout())},this._intervalEvery)}};l.default=b}),r4=O(l=>{A(),th(),e6();var c,p=l&&l.__createBinding||(Object.create?function(l,c,p,b){void 0===b&&(b=p);var m=Object.getOwnPropertyDescriptor(c,p);(!m||("get"in m?!c.__esModule:m.writable||m.configurable))&&(m={enumerable:!0,get:function(){return c[p]}}),Object.defineProperty(l,b,m)}:function(l,c,p,b){void 0===b&&(b=p),l[b]=c[p]}),b=l&&l.__setModuleDefault||(Object.create?function(l,c){Object.defineProperty(l,"default",{enumerable:!0,value:c})}:function(l,c){l.default=c}),m=l&&l.__importStar||(c=function(l){return(c=Object.getOwnPropertyNames||function(l){var c=[];for(var p in l)Object.prototype.hasOwnProperty.call(l,p)&&(c[c.length]=p);return c})(l)},function(l){if(l&&l.__esModule)return l;var m={};if(null!=l)for(var _=c(l),v=0;v<_.length;v++)"default"!==_[v]&&p(m,l,_[v]);return b(m,l),m}),_=l&&l.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(l,"__esModule",{value:!0});var v=_(rh()),T=t4(),R=_(rf()),P=_(ri()),x=m(rd()),B=_(rp()),U=_(rK()),L=_(rY()),N=_(rQ()),D=rm(),W=rZ(),V=_(r6()),H=m(r2()),K=globalThis.setImmediate||((...l)=>{let c=l.shift();(0,D.nextTick)(()=>{c(...l)})}),J={keepalive:60,reschedulePings:!0,protocolId:"MQTT",protocolVersion:4,reconnectPeriod:1e3,connectTimeout:3e4,clean:!0,resubscribe:!0,subscribeBatchSize:null,writeCache:!0,timerVariant:"auto"},X=class t extends W.TypedEventEmitter{static VERSION=D.MQTTJS_VERSION;connected;disconnecting;disconnected;reconnecting;incomingStore;outgoingStore;options;queueQoSZero;_reconnectCount;log;messageIdProvider;outgoing;messageIdToTopic;noop;keepaliveManager;stream;queue;streamBuilder;_resubscribeTopics;connackTimer;reconnectTimer;_storeProcessing;_packetIdsDuringStoreProcessing;_storeProcessingQueue;_firstConnection;topicAliasRecv;topicAliasSend;_deferredReconnect;connackPacket;static defaultId(){return`mqttjs_${Math.random().toString(16).substr(2,8)}`}constructor(l,c){for(let l in super(),this.options=c||{},J)typeof this.options[l]>"u"?this.options[l]=J[l]:this.options[l]=c[l];this.log=this.options.log||(0,P.default)("mqttjs:client"),this.noop=this._noop.bind(this),this.log("MqttClient :: version:",t.VERSION),H.isWebWorker?this.log("MqttClient :: environment","webworker"):this.log("MqttClient :: environment",H.default?"browser":"node"),this.log("MqttClient :: options.protocol",c.protocol),this.log("MqttClient :: options.protocolVersion",c.protocolVersion),this.log("MqttClient :: options.username",c.username),this.log("MqttClient :: options.keepalive",c.keepalive),this.log("MqttClient :: options.reconnectPeriod",c.reconnectPeriod),this.log("MqttClient :: options.rejectUnauthorized",c.rejectUnauthorized),this.log("MqttClient :: options.properties.topicAliasMaximum",c.properties?c.properties.topicAliasMaximum:void 0),this.options.clientId="string"==typeof c.clientId?c.clientId:t.defaultId(),this.log("MqttClient :: clientId",this.options.clientId),this.options.customHandleAcks=5===c.protocolVersion&&c.customHandleAcks?c.customHandleAcks:(...l)=>{l[3](null,0)},this.options.writeCache||(v.default.writeToStream.cacheNumbers=!1),this.streamBuilder=l,this.messageIdProvider=typeof this.options.messageIdProvider>"u"?new L.default:this.options.messageIdProvider,this.outgoingStore=c.outgoingStore||new B.default,this.incomingStore=c.incomingStore||new B.default,this.queueQoSZero=void 0===c.queueQoSZero||c.queueQoSZero,this._resubscribeTopics={},this.messageIdToTopic={},this.keepaliveManager=null,this.connected=!1,this.disconnecting=!1,this.reconnecting=!1,this.queue=[],this.connackTimer=null,this.reconnectTimer=null,this._storeProcessing=!1,this._packetIdsDuringStoreProcessing={},this._storeProcessingQueue=[],this.outgoing={},this._firstConnection=!0,c.properties&&c.properties.topicAliasMaximum>0&&(c.properties.topicAliasMaximum>65535?this.log("MqttClient :: options.properties.topicAliasMaximum is out of range"):this.topicAliasRecv=new N.default(c.properties.topicAliasMaximum)),this.on("connect",()=>{let{queue:l}=this,n=()=>{let c=l.shift();this.log("deliver :: entry %o",c);let p=null;if(!c){this._resubscribe();return}p=c.packet,this.log("deliver :: call _sendPacket for %o",p);let b=!0;p.messageId&&0!==p.messageId&&(this.messageIdProvider.register(p.messageId)||(b=!1)),b?this._sendPacket(p,l=>{c.cb&&c.cb(l),n()}):(this.log("messageId: %d has already used. The message is skipped and removed.",p.messageId),n())};this.log("connect :: sending queued packets"),n()}),this.on("close",()=>{this.log("close :: connected set to `false`"),this.connected=!1,this.log("close :: clearing connackTimer"),clearTimeout(this.connackTimer),this._destroyKeepaliveManager(),this.topicAliasRecv&&this.topicAliasRecv.clear(),this.log("close :: calling _setupReconnect"),this._setupReconnect()}),this.options.manualConnect||(this.log("MqttClient :: setting up stream"),this.connect())}handleAuth(l,c){c()}handleMessage(l,c){c()}_nextId(){return this.messageIdProvider.allocate()}getLastMessageId(){return this.messageIdProvider.getLastAllocated()}connect(){let l=new T.Writable,c=v.default.parser(this.options),p=null,b=[];this.log("connect :: calling method to clear reconnect"),this._clearReconnect(),this.disconnected&&!this.reconnecting&&(this.incomingStore=this.options.incomingStore||new B.default,this.outgoingStore=this.options.outgoingStore||new B.default,this.disconnecting=!1,this.disconnected=!1),this.log("connect :: using streamBuilder provided to client to create stream"),this.stream=this.streamBuilder(this),c.on("packet",l=>{this.log("parser :: on packet push to packets array."),b.push(l)});let o=()=>{this.log("work :: getting next packet in queue");let l=b.shift();if(l)this.log("work :: packet pulled from queue"),(0,U.default)(this,l,s);else{this.log("work :: no packets in queue");let l=p;p=null,this.log("work :: done flag is %s",!!l),l&&l()}},s=()=>{if(b.length)(0,D.nextTick)(o);else{let l=p;p=null,l()}};l._write=(l,b,m)=>{p=m,this.log("writable stream :: parsing buffer"),c.parse(l),o()},this.log("connect :: pipe stream to writable stream"),this.stream.pipe(l),this.stream.on("error",l=>{this.log("streamErrorHandler :: error",l.message),l.code?(this.log("streamErrorHandler :: emitting error"),this.emit("error",l)):this.noop(l)}),this.stream.on("close",()=>{this.log("(%s)stream :: on close",this.options.clientId),this._flushVolatile(),this.log("stream: emit close to MqttClient"),this.emit("close")}),this.log("connect: sending packet `connect`");let m={cmd:"connect",protocolId:this.options.protocolId,protocolVersion:this.options.protocolVersion,clean:this.options.clean,clientId:this.options.clientId,keepalive:this.options.keepalive,username:this.options.username,password:this.options.password,properties:this.options.properties};if(this.options.will&&(m.will={...this.options.will,payload:this.options.will?.payload}),this.topicAliasRecv&&(m.properties||(m.properties={}),this.topicAliasRecv&&(m.properties.topicAliasMaximum=this.topicAliasRecv.max)),this._writePacket(m),c.on("error",this.emit.bind(this,"error")),this.options.properties){if(!this.options.properties.authenticationMethod&&this.options.properties.authenticationData)return this.end(()=>this.emit("error",Error("Packet has no Authentication Method"))),this;if(this.options.properties.authenticationMethod&&this.options.authPacket&&"object"==typeof this.options.authPacket){let l={cmd:"auth",reasonCode:0,...this.options.authPacket};this._writePacket(l)}}return this.stream.setMaxListeners(1e3),clearTimeout(this.connackTimer),this.connackTimer=setTimeout(()=>{this.log("!!connectTimeout hit!! Calling _cleanUp with force `true`"),this.emit("error",Error("connack timeout")),this._cleanUp(!0)},this.options.connectTimeout),this}publish(l,c,p,b){this.log("publish :: message `%s` to topic `%s`",c,l);let{options:m}=this;"function"==typeof p&&(b=p,p=null);let{qos:_,retain:v,dup:A,properties:T,cbStorePut:R}=p={qos:0,retain:!1,dup:!1,...p=p||{}};if(this._checkDisconnecting(b))return this;let g=()=>{let p=0;if((1===_||2===_)&&null===(p=this._nextId()))return this.log("No messageId left"),!1;let P={cmd:"publish",topic:l,payload:c,qos:_,retain:v,messageId:p,dup:A};switch(5===m.protocolVersion&&(P.properties=T),this.log("publish :: qos",_),_){case 1:case 2:this.outgoing[P.messageId]={volatile:!1,cb:b||this.noop},this.log("MqttClient:publish: packet cmd: %s",P.cmd),this._sendPacket(P,void 0,R);break;default:this.log("MqttClient:publish: packet cmd: %s",P.cmd),this._sendPacket(P,b,R)}return!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!g())&&this._storeProcessingQueue.push({invoke:g,cbStorePut:p.cbStorePut,callback:b}),this}publishAsync(l,c,p){return new Promise((b,m)=>{this.publish(l,c,p,(l,c)=>{l?m(l):b(c)})})}subscribe(l,c,p){let b=this.options.protocolVersion;"function"==typeof c&&(p=c),p=p||this.noop;let m=!1,_=[];"string"==typeof l?_=l=[l]:Array.isArray(l)?_=l:"object"==typeof l&&(m=l.resubscribe,delete l.resubscribe,_=Object.keys(l));let v=x.validateTopics(_);if(null!==v)return K(p,Error(`Invalid topic ${v}`)),this;if(this._checkDisconnecting(p))return this.log("subscribe: discconecting true"),this;let A={qos:0};5===b&&(A.nl=!1,A.rap=!1,A.rh=0);let{properties:T}=c={...A,...c},R=[],h=(l,p)=>{if(p=p||c,!Object.prototype.hasOwnProperty.call(this._resubscribeTopics,l)||this._resubscribeTopics[l].qos<p.qos||m){let c={topic:l,qos:p.qos};5===b&&(c.nl=p.nl,c.rap=p.rap,c.rh=p.rh,c.properties=T),this.log("subscribe: pushing topic `%s` and qos `%s` to subs list",c.topic,c.qos),R.push(c)}};if(Array.isArray(l)?l.forEach(l=>{this.log("subscribe: array topic %s",l),h(l)}):Object.keys(l).forEach(c=>{this.log("subscribe: object topic %s, %o",c,l[c]),h(c,l[c])}),!R.length)return p(null,[]),this;let g=(l,c)=>{let p={cmd:"subscribe",subscriptions:l,messageId:c};if(T&&(p.properties=T),this.options.resubscribe){this.log("subscribe :: resubscribe true");let c=[];l.forEach(l=>{if(this.options.reconnectPeriod>0){let p={qos:l.qos};5===b&&(p.nl=l.nl||!1,p.rap=l.rap||!1,p.rh=l.rh||0,p.properties=l.properties),this._resubscribeTopics[l.topic]=p,c.push(l.topic)}}),this.messageIdToTopic[p.messageId]=c}let m=new Promise((c,b)=>{this.outgoing[p.messageId]={volatile:!0,cb(p,m){if(!p){let{granted:c}=m;for(let p=0;p<c.length;p+=1)l[p].qos=c[p]}p?b(new D.ErrorWithSubackPacket(p.message,m)):c(m)}}});return this.log("subscribe :: call _sendPacket"),this._sendPacket(p),m},y=()=>{let l=this.options.subscribeBatchSize??R.length,c=[];for(let p=0;p<R.length;p+=l){let b=R.slice(p,p+l),m=this._nextId();if(null===m)return this.log("No messageId left"),!1;c.push(g(b,m))}return Promise.all(c).then(l=>{p(null,R,l.at(-1))}).catch(l=>{p(l,R,l.packet)}),!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!y())&&this._storeProcessingQueue.push({invoke:y,callback:p}),this}subscribeAsync(l,c){return new Promise((p,b)=>{this.subscribe(l,c,(l,c)=>{l?b(l):p(c)})})}unsubscribe(l,c,p){"string"==typeof l&&(l=[l]),"function"==typeof c&&(p=c),p=p||this.noop;let b=x.validateTopics(l);if(null!==b)return K(p,Error(`Invalid topic ${b}`)),this;if(this._checkDisconnecting(p))return this;let o=()=>{let b=this._nextId();if(null===b)return this.log("No messageId left"),!1;let m={cmd:"unsubscribe",messageId:b,unsubscriptions:[]};return"string"==typeof l?m.unsubscriptions=[l]:Array.isArray(l)&&(m.unsubscriptions=l),this.options.resubscribe&&m.unsubscriptions.forEach(l=>{delete this._resubscribeTopics[l]}),"object"==typeof c&&c.properties&&(m.properties=c.properties),this.outgoing[m.messageId]={volatile:!0,cb:p},this.log("unsubscribe: call _sendPacket"),this._sendPacket(m),!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!o())&&this._storeProcessingQueue.push({invoke:o,callback:p}),this}unsubscribeAsync(l,c){return new Promise((p,b)=>{this.unsubscribe(l,c,(l,c)=>{l?b(l):p(c)})})}end(l,c,p){this.log("end :: (%s)",this.options.clientId),(null==l||"boolean"!=typeof l)&&(p=p||c,c=l,l=!1),"object"!=typeof c&&(p=p||c,c=null),this.log("end :: cb? %s",!!p),p&&"function"==typeof p||(p=this.noop);let n=()=>{this.log("end :: closeStores: closing incoming and outgoing stores"),this.disconnected=!0,this.incomingStore.close(l=>{this.outgoingStore.close(c=>{if(this.log("end :: closeStores: emitting end"),this.emit("end"),p){let b=l||c;this.log("end :: closeStores: invoking callback with args"),p(b)}})}),this._deferredReconnect?this._deferredReconnect():(0===this.options.reconnectPeriod||this.options.manualConnect)&&(this.disconnecting=!1)},o=()=>{this.log("end :: (%s) :: finish :: calling _cleanUp with force %s",this.options.clientId,l),this._cleanUp(l,()=>{this.log("end :: finish :: calling process.nextTick on closeStores"),(0,D.nextTick)(n)},c)};return this.disconnecting?p():(this._clearReconnect(),this.disconnecting=!0,!l&&Object.keys(this.outgoing).length>0?(this.log("end :: (%s) :: calling finish in 10ms once outgoing is empty",this.options.clientId),this.once("outgoingEmpty",setTimeout.bind(null,o,10))):(this.log("end :: (%s) :: immediately calling finish",this.options.clientId),o())),this}endAsync(l,c){return new Promise((p,b)=>{this.end(l,c,l=>{l?b(l):p()})})}removeOutgoingMessage(l){if(this.outgoing[l]){let{cb:c}=this.outgoing[l];this._removeOutgoingAndStoreMessage(l,()=>{c(Error("Message removed"))})}return this}reconnect(l){this.log("client reconnect");let r=()=>{l?(this.options.incomingStore=l.incomingStore,this.options.outgoingStore=l.outgoingStore):(this.options.incomingStore=null,this.options.outgoingStore=null),this.incomingStore=this.options.incomingStore||new B.default,this.outgoingStore=this.options.outgoingStore||new B.default,this.disconnecting=!1,this.disconnected=!1,this._deferredReconnect=null,this._reconnect()};return this.disconnecting&&!this.disconnected?this._deferredReconnect=r:r(),this}_flushVolatile(){this.outgoing&&(this.log("_flushVolatile :: deleting volatile messages from the queue and setting their callbacks as error function"),Object.keys(this.outgoing).forEach(l=>{this.outgoing[l].volatile&&"function"==typeof this.outgoing[l].cb&&(this.outgoing[l].cb(Error("Connection closed")),delete this.outgoing[l])}))}_flush(){this.outgoing&&(this.log("_flush: queue exists? %b",!!this.outgoing),Object.keys(this.outgoing).forEach(l=>{"function"==typeof this.outgoing[l].cb&&(this.outgoing[l].cb(Error("Connection closed")),delete this.outgoing[l])}))}_removeTopicAliasAndRecoverTopicName(l){let c;l.properties&&(c=l.properties.topicAlias);let p=l.topic.toString();if(this.log("_removeTopicAliasAndRecoverTopicName :: alias %d, topic %o",c,p),0===p.length){if(typeof c>"u"||typeof(p=this.topicAliasSend.getTopicByAlias(c))>"u")return Error("Unregistered Topic Alias");l.topic=p}c&&delete l.properties.topicAlias}_checkDisconnecting(l){return this.disconnecting&&(l&&l!==this.noop?l(Error("client disconnecting")):this.emit("error",Error("client disconnecting"))),this.disconnecting}_reconnect(){this.log("_reconnect: emitting reconnect to client"),this.emit("reconnect"),this.connected?(this.end(()=>{this.connect()}),this.log("client already connected. disconnecting first.")):(this.log("_reconnect: calling connect"),this.connect())}_setupReconnect(){this.disconnecting||this.reconnectTimer||!(this.options.reconnectPeriod>0)?this.log("_setupReconnect :: doing nothing..."):(this.reconnecting||(this.log("_setupReconnect :: emit `offline` state"),this.emit("offline"),this.log("_setupReconnect :: set `reconnecting` to `true`"),this.reconnecting=!0),this.log("_setupReconnect :: setting reconnectTimer for %d ms",this.options.reconnectPeriod),this.reconnectTimer=setInterval(()=>{this.log("reconnectTimer :: reconnect triggered!"),this._reconnect()},this.options.reconnectPeriod))}_clearReconnect(){this.log("_clearReconnect : clearing reconnect timer"),this.reconnectTimer&&(clearInterval(this.reconnectTimer),this.reconnectTimer=null)}_cleanUp(l,c,p={}){if(c&&(this.log("_cleanUp :: done callback provided for on stream close"),this.stream.on("close",c)),this.log("_cleanUp :: forced? %s",l),l)0===this.options.reconnectPeriod&&this.options.clean&&this._flush(),this.log("_cleanUp :: (%s) :: destroying stream",this.options.clientId),this.stream.destroy();else{let l={cmd:"disconnect",...p};this.log("_cleanUp :: (%s) :: call _sendPacket with disconnect packet",this.options.clientId),this._sendPacket(l,()=>{this.log("_cleanUp :: (%s) :: destroying stream",this.options.clientId),K(()=>{this.stream.end(()=>{this.log("_cleanUp :: (%s) :: stream destroyed",this.options.clientId)})})})}this.disconnecting||this.reconnecting||(this.log("_cleanUp :: client not disconnecting/reconnecting. Clearing and resetting reconnect."),this._clearReconnect(),this._setupReconnect()),this._destroyKeepaliveManager(),c&&!this.connected&&(this.log("_cleanUp :: (%s) :: removing stream `done` callback `close` listener",this.options.clientId),this.stream.removeListener("close",c),c())}_storeAndSend(l,c,p){this.log("storeAndSend :: store packet with cmd %s to outgoingStore",l.cmd);let b=l,m;if("publish"===b.cmd&&(b=(0,R.default)(l),m=this._removeTopicAliasAndRecoverTopicName(b)))return c&&c(m);this.outgoingStore.put(b,b=>{if(b)return c&&c(b);p(),this._writePacket(l,c)})}_applyTopicAlias(l){if(5===this.options.protocolVersion&&"publish"===l.cmd){let c;l.properties&&(c=l.properties.topicAlias);let p=l.topic.toString();if(this.topicAliasSend){if(c){if(0!==p.length&&(this.log("applyTopicAlias :: register topic: %s - alias: %d",p,c),!this.topicAliasSend.put(p,c)))return this.log("applyTopicAlias :: error out of range. topic: %s - alias: %d",p,c),Error("Sending Topic Alias out of range")}else 0!==p.length&&(this.options.autoAssignTopicAlias?(c=this.topicAliasSend.getAliasByTopic(p))?(l.topic="",l.properties={...l.properties,topicAlias:c},this.log("applyTopicAlias :: auto assign(use) topic: %s - alias: %d",p,c)):(c=this.topicAliasSend.getLruAlias(),this.topicAliasSend.put(p,c),l.properties={...l.properties,topicAlias:c},this.log("applyTopicAlias :: auto assign topic: %s - alias: %d",p,c)):this.options.autoUseTopicAlias&&(c=this.topicAliasSend.getAliasByTopic(p))&&(l.topic="",l.properties={...l.properties,topicAlias:c},this.log("applyTopicAlias :: auto use topic: %s - alias: %d",p,c)))}else if(c)return this.log("applyTopicAlias :: error out of range. topic: %s - alias: %d",p,c),Error("Sending Topic Alias out of range")}}_noop(l){this.log("noop ::",l)}_writePacket(l,c){this.log("_writePacket :: packet: %O",l),this.log("_writePacket :: emitting `packetsend`"),this.emit("packetsend",l),this.log("_writePacket :: writing to stream");let p=v.default.writeToStream(l,this.stream,this.options);this.log("_writePacket :: writeToStream result %s",p),!p&&c&&c!==this.noop?(this.log("_writePacket :: handle events on `drain` once through callback."),this.stream.once("drain",c)):c&&(this.log("_writePacket :: invoking cb"),c())}_sendPacket(l,c,p,b){this.log("_sendPacket :: (%s) ::  start",this.options.clientId),p=p||this.noop,c=c||this.noop;let m=this._applyTopicAlias(l);if(m){c(m);return}if(!this.connected){if("auth"===l.cmd){this._writePacket(l,c);return}this.log("_sendPacket :: client not connected. Storing packet offline."),this._storePacket(l,c,p);return}if(b){this._writePacket(l,c);return}switch(l.cmd){case"publish":break;case"pubrel":this._storeAndSend(l,c,p);return;default:this._writePacket(l,c);return}switch(l.qos){case 2:case 1:this._storeAndSend(l,c,p);break;default:this._writePacket(l,c)}this.log("_sendPacket :: (%s) ::  end",this.options.clientId)}_storePacket(l,c,p){this.log("_storePacket :: packet: %o",l),this.log("_storePacket :: cb? %s",!!c),p=p||this.noop;let b=l;if("publish"===b.cmd){b=(0,R.default)(l);let p=this._removeTopicAliasAndRecoverTopicName(b);if(p)return c&&c(p)}let m=b.qos||0;0===m&&this.queueQoSZero||"publish"!==b.cmd?this.queue.push({packet:b,cb:c}):m>0?(c=this.outgoing[b.messageId]?this.outgoing[b.messageId].cb:null,this.outgoingStore.put(b,l=>{if(l)return c&&c(l);p()})):c&&c(Error("No connection to broker"))}_setupKeepaliveManager(){this.log("_setupKeepaliveManager :: keepalive %d (seconds)",this.options.keepalive),!this.keepaliveManager&&this.options.keepalive&&(this.keepaliveManager=new V.default(this,this.options.timerVariant))}_destroyKeepaliveManager(){this.keepaliveManager&&(this.log("_destroyKeepaliveManager :: destroying keepalive manager"),this.keepaliveManager.destroy(),this.keepaliveManager=null)}reschedulePing(l=!1){this.keepaliveManager&&this.options.keepalive&&(l||this.options.reschedulePings)&&this._reschedulePing()}_reschedulePing(){this.log("_reschedulePing :: rescheduling ping"),this.keepaliveManager.reschedule()}sendPing(){this.log("_sendPing :: sending pingreq"),this._sendPacket({cmd:"pingreq"})}onKeepaliveTimeout(){this.emit("error",Error("Keepalive timeout")),this.log("onKeepaliveTimeout :: calling _cleanUp with force true"),this._cleanUp(!0)}_resubscribe(){this.log("_resubscribe");let l=Object.keys(this._resubscribeTopics);if(!this._firstConnection&&(this.options.clean||this.options.protocolVersion>=4&&!this.connackPacket.sessionPresent)&&l.length>0){if(this.options.resubscribe){if(5===this.options.protocolVersion){this.log("_resubscribe: protocolVersion 5");for(let c=0;c<l.length;c++){let p={};p[l[c]]=this._resubscribeTopics[l[c]],p.resubscribe=!0,this.subscribe(p,{properties:p[l[c]].properties})}}else this._resubscribeTopics.resubscribe=!0,this.subscribe(this._resubscribeTopics)}else this._resubscribeTopics={}}this._firstConnection=!1}_onConnect(l){if(this.disconnected){this.emit("connect",l);return}this.connackPacket=l,this.messageIdProvider.clear(),this._setupKeepaliveManager(),this.connected=!0;let r=()=>{let c=this.outgoingStore.createStream(),n=()=>{c.destroy(),c=null,this._flushStoreProcessingQueue(),o()},o=()=>{this._storeProcessing=!1,this._packetIdsDuringStoreProcessing={}};this.once("close",n),c.on("error",l=>{o(),this._flushStoreProcessingQueue(),this.removeListener("close",n),this.emit("error",l)});let s=()=>{if(!c)return;let l=c.read(1),p;if(!l){c.once("readable",s);return}if(this._storeProcessing=!0,this._packetIdsDuringStoreProcessing[l.messageId]){s();return}this.disconnecting||this.reconnectTimer?c.destroy&&c.destroy():(p=this.outgoing[l.messageId]?this.outgoing[l.messageId].cb:null,this.outgoing[l.messageId]={volatile:!1,cb(l,c){p&&p(l,c),s()}},this._packetIdsDuringStoreProcessing[l.messageId]=!0,this.messageIdProvider.register(l.messageId)?this._sendPacket(l,void 0,void 0,!0):this.log("messageId: %d has already used.",l.messageId))};c.on("end",()=>{let c=!0;for(let l in this._packetIdsDuringStoreProcessing)if(!this._packetIdsDuringStoreProcessing[l]){c=!1;break}this.removeListener("close",n),c?(o(),this._invokeAllStoreProcessingQueue(),this.emit("connect",l)):r()}),s()};r()}_invokeStoreProcessingQueue(){if(!this._storeProcessing&&this._storeProcessingQueue.length>0){let l=this._storeProcessingQueue[0];if(l&&l.invoke())return this._storeProcessingQueue.shift(),!0}return!1}_invokeAllStoreProcessingQueue(){for(;this._invokeStoreProcessingQueue(););}_flushStoreProcessingQueue(){for(let l of this._storeProcessingQueue)l.cbStorePut&&l.cbStorePut(Error("Connection closed")),l.callback&&l.callback(Error("Connection closed"));this._storeProcessingQueue.splice(0)}_removeOutgoingAndStoreMessage(l,c){delete this.outgoing[l],this.outgoingStore.del({messageId:l},(p,b)=>{c(p,b),this.messageIdProvider.deallocate(l),this._invokeStoreProcessingQueue()})}};l.default=X}),r5=O(l=>{A(),th(),e6(),Object.defineProperty(l,"__esModule",{value:!0});var c=rV(),p=class{numberAllocator;lastId;constructor(){this.numberAllocator=new c.NumberAllocator(1,65535)}allocate(){return this.lastId=this.numberAllocator.alloc(),this.lastId}getLastAllocated(){return this.lastId}register(l){return this.numberAllocator.use(l)}deallocate(l){this.numberAllocator.free(l)}clear(){this.numberAllocator.clear()}};l.default=p});function wr(l){throw RangeError(ie[l])}function Fp(l,c){let p=l.split("@"),b="";return p.length>1&&(b=p[0]+"@",l=p[1]),b+(function(l,c){let p=[],b=l.length;for(;b--;)p[b]=c(l[b]);return p})((l=l.replace(r9,".")).split("."),c).join(".")}function Vp(l){let c=[],p=0,b=l.length;for(;p<b;){let m=l.charCodeAt(p++);if(m>=55296&&m<=56319&&p<b){let b=l.charCodeAt(p++);(64512&b)==56320?c.push(((1023&m)<<10)+(1023&b)+65536):(c.push(m),p--)}else c.push(m)}return c}var r8,r7,r9,ie,it,ir,ii,io,is,ia,il,iu=Ae(()=>{A(),th(),e6(),r8=/^xn--/,r7=/[^\0-\x7E]/,r9=/[\x2E\u3002\uFF0E\uFF61]/g,ie={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},it=Math.floor,ir=String.fromCharCode,ii=function(l,c){return l+22+75*(l<26)-((0!=c)<<5)},io=function(l,c,p){let b=0;for(l=p?it(l/700):l>>1,l+=it(l/c);l>455;b+=36)l=it(l/35);return it(b+36*l/(l+38))},is=function(l){var c;let p=[],b=l.length,m=0,_=128,v=72,A=l.lastIndexOf("-");A<0&&(A=0);for(let c=0;c<A;++c)l.charCodeAt(c)>=128&&wr("not-basic"),p.push(l.charCodeAt(c));for(let T=A>0?A+1:0;T<b;){let A=m;for(let p=1,_=36;;_+=36){T>=b&&wr("invalid-input");let A=(c=l.charCodeAt(T++))-48<10?c-22:c-65<26?c-65:c-97<26?c-97:36;(A>=36||A>it((2147483647-m)/p))&&wr("overflow"),m+=A*p;let R=_<=v?1:_>=v+26?26:_-v;if(A<R)break;let P=36-R;p>it(2147483647/P)&&wr("overflow"),p*=P}let R=p.length+1;v=io(m-A,R,0==A),it(m/R)>2147483647-_&&wr("overflow"),_+=it(m/R),m%=R,p.splice(m++,0,_)}return String.fromCodePoint(...p)},ia=function(l){let c=[],p=(l=Vp(l)).length,b=128,m=0,_=72;for(let p of l)p<128&&c.push(ir(p));let v=c.length,A=v;for(v&&c.push("-");A<p;){let p=2147483647;for(let c of l)c>=b&&c<p&&(p=c);let T=A+1;for(let R of(p-b>it((2147483647-m)/T)&&wr("overflow"),m+=(p-b)*T,b=p,l))if(R<b&&++m>2147483647&&wr("overflow"),R==b){let l=m;for(let p=36;;p+=36){let b=p<=_?1:p>=_+26?26:p-_;if(l<b)break;let m=l-b,v=36-b;c.push(ir(ii(b+m%v,0))),l=it(m/v)}c.push(ir(ii(l,0))),_=io(m,T,A==v),m=0,++A}++m,++b}return c.join("")},(il={version:"2.1.0",ucs2:{decode:Vp,encode:l=>String.fromCodePoint(...l)},decode:is,encode:ia,toASCII:function(l){return Fp(l,function(l){return r7.test(l)?"xn--"+ia(l):l})},toUnicode:function(l){return Fp(l,function(l){return r8.test(l)?is(l.slice(4).toLowerCase()):l})}}).decode,il.encode,il.toASCII,il.toUnicode,il.ucs2,il.version});function b1(l,c){return Object.prototype.hasOwnProperty.call(l,c)}var ih,ic,id,ip,ig=Ae(()=>{A(),th(),e6(),ih=function(l,c,p,b){c=c||"&",p=p||"=";var m={};if("string"!=typeof l||0===l.length)return m;var _=/\+/g;l=l.split(c);var v=1e3;b&&"number"==typeof b.maxKeys&&(v=b.maxKeys);var A=l.length;v>0&&A>v&&(A=v);for(var T=0;T<A;++T){var R,P,x,B,U=l[T].replace(_,"%20"),L=U.indexOf(p);L>=0?(R=U.substr(0,L),P=U.substr(L+1)):(R=U,P=""),x=decodeURIComponent(R),B=decodeURIComponent(P),b1(m,x)?Array.isArray(m[x])?m[x].push(B):m[x]=[m[x],B]:m[x]=B}return m},ic=function(l){switch(typeof l){case"string":return l;case"boolean":return l?"true":"false";case"number":return isFinite(l)?l:"";default:return""}},id=function(l,c,p,b){return c=c||"&",p=p||"=",null===l&&(l=void 0),"object"==typeof l?Object.keys(l).map(function(b){var m=encodeURIComponent(ic(b))+p;return Array.isArray(l[b])?l[b].map(function(l){return m+encodeURIComponent(ic(l))}).join(c):m+encodeURIComponent(ic(l[b]))}).join(c):b?encodeURIComponent(ic(b))+p+encodeURIComponent(ic(l)):""},(ip={}).decode=ip.parse=ih,ip.encode=ip.stringify=id,ip.decode,ip.encode,ip.parse,ip.stringify});function Fa(){throw Error("setTimeout has not been defined")}function Wa(){throw Error("clearTimeout has not been defined")}function Jp(l){if(iy===setTimeout)return setTimeout(l,0);if((iy===Fa||!iy)&&setTimeout)return iy=setTimeout,setTimeout(l,0);try{return iy(l,0)}catch{try{return iy.call(null,l,0)}catch{return iy.call(this||iE,l,0)}}}function m1(){ik&&iA&&(ik=!1,iA.length?iI=iA.concat(iI):iT=-1,iI.length&&Xp())}function Xp(){if(!ik){var l=Jp(m1);ik=!0;for(var c=iI.length;c;){for(iA=iI,iI=[];++iT<c;)iA&&iA[iT].run();iT=-1,c=iI.length}iA=null,ik=!1,function(l){if(i_===clearTimeout)return clearTimeout(l);if((i_===Wa||!i_)&&clearTimeout)return i_=clearTimeout,clearTimeout(l);try{i_(l)}catch{try{return i_.call(null,l)}catch{return i_.call(this||iE,l)}}}(l)}}function Gp(l,c){(this||iE).fun=l,(this||iE).array=c}function At(){}var im,iy,i_,iE,iS,iA,iI,ik,iT,iO,iR=Ae(()=>{A(),th(),e6(),iE="u">typeof globalThis?globalThis:"u">typeof self?self:p.g,iS=im={},function(){try{iy="function"==typeof setTimeout?setTimeout:Fa}catch{iy=Fa}try{i_="function"==typeof clearTimeout?clearTimeout:Wa}catch{i_=Wa}}(),iI=[],ik=!1,iT=-1,iS.nextTick=function(l){var c=Array(arguments.length-1);if(arguments.length>1)for(var p=1;p<arguments.length;p++)c[p-1]=arguments[p];iI.push(new Gp(l,c)),1!==iI.length||ik||Jp(Xp)},Gp.prototype.run=function(){(this||iE).fun.apply(null,(this||iE).array)},iS.title="browser",iS.browser=!0,iS.env={},iS.argv=[],iS.version="",iS.versions={},iS.on=At,iS.addListener=At,iS.once=At,iS.off=At,iS.removeListener=At,iS.removeAllListeners=At,iS.emit=At,iS.prependListener=At,iS.prependOnceListener=At,iS.listeners=function(l){return[]},iS.binding=function(l){throw Error("process.binding is not supported")},iS.cwd=function(){return"/"},iS.chdir=function(l){throw Error("process.chdir is not supported")},iS.umask=function(){return 0},(iO=im).addListener,iO.argv,iO.binding,iO.browser,iO.chdir,iO.cwd,iO.emit,iO.env,iO.listeners,iO.nextTick,iO.off,iO.on,iO.once,iO.prependListener,iO.prependOnceListener,iO.removeAllListeners,iO.removeListener,iO.title,iO.umask,iO.version,iO.versions});function v1(){if(iP)return iC;iP=!0;var l,c,p=iC={};function i(){throw Error("setTimeout has not been defined")}function n(){throw Error("clearTimeout has not been defined")}function o(c){if(l===setTimeout)return setTimeout(c,0);if((l===i||!l)&&setTimeout)return l=setTimeout,setTimeout(c,0);try{return l(c,0)}catch{try{return l.call(null,c,0)}catch{return l.call(this||ix,c,0)}}}function s(l){if(c===clearTimeout)return clearTimeout(l);if((c===n||!c)&&clearTimeout)return c=clearTimeout,clearTimeout(l);try{return c(l)}catch{try{return c.call(null,l)}catch{return c.call(this||ix,l)}}}!function(){try{l="function"==typeof setTimeout?setTimeout:i}catch{l=i}try{c="function"==typeof clearTimeout?clearTimeout:n}catch{c=n}}();var b,m=[],_=!1,v=-1;function h(){_&&b&&(_=!1,b.length?m=b.concat(m):v=-1,m.length&&g())}function g(){if(!_){var l=o(h);_=!0;for(var c=m.length;c;){for(b=m,m=[];++v<c;)b&&b[v].run();v=-1,c=m.length}b=null,_=!1,s(l)}}function y(l,c){(this||ix).fun=l,(this||ix).array=c}function E(){}return p.nextTick=function(l){var c=Array(arguments.length-1);if(arguments.length>1)for(var p=1;p<arguments.length;p++)c[p-1]=arguments[p];m.push(new y(l,c)),1!==m.length||_||o(g)},y.prototype.run=function(){(this||ix).fun.apply(null,(this||ix).array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=E,p.addListener=E,p.once=E,p.off=E,p.removeListener=E,p.removeAllListeners=E,p.emit=E,p.prependListener=E,p.prependOnceListener=E,p.listeners=function(l){return[]},p.binding=function(l){throw Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(l){throw Error("process.chdir is not supported")},p.umask=function(){return 0},iC}var iC,iP,ix,iB,iM=Ae(()=>{A(),th(),e6(),iC={},iP=!1,ix="u">typeof globalThis?globalThis:"u">typeof self?self:p.g,(iB=v1()).platform="browser",iB.addListener,iB.argv,iB.binding,iB.browser,iB.chdir,iB.cwd,iB.emit,iB.env,iB.listeners,iB.nextTick,iB.off,iB.on,iB.once,iB.prependListener,iB.prependOnceListener,iB.removeAllListeners,iB.removeListener,iB.title,iB.umask,iB.version,iB.versions});function E1(){if(ij)return iU;ij=!0;var l=iB;function e(l){if("string"!=typeof l)throw TypeError("Path must be a string. Received "+JSON.stringify(l))}function r(l,c){for(var p,b="",m=0,_=-1,v=0,A=0;A<=l.length;++A){if(A<l.length)p=l.charCodeAt(A);else{if(47===p)break;p=47}if(47===p){if(!(_===A-1||1===v)){if(_!==A-1&&2===v){if(b.length<2||2!==m||46!==b.charCodeAt(b.length-1)||46!==b.charCodeAt(b.length-2)){if(b.length>2){var T=b.lastIndexOf("/");if(T!==b.length-1){-1===T?(b="",m=0):m=(b=b.slice(0,T)).length-1-b.lastIndexOf("/"),_=A,v=0;continue}}else if(2===b.length||1===b.length){b="",m=0,_=A,v=0;continue}}c&&(b.length>0?b+="/..":b="..",m=2)}else b.length>0?b+="/"+l.slice(_+1,A):b=l.slice(_+1,A),m=A-_-1}_=A,v=0}else 46===p&&-1!==v?++v:v=-1}return b}function i(l,c){var p=c.dir||c.root,b=c.base||(c.name||"")+(c.ext||"");return p?p===c.root?p+b:p+l+b:b}var c={resolve:function(){for(var c,p,b="",m=!1,_=arguments.length-1;_>=-1&&!m;_--)_>=0?c=arguments[_]:(void 0===p&&(p=l.cwd()),c=p),e(c),0!==c.length&&(b=c+"/"+b,m=47===c.charCodeAt(0));return b=r(b,!m),m?b.length>0?"/"+b:"/":b.length>0?b:"."},normalize:function(l){if(e(l),0===l.length)return".";var c=47===l.charCodeAt(0),p=47===l.charCodeAt(l.length-1);return 0!==(l=r(l,!c)).length||c||(l="."),l.length>0&&p&&(l+="/"),c?"/"+l:l},isAbsolute:function(l){return e(l),l.length>0&&47===l.charCodeAt(0)},join:function(){if(0==arguments.length)return".";for(var l,p=0;p<arguments.length;++p){var b=arguments[p];e(b),b.length>0&&(void 0===l?l=b:l+="/"+b)}return void 0===l?".":c.normalize(l)},relative:function(l,p){if(e(l),e(p),l===p||(l=c.resolve(l))===(p=c.resolve(p)))return"";for(var b=1;b<l.length&&47===l.charCodeAt(b);++b);for(var m=l.length,_=m-b,v=1;v<p.length&&47===p.charCodeAt(v);++v);for(var A=p.length,T=A-v,R=_<T?_:T,P=-1,x=0;x<=R;++x){if(x===R){if(T>R){if(47===p.charCodeAt(v+x))return p.slice(v+x+1);if(0===x)return p.slice(v+x)}else _>R&&(47===l.charCodeAt(b+x)?P=x:0===x&&(P=0));break}var B=l.charCodeAt(b+x);if(B!==p.charCodeAt(v+x))break;47===B&&(P=x)}var U="";for(x=b+P+1;x<=m;++x)(x===m||47===l.charCodeAt(x))&&(0===U.length?U+="..":U+="/..");return U.length>0?U+p.slice(v+P):(v+=P,47===p.charCodeAt(v)&&++v,p.slice(v))},_makeLong:function(l){return l},dirname:function(l){if(e(l),0===l.length)return".";for(var c=l.charCodeAt(0),p=47===c,b=-1,m=!0,_=l.length-1;_>=1;--_)if(47===(c=l.charCodeAt(_))){if(!m){b=_;break}}else m=!1;return -1===b?p?"/":".":p&&1===b?"//":l.slice(0,b)},basename:function(l,c){if(void 0!==c&&"string"!=typeof c)throw TypeError('"ext" argument must be a string');e(l);var p,b=0,m=-1,_=!0;if(void 0!==c&&c.length>0&&c.length<=l.length){if(c.length===l.length&&c===l)return"";var v=c.length-1,A=-1;for(p=l.length-1;p>=0;--p){var T=l.charCodeAt(p);if(47===T){if(!_){b=p+1;break}}else -1===A&&(_=!1,A=p+1),v>=0&&(T===c.charCodeAt(v)?-1==--v&&(m=p):(v=-1,m=A))}return b===m?m=A:-1===m&&(m=l.length),l.slice(b,m)}for(p=l.length-1;p>=0;--p)if(47===l.charCodeAt(p)){if(!_){b=p+1;break}}else -1===m&&(_=!1,m=p+1);return -1===m?"":l.slice(b,m)},extname:function(l){e(l);for(var c=-1,p=0,b=-1,m=!0,_=0,v=l.length-1;v>=0;--v){var A=l.charCodeAt(v);if(47===A){if(!m){p=v+1;break}continue}-1===b&&(m=!1,b=v+1),46===A?-1===c?c=v:1!==_&&(_=1):-1!==c&&(_=-1)}return -1===c||-1===b||0===_||1===_&&c===b-1&&c===p+1?"":l.slice(c,b)},format:function(l){if(null===l||"object"!=typeof l)throw TypeError('The "pathObject" argument must be of type Object. Received type '+typeof l);return i("/",l)},parse:function(l){e(l);var c={root:"",dir:"",base:"",ext:"",name:""};if(0===l.length)return c;var p,b=l.charCodeAt(0),m=47===b;m?(c.root="/",p=1):p=0;for(var _=-1,v=0,A=-1,T=!0,R=l.length-1,P=0;R>=p;--R){if(47===(b=l.charCodeAt(R))){if(!T){v=R+1;break}continue}-1===A&&(T=!1,A=R+1),46===b?-1===_?_=R:1!==P&&(P=1):-1!==_&&(P=-1)}return -1===_||-1===A||0===P||1===P&&_===A-1&&_===v+1?-1!==A&&(0===v&&m?c.base=c.name=l.slice(1,A):c.base=c.name=l.slice(v,A)):(0===v&&m?(c.name=l.slice(1,_),c.base=l.slice(1,A)):(c.name=l.slice(v,_),c.base=l.slice(v,A)),c.ext=l.slice(_,A)),v>0?c.dir=l.slice(0,v-1):m&&(c.dir="/"),c},sep:"/",delimiter:":",win32:null,posix:null};return c.posix=c,iU=c}var iU,ij,iL,iN=Ae(()=>{A(),th(),e6(),iM(),iU={},ij=!1,iL=E1()}),iD={};function De(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function Bi(l,c,p){if(l&&i$.isObject(l)&&l instanceof De)return l;var b=new De;return b.parse(l,c,p),b}function P1(){if(i3)return i2;i3=!0;var l=iO;function e(l){if("string"!=typeof l)throw TypeError("Path must be a string. Received "+JSON.stringify(l))}function r(l,c){for(var p,b="",m=0,_=-1,v=0,A=0;A<=l.length;++A){if(A<l.length)p=l.charCodeAt(A);else{if(47===p)break;p=47}if(47===p){if(!(_===A-1||1===v)){if(_!==A-1&&2===v){if(b.length<2||2!==m||46!==b.charCodeAt(b.length-1)||46!==b.charCodeAt(b.length-2)){if(b.length>2){var T=b.lastIndexOf("/");if(T!==b.length-1){-1===T?(b="",m=0):m=(b=b.slice(0,T)).length-1-b.lastIndexOf("/"),_=A,v=0;continue}}else if(2===b.length||1===b.length){b="",m=0,_=A,v=0;continue}}c&&(b.length>0?b+="/..":b="..",m=2)}else b.length>0?b+="/"+l.slice(_+1,A):b=l.slice(_+1,A),m=A-_-1}_=A,v=0}else 46===p&&-1!==v?++v:v=-1}return b}function i(l,c){var p=c.dir||c.root,b=c.base||(c.name||"")+(c.ext||"");return p?p===c.root?p+b:p+l+b:b}var c={resolve:function(){for(var c,p,b="",m=!1,_=arguments.length-1;_>=-1&&!m;_--)_>=0?c=arguments[_]:(void 0===p&&(p=l.cwd()),c=p),e(c),0!==c.length&&(b=c+"/"+b,m=47===c.charCodeAt(0));return b=r(b,!m),m?b.length>0?"/"+b:"/":b.length>0?b:"."},normalize:function(l){if(e(l),0===l.length)return".";var c=47===l.charCodeAt(0),p=47===l.charCodeAt(l.length-1);return 0!==(l=r(l,!c)).length||c||(l="."),l.length>0&&p&&(l+="/"),c?"/"+l:l},isAbsolute:function(l){return e(l),l.length>0&&47===l.charCodeAt(0)},join:function(){if(0==arguments.length)return".";for(var l,p=0;p<arguments.length;++p){var b=arguments[p];e(b),b.length>0&&(void 0===l?l=b:l+="/"+b)}return void 0===l?".":c.normalize(l)},relative:function(l,p){if(e(l),e(p),l===p||(l=c.resolve(l))===(p=c.resolve(p)))return"";for(var b=1;b<l.length&&47===l.charCodeAt(b);++b);for(var m=l.length,_=m-b,v=1;v<p.length&&47===p.charCodeAt(v);++v);for(var A=p.length,T=A-v,R=_<T?_:T,P=-1,x=0;x<=R;++x){if(x===R){if(T>R){if(47===p.charCodeAt(v+x))return p.slice(v+x+1);if(0===x)return p.slice(v+x)}else _>R&&(47===l.charCodeAt(b+x)?P=x:0===x&&(P=0));break}var B=l.charCodeAt(b+x);if(B!==p.charCodeAt(v+x))break;47===B&&(P=x)}var U="";for(x=b+P+1;x<=m;++x)(x===m||47===l.charCodeAt(x))&&(0===U.length?U+="..":U+="/..");return U.length>0?U+p.slice(v+P):(v+=P,47===p.charCodeAt(v)&&++v,p.slice(v))},_makeLong:function(l){return l},dirname:function(l){if(e(l),0===l.length)return".";for(var c=l.charCodeAt(0),p=47===c,b=-1,m=!0,_=l.length-1;_>=1;--_)if(47===(c=l.charCodeAt(_))){if(!m){b=_;break}}else m=!1;return -1===b?p?"/":".":p&&1===b?"//":l.slice(0,b)},basename:function(l,c){if(void 0!==c&&"string"!=typeof c)throw TypeError('"ext" argument must be a string');e(l);var p,b=0,m=-1,_=!0;if(void 0!==c&&c.length>0&&c.length<=l.length){if(c.length===l.length&&c===l)return"";var v=c.length-1,A=-1;for(p=l.length-1;p>=0;--p){var T=l.charCodeAt(p);if(47===T){if(!_){b=p+1;break}}else -1===A&&(_=!1,A=p+1),v>=0&&(T===c.charCodeAt(v)?-1==--v&&(m=p):(v=-1,m=A))}return b===m?m=A:-1===m&&(m=l.length),l.slice(b,m)}for(p=l.length-1;p>=0;--p)if(47===l.charCodeAt(p)){if(!_){b=p+1;break}}else -1===m&&(_=!1,m=p+1);return -1===m?"":l.slice(b,m)},extname:function(l){e(l);for(var c=-1,p=0,b=-1,m=!0,_=0,v=l.length-1;v>=0;--v){var A=l.charCodeAt(v);if(47===A){if(!m){p=v+1;break}continue}-1===b&&(m=!1,b=v+1),46===A?-1===c?c=v:1!==_&&(_=1):-1!==c&&(_=-1)}return -1===c||-1===b||0===_||1===_&&c===b-1&&c===p+1?"":l.slice(c,b)},format:function(l){if(null===l||"object"!=typeof l)throw TypeError('The "pathObject" argument must be of type Object. Received type '+typeof l);return i("/",l)},parse:function(l){e(l);var c={root:"",dir:"",base:"",ext:"",name:""};if(0===l.length)return c;var p,b=l.charCodeAt(0),m=47===b;m?(c.root="/",p=1):p=0;for(var _=-1,v=0,A=-1,T=!0,R=l.length-1,P=0;R>=p;--R){if(47===(b=l.charCodeAt(R))){if(!T){v=R+1;break}continue}-1===A&&(T=!1,A=R+1),46===b?-1===_?_=R:1!==P&&(P=1):-1!==_&&(P=-1)}return -1===_||-1===A||0===P||1===P&&_===A-1&&_===v+1?-1!==A&&(0===v&&m?c.base=c.name=l.slice(1,A):c.base=c.name=l.slice(v,A)):(0===v&&m?(c.name=l.slice(1,_),c.base=l.slice(1,A)):(c.name=l.slice(v,_),c.base=l.slice(v,A)),c.ext=l.slice(_,A)),v>0?c.dir=l.slice(0,v-1):m&&(c.dir="/"),c},sep:"/",delimiter:":",win32:null,posix:null};return c.posix=c,i2=c}function W1(l){if("string"==typeof l)l=new URL(l);else if(!(l instanceof URL))throw new Deno.errors.InvalidData("invalid argument path , must be a string or URL");if("file:"!==l.protocol)throw new Deno.errors.InvalidData("invalid url scheme");return ne?$1(l):H1(l)}function $1(l){let c=l.hostname,p=l.pathname;for(let l=0;l<p.length;l++)if("%"===p[l]){let c=p.codePointAt(l+2)||32;if("2"===p[l+1]&&102===c||"5"===p[l+1]&&99===c)throw new Deno.errors.InvalidData("must not include encoded \\ or / characters")}if(p=decodeURIComponent(p=p.replace(nt,"\\")),""!==c)return`\\\\${c}${p}`;{let l=32|p.codePointAt(1),c=p[2];if(l<i7||l>i9||":"!==c)throw new Deno.errors.InvalidData("file url path must be absolute");return p.slice(1)}}function H1(l){if(""!==l.hostname)throw new Deno.errors.InvalidData("invalid file url hostname");let c=l.pathname;for(let l=0;l<c.length;l++)if("%"===c[l]){let p=c.codePointAt(l+2)||32;if("2"===c[l+1]&&102===p)throw new Deno.errors.InvalidData("must not include encoded / characters")}return decodeURIComponent(c)}function V1(l){let c=i6.resolve(l),p=l.charCodeAt(l.length-1);(p===i8||ne&&p===i5)&&c[c.length-1]!==i6.sep&&(c+="/");let b=new URL("file://");return c.includes("%")&&(c=c.replace(nr,"%25")),!ne&&c.includes("\\")&&(c=c.replace(nn,"%5C")),c.includes(`
`)&&(c=c.replace(no,"%0A")),c.includes("\r")&&(c=c.replace(ns,"%0D")),c.includes("	")&&(c=c.replace(na,"%09")),b.pathname=c,b}function lg(l){if("string"==typeof l)l=new URL(l);else if(!(l instanceof URL))throw new Deno.errors.InvalidData("invalid argument path , must be a string or URL");if("file:"!==l.protocol)throw new Deno.errors.InvalidData("invalid url scheme");return nI?uS(l):cS(l)}function uS(l){let c=l.hostname,p=l.pathname;for(let l=0;l<p.length;l++)if("%"===p[l]){let c=p.codePointAt(l+2)||32;if("2"===p[l+1]&&102===c||"5"===p[l+1]&&99===c)throw new Deno.errors.InvalidData("must not include encoded \\ or / characters")}if(p=decodeURIComponent(p=p.replace(nk,"\\")),""!==c)return`\\\\${c}${p}`;{let l=32|p.codePointAt(1),c=p[2];if(l<nS||l>nA||":"!==c)throw new Deno.errors.InvalidData("file url path must be absolute");return p.slice(1)}}function cS(l){if(""!==l.hostname)throw new Deno.errors.InvalidData("invalid file url hostname");let c=l.pathname;for(let l=0;l<c.length;l++)if("%"===c[l]){let p=c.codePointAt(l+2)||32;if("2"===c[l+1]&&102===p)throw new Deno.errors.InvalidData("must not include encoded / characters")}return decodeURIComponent(c)}function ug(l){let c=iL.resolve(l),p=l.charCodeAt(l.length-1);(p===nE||nI&&p===n_)&&c[c.length-1]!==iL.sep&&(c+="/");let b=new URL("file://");return c.includes("%")&&(c=c.replace(nT,"%25")),!nI&&c.includes("\\")&&(c=c.replace(nO,"%5C")),c.includes(`
`)&&(c=c.replace(nR,"%0A")),c.includes("\r")&&(c=c.replace(nC,"%0D")),c.includes("	")&&(c=c.replace(nP,"%09")),b.pathname=c,b}Ar(iD,{URL:()=>ny,Url:()=>nh,default:()=>iF,fileURLToPath:()=>lg,format:()=>nf,parse:()=>nm,pathToFileURL:()=>ug,resolve:()=>nd,resolveObject:()=>ng});var iF,iW,i$,iq,iV,iH,iG,iz,iK,iY,iQ,iZ,iJ,iX,i1,i2,i3,i6,i4,i5,i8,i7,i9,ne,nt,nr,nn,no,ns,na,nl,nh,nf,nd,ng,nm,ny,n_,nE,nS,nA,nI,nk,nT,nO,nR,nC,nP,nx=Ae(()=>{A(),th(),e6(),iu(),ig(),iR(),iN(),iM(),iF={},iW=il,i$={isString:function(l){return"string"==typeof l},isObject:function(l){return"object"==typeof l&&null!==l},isNull:function(l){return null===l},isNullOrUndefined:function(l){return null==l}},iF.parse=Bi,iF.resolve=function(l,c){return Bi(l,!1,!0).resolve(c)},iF.resolveObject=function(l,c){return l?Bi(l,!1,!0).resolveObject(c):c},iF.format=function(l){return i$.isString(l)&&(l=Bi(l)),l instanceof De?l.format():De.prototype.format.call(l)},iF.Url=De,iq=/^([a-z0-9.+-]+:)/i,iV=/:[0-9]*$/,iH=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,iz=["%","/","?",";","#"].concat(iG=["'"].concat(["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r",`
`,"	"]))),iK=["/","?","#"],iY=/^[+a-z0-9A-Z_-]{0,63}$/,iQ=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,iZ={javascript:!0,"javascript:":!0},iJ={javascript:!0,"javascript:":!0},iX={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},i1=ip,De.prototype.parse=function(l,c,p){if(!i$.isString(l))throw TypeError("Parameter 'url' must be a string, not "+typeof l);var b=l.indexOf("?"),m=-1!==b&&b<l.indexOf("#")?"?":"#",_=l.split(m);_[0]=_[0].replace(/\\/g,"/");var v=l=_.join(m);if(v=v.trim(),!p&&1===l.split("#").length){var A=iH.exec(v);if(A)return this.path=v,this.href=v,this.pathname=A[1],A[2]?(this.search=A[2],this.query=c?i1.parse(this.search.substr(1)):this.search.substr(1)):c&&(this.search="",this.query={}),this}var T=iq.exec(v);if(T){var R=(T=T[0]).toLowerCase();this.protocol=R,v=v.substr(T.length)}if(p||T||v.match(/^\/\/[^@\/]+@[^@\/]+/)){var P="//"===v.substr(0,2);!P||T&&iJ[T]||(v=v.substr(2),this.slashes=!0)}if(!iJ[T]&&(P||T&&!iX[T])){for(var x,B,U,L=-1,N=0;N<iK.length;N++)-1!==(x=v.indexOf(iK[N]))&&(-1===L||x<L)&&(L=x);for(-1!==(U=-1===L?v.lastIndexOf("@"):v.lastIndexOf("@",L))&&(B=v.slice(0,U),v=v.slice(U+1),this.auth=decodeURIComponent(B)),L=-1,N=0;N<iz.length;N++)-1!==(x=v.indexOf(iz[N]))&&(-1===L||x<L)&&(L=x);-1===L&&(L=v.length),this.host=v.slice(0,L),v=v.slice(L),this.parseHost(),this.hostname=this.hostname||"";var D="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!D)for(var W=this.hostname.split(/\./),V=(N=0,W.length);N<V;N++){var H=W[N];if(H&&!H.match(iY)){for(var K="",J=0,X=H.length;J<X;J++)H.charCodeAt(J)>127?K+="x":K+=H[J];if(!K.match(iY)){var ee=W.slice(0,N),et=W.slice(N+1),er=H.match(iQ);er&&(ee.push(er[1]),et.unshift(er[2])),et.length&&(v="/"+et.join(".")+v),this.hostname=ee.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),D||(this.hostname=iW.toASCII(this.hostname));var ei=this.port?":"+this.port:"",en=this.hostname||"";this.host=en+ei,this.href+=this.host,D&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==v[0]&&(v="/"+v))}if(!iZ[R])for(N=0,V=iG.length;N<V;N++){var es=iG[N];if(-1!==v.indexOf(es)){var ea=encodeURIComponent(es);ea===es&&(ea=escape(es)),v=v.split(es).join(ea)}}var el=v.indexOf("#");-1!==el&&(this.hash=v.substr(el),v=v.slice(0,el));var eu=v.indexOf("?");if(-1!==eu?(this.search=v.substr(eu),this.query=v.substr(eu+1),c&&(this.query=i1.parse(this.query)),v=v.slice(0,eu)):c&&(this.search="",this.query={}),v&&(this.pathname=v),iX[R]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){ei=this.pathname||"";var eh=this.search||"";this.path=ei+eh}return this.href=this.format(),this},De.prototype.format=function(){var l=this.auth||"";l&&(l=(l=encodeURIComponent(l)).replace(/%3A/i,":")+"@");var c=this.protocol||"",p=this.pathname||"",b=this.hash||"",m=!1,_="";this.host?m=l+this.host:this.hostname&&(m=l+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(m+=":"+this.port)),this.query&&i$.isObject(this.query)&&Object.keys(this.query).length&&(_=i1.stringify(this.query));var v=this.search||_&&"?"+_||"";return c&&":"!==c.substr(-1)&&(c+=":"),this.slashes||(!c||iX[c])&&!1!==m?(m="//"+(m||""),p&&"/"!==p.charAt(0)&&(p="/"+p)):m||(m=""),b&&"#"!==b.charAt(0)&&(b="#"+b),v&&"?"!==v.charAt(0)&&(v="?"+v),c+m+(p=p.replace(/[?#]/g,function(l){return encodeURIComponent(l)}))+(v=v.replace("#","%23"))+b},De.prototype.resolve=function(l){return this.resolveObject(Bi(l,!1,!0)).format()},De.prototype.resolveObject=function(l){if(i$.isString(l)){var c=new De;c.parse(l,!1,!0),l=c}for(var p=new De,b=Object.keys(this),m=0;m<b.length;m++){var _=b[m];p[_]=this[_]}if(p.hash=l.hash,""===l.href)return p.href=p.format(),p;if(l.slashes&&!l.protocol){for(var v=Object.keys(l),A=0;A<v.length;A++){var T=v[A];"protocol"!==T&&(p[T]=l[T])}return iX[p.protocol]&&p.hostname&&!p.pathname&&(p.path=p.pathname="/"),p.href=p.format(),p}if(l.protocol&&l.protocol!==p.protocol){if(!iX[l.protocol]){for(var R=Object.keys(l),P=0;P<R.length;P++){var x=R[P];p[x]=l[x]}return p.href=p.format(),p}if(p.protocol=l.protocol,l.host||iJ[l.protocol])p.pathname=l.pathname;else{for(var B=(l.pathname||"").split("/");B.length&&!(l.host=B.shift()););l.host||(l.host=""),l.hostname||(l.hostname=""),""!==B[0]&&B.unshift(""),B.length<2&&B.unshift(""),p.pathname=B.join("/")}if(p.search=l.search,p.query=l.query,p.host=l.host||"",p.auth=l.auth,p.hostname=l.hostname||l.host,p.port=l.port,p.pathname||p.search){var U=p.pathname||"",L=p.search||"";p.path=U+L}return p.slashes=p.slashes||l.slashes,p.href=p.format(),p}var N=p.pathname&&"/"===p.pathname.charAt(0),D=l.host||l.pathname&&"/"===l.pathname.charAt(0),W=D||N||p.host&&l.pathname,V=W,H=p.pathname&&p.pathname.split("/")||[],K=(B=l.pathname&&l.pathname.split("/")||[],p.protocol&&!iX[p.protocol]);if(K&&(p.hostname="",p.port=null,p.host&&(""===H[0]?H[0]=p.host:H.unshift(p.host)),p.host="",l.protocol&&(l.hostname=null,l.port=null,l.host&&(""===B[0]?B[0]=l.host:B.unshift(l.host)),l.host=null),W=W&&(""===B[0]||""===H[0])),D)p.host=l.host||""===l.host?l.host:p.host,p.hostname=l.hostname||""===l.hostname?l.hostname:p.hostname,p.search=l.search,p.query=l.query,H=B;else if(B.length)H||(H=[]),H.pop(),H=H.concat(B),p.search=l.search,p.query=l.query;else if(!i$.isNullOrUndefined(l.search))return K&&(p.hostname=p.host=H.shift(),(er=!!(p.host&&p.host.indexOf("@")>0)&&p.host.split("@"))&&(p.auth=er.shift(),p.host=p.hostname=er.shift())),p.search=l.search,p.query=l.query,i$.isNull(p.pathname)&&i$.isNull(p.search)||(p.path=(p.pathname?p.pathname:"")+(p.search?p.search:"")),p.href=p.format(),p;if(!H.length)return p.pathname=null,p.search?p.path="/"+p.search:p.path=null,p.href=p.format(),p;for(var J=H.slice(-1)[0],X=(p.host||l.host||H.length>1)&&("."===J||".."===J)||""===J,ee=0,et=H.length;et>=0;et--)"."===(J=H[et])?H.splice(et,1):".."===J?(H.splice(et,1),ee++):ee&&(H.splice(et,1),ee--);if(!W&&!V)for(;ee--;ee)H.unshift("..");!W||""===H[0]||H[0]&&"/"===H[0].charAt(0)||H.unshift(""),X&&"/"!==H.join("/").substr(-1)&&H.push("");var er,ei=""===H[0]||H[0]&&"/"===H[0].charAt(0);return K&&(p.hostname=p.host=ei?"":H.length?H.shift():"",(er=!!(p.host&&p.host.indexOf("@")>0)&&p.host.split("@"))&&(p.auth=er.shift(),p.host=p.hostname=er.shift())),(W=W||p.host&&H.length)&&!ei&&H.unshift(""),H.length?p.pathname=H.join("/"):(p.pathname=null,p.path=null),i$.isNull(p.pathname)&&i$.isNull(p.search)||(p.path=(p.pathname?p.pathname:"")+(p.search?p.search:"")),p.auth=l.auth||p.auth,p.slashes=p.slashes||l.slashes,p.href=p.format(),p},De.prototype.parseHost=function(){var l=this.host,c=iV.exec(l);c&&(":"!==(c=c[0])&&(this.port=c.substr(1)),l=l.substr(0,l.length-c.length)),l&&(this.hostname=l)},iF.Url,iF.format,iF.resolve,iF.resolveObject,i2={},i3=!1,i6=P1(),i4="u">typeof Deno?"windows"===Deno.build.os?"win32":Deno.build.os:void 0,iF.URL="u">typeof URL?URL:null,iF.pathToFileURL=V1,iF.fileURLToPath=W1,iF.Url,iF.format,iF.resolve,iF.resolveObject,iF.URL,i5=92,i8=47,i7=97,i9=122,ne="win32"===i4,nt=/\//g,nr=/%/g,nn=/\\/g,no=/\n/g,ns=/\r/g,na=/\t/g,nl="u">typeof Deno?"windows"===Deno.build.os?"win32":Deno.build.os:void 0,iF.URL="u">typeof URL?URL:null,iF.pathToFileURL=ug,iF.fileURLToPath=lg,nh=iF.Url,nf=iF.format,nd=iF.resolve,ng=iF.resolveObject,nm=iF.parse,ny=iF.URL,n_=92,nE=47,nS=97,nA=122,nI="win32"===nl,nk=/\//g,nT=/%/g,nO=/\\/g,nR=/\n/g,nC=/\r/g,nP=/\t/g}),nB=O((l,c)=>{A(),th(),e6(),c.exports=function(){throw Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}}),nM=O(l=>{A(),th(),e6(),Object.defineProperty(l,"__esModule",{value:!0}),l.BufferedDuplex=void 0,l.writev=gg;var c=t4(),p=(tu(),G(e4));function gg(l,c){let b=Array(l.length);for(let c=0;c<l.length;c++)"string"==typeof l[c].chunk?b[c]=p.Buffer.from(l[c].chunk,"utf8"):b[c]=l[c].chunk;this._write(p.Buffer.concat(b),"binary",c)}var b=class extends c.Duplex{socket;proxy;isSocketOpen;writeQueue;constructor(l,c,p){super({objectMode:!0}),this.proxy=c,this.socket=p,this.writeQueue=[],l.objectMode||(this._writev=gg.bind(this)),this.isSocketOpen=!1,this.proxy.on("data",l=>{!this.destroyed&&this.readable&&this.push(l)})}_read(l){this.proxy.read(l)}_write(l,c,p){this.isSocketOpen?this.writeToProxy(l,c,p):this.writeQueue.push({chunk:l,encoding:c,cb:p})}_final(l){this.writeQueue=[],this.proxy.end(l)}_destroy(l,c){this.writeQueue=[],this.proxy.destroy(),c(l)}socketReady(){this.emit("connect"),this.isSocketOpen=!0,this.processWriteQueue()}writeToProxy(l,c,p){!1===this.proxy.write(l,c)?this.proxy.once("drain",p):p()}processWriteQueue(){for(;this.writeQueue.length>0;){let{chunk:l,encoding:c,cb:p}=this.writeQueue.shift();this.writeToProxy(l,c,p)}}};l.BufferedDuplex=b}),nU=O(l=>{A(),th(),e6();var c=l&&l.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(l,"__esModule",{value:!0}),l.streamBuilder=l.browserStreamBuilder=void 0;var p=(tu(),G(e4)),b=c(nB()),m=c(ri()),_=t4(),v=c(r2()),T=nM(),R=(0,m.default)("mqttjs:ws"),P=["rejectUnauthorized","ca","cert","key","pfx","passphrase"];function bg(l,c){let p=`${l.protocol}://${l.hostname}:${l.port}${l.path}`;return"function"==typeof l.transformWsUrl&&(p=l.transformWsUrl(p,l,c)),p}function wg(l){return l.port||("wss"===l.protocol?l.port=443:l.port=80),l.path||(l.path="/"),l.wsOptions||(l.wsOptions={}),v.default||l.forceNativeWebSocket||"wss"!==l.protocol||P.forEach(c=>{Object.prototype.hasOwnProperty.call(l,c)&&!Object.prototype.hasOwnProperty.call(l.wsOptions,c)&&(l.wsOptions[c]=l[c])}),l}function yS(l){let c=wg(l);if(c.hostname||(c.hostname=c.host),!c.hostname){if(typeof document>"u")throw Error("Could not determine host. Specify host manually.");let l=new URL(document.URL);c.hostname=l.hostname,c.port||(c.port=Number(l.port))}return void 0===c.objectMode&&(c.objectMode=!(!0===c.binary||void 0===c.binary)),c}function bS(l,c,p){R("createWebSocket"),R(`protocol: ${p.protocolId} ${p.protocolVersion}`);let m="MQIsdp"===p.protocolId&&3===p.protocolVersion?"mqttv3.1":"mqtt";return R(`creating new Websocket for url: ${c} and protocol: ${m}`),p.createWebsocket?p.createWebsocket(c,[m],p):new b.default(c,[m],p.wsOptions)}function wS(l,c){let p="MQIsdp"===c.protocolId&&3===c.protocolVersion?"mqttv3.1":"mqtt",b=bg(c,l),m;return(m=c.createWebsocket?c.createWebsocket(b,[p],c):new WebSocket(b,[p])).binaryType="arraybuffer",m}l.streamBuilder=(l,c)=>{R("streamBuilder");let p=wg(c);p.hostname=p.hostname||p.host||"localhost";let m=bg(p,l),_=bS(l,m,p),v=b.default.createWebSocketStream(_,p.wsOptions);return v.url=m,_.on("close",()=>{v.destroy()}),v},l.browserStreamBuilder=(l,c)=>{R("browserStreamBuilder");let b,m=yS(c).browserBufferSize||524288,v=c.browserBufferTimeout||1e3,A=!c.objectMode,P=wS(l,c),x=d(c,w,S);c.objectMode||(x._writev=T.writev.bind(x)),x.on("close",()=>{P.close()});let B="u">typeof P.addEventListener;function d(l,c,p){let b=new _.Transform({objectMode:l.objectMode});return b._write=c,b._flush=p,b}function h(){R("WebSocket onOpen"),b instanceof T.BufferedDuplex&&b.socketReady()}function g(l){R("WebSocket onClose",l),b.end(),b.destroy()}function y(l){R("WebSocket onError",l);let c=Error("WebSocket error");c.event=l,b.destroy(c)}async function E(l){if(!x||x.destroyed||!x.readable)return;let{data:c}=l;c=c instanceof ArrayBuffer?p.Buffer.from(c):c instanceof Blob?p.Buffer.from(await new Response(c).arrayBuffer()):p.Buffer.from(c,"utf8"),x.push(c)}function w(l,c,b){if(P.bufferedAmount>m){setTimeout(w,v,l,c,b);return}A&&"string"==typeof l&&(l=p.Buffer.from(l,"utf8"));try{P.send(l)}catch(l){return b(l)}b()}function S(l){P.close(),l()}return P.readyState===P.OPEN?(b=x).socket=P:(b=new T.BufferedDuplex(c,x,P),B?P.addEventListener("open",h):P.onopen=h),B?(P.addEventListener("close",g),P.addEventListener("error",y),P.addEventListener("message",E)):(P.onclose=g,P.onerror=y,P.onmessage=E),b}}),nj={};function xe(){throw Error("Node.js net module is not supported by JSPM core outside of Node.js")}Ar(nj,{Server:()=>xe,Socket:()=>xe,Stream:()=>xe,_createServerHandle:()=>xe,_normalizeArgs:()=>xe,_setSimultaneousAccepts:()=>xe,connect:()=>xe,createConnection:()=>xe,createServer:()=>xe,default:()=>nL,isIP:()=>xe,isIPv4:()=>xe,isIPv6:()=>xe});var nL,nN=Ae(()=>{A(),th(),e6(),nL={_createServerHandle:xe,_normalizeArgs:xe,_setSimultaneousAccepts:xe,connect:xe,createConnection:xe,createServer:xe,isIP:xe,isIPv4:xe,isIPv6:xe,Server:xe,Socket:xe,Stream:xe}}),nD=O((l,c)=>{A(),th(),e6(),c.exports={}}),nF=O(l=>{A(),th(),e6();var c=l&&l.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(l,"__esModule",{value:!0});var p=c((nN(),G(nj))),b=c(ri()),m=c(nD()),_=(0,b.default)("mqttjs:tcp");l.default=(l,c)=>{if(c.port=c.port||1883,c.hostname=c.hostname||c.host||"localhost",c.socksProxy)return(0,m.default)(c.hostname,c.port,c.socksProxy,{timeout:c.socksTimeout});let{port:b,path:v}=c,A=c.hostname;return _("port %d and host %s",b,A),p.default.createConnection({port:b,host:A,path:v})}}),nW={};Ar(nW,{default:()=>n$});var n$,nq=Ae(()=>{A(),th(),e6(),n$={}}),nV=O(l=>{A(),th(),e6();var c=l&&l.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(l,"__esModule",{value:!0});var p=(nq(),G(nW)),b=c((nN(),G(nj))),m=c(ri()),_=c(nD()),v=(0,m.default)("mqttjs:tls");function xS(l){let{host:c,port:b,socksProxy:m,...v}=l;if(void 0!==m){let A=(0,_.default)(c,b,m,{timeout:l.socksTimeout});return(0,p.connect)({...v,socket:A})}return(0,p.connect)(l)}l.default=(l,c)=>{c.port=c.port||8883,c.host=c.hostname||c.host||"localhost",0===b.default.isIP(c.host)&&(c.servername=c.host),c.rejectUnauthorized=!1!==c.rejectUnauthorized,delete c.path,v("port %d host %s rejectUnauthorized %b",c.port,c.host,c.rejectUnauthorized);let p=xS(c);function i(b){c.rejectUnauthorized&&l.emit("error",b),p.end()}return p.on("secureConnect",()=>{c.rejectUnauthorized&&!p.authorized?p.emit("error",Error("TLS not authorized")):p.removeListener("error",i)}),p.on("error",i),p}}),nH=O(l=>{A(),th(),e6(),Object.defineProperty(l,"__esModule",{value:!0});var c,p,b,m=(tu(),G(e4)),_=t4(),v=nM();function qS(){let l=new _.Transform;return l._write=(l,p,b)=>{c.send({data:l.buffer,success(){b()},fail(l){b(Error(l))}})},l._flush=l=>{c.close({success(){l()}})},l}function US(l){l.hostname||(l.hostname="localhost"),l.path||(l.path="/"),l.wsOptions||(l.wsOptions={})}function NS(l,c){let p="wxs"===l.protocol?"wss":"ws",b=`${p}://${l.hostname}${l.path}`;return l.port&&80!==l.port&&443!==l.port&&(b=`${p}://${l.hostname}:${l.port}${l.path}`),"function"==typeof l.transformWsUrl&&(b=l.transformWsUrl(b,l,c)),b}function DS(){c.onOpen(()=>{b.socketReady()}),c.onMessage(l=>{let{data:c}=l;c=c instanceof ArrayBuffer?m.Buffer.from(c):m.Buffer.from(c,"utf8"),p.push(c)}),c.onClose(()=>{b.emit("close"),b.end(),b.destroy()}),c.onError(l=>{let c=Error(l.errMsg);b.destroy(c)})}l.default=(l,m)=>{if(m.hostname=m.hostname||m.host,!m.hostname)throw Error("Could not determine host. Specify host manually.");let _="MQIsdp"===m.protocolId&&3===m.protocolVersion?"mqttv3.1":"mqtt";US(m);let A=NS(m,l);c=wx.connectSocket({url:A,protocols:[_]}),p=qS(),(b=new v.BufferedDuplex(m,p,c))._destroy=(l,p)=>{c.close({success(){p&&p(l)}})};let T=b.destroy;return b.destroy=(l,p)=>(b.destroy=T,setTimeout(()=>{c.close({fail(){b._destroy(l,p)}})},0),b),DS(),b}}),nG=O(l=>{A(),th(),e6(),Object.defineProperty(l,"__esModule",{value:!0});var c,p,b,m=(tu(),G(e4)),_=t4(),v=nM(),T=!1;function $S(){let l=new _.Transform;return l._write=(l,p,b)=>{c.sendSocketMessage({data:l.buffer,success(){b()},fail(){b(Error())}})},l._flush=l=>{c.closeSocket({success(){l()}})},l}function HS(l){l.hostname||(l.hostname="localhost"),l.path||(l.path="/"),l.wsOptions||(l.wsOptions={})}function VS(l,c){let p="alis"===l.protocol?"wss":"ws",b=`${p}://${l.hostname}${l.path}`;return l.port&&80!==l.port&&443!==l.port&&(b=`${p}://${l.hostname}:${l.port}${l.path}`),"function"==typeof l.transformWsUrl&&(b=l.transformWsUrl(b,l,c)),b}function zS(){T||(T=!0,c.onSocketOpen(()=>{b.socketReady()}),c.onSocketMessage(l=>{if("string"==typeof l.data){let c=m.Buffer.from(l.data,"base64");p.push(c)}else{let c=new FileReader;c.addEventListener("load",()=>{if(c.result instanceof ArrayBuffer){p.push(m.Buffer.from(c.result));return}p.push(m.Buffer.from(c.result,"utf-8"))}),c.readAsArrayBuffer(l.data)}}),c.onSocketClose(()=>{b.end(),b.destroy()}),c.onSocketError(l=>{b.destroy(l)}))}l.default=(l,m)=>{if(m.hostname=m.hostname||m.host,!m.hostname)throw Error("Could not determine host. Specify host manually.");let _="MQIsdp"===m.protocolId&&3===m.protocolVersion?"mqttv3.1":"mqtt";HS(m);let A=VS(m,l);return(c=m.my).connectSocket({url:A,protocols:_}),p=$S(),b=new v.BufferedDuplex(m,p,c),zS(),b}}),nz=O(l=>{A(),th(),e6();var c=l&&l.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(l,"__esModule",{value:!0}),l.connectAsync=XS;var p=c(ri()),b=c((nx(),G(iD))),m=c(r4()),_=c(r2());"function"!=typeof T?.nextTick&&(T.nextTick=setImmediate);var v=(0,p.default)("mqttjs"),R=null;function JS(l){let c;if(l.auth){if(c=l.auth.match(/^(.+):(.+)$/)){let[,p,b]=c;l.username=p,l.password=b}else l.username=l.auth}}function Rg(l,c){if(v("connecting to an MQTT broker..."),"object"!=typeof l||c||(c=l,l=""),c=c||{},l&&"string"==typeof l){let p=b.default.parse(l,!0),m={};if(null!=p.port&&(m.port=Number(p.port)),m.host=p.hostname,m.query=p.query,m.auth=p.auth,m.protocol=p.protocol,m.path=p.path,!(c={...m,...c}).protocol)throw Error("Missing protocol");c.protocol=c.protocol.replace(/:$/,"")}if(c.unixSocket=c.unixSocket||c.protocol?.includes("+unix"),c.unixSocket?c.protocol=c.protocol.replace("+unix",""):c.protocol?.startsWith("ws")||c.protocol?.startsWith("wx")||delete c.path,JS(c),c.query&&"string"==typeof c.query.clientId&&(c.clientId=c.query.clientId),_.default||c.unixSocket?c.socksProxy=void 0:void 0===c.socksProxy&&"u">typeof T&&(c.socksProxy=T.env.MQTTJS_SOCKS_PROXY),c.cert&&c.key){if(c.protocol){if(-1===["mqtts","wss","wxs","alis"].indexOf(c.protocol))switch(c.protocol){case"mqtt":c.protocol="mqtts";break;case"ws":c.protocol="wss";break;case"wx":c.protocol="wxs";break;case"ali":c.protocol="alis";break;default:throw Error(`Unknown protocol for secure connection: "${c.protocol}"!`)}}else throw Error("Missing secure protocol key")}if(R||(R={},_.default||c.forceNativeWebSocket?(R.ws=nU().browserStreamBuilder,R.wss=nU().browserStreamBuilder,R.wx=nH().default,R.wxs=nH().default,R.ali=nG().default,R.alis=nG().default):(R.ws=nU().streamBuilder,R.wss=nU().streamBuilder,R.mqtt=nF().default,R.tcp=nF().default,R.ssl=nV().default,R.tls=R.ssl,R.mqtts=nV().default)),!R[c.protocol]){let l=-1!==["mqtts","wss"].indexOf(c.protocol);c.protocol=["mqtt","mqtts","ws","wss","wx","wxs","ali","alis"].filter((c,p)=>(!l||p%2!=0)&&"function"==typeof R[c])[0]}if(!1===c.clean&&!c.clientId)throw Error("Missing clientId for unclean clients");function r(l){return c.servers&&(l._reconnectCount&&l._reconnectCount!==c.servers.length||(l._reconnectCount=0),c.host=c.servers[l._reconnectCount].host,c.port=c.servers[l._reconnectCount].port,c.protocol=c.servers[l._reconnectCount].protocol?c.servers[l._reconnectCount].protocol:c.defaultProtocol,c.hostname=c.host,l._reconnectCount++),v("calling streambuilder for",c.protocol),R[c.protocol](l,c)}c.protocol&&(c.defaultProtocol=c.protocol);let p=new m.default(r,c);return p.on("error",()=>{}),p}function XS(l,c,p=!0){return new Promise((b,m)=>{let _=Rg(l,c),v={connect:l=>{a(),b(_)},end:()=>{a(),b(_)},error:l=>{a(),_.end(),m(l)}};function a(){Object.keys(v).forEach(l=>{_.off(l,v[l])})}!1===p&&(v.close=()=>{v.error(Error("Couldn't connect to server"))}),Object.keys(v).forEach(l=>{_.on(l,v[l])})})}l.default=Rg}),nK=O(l=>{A(),th(),e6();var c,p=l&&l.__createBinding||(Object.create?function(l,c,p,b){void 0===b&&(b=p);var m=Object.getOwnPropertyDescriptor(c,p);(!m||("get"in m?!c.__esModule:m.writable||m.configurable))&&(m={enumerable:!0,get:function(){return c[p]}}),Object.defineProperty(l,b,m)}:function(l,c,p,b){void 0===b&&(b=p),l[b]=c[p]}),b=l&&l.__setModuleDefault||(Object.create?function(l,c){Object.defineProperty(l,"default",{enumerable:!0,value:c})}:function(l,c){l.default=c}),m=l&&l.__importStar||(c=function(l){return(c=Object.getOwnPropertyNames||function(l){var c=[];for(var p in l)Object.prototype.hasOwnProperty.call(l,p)&&(c[c.length]=p);return c})(l)},function(l){if(l&&l.__esModule)return l;var m={};if(null!=l)for(var _=c(l),v=0;v<_.length;v++)"default"!==_[v]&&p(m,l,_[v]);return b(m,l),m}),_=l&&l.__exportStar||function(l,c){for(var b in l)"default"===b||Object.prototype.hasOwnProperty.call(c,b)||p(c,l,b)},v=l&&l.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(l,"__esModule",{value:!0}),l.ReasonCodes=l.KeepaliveManager=l.UniqueMessageIdProvider=l.DefaultMessageIdProvider=l.Store=l.MqttClient=l.connectAsync=l.connect=l.Client=void 0;var T=v(r4());l.MqttClient=T.default;var R=v(rY());l.DefaultMessageIdProvider=R.default;var P=v(r5());l.UniqueMessageIdProvider=P.default;var x=v(rp());l.Store=x.default;var B=m(nz());l.connect=B.default,Object.defineProperty(l,"connectAsync",{enumerable:!0,get:function(){return B.connectAsync}});var U=v(r6());l.KeepaliveManager=U.default,l.Client=T.default,_(r4(),l),_(rm(),l);var L=ry();Object.defineProperty(l,"ReasonCodes",{enumerable:!0,get:function(){return L.ReasonCodes}})}),nY=O(l=>{A(),th(),e6();var c,p=l&&l.__createBinding||(Object.create?function(l,c,p,b){void 0===b&&(b=p);var m=Object.getOwnPropertyDescriptor(c,p);(!m||("get"in m?!c.__esModule:m.writable||m.configurable))&&(m={enumerable:!0,get:function(){return c[p]}}),Object.defineProperty(l,b,m)}:function(l,c,p,b){void 0===b&&(b=p),l[b]=c[p]}),b=l&&l.__setModuleDefault||(Object.create?function(l,c){Object.defineProperty(l,"default",{enumerable:!0,value:c})}:function(l,c){l.default=c}),m=l&&l.__importStar||(c=function(l){return(c=Object.getOwnPropertyNames||function(l){var c=[];for(var p in l)Object.prototype.hasOwnProperty.call(l,p)&&(c[c.length]=p);return c})(l)},function(l){if(l&&l.__esModule)return l;var m={};if(null!=l)for(var _=c(l),v=0;v<_.length;v++)"default"!==_[v]&&p(m,l,_[v]);return b(m,l),m}),_=l&&l.__exportStar||function(l,c){for(var b in l)"default"===b||Object.prototype.hasOwnProperty.call(c,b)||p(c,l,b)};Object.defineProperty(l,"__esModule",{value:!0});var v=m(nK());l.default=v,_(nK(),l)});c.Z=nY();/*! Bundled license information:

@jspm/core/nodelibs/browser/buffer.js:
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)

safe-buffer/index.js:
  (*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)
*/}}]);