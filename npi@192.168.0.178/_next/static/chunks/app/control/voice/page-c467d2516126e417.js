(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1832],{4196:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var a=n(5531);let r=(0,a.Z)("arrow-up-down",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]])},1291:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var a=n(5531);let r=(0,a.Z)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},7158:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var a=n(5531);let r=(0,a.Z)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},9534:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var a=n(5531);let r=(0,a.Z)("ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]])},4136:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var a=n(5531);let r=(0,a.Z)("pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]])},5367:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var a=n(5531);let r=(0,a.Z)("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},261:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var a=n(5531);let r=(0,a.Z)("wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]])},5901:function(e,t,n){Promise.resolve().then(n.bind(n,1790))},1790:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return MqttDashboardPage}});var a=n(7437),r=n(2265),s=n(1424),o=n(307),l=n(5217),c=n(3611),i=n(2031),d=n(5831),u=n(1465),m=n(261),f=n(5531);let x=(0,f.Z)("mic",[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]]);var h=n(4196),p=n(4136),g=n(5367),b=n(6577),j=n(6005),v=n(7532),N=n(8965),y=n(5344);function MqttDashboardPage(){var e;let[t,n]=(0,r.useState)("disconnected"),[f,w]=(0,r.useState)(null),[k,C]=(0,r.useState)([]),[_,T]=(0,r.useState)([]),[M,S]=(0,r.useState)(!1),[P,R]=(0,r.useState)(null),[Z,A]=(0,r.useState)(!1),[D,Q]=(0,r.useState)(!1),[V,z]=(0,r.useState)(""),[q,O]=(0,r.useState)(null),[B,E]=(0,r.useState)(!1),L=(0,r.useRef)(null);(0,r.useEffect)(()=>{L.current=(0,y.kS)();let e=L.current,handleConnect=()=>{n("connected"),console.log("MQTT Client connected!"),null==e||e.subscribe("modular_value/data",{qos:1}),null==e||e.subscribe("mqtt_broker_server",{qos:1}),null==e||e.subscribe("voice_control/data",{qos:1})},handleError=e=>{console.error("MQTT Client Error:",e),n("error"),s.Am.error("MQTT connection error: ".concat(e.message))},handleClose=()=>{n("disconnected"),console.log("MQTT Client disconnected!")},handleMessage=(e,t)=>{try{let n=JSON.parse(t.toString());"modular_value/data"===e?C(n):"mqtt_broker_server"===e?w(n):"voice_control/data"===e&&T(n)}catch(t){console.error("Failed to parse MQTT message:",t,"Topic:",e),s.Am.error("Failed to parse message from ".concat(e))}};return e.on("connect",handleConnect),e.on("error",handleError),e.on("close",handleClose),e.on("message",handleMessage),e.connected&&(n("connected"),null==e||e.subscribe("modular_value/data",{qos:1}),null==e||e.subscribe("mqtt_broker_server",{qos:1}),null==e||e.subscribe("voice_control/data",{qos:1})),()=>{e.off("connect",handleConnect),e.off("error",handleError),e.off("close",handleClose),e.off("message",handleMessage),e.connected&&(e.unsubscribe("modular_value/data"),e.unsubscribe("mqtt_broker_server"),e.unsubscribe("voice_control/data"))}},[]);let F=(0,r.useCallback)(()=>{R({uuid:"",device_name:"",data:{pin:0,custom_name:"",address:0,bus:0}}),A(!1)},[]),I=(0,r.useCallback)(e=>{e?(R({...e}),A(!0)):F(),S(!0)},[F]),U=(0,r.useCallback)(e=>{let t=k.find(t=>t.profile.name===e);R(n=>n?{...n,device_name:e,data:{...n.data,address:(null==t?void 0:t.protocol_setting.address)||0,bus:(null==t?void 0:t.protocol_setting.device_bus)||0}}:null)},[k]),H=(0,r.useCallback)(e=>{if(e.preventDefault(),!P||!P.data.custom_name||!P.device_name||!P.data.pin){s.Am.error("Please fill all required fields.");return}let t=(0,y.Oh)();if(!t||!t.connected){s.Am.error("MQTT client not connected. Please check connection.");return}let n={uuid:P.uuid||crypto.randomUUID(),device_name:P.device_name,data:{pin:P.data.pin,custom_name:P.data.custom_name,address:P.data.address,bus:P.data.bus}},a=Z?"voice_control/update":"voice_control/create";t.publish(a,JSON.stringify(n),{qos:1},e=>{e?(s.Am.error("Failed to publish voice control: ".concat(e.message)),console.error("Publish voice control error:",e)):(s.Am.success(Z?"Voice Command Updated":"New Voice Command Created"),S(!1),F())})},[P,Z,F]),$=(0,r.useCallback)(e=>{let t=(0,y.Oh)();if(!t||!t.connected){s.Am.error("MQTT client not connected. Please check connection.");return}let n=JSON.stringify({uuid:e});t.publish("voice_control/delete",n,{qos:1},e=>{e?(s.Am.error("Failed to delete voice command: ".concat(e.message)),console.error("Delete voice command publish error:",e)):s.Am.success("Voice Command Deleted")})},[]),K=(0,r.useCallback)(()=>{let e=window.SpeechRecognition||window.webkitSpeechRecognition;if(!e){s.Am.error("Speech Recognition API is not supported in this browser."),console.error("Speech Recognition API is not supported in this browser.");return}let t=new e;t.lang="id-ID",t.interimResults=!1,E(!0),z(""),O(null),Q(!0),t.onresult=e=>{let t=e.results[0][0].transcript;z(t),console.log("Speech recognized: ".concat(t)),Y(t)},t.onerror=e=>{console.error("Speech recognition error",e),s.Am.error("Speech recognition error: ".concat(e.error," - ").concat(e.message)),E(!1)},t.onend=()=>{E(!1)},t.start()},[]),Y=(0,r.useCallback)(e=>{let t=e.toLowerCase(),n=null;if(t.startsWith("nyalakan "))n=1;else if(t.startsWith("matikan "))n=0;else{s.Am.info('Please use "nyalakan [device]" or "matikan [device]".'),O(null);return}let a=t.replace(/(nyalakan|matikan)\s*/,"").trim();if(!a){s.Am.info('Please specify a device name after "nyalakan" or "matikan".'),O(null);return}let r=_.find(e=>e.data.custom_name.toLowerCase()===a);r&&null!==n?(O(r),J(r,n)):(O(null),console.log("Voice command device not found for:",a),s.Am.error('Device command "'.concat(a,'" not found.')))},[_]),J=(0,r.useCallback)((e,t)=>{let n=(0,y.Oh)();if(!n||!n.connected){s.Am.error("MQTT client not connected. Cannot send command."),console.error("MQTT client not available or connected. Cannot send command.");return}if(!f){s.Am.error("MQTT Broker information not available. Cannot send command."),console.error("MQTT Broker data is null. Cannot send command.");return}let a={mac:f.mac_address,protocol_type:"Modular",device:"RELAYMINI",function:"write",value:{pin:e.data.pin,data:t},address:e.data.address,device_bus:e.data.bus,Timestamp:new Date().toISOString().slice(0,19).replace("T"," ")};console.log("Publishing relay command:",a),n.publish("modular",JSON.stringify(a),{qos:1},n=>{n?(s.Am.error("Failed to send relay command: ".concat(n.message)),console.error("Relay command publish error:",n)):(s.Am.success('Command for "'.concat(e.data.custom_name,'" (').concat(1===t?"ON":"OFF",") sent successfully.")),console.log("Relay command published successfully."))})},[f]),[W,G]=(0,r.useState)(""),X=(0,r.useMemo)(()=>{if(!W)return _;let e=W.toLowerCase();return _.filter(t=>t.data.custom_name.toLowerCase().includes(e)||t.device_name.toLowerCase().includes(e))},[_,W]),[ee,et]=(0,r.useState)("data.custom_name"),[en,ea]=(0,r.useState)("asc"),handleSort=e=>{ee===e?ea("asc"===en?"desc":"asc"):(et(e),ea("asc"))},er=(0,r.useMemo)(()=>ee?[...X].sort((e,t)=>{let n,a;return("data.custom_name"===ee?(n=e.data.custom_name,a=t.data.custom_name):"device_name"===ee?(n=e.device_name,a=t.device_name):(n=e[ee],a=t[ee]),"string"==typeof n&&"string"==typeof a)?"asc"===en?n.localeCompare(a):a.localeCompare(n):"number"==typeof n&&"number"==typeof a?"asc"===en?n-a:a-n:0}):X,[X,ee,en]),[es,eo]=(0,r.useState)(1),el=Math.ceil(er.length/10),ec=(0,r.useMemo)(()=>{let e=(es-1)*10;return er.slice(e,e+10)},[er,es]),ei=(0,r.useMemo)(()=>"connected"===t?"text-green-600 font-semibold":"disconnected"===t?"text-red-600 font-semibold":"error"===t?"text-yellow-600 font-semibold":"",[t]);return(0,a.jsxs)(o.kV,{children:[(0,a.jsxs)("header",{className:"flex h-16 items-center justify-between border-b px-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(o.vP,{}),(0,a.jsx)(l.Z,{orientation:"vertical",className:"h-4"}),(0,a.jsx)(m.Z,{className:"w-5 h-5 text-muted-foreground"}),(0,a.jsx)("h1",{className:"text-lg font-semibold",children:"MQTT Dashboard & Voice Control"})]}),(0,a.jsx)(b.Z,{})]}),(0,a.jsxs)("div",{className:"p-6 space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,a.jsx)("h5",{className:"text-xl font-semibold",children:"MQTT Broker Server Info"}),(0,a.jsx)("span",{className:"text-sm ".concat(ei),children:"connected"===t?"Connected":"disconnected"===t?"Disconnected":"Error"})]}),f?(0,a.jsx)("div",{className:"bg-card text-card-foreground rounded-lg shadow-sm p-4 border",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 text-sm",children:[(0,a.jsxs)("div",{className:"col-span-2",children:[(0,a.jsx)("span",{className:"font-medium",children:"MAC:"})," ",f.mac_address]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Broker Address:"})," ",f.broker_address]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Broker Port:"})," ",f.broker_port]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Broker Username:"})," ",f.username||"-"]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Broker Password:"})," ",f.password?"********":"-"]})]})}):(0,a.jsx)("p",{className:"text-muted-foreground text-center py-4",children:"No broker server data received yet."})]}),(0,a.jsx)("hr",{className:"my-6 border-t border-muted"}),(0,a.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,a.jsx)("h5",{className:"text-xl font-semibold",children:"Voice Control Devices"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(c.z,{size:"sm",variant:"outline",onClick:()=>I(),children:"+ Add Voice Control"}),(0,a.jsxs)(c.z,{size:"sm",onClick:K,children:[(0,a.jsx)(x,{className:"w-4 h-4 mr-2"})," Start Voice Command"]})]})]}),(0,a.jsx)(i.Vq,{open:D,onOpenChange:Q,children:(0,a.jsxs)(i.cZ,{className:"sm:max-w-[425px]",children:[(0,a.jsx)(i.fK,{children:(0,a.jsx)(i.$N,{children:"Voice Recognition Control"})}),(0,a.jsxs)("div",{className:"py-4 text-center",children:[B&&(0,a.jsxs)("p",{className:"mt-3 text-muted-foreground animate-pulse flex items-center justify-center",children:[(0,a.jsx)(x,{className:"w-5 h-5 mr-2"})," Listening..."]}),V&&(0,a.jsxs)("p",{className:"mt-3 text-lg",children:["You said: ",(0,a.jsx)("strong",{children:V})]}),q&&(0,a.jsxs)("div",{className:"mt-3 p-3 bg-secondary rounded-md text-sm text-left",children:[(0,a.jsx)("p",{className:"font-medium",children:"Command Detected:"}),(0,a.jsxs)("ul",{className:"list-disc list-inside mt-1",children:[(0,a.jsxs)("li",{children:["Keyword: ",q.data.custom_name]}),(0,a.jsxs)("li",{children:["Device Name: ",q.device_name]}),(0,a.jsxs)("li",{children:["Pin: ",q.data.pin]}),(0,a.jsxs)("li",{children:["Address: ",q.data.address]}),(0,a.jsxs)("li",{children:["Bus: ",q.data.bus]})]})]}),!B&&!V&&!q&&(0,a.jsx)("p",{className:"text-muted-foreground",children:'Click "Start Voice Command" to begin.'})]}),(0,a.jsx)(i.cN,{children:(0,a.jsx)(c.z,{type:"button",variant:"secondary",onClick:()=>{Q(!1),z(""),O(null)},disabled:B,children:"Close"})})]})}),(0,a.jsx)("div",{className:"flex flex-wrap justify-between items-center mb-4 gap-2",children:(0,a.jsx)(d.I,{type:"text",placeholder:"Search voice commands...",className:"w-full md:w-64",value:W,onChange:e=>G(e.target.value)})}),ec.length>0?(0,a.jsx)("div",{className:"rounded-md border overflow-hidden",children:(0,a.jsxs)(j.iA,{children:[(0,a.jsx)(j.xD,{children:(0,a.jsxs)(j.SC,{children:[(0,a.jsx)(j.ss,{className:"w-[50px]",children:"#"}),(0,a.jsxs)(j.ss,{onClick:()=>handleSort("data.custom_name"),className:"cursor-pointer select-none min-w-[150px]",children:["Keyword ",(0,a.jsx)(h.Z,{className:"inline w-4 h-4 ml-1 align-middle"})]}),(0,a.jsxs)(j.ss,{onClick:()=>handleSort("device_name"),className:"cursor-pointer select-none min-w-[150px]",children:["Target Device ",(0,a.jsx)(h.Z,{className:"inline w-4 h-4 ml-1 align-middle"})]}),(0,a.jsx)(j.ss,{className:"text-center w-[80px]",children:"Pin"}),(0,a.jsx)(j.ss,{className:"text-center w-[80px]",children:"Address"}),(0,a.jsx)(j.ss,{className:"text-center w-[80px]",children:"Bus"}),(0,a.jsx)(j.ss,{className:"text-center w-[100px]",children:"Actions"})]})}),(0,a.jsx)(j.RM,{children:ec.map((e,t)=>(0,a.jsxs)(j.SC,{children:[(0,a.jsx)(j.pj,{children:(es-1)*10+t+1}),(0,a.jsx)(j.pj,{className:"font-medium",children:e.data.custom_name}),(0,a.jsxs)(j.pj,{children:[(0,a.jsx)("div",{className:"font-medium",children:e.device_name}),(0,a.jsx)("div",{className:"text-muted-foreground text-xs",children:"Modular"})]}),(0,a.jsx)(j.pj,{className:"text-center",children:e.data.pin}),(0,a.jsx)(j.pj,{className:"text-center",children:e.data.address}),(0,a.jsx)(j.pj,{className:"text-center",children:e.data.bus}),(0,a.jsxs)(j.pj,{className:"flex gap-1 justify-center",children:[(0,a.jsx)(c.z,{size:"icon",variant:"ghost",onClick:()=>I(e),children:(0,a.jsx)(p.Z,{className:"w-4 h-4"})}),(0,a.jsx)(c.z,{size:"icon",variant:"destructive",onClick:()=>$(e.uuid),children:(0,a.jsx)(g.Z,{className:"w-4 h-4"})})]})]},e.uuid))})]})}):(0,a.jsx)("p",{className:"text-center text-muted-foreground py-8",children:'No voice control devices found. Click "Add Voice Control" to create one.'}),(0,a.jsx)(N.tl,{className:"mt-4",children:(0,a.jsxs)(N.ng,{children:[(0,a.jsx)(N.dN,{onClick:()=>eo(e=>Math.max(1,e-1))}),Array.from({length:el},(e,t)=>(0,a.jsx)(N.nt,{children:(0,a.jsx)(N.kN,{isActive:es===t+1,onClick:()=>eo(t+1),children:t+1})},t)),(0,a.jsx)(N.$0,{onClick:()=>eo(e=>Math.min(el,e+1))})]})}),(0,a.jsx)(i.Vq,{open:M,onOpenChange:S,children:(0,a.jsxs)(i.cZ,{className:"sm:max-w-[500px]",children:[(0,a.jsx)(i.fK,{children:(0,a.jsx)(i.$N,{children:Z?"Update Voice Control":"Add Voice Control"})}),(0,a.jsxs)("form",{onSubmit:H,children:[(0,a.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(u._,{htmlFor:"customName",children:"Keyword / Voice Phrase"}),(0,a.jsx)(d.I,{id:"customName",value:(null==P?void 0:P.data.custom_name)||"",onChange:e=>R(t=>t?{...t,data:{...t.data,custom_name:e.target.value}}:null),placeholder:"e.g., lampu ruang tamu",required:!0}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:'This phrase will be recognized after "nyalakan" or "matikan".'})]}),(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(u._,{htmlFor:"deviceName",children:"Target Device Name"}),(0,a.jsxs)(v.Ph,{value:(null==P?void 0:P.device_name)||"",onValueChange:U,required:!0,children:[(0,a.jsx)(v.i4,{id:"deviceName",children:(0,a.jsx)(v.ki,{placeholder:"Select target device"})}),(0,a.jsx)(v.Bw,{children:k.length>0?k.map(e=>(0,a.jsx)(v.Ql,{value:e.profile.name,children:e.profile.name},e.profile.name)):(0,a.jsx)("div",{className:"p-2 text-center text-muted-foreground",children:"No Modular devices found."})})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(u._,{htmlFor:"pin",children:"Pin"}),(0,a.jsxs)(v.Ph,{value:(null==P?void 0:null===(e=P.data.pin)||void 0===e?void 0:e.toString())||"",onValueChange:e=>R(t=>t?{...t,data:{...t.data,pin:Number(e)}}:null),required:!0,children:[(0,a.jsx)(v.i4,{id:"pin",children:(0,a.jsx)(v.ki,{placeholder:"Select pin"})}),(0,a.jsx)(v.Bw,{children:Array.from({length:8},(e,t)=>t+1).map(e=>(0,a.jsxs)(v.Ql,{value:e.toString(),children:["PinOut ",e]},e))})]})]}),(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(u._,{htmlFor:"address",children:"Address"}),(0,a.jsx)(d.I,{id:"address",type:"number",value:(null==P?void 0:P.data.address)||0,onChange:e=>R(t=>t?{...t,data:{...t.data,address:Number(e.target.value)}}:null),readOnly:!0,className:"bg-muted"})]})]}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-4",children:(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(u._,{htmlFor:"bus",children:"Bus"}),(0,a.jsx)(d.I,{id:"bus",type:"number",value:(null==P?void 0:P.data.bus)||0,onChange:e=>R(t=>t?{...t,data:{...t.data,bus:Number(e.target.value)}}:null),readOnly:!0,className:"bg-muted"})]})})]}),(0,a.jsx)(i.cN,{children:(0,a.jsx)(c.z,{type:"submit",children:Z?"Ubpdate Command":"Save Command"})})]})]})})]})]})}},6577:function(e,t,n){"use strict";n.d(t,{Z:function(){return MQTTConnectionBadge}});var a=n(7437),r=n(9035),s=n(708),o=n(4530),l=n(4631),c=n(9806),i=n(3715);function MQTTConnectionBadge(){let e=(0,r.w)(),{color:t,icon:n,label:d}=(()=>{switch(e){case"connected":return{color:"bg-green-500",icon:(0,a.jsx)(o.Z,{className:"w-4 h-4 mr-1"}),label:"Connected"};case"disconnected":return{color:"bg-yellow-500",icon:(0,a.jsx)(l.Z,{className:"w-4 h-4 mr-1"}),label:"Disconnected"};case"error":return{color:"bg-red-500",icon:(0,a.jsx)(c.Z,{className:"w-4 h-4 mr-1"}),label:"Error"};default:return{color:"bg-gray-400",icon:(0,a.jsx)(i.Z,{className:"w-4 h-4 mr-1 animate-spin"}),label:"Connecting..."}}})();return(0,a.jsxs)(s.C,{className:"flex items-center ".concat(t," text-white px-2 py-1"),children:[n,(0,a.jsx)("span",{className:"text-sm",children:d})]})}},708:function(e,t,n){"use strict";n.d(t,{C:function(){return Badge}});var a=n(7437);n(2265);var r=n(6061),s=n(1628);let o=(0,r.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",info:"border-transparent bg-blue-500 text-white hover:bg-blue-600",success:"border-transparent bg-green-500 text-white hover:bg-green-600",warning:"border-transparent bg-yellow-400 text-yellow-900 hover:bg-yellow-500",outline:"bg-transparent border-foreground text-foreground",outlineInfo:"bg-transparent border-blue-500 text-blue-600",outlineSuccess:"bg-transparent border-green-500 text-green-600",outlineWarning:"bg-transparent border-yellow-400 text-yellow-700",outlineDestructive:"bg-transparent border-destructive text-destructive",gradientInfo:"border-0 bg-gradient-to-r from-blue-400/50 to-blue-600/50 text-blue-900",gradientSuccess:"border-0 bg-gradient-to-r from-green-400/50 to-green-600/50 text-green-900",gradientWarning:"border-0 bg-gradient-to-r from-yellow-300/50 to-yellow-500/50 text-yellow-900",gradientDestructive:"border-0 bg-gradient-to-r from-red-400/50 to-red-600/50 text-red-900"}},defaultVariants:{variant:"default"}});function Badge(e){let{className:t,variant:n,...r}=e;return(0,a.jsx)("div",{className:(0,s.cn)(o({variant:n}),t),...r})}},2031:function(e,t,n){"use strict";n.d(t,{$N:function(){return f},Be:function(){return x},Vq:function(){return c},cN:function(){return DialogFooter},cZ:function(){return m},fK:function(){return DialogHeader},hg:function(){return i}});var a=n(7437),r=n(2265),s=n(8712),o=n(2549),l=n(1628);let c=s.fC,i=s.xz,d=s.h_;s.x8;let u=r.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,a.jsx)(s.aV,{ref:t,className:(0,l.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n),...r})});u.displayName=s.aV.displayName;let m=r.forwardRef((e,t)=>{let{className:n,children:r,...c}=e;return(0,a.jsxs)(d,{children:[(0,a.jsx)(u,{}),(0,a.jsxs)(s.VY,{ref:t,className:(0,l.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",n),...c,children:[r,(0,a.jsxs)(s.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,a.jsx)(o.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});m.displayName=s.VY.displayName;let DialogHeader=e=>{let{className:t,...n}=e;return(0,a.jsx)("div",{className:(0,l.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...n})};DialogHeader.displayName="DialogHeader";let DialogFooter=e=>{let{className:t,...n}=e;return(0,a.jsx)("div",{className:(0,l.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...n})};DialogFooter.displayName="DialogFooter";let f=r.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,a.jsx)(s.Dx,{ref:t,className:(0,l.cn)("text-lg font-semibold leading-none tracking-tight",n),...r})});f.displayName=s.Dx.displayName;let x=r.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,a.jsx)(s.dk,{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",n),...r})});x.displayName=s.dk.displayName},1465:function(e,t,n){"use strict";n.d(t,{_:function(){return i}});var a=n(7437),r=n(2265),s=n(6743),o=n(6061),l=n(1628);let c=(0,o.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),i=r.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,a.jsx)(s.f,{ref:t,className:(0,l.cn)(c(),n),...r})});i.displayName=s.f.displayName},8965:function(e,t,n){"use strict";n.d(t,{$0:function(){return PaginationNext},dN:function(){return PaginationPrevious},kN:function(){return PaginationLink},ng:function(){return i},nt:function(){return d},tl:function(){return Pagination}});var a=n(7437),r=n(2265),s=n(1291),o=n(7158),l=(n(9534),n(1628)),c=n(3611);let Pagination=e=>{let{className:t,...n}=e;return(0,a.jsx)("nav",{role:"navigation","aria-label":"pagination",className:(0,l.cn)("mx-auto flex w-full justify-center",t),...n})};Pagination.displayName="Pagination";let i=r.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,a.jsx)("ul",{ref:t,className:(0,l.cn)("flex flex-row items-center gap-1",n),...r})});i.displayName="PaginationContent";let d=r.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,a.jsx)("li",{ref:t,className:(0,l.cn)("",n),...r})});d.displayName="PaginationItem";let PaginationLink=e=>{let{className:t,isActive:n,size:r="icon",...s}=e;return(0,a.jsx)("a",{"aria-current":n?"page":void 0,className:(0,l.cn)((0,c.d)({variant:n?"outline":"ghost",size:r}),t),...s})};PaginationLink.displayName="PaginationLink";let PaginationPrevious=e=>{let{className:t,...n}=e;return(0,a.jsxs)(PaginationLink,{"aria-label":"Go to previous page",size:"default",className:(0,l.cn)("gap-1 pl-2.5",t),...n,children:[(0,a.jsx)(s.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Previous"})]})};PaginationPrevious.displayName="PaginationPrevious";let PaginationNext=e=>{let{className:t,...n}=e;return(0,a.jsxs)(PaginationLink,{"aria-label":"Go to next page",size:"default",className:(0,l.cn)("gap-1 pr-2.5",t),...n,children:[(0,a.jsx)("span",{children:"Next"}),(0,a.jsx)(o.Z,{className:"h-4 w-4"})]})};PaginationNext.displayName="PaginationNext"},7532:function(e,t,n){"use strict";n.d(t,{Bw:function(){return p},DI:function(){return u},Ph:function(){return d},Ql:function(){return b},i4:function(){return f},ki:function(){return m},n5:function(){return g}});var a=n(7437),r=n(2265),s=n(6337),o=n(3523),l=n(9224),c=n(2442),i=n(1628);let d=s.fC,u=s.ZA,m=s.B4,f=r.forwardRef((e,t)=>{let{className:n,children:r,...l}=e;return(0,a.jsxs)(s.xz,{ref:t,className:(0,i.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",n),...l,children:[r,(0,a.jsx)(s.JO,{asChild:!0,children:(0,a.jsx)(o.Z,{className:"h-4 w-4 opacity-50"})})]})});f.displayName=s.xz.displayName;let x=r.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,a.jsx)(s.u_,{ref:t,className:(0,i.cn)("flex cursor-default items-center justify-center py-1",n),...r,children:(0,a.jsx)(l.Z,{className:"h-4 w-4"})})});x.displayName=s.u_.displayName;let h=r.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,a.jsx)(s.$G,{ref:t,className:(0,i.cn)("flex cursor-default items-center justify-center py-1",n),...r,children:(0,a.jsx)(o.Z,{className:"h-4 w-4"})})});h.displayName=s.$G.displayName;let p=r.forwardRef((e,t)=>{let{className:n,children:r,position:o="popper",...l}=e;return(0,a.jsx)(s.h_,{children:(0,a.jsxs)(s.VY,{ref:t,className:(0,i.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===o&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",n),position:o,...l,children:[(0,a.jsx)(x,{}),(0,a.jsx)(s.l_,{className:(0,i.cn)("p-1","popper"===o&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,a.jsx)(h,{})]})})});p.displayName=s.VY.displayName;let g=r.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,a.jsx)(s.__,{ref:t,className:(0,i.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",n),...r})});g.displayName=s.__.displayName;let b=r.forwardRef((e,t)=>{let{className:n,children:r,...o}=e;return(0,a.jsxs)(s.ck,{ref:t,className:(0,i.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),...o,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(s.wU,{children:(0,a.jsx)(c.Z,{className:"h-4 w-4"})})}),(0,a.jsx)(s.eT,{children:r})]})});b.displayName=s.ck.displayName;let j=r.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,a.jsx)(s.Z0,{ref:t,className:(0,i.cn)("-mx-1 my-1 h-px bg-muted",n),...r})});j.displayName=s.Z0.displayName},6005:function(e,t,n){"use strict";n.d(t,{RM:function(){return c},Rn:function(){return f},SC:function(){return d},iA:function(){return o},pj:function(){return m},ss:function(){return u},xD:function(){return l}});var a=n(7437),r=n(2265),s=n(1628);let o=r.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,a.jsx)("div",{className:"relative w-full overflow-auto",children:(0,a.jsx)("table",{ref:t,className:(0,s.cn)("w-full caption-bottom text-sm",n),...r})})});o.displayName="Table";let l=r.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,a.jsx)("thead",{ref:t,className:(0,s.cn)("[&_tr]:border-b",n),...r})});l.displayName="TableHeader";let c=r.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,a.jsx)("tbody",{ref:t,className:(0,s.cn)("[&_tr:last-child]:border-0",n),...r})});c.displayName="TableBody";let i=r.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,a.jsx)("tfoot",{ref:t,className:(0,s.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",n),...r})});i.displayName="TableFooter";let d=r.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,a.jsx)("tr",{ref:t,className:(0,s.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",n),...r})});d.displayName="TableRow";let u=r.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,a.jsx)("th",{ref:t,className:(0,s.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",n),...r})});u.displayName="TableHead";let m=r.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,a.jsx)("td",{ref:t,className:(0,s.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",n),...r})});m.displayName="TableCell";let f=r.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,a.jsx)("caption",{ref:t,className:(0,s.cn)("mt-4 text-sm text-muted-foreground",n),...r})});f.displayName="TableCaption"},9035:function(e,t,n){"use strict";n.d(t,{w:function(){return useMQTTStatus}});var a=n(2265),r=n(5344);function useMQTTStatus(){let e=(0,r.Oh)(),[t,n]=(0,a.useState)(()=>e?e.connected?"connected":e.disconnected?"disconnected":"connecting":"connecting");return(0,a.useEffect)(()=>{let e=(0,r.kS)();e.connected?n("connected"):e.disconnected?n("disconnected"):n("connecting");let handleConnect=()=>n("connected"),handleError=()=>n("error"),handleClose=()=>n("disconnected"),handleReconnect=()=>n("connecting"),handleOffline=()=>n("disconnected");return e.on("connect",handleConnect),e.on("error",handleError),e.on("close",handleClose),e.on("reconnect",handleReconnect),e.on("offline",handleOffline),()=>{e.off("connect",handleConnect),e.off("error",handleError),e.off("close",handleClose),e.off("reconnect",handleReconnect),e.off("offline",handleOffline)}},[]),t}},5344:function(e,t,n){"use strict";n.d(t,{kS:function(){return connectMQTT},Oh:function(){return getMQTTClient}});var a=n(7406);function getAppConfig(){let e,t;let n=window.location.protocol;if("https:"===n?(e="ws://192.168.0.106:9000",t="http://192.168.0.100:8000"):(e="ws://".concat(window.location.hostname,":9000"),t="http://".concat(window.location.hostname,":8000")),!e)throw Error("MQTT broker URL is not defined.");if(!t)throw Error("API base URL is not defined.");return{mqttBrokerUrl:e,apiBaseUrl:t}}let r=null,s=!1;function connectMQTT(){let{mqttBrokerUrl:e}=getAppConfig();if(!e)throw Error("MQTT broker URL is missing from configuration.");if(r&&(r.connected||s))return r;if(!r||r.disconnected){if(s)return r;s=!0,console.log("MQTT: Attempting connection to ".concat(e,"...")),(r=a.Z.connect(e,{clean:!0,connectTimeout:3e3,reconnectPeriod:1e3})).on("connect",()=>{console.log("MQTT: Connected to ".concat(e)),s=!1}),r.on("error",e=>{console.error("MQTT Error: ".concat(e.message)),s=!1}),r.on("reconnect",()=>{console.log("MQTT: Reconnecting to ".concat(e)),s=!0}),r.on("close",()=>{console.log("MQTT: Connection to ".concat(e," closed.")),s=!1}),r.on("offline",()=>{console.log("MQTT: Client is offline."),s=!1})}return r}function getMQTTClient(){return r}},6743:function(e,t,n){"use strict";n.d(t,{f:function(){return l}});var a=n(2265),r=n(9790),s=n(7437),o=a.forwardRef((e,t)=>(0,s.jsx)(r.WV.label,{...e,ref:t,onMouseDown:t=>{let n=t.target;n.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));o.displayName="Label";var l=o}},function(e){e.O(0,[2793,9848,5348,6107,2995,307,2971,2472,1744],function(){return e(e.s=5901)}),_N_E=e.O()}]);