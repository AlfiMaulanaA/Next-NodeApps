(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7928],{9352:function(e,n,o){Promise.resolve().then(o.bind(o,3082))},3082:function(e,n,o){"use strict";o.r(n);var a=o(7437),t=o(2265),r=o(1251),i=o.n(r);function MqttConnectionManager(){let[e,n]=(0,t.useState)(!1),[o,r]=(0,t.useState)([]),d=(0,t.useRef)(null),addLog=e=>{r(n=>[...n,"[".concat(new Date().toLocaleTimeString(),"] ").concat(e)])};return(0,t.useEffect)(()=>{let e="ws://192.168.0.106:9000",o="client-nextjs-anon-".concat(new Date().getTime()),a="general/status";addLog("Mencoba koneksi ke: ".concat(e,"/mqtt")),addLog("Client ID: ".concat(o)),addLog("Topik Langganan: ".concat(a));let t=new(i()).Client("".concat(e,"/mqtt"),o);return d.current=t,t.onConnectionLost=e=>{0!==e.errorCode&&(addLog("Koneksi terputus: ".concat(e.errorMessage)),n(!1),addLog("Mencoba menyambung ulang MQTT..."),t.connect({onSuccess:()=>{n(!0),addLog("MQTT Berhasil Terhubung Kembali! ✨"),t.subscribe(a),addLog("Berlangganan kembali ke topik: "+a)},onFailure:e=>{addLog("Gagal menyambung ulang MQTT: ".concat(e.errorMessage)),n(!1)}}))},t.onMessageArrived=e=>{addLog("Pesan Diterima di Topik '".concat(e.destinationName,"': ").concat(e.payloadString))},addLog("Mencoba koneksi MQTT awal..."),t.connect({onSuccess:()=>{n(!0),addLog("MQTT Berhasil Terhubung! ✅"),t.subscribe(a),addLog("Berlangganan ke topik: "+a)},onFailure:e=>{addLog("Gagal koneksi MQTT awal: ".concat(e.errorMessage)),n(!1)}}),()=>{d.current&&d.current.isConnected()&&(addLog("Memutuskan koneksi MQTT saat komponen di-unmount."),d.current.disconnect())}},[]),(0,a.jsxs)("div",{style:{padding:"20px",maxWidth:"800px",margin:"auto",fontFamily:"Arial, sans-serif"},children:[(0,a.jsx)("h2",{style:{textAlign:"center",color:"#333"},children:"Manajer Koneksi MQTT"}),(0,a.jsxs)("div",{style:{marginBottom:"20px",padding:"15px",border:"1px solid #ddd",borderRadius:"8px",backgroundColor:e?"#e6ffe6":"#ffe6e6",boxShadow:"0 2px 5px rgba(0,0,0,0.1)"},children:[(0,a.jsx)("h3",{style:{margin:"0 0 10px 0",color:"#555"},children:"Status Koneksi:"}),(0,a.jsx)("p",{style:{fontSize:"1.2em",fontWeight:"bold",color:e?"green":"red"},children:e?"TERHUBUNG ✅":"TERPUTUS ❌"})]}),(0,a.jsxs)("div",{style:{border:"1px solid #ddd",borderRadius:"8px",padding:"15px",backgroundColor:"#f9f9f9",maxHeight:"300px",overflowY:"auto",boxShadow:"0 2px 5px rgba(0,0,0,0.05)"},children:[(0,a.jsx)("h3",{style:{margin:"0 0 10px 0",color:"#555"},children:"Log Koneksi:"}),(0,a.jsx)("ul",{style:{listStyleType:"none",padding:0,margin:0},children:o.map((e,n)=>(0,a.jsx)("li",{style:{marginBottom:"5px",fontSize:"0.9em",color:"#666"},children:e},n))})]})]})}n.default=MqttConnectionManager}},function(e){e.O(0,[4218,2971,2472,1744],function(){return e(e.s=9352)}),_N_E=e.O()}]);