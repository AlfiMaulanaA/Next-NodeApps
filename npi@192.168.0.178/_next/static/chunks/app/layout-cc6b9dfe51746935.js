(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3185],{6321:function(e,t,s){Promise.resolve().then(s.t.bind(s,2853,23)),Promise.resolve().then(s.bind(s,2200)),Promise.resolve().then(s.bind(s,1350)),Promise.resolve().then(s.bind(s,9167)),Promise.resolve().then(s.t.bind(s,1371,23))},2200:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return ClientLayout}});var r=s(7437),n=s(2265),o=s(307),a=s(5344);function useTotalErrorCount(){let[e,t]=(0,n.useState)(0),s=(0,n.useRef)(null);return(0,n.useEffect)(()=>{let e=(0,a.kS)();s.current=e;let handleConnect=()=>{e.subscribe("subrack/error/data")},handleMessage=(e,s)=>{try{let e=JSON.parse(s.toString());Array.isArray(e)?t(e.length):t(0)}catch(e){console.error("Failed to parse MQTT message for error count:",e),t(0)}};return e.on("connect",handleConnect),e.on("message",handleMessage),()=>{e.connected&&e.unsubscribe("subrack/error/data"),e.off("connect",handleConnect),e.off("message",handleMessage)}},[]),e}var i=s(2031),l=s(5119),c=s(6714),d=s(6165),u=s(261),m=s(1392),f=s(908),x=s(7674),h=s(3431),g=s(9409),p=s(4056),b=s(1295),j=s(7410),N=s(6142),v=s(2765),w=s(5883),y=s(3611),T=s(1396),k=s.n(T),C=s(4033),Z=s(6823),M=s(7713);let E="/images/avatar-user.png",P=[{title:"Main",items:[{title:"Dashboard Overview",url:"/",icon:l.Z}]},{title:"Device Management",items:[{title:"Modbus Devices",url:"/devices/modbus",icon:c.Z},{title:"Battery Threshold",url:"/devices/threshold",icon:d.Z}]},{title:"Network Settings",items:[{title:"WiFi Scanner",url:"/network/wifi",icon:u.Z},{title:"IP Configuration",url:"/network/ip-address",icon:m.Z},{title:"Comm Out Modbus TCP",url:"/network/protocol/modbus",icon:f.Z},{title:"Comm Out SNMP",url:"/network/protocol/snmp",icon:f.Z}]},{title:"System Settings",items:[{title:"Error Logs",url:"/settings/error-log",icon:x.Z},{title:"Library Manager",url:"/settings/library",icon:h.Z},{title:"General Settings",url:"/settings/setting",icon:g.Z}]},{title:"FAQ & About",items:[{title:"Information",url:"/info",icon:p.Z}]}];function AppSidebar(){let e=(0,C.usePathname)(),t=useTotalErrorCount(),s=(0,C.useRouter)(),handleLogout=()=>{(0,M.deleteCookie)("authToken",{path:"/"}),s.replace("/auth/login")};return(0,r.jsxs)(o.DD,{children:[(0,r.jsx)(o.$l,{className:"border-b border-sidebar-border px-6 py-4 bg-background",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"flex h-8 w-8 items-center border-gray-400 justify-center rounded-lg bg-primary text-primary-foreground",children:(0,r.jsx)("img",{src:"/images/gspe.jpg",alt:"GSPE Logo",className:"h-full w-full object-cover rounded-lg"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-lg font-semibold text-sidebar-foreground",children:"GSPE"}),(0,r.jsx)("p",{className:"text-xs text-sidebar-foreground/70",children:"BCS Dashboard"})]})]})}),(0,r.jsxs)(o.TZ,{className:"bg-background",children:[P.map(s=>(0,r.jsxs)(o.Hz,{children:[(0,r.jsx)(o.nO,{className:"text-sidebar-foreground/80",children:s.title}),(0,r.jsx)(o.Ks,{children:(0,r.jsx)(o.w3,{children:s.items.map(s=>(0,r.jsx)(o.LO,{className:"relative",children:(0,r.jsx)(o.bb,{asChild:!0,isActive:e===s.url,className:"group flex items-center gap-2 px-3 py-2 rounded-md w-full transition-colors text-sidebar-foreground hover:bg-sidebar-accent hover:text-sidebar-accent-foreground data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground",children:(0,r.jsxs)(k(),{href:s.url,children:[(0,r.jsx)(s.icon,{className:"h-4 w-4 text-sidebar-foreground/50 group-hover:text-sidebar-accent-foreground"}),(0,r.jsx)("span",{children:s.title}),"Error Logs"===s.title&&t>0&&(0,r.jsx)(o.uP,{className:"ml-auto bg-destructive text-white",children:t})]})})},s.title))})})]},s.title)),(0,r.jsxs)(o.ZW,{className:"p-4 bg-background border-t border-sidebar-border",children:[(0,r.jsxs)(i.Vq,{children:[(0,r.jsx)(i.hg,{asChild:!0,children:(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-4 px-1 cursor-pointer hover:bg-muted rounded-md p-1 transition hover:shadow-sm",children:[(0,r.jsx)("div",{className:"h-10 w-10 rounded-full overflow-hidden border-2 border-sidebar-border",children:(0,r.jsx)("img",{src:E,alt:"User Avatar",className:"object-cover h-full w-full"})}),(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsx)("span",{className:"font-semibold text-sm text-sidebar-foreground",children:"Admin"}),(0,r.jsx)("span",{className:"text-xs text-sidebar-foreground/70",children:"Administrator"})]})]})}),(0,r.jsxs)(i.cZ,{className:"max-w-md animate-in fade-in zoom-in-75 bg-gradient-to-br from-white to-muted p-6 rounded-xl shadow-xl border",children:[(0,r.jsxs)(i.fK,{children:[(0,r.jsx)(i.$N,{className:"text-center text-lg font-bold text-foreground",children:"User Profile"}),(0,r.jsx)(i.Be,{className:"text-center text-muted-foreground",children:"Your account information"})]}),(0,r.jsxs)("div",{className:"flex flex-col items-center mt-2",children:[(0,r.jsx)("div",{className:"w-24 h-24 rounded-full overflow-hidden border-4 border-primary shadow-md mb-2",children:(0,r.jsx)("img",{src:E,alt:"User Avatar",className:"object-cover w-full h-full"})}),(0,r.jsx)("h3",{className:"text-lg font-semibold",children:"Admin"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground mb-4 italic",children:"IoT & Electrical Engineer"})]}),(0,r.jsx)(Z.Z,{}),(0,r.jsxs)("div",{className:"mt-4 space-y-3 text-sm text-muted-foreground",children:[(0,r.jsxs)("p",{className:"flex items-center gap-2",children:[(0,r.jsx)(b.Z,{className:"w-4 h-4 text-primary"}),(0,r.jsxs)("span",{children:[(0,r.jsx)("span",{className:"font-medium text-foreground",children:"Email:"})," ","alfi@example.com"]})]}),(0,r.jsxs)("p",{className:"flex items-center gap-2",children:[(0,r.jsx)(j.Z,{className:"w-4 h-4 text-primary"}),(0,r.jsxs)("span",{children:[(0,r.jsx)("span",{className:"font-medium text-foreground",children:"Role:"})," ","Administrator"]})]}),(0,r.jsxs)("p",{className:"flex items-center gap-2",children:[(0,r.jsx)(N.Z,{className:"w-4 h-4 text-primary"}),(0,r.jsxs)("span",{children:[(0,r.jsx)("span",{className:"font-medium text-foreground",children:"Location:"})," ","West Jakarta, Indonesia"]})]}),(0,r.jsxs)("p",{className:"flex items-center gap-2",children:[(0,r.jsx)(v.Z,{className:"w-4 h-4 text-primary"}),(0,r.jsxs)("span",{children:[(0,r.jsx)("span",{className:"font-medium text-foreground",children:"Company:"})," ","PT Graha Sumber Prima Elektronik"]})]})]}),(0,r.jsx)(Z.Z,{className:"mt-4"}),(0,r.jsx)("div",{className:"flex justify-end gap-2 mt-4",children:(0,r.jsx)(y.z,{variant:"destructive",className:"hover:scale-105 transition",onClick:handleLogout,children:"Logout"})})]})]}),(0,r.jsx)(Z.Z,{className:"my-2 bg-sidebar-border h-px"}),(0,r.jsx)(o.w3,{children:(0,r.jsx)(o.LO,{children:(0,r.jsx)(o.bb,{className:"flex items-center gap-2 text-destructive bg-destructive/5 hover:bg-destructive/20 hover:text-destructive-foreground focus-visible:ring-2 focus-visible:ring-destructive focus-visible:ring-offset-2 transition-colors px-3 py-3 rounded-md w-full border border-transparent hover:border-destructive/40",asChild:!0,children:(0,r.jsxs)("span",{onClick:handleLogout,className:"flex items-center gap-2",children:[(0,r.jsx)(w.Z,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"text-sm font-medium",children:"Logout"})]})})})})]})]}),(0,r.jsx)(o.wJ,{}),(0,r.jsx)("br",{})]})}function ClientLayout(e){let{children:t}=e,s=(0,C.usePathname)(),n=s.startsWith("/auth/login")||s.startsWith("/auth/register");return(0,r.jsxs)(o.Hn,{children:[!n&&(0,r.jsx)(AppSidebar,{}),(0,r.jsx)("main",{className:"flex-1 overflow-auto",children:t})]})}},2031:function(e,t,s){"use strict";s.d(t,{$N:function(){return f},Be:function(){return x},Vq:function(){return l},cN:function(){return DialogFooter},cZ:function(){return m},fK:function(){return DialogHeader},hg:function(){return c}});var r=s(7437),n=s(2265),o=s(8712),a=s(2549),i=s(1628);let l=o.fC,c=o.xz,d=o.h_;o.x8;let u=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,r.jsx)(o.aV,{ref:t,className:(0,i.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...n})});u.displayName=o.aV.displayName;let m=n.forwardRef((e,t)=>{let{className:s,children:n,...l}=e;return(0,r.jsxs)(d,{children:[(0,r.jsx)(u,{}),(0,r.jsxs)(o.VY,{ref:t,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...l,children:[n,(0,r.jsxs)(o.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,r.jsx)(a.Z,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});m.displayName=o.VY.displayName;let DialogHeader=e=>{let{className:t,...s}=e;return(0,r.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...s})};DialogHeader.displayName="DialogHeader";let DialogFooter=e=>{let{className:t,...s}=e;return(0,r.jsx)("div",{className:(0,i.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...s})};DialogFooter.displayName="DialogFooter";let f=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,r.jsx)(o.Dx,{ref:t,className:(0,i.cn)("text-lg font-semibold leading-none tracking-tight",s),...n})});f.displayName=o.Dx.displayName;let x=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,r.jsx)(o.dk,{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",s),...n})});x.displayName=o.dk.displayName},5344:function(e,t,s){"use strict";s.d(t,{kS:function(){return connectMQTT},Oh:function(){return getMQTTClient}});var r=s(7406);function getAppConfig(){let e,t;let s=window.location.protocol;if("https:"===s?(e="ws://192.168.0.106:9000",t="http://192.168.0.100:8000"):(e="ws://".concat(window.location.hostname,":9000"),t="http://".concat(window.location.hostname,":8000")),!e)throw Error("MQTT broker URL is not defined.");if(!t)throw Error("API base URL is not defined.");return{mqttBrokerUrl:e,apiBaseUrl:t}}let n=null,o=!1;function connectMQTT(){let{mqttBrokerUrl:e}=getAppConfig();if(!e)throw Error("MQTT broker URL is missing from configuration.");if(n&&(n.connected||o))return n;if(!n||n.disconnected){if(o)return n;o=!0,console.log("MQTT: Attempting connection to ".concat(e,"...")),(n=r.Z.connect(e,{clean:!0,connectTimeout:3e3,reconnectPeriod:1e3})).on("connect",()=>{console.log("MQTT: Connected to ".concat(e)),o=!1}),n.on("error",e=>{console.error("MQTT Error: ".concat(e.message)),o=!1}),n.on("reconnect",()=>{console.log("MQTT: Reconnecting to ".concat(e)),o=!0}),n.on("close",()=>{console.log("MQTT: Connection to ".concat(e," closed.")),o=!1}),n.on("offline",()=>{console.log("MQTT: Client is offline."),o=!1})}return n}function getMQTTClient(){return n}},2853:function(){}},function(e){e.O(0,[2793,9848,5348,1396,1318,307,2971,2472,1744],function(){return e(e.s=6321)}),_N_E=e.O()}]);